var nt=Object.defineProperty;var at=(l,t,s)=>t in l?nt(l,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):l[t]=s;var g=(l,t,s)=>(at(l,typeof t!="symbol"?t+"":t,s),s);import{V as w}from"./PhysicObject.ed090d10.js";import{s as P,r as D,f as $,g as j,h as A,d as v,j as m,i as W,R as X,v as G,w as N,x as q,A as L,K as ct,o as Y,b as rt,L as ut,P as J,F as Z,t as dt,p as ft}from"./scheduler.423396dc.js";import{S as B,i as F,a as S,t as I,g as pt,c as yt}from"./index.bee153d6.js";import{w as k}from"./index.43a0ecd4.js";const bt=(l,t)=>{if(t.geometry.type!=="sphere"||l.geometry.type!=="line")throw new Error("invalid geometry");const s=mt(l,t);if(!s)return;const o=l.restitution*t.restitution,e=l.friction*t.friction,i=l.position.x,n=l.position.y,c=l.position.x+l.geometry.vector.x,a=l.position.y+l.geometry.vector.y,u=t.position.x,d=t.position.y,f=t.position.x+t.velocity.x,y=t.position.y+t.velocity.y;let b=(a-n)/(c-i),_=(y-d)/(f-u);if(b=[1/0,-1/0].includes(b)?360:b,_=[1/0,-1/0].includes(_)?360:_,(b-_)/(1+b*_)===0){const it=o,ot=e;return{bouncedVelocity:t.velocity.multiplyScalar(1-ot).multiplyScalar(-it),intersection:s}}const T=c-i,r=a-n,p=new w(-r,T),C=new w(r,-T),O=s.clone().add(p),tt=s.clone().add(C);let U;t.position.distanceSq(O)<t.position.distanceSq(tt)?U=p:U=C;const M=U.clone().normalize(),R=t.velocity.clone(),H=M.multiplyScalar(R.dot(M)),et=R.subtract(H),st=o,lt=e;return{bouncedVelocity:et.multiplyScalar(1-lt).subtract(H.multiplyScalar(st)),intersection:s}},mt=(l,t)=>{if(t.geometry.type!=="sphere"||l.geometry.type!=="line")throw new Error("invalid geometry");const s=l.position.clone(),o=l.position.clone().add(l.geometry.vector),e=t.position.clone(),i=t.geometry.r,n=o.clone().subtract(s),c=s.clone().subtract(e),a=n.dot(n),u=c.dot(n)*2,d=c.dot(c)-i*i;let f=u*u-4*a*d;if(f<0)return;f=Math.sqrt(f);const y=(-u-f)/(2*a),b=(-u+f)/(2*a),_=y>=0&&y<=1,h=b>=0&&b<=1;if(_&&h)return s.add(n.multiplyScalar(y+(b-y)*.5));if(_)return s.add(n.multiplyScalar(1));if(h)return s.add(n.multiplyScalar(0))};class At{constructor(t){g(this,"gravityEnabled");g(this,"dimensions");g(this,"t");g(this,"objects");g(this,"gravity",new w(0,-9.8));g(this,"antiGravity",new w(0,9.8));g(this,"drag",.001);g(this,"dt",.005);g(this,"reporter");this.gravityEnabled=t.enableGravity??!0,this.dimensions=t.dimensions||new w(100,100),this.objects=[],this.t=0,this.reporter=t.reporter||console.log}toggleGravity(){this.gravityEnabled=!this.gravityEnabled}addObject(t){this.objects.push(t)}applyGravity(t){t.acceleration.push(this.gravity)}applyForce(t,s){t.acceleration.push(s)}applyDynamics(t,s){if(s.fixed)return;this.gravityEnabled&&this.applyGravity(s);const o=new w(0,0);for(;s.acceleration.length;){const i=s.acceleration.pop();i&&o.add(i)}o.divideScalar(s.m);const e=1-this.drag;s.velocity.add(o.multiplyScalar(t)).multiplyScalar(e),s.position.add(s.velocity.clone().multiplyScalar(t))}applyCollisions(t){const s=this.objects.filter(e=>e.geometry.type==="sphere"),o=this.objects.filter(e=>e.geometry.type==="line");for(const e of s){e.data.isColliding=!1;const i=new w(0,0);let n=0;for(const c of o){c.data.isColliding=!1;const a=bt(c,e);if(!a)continue;const{bouncedVelocity:u,intersection:d}=a;c.data.isColliding=!0,c.collisionListener(),n++,i.add(u);const f=e.position.clone().subtract(d),y=f.length();if(y<=e.geometry.r){const _=e.geometry.r-y;f.normalize().multiplyScalar(_),e.position.add(f)}}n>0&&(i.divideScalar(n),e.velocity.copy(i),e.position.add(e.velocity.clone().multiplyScalar(t)),e.data.isColliding=!0,e.collisionListener(),e.acceleration.push(this.antiGravity))}}_step(t){this.applyCollisions(t);for(const s of this.objects)this.applyDynamics(t,s)}stepFixedDt(){const s=Date.now()/1e3;V=s-E,E=s,this._step(.01),this.t+=.01,this.reporter&&this.reporter({...this,frameTime:V})}stepAccumulator(){const t=this.dt,s=Date.now()/1e3;E===0&&(E=s),V=s-E,E=s,z+=V;let o=0;for(;z>=t&&o<5;)o++,this._step(t),z-=t,this.t+=t,this.reporter&&this.reporter({...this,frameTime:V})}step(){this.stepAccumulator()}}let E=0,V=0,z=0,_t=1;function x(){return`svelte-tabs-${_t++}`}function ht(l){let t,s,o,e;const i=l[4].default,n=D(i,l,l[3],null);return{c(){t=$("div"),n&&n.c(),this.h()},l(c){t=j(c,"DIV",{class:!0});var a=A(t);n&&n.l(a),a.forEach(v),this.h()},h(){m(t,"class","svelte-tabs")},m(c,a){W(c,t,a),n&&n.m(t,null),s=!0,o||(e=X(t,"keydown",l[1]),o=!0)},p(c,[a]){n&&n.p&&(!s||a&8)&&G(n,i,c,c[3],s?q(i,c[3],a,null):N(c[3]),null)},i(c){s||(S(n,c),s=!0)},o(c){I(n,c),s=!1},d(c){c&&v(t),n&&n.d(c),o=!1,e()}}}const K={};function gt(l,t,s){const o=l.indexOf(t);l.splice(o,1),s.update(e=>e===t?l[o]||l[l.length-1]:e)}function vt(l,t,s){let o,{$$slots:e={},$$scope:i}=t,{initialSelectedIndex:n=0}=t;const c=[],a=[],u=[],d=k({}),f=k({}),y=k(null);L(l,y,r=>s(5,o=r));const b=k(null);function _(r,p,C){r.push(p),C.update(O=>O||p),ut(()=>gt(r,p,C))}function h(r){const p=a.indexOf(r);y.set(r),b.set(u[p])}ct(K,{registerTab(r){_(a,r,y)},registerTabElement(r){c.push(r)},registerPanel(r){_(u,r,b)},selectTab:h,selectedTab:y,selectedPanel:b,controls:d,labeledBy:f}),Y(()=>{h(a[n])}),rt(()=>{for(let r=0;r<a.length;r++)d.update(p=>({...p,[a[r].id]:u[r].id})),f.update(p=>({...p,[u[r].id]:a[r].id}))});async function T(r){if(r.target.classList.contains("svelte-tabs__tab")){let p=a.indexOf(o);switch(r.key){case"ArrowRight":p+=1,p>a.length-1&&(p=0),h(a[p]),c[p].focus();break;case"ArrowLeft":p-=1,p<0&&(p=a.length-1),h(a[p]),c[p].focus()}}}return l.$$set=r=>{"initialSelectedIndex"in r&&s(2,n=r.initialSelectedIndex),"$$scope"in r&&s(3,i=r.$$scope)},[y,T,n,i,e]}class Wt extends B{constructor(t){super(),F(this,t,vt,ht,P,{initialSelectedIndex:2})}}function wt(l){let t,s,o,e,i,n;const c=l[9].default,a=D(c,l,l[8],null);return{c(){t=$("li"),a&&a.c(),this.h()},l(u){t=j(u,"LI",{role:!0,id:!0,"aria-controls":!0,"aria-selected":!0,tabindex:!0,class:!0});var d=A(t);a&&a.l(d),d.forEach(v),this.h()},h(){m(t,"role","tab"),m(t,"id",l[3].id),m(t,"aria-controls",s=l[2][l[3].id]),m(t,"aria-selected",l[1]),m(t,"tabindex",o=l[1]?0:-1),m(t,"class","svelte-tabs__tab svelte-1fbofsd"),J(t,"svelte-tabs__selected",l[1])},m(u,d){W(u,t,d),a&&a.m(t,null),l[10](t),e=!0,i||(n=X(t,"click",l[11]),i=!0)},p(u,[d]){a&&a.p&&(!e||d&256)&&G(a,c,u,u[8],e?q(c,u[8],d,null):N(u[8]),null),(!e||d&4&&s!==(s=u[2][u[3].id]))&&m(t,"aria-controls",s),(!e||d&2)&&m(t,"aria-selected",u[1]),(!e||d&2&&o!==(o=u[1]?0:-1))&&m(t,"tabindex",o),(!e||d&2)&&J(t,"svelte-tabs__selected",u[1])},i(u){e||(S(a,u),e=!0)},o(u){I(a,u),e=!1},d(u){u&&v(t),a&&a.d(u),l[10](null),i=!1,n()}}}function St(l,t,s){let o,e,{$$slots:i={},$$scope:n}=t,c;const a={id:x()},{registerTab:u,registerTabElement:d,selectTab:f,selectedTab:y,controls:b}=Z(K);L(l,y,r=>s(7,o=r)),L(l,b,r=>s(2,e=r));let _;u(a),Y(async()=>{await dt(),d(c)});function h(r){ft[r?"unshift":"push"](()=>{c=r,s(0,c)})}const T=()=>f(a);return l.$$set=r=>{"$$scope"in r&&s(8,n=r.$$scope)},l.$$.update=()=>{l.$$.dirty&128&&s(1,_=o===a)},[c,_,e,a,f,y,b,o,n,i,h,T]}class Gt extends B{constructor(t){super(),F(this,t,St,wt,P,{})}}function Tt(l){let t,s;const o=l[1].default,e=D(o,l,l[0],null);return{c(){t=$("ul"),e&&e.c(),this.h()},l(i){t=j(i,"UL",{role:!0,class:!0});var n=A(t);e&&e.l(n),n.forEach(v),this.h()},h(){m(t,"role","tablist"),m(t,"class","svelte-tabs__tab-list svelte-12yby2a")},m(i,n){W(i,t,n),e&&e.m(t,null),s=!0},p(i,[n]){e&&e.p&&(!s||n&1)&&G(e,o,i,i[0],s?q(o,i[0],n,null):N(i[0]),null)},i(i){s||(S(e,i),s=!0)},o(i){I(e,i),s=!1},d(i){i&&v(t),e&&e.d(i)}}}function Et(l,t,s){let{$$slots:o={},$$scope:e}=t;return l.$$set=i=>{"$$scope"in i&&s(0,e=i.$$scope)},[e,o]}class Nt extends B{constructor(t){super(),F(this,t,Et,Tt,P,{})}}function Q(l){let t;const s=l[6].default,o=D(s,l,l[5],null);return{c(){o&&o.c()},l(e){o&&o.l(e)},m(e,i){o&&o.m(e,i),t=!0},p(e,i){o&&o.p&&(!t||i&32)&&G(o,s,e,e[5],t?q(s,e[5],i,null):N(e[5]),null)},i(e){t||(S(o,e),t=!0)},o(e){I(o,e),t=!1},d(e){o&&o.d(e)}}}function It(l){let t,s,o,e=l[1]===l[2]&&Q(l);return{c(){t=$("div"),e&&e.c(),this.h()},l(i){t=j(i,"DIV",{id:!0,"aria-labelledby":!0,class:!0,role:!0});var n=A(t);e&&e.l(n),n.forEach(v),this.h()},h(){m(t,"id",l[2].id),m(t,"aria-labelledby",s=l[0][l[2].id]),m(t,"class","svelte-tabs__tab-panel svelte-epfyet"),m(t,"role","tabpanel")},m(i,n){W(i,t,n),e&&e.m(t,null),o=!0},p(i,[n]){i[1]===i[2]?e?(e.p(i,n),n&2&&S(e,1)):(e=Q(i),e.c(),S(e,1),e.m(t,null)):e&&(pt(),I(e,1,1,()=>{e=null}),yt()),(!o||n&1&&s!==(s=i[0][i[2].id]))&&m(t,"aria-labelledby",s)},i(i){o||(S(e),o=!0)},o(i){I(e),o=!1},d(i){i&&v(t),e&&e.d()}}}function Ct(l,t,s){let o,e,{$$slots:i={},$$scope:n}=t;const c={id:x()},{registerPanel:a,selectedPanel:u,labeledBy:d}=Z(K);return L(l,u,f=>s(1,e=f)),L(l,d,f=>s(0,o=f)),a(c),l.$$set=f=>{"$$scope"in f&&s(5,n=f.$$scope)},[o,e,c,u,d,n,i]}class qt extends B{constructor(t){super(),F(this,t,Ct,It,P,{})}}export{Wt as T,At as W,Nt as a,qt as b,Gt as c};
