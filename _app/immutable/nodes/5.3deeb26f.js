import{s as A,f as P,a as E,g as L,h as H,d as y,c as C,u as Q,j as Z,i as v,y as ee,L as te,z as D,M as ne,e as R,E as G,q as N,l as oe,m as se}from"../chunks/scheduler.e421d989.js";import{S as U,i as J,b as k,d as S,m as M,a as h,t as g,e as j,g as B,c as I}from"../chunks/index.52486247.js";import{e as T}from"../chunks/each.e59479a4.js";import{V as p,P as re,e as ce,a as V,T as ie,b as ae,c as le,d as fe}from"../chunks/p5utils.1e02467a.js";import{c as _,W as ue}from"../chunks/PhysicObject.57929aea.js";const me=(f,e)=>{const s=[],t=f.x,o=f.y,l=3,n=5,i=.3,r=4,c=.5,a=.1,u=3,m=Math.random()*(t-n),$=o-u-Math.random()*(o-r-u),b=Math.random()*n+l,d=Math.random()*r+i,w=Math.random()*c+a;$e({x:m,y:$,w:b,h:d,topRatio:w},e).forEach(W=>s.push(W)),he(f).forEach(W=>s.push(W));const O=Math.floor(1+Math.random()*2),K=O*.1,x=pe(new p(Math.random()*t,Math.random()*o),{m:O,r:K});for(;x.position.x>m&&x.position.x<m+b&&x.position.y<$&&x.position.y>$+d;)x.position.x=Math.random()*t,x.position.y=Math.random()*o;return s.push(x),{objects:s,sphere:x}},pe=(f,e)=>_({geometry:{type:"sphere",r:(e==null?void 0:e.r)||.1},mass:e==null?void 0:e.m,position:f,velocity:new p(0,0)}),he=f=>{const e=f.x,s=f.y,t=[],o=_({geometry:{type:"line",vector:new p(e,0)},position:new p(0,0),fixed:!0});t.push(o);const l=_({geometry:{type:"line",vector:new p(0,s*10)},position:new p(0,0),fixed:!0});t.push(l);const n=_({geometry:{type:"line",vector:new p(0,s*10)},position:new p(15,0),fixed:!0});return t.push(n),t},$e=(f,e)=>{const{x:s,y:t,h:o,w:l,topRatio:n}=f;if(n<0||n>1)throw new Error("topRatio must be between 0 and 1");const i=l*n/2,r=l*(1-n),c=.1,a=[],u=_({geometry:{type:"line",vector:new p(i,0)},position:new p(s,t+c),fixed:!0});a.push(u);const m=_({geometry:{type:"line",vector:new p(0,-o)},position:new p(s+i,t),fixed:!0});a.push(m);const $=_({geometry:{type:"line",vector:new p(r,0)},position:new p(s+i,t-o-c),fixed:!0});a.push($);const b=_({geometry:{type:"line",vector:new p(r-2*c,0)},position:new p(s+i+c,t-o+c),fixed:!0,friction:1,restitution:0,collisionListener:e});a.push(b);const d=_({geometry:{type:"line",vector:new p(0,o)},position:new p(s+i+r,t-o),fixed:!0});a.push(d);const w=_({geometry:{type:"line",vector:new p(i,0)},position:new p(s+i+r,t+c),fixed:!0});return a.push(w),a};function de(f){let e,s,t,o,l,n="Reset",i,r,c;return s=new re({props:{sketch:f[1]}}),{c(){e=P("div"),k(s.$$.fragment),t=E(),o=P("div"),l=P("button"),l.textContent=n,this.h()},l(a){e=L(a,"DIV",{class:!0});var u=H(e);S(s.$$.fragment,u),u.forEach(y),t=C(a),o=L(a,"DIV",{});var m=H(o);l=L(m,"BUTTON",{"data-svelte-h":!0}),Q(l)!=="svelte-tlxueg"&&(l.textContent=n),m.forEach(y),this.h()},h(){Z(e,"class","d-flex justify-content-center")},m(a,u){v(a,e,u),M(s,e,null),v(a,t,u),v(a,o,u),ee(o,l),i=!0,r||(c=te(l,"click",f[0]),r=!0)},p:D,i(a){i||(h(s.$$.fragment,a),i=!0)},o(a){g(s.$$.fragment,a),i=!1},d(a){a&&(y(e),y(t),y(o)),j(s),r=!1,c()}}}const F=60;function ge(f){console.clear();let e,s,t;const o=()=>{setTimeout(l,1e3)},l=()=>{e=new ue({dimensions:new p(15,15),reporter:()=>{},enableGravity:!0});const c=me(e.dimensions,o);c.sphere.fixed=!0,s=c.sphere,t=s.position.clone();for(const a of c.objects)e.addObject(a)},n=c=>typeof c=="number"?c*F:c.clone().multiplyScalar(F);let i;const r=c=>{c.setup=()=>{i=c,l();const m=n(e.dimensions);c.createCanvas(m.x,m.y),c.background(0),c.fill(255),c.stroke(255),l()},c.draw=()=>{c.background(0),e.step(),ce(c,e),u(c)};let a;c.mousePressed=()=>{V(c)&&(a=new p(c.width,c.height).divideScalar(2),s.position.copy(t),s.velocity.zero(),s.fixed=!0)},c.mouseReleased=()=>{if(!V(c)||!a)return;const m=a,b=new p(c.mouseX,c.mouseY).clone().subtract(m).multiplyScalar(20);b.x*=-1,e.applyForce(s,b),s.fixed=!1,a=void 0};const u=m=>{if(!s.fixed||!a)return;m.stroke("red"),m.strokeWeight(1),m.noFill(),m.circle(a.x,a.y,15),m.stroke("blue"),m.strokeWeight(2);const $=a,d=new p(m.mouseX,m.mouseY).clone().subtract($);m.line($.x,$.y,$.x+d.x,$.y+d.y);const w=n(s.position);d.x*=-1,d.y*=-1,m.line(w.x,m.height-w.y,w.x+d.x,m.height-w.y+d.y)}};return ne(()=>{i==null||i.remove()}),[l,r]}class _e extends U{constructor(e){super(),J(this,e,ge,de,A,{})}}function Y(f,e,s){const t=f.slice();return t[1]=e[s],t}function q(f,e,s){const t=f.slice();return t[1]=e[s],t}function ye(f){let e=f[1].title+"",s;return{c(){s=oe(e)},l(t){s=se(t,e)},m(t,o){v(t,s,o)},p:D,d(t){t&&y(s)}}}function z(f){let e,s;return e=new fe({props:{$$slots:{default:[ye]},$$scope:{ctx:f}}}),{c(){k(e.$$.fragment)},l(t){S(e.$$.fragment,t)},m(t,o){M(e,t,o),s=!0},p(t,o){const l={};o&64&&(l.$$scope={dirty:o,ctx:t}),e.$set(l)},i(t){s||(h(e.$$.fragment,t),s=!0)},o(t){g(e.$$.fragment,t),s=!1},d(t){j(e,t)}}}function be(f){let e,s,t=T(f[0]),o=[];for(let n=0;n<t.length;n+=1)o[n]=z(q(f,t,n));const l=n=>g(o[n],1,1,()=>{o[n]=null});return{c(){for(let n=0;n<o.length;n+=1)o[n].c();e=R()},l(n){for(let i=0;i<o.length;i+=1)o[i].l(n);e=R()},m(n,i){for(let r=0;r<o.length;r+=1)o[r]&&o[r].m(n,i);v(n,e,i),s=!0},p(n,i){if(i&1){t=T(n[0]);let r;for(r=0;r<t.length;r+=1){const c=q(n,t,r);o[r]?(o[r].p(c,i),h(o[r],1)):(o[r]=z(c),o[r].c(),h(o[r],1),o[r].m(e.parentNode,e))}for(B(),r=t.length;r<o.length;r+=1)l(r);I()}},i(n){if(!s){for(let i=0;i<t.length;i+=1)h(o[i]);s=!0}},o(n){o=o.filter(Boolean);for(let i=0;i<o.length;i+=1)g(o[i]);s=!1},d(n){n&&y(e),G(o,n)}}}function we(f){let e,s,t;var o=f[1].component;function l(n,i){return{}}return o&&(e=N(o,l())),{c(){e&&k(e.$$.fragment),s=E()},l(n){e&&S(e.$$.fragment,n),s=C(n)},m(n,i){e&&M(e,n,i),v(n,s,i),t=!0},p(n,i){if(o!==(o=n[1].component)){if(e){B();const r=e;g(r.$$.fragment,1,0,()=>{j(r,1)}),I()}o?(e=N(o,l()),k(e.$$.fragment),h(e.$$.fragment,1),M(e,s.parentNode,s)):e=null}},i(n){t||(e&&h(e.$$.fragment,n),t=!0)},o(n){e&&g(e.$$.fragment,n),t=!1},d(n){n&&y(s),e&&j(e,n)}}}function X(f){let e,s;return e=new le({props:{$$slots:{default:[we]},$$scope:{ctx:f}}}),{c(){k(e.$$.fragment)},l(t){S(e.$$.fragment,t)},m(t,o){M(e,t,o),s=!0},p(t,o){const l={};o&64&&(l.$$scope={dirty:o,ctx:t}),e.$set(l)},i(t){s||(h(e.$$.fragment,t),s=!0)},o(t){g(e.$$.fragment,t),s=!1},d(t){j(e,t)}}}function xe(f){let e,s,t,o;e=new ae({props:{$$slots:{default:[be]},$$scope:{ctx:f}}});let l=T(f[0]),n=[];for(let r=0;r<l.length;r+=1)n[r]=X(Y(f,l,r));const i=r=>g(n[r],1,1,()=>{n[r]=null});return{c(){k(e.$$.fragment),s=E();for(let r=0;r<n.length;r+=1)n[r].c();t=R()},l(r){S(e.$$.fragment,r),s=C(r);for(let c=0;c<n.length;c+=1)n[c].l(r);t=R()},m(r,c){M(e,r,c),v(r,s,c);for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(r,c);v(r,t,c),o=!0},p(r,c){const a={};if(c&64&&(a.$$scope={dirty:c,ctx:r}),e.$set(a),c&1){l=T(r[0]);let u;for(u=0;u<l.length;u+=1){const m=Y(r,l,u);n[u]?(n[u].p(m,c),h(n[u],1)):(n[u]=X(m),n[u].c(),h(n[u],1),n[u].m(t.parentNode,t))}for(B(),u=l.length;u<n.length;u+=1)i(u);I()}},i(r){if(!o){h(e.$$.fragment,r);for(let c=0;c<l.length;c+=1)h(n[c]);o=!0}},o(r){g(e.$$.fragment,r),n=n.filter(Boolean);for(let c=0;c<n.length;c+=1)g(n[c]);o=!1},d(r){r&&(y(s),y(t)),j(e,r),G(n,r)}}}function ve(f){let e,s;return e=new ie({props:{$$slots:{default:[xe]},$$scope:{ctx:f}}}),{c(){k(e.$$.fragment)},l(t){S(e.$$.fragment,t)},m(t,o){M(e,t,o),s=!0},p(t,[o]){const l={};o&64&&(l.$$scope={dirty:o,ctx:t}),e.$set(l)},i(t){s||(h(e.$$.fragment,t),s=!0)},o(t){g(e.$$.fragment,t),s=!1},d(t){j(e,t)}}}function ke(f){return[[{title:"Bucket",component:_e}]]}class We extends U{constructor(e){super(),J(this,e,ke,ve,A,{})}}export{We as component};
