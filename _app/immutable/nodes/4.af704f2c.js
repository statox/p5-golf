var wt=Object.defineProperty;var _t=(a,e,t)=>e in a?wt(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t;var J=(a,e,t)=>(_t(a,typeof e!="symbol"?e+"":e,t),t);import{s as le,f as _,a as O,l as R,g as $,h as C,d as v,c as P,m as X,u as A,j as B,i as j,y as b,L as te,n as K,M as Se,z as je,e as ge,P as Ve,Q as Le,O as gt,E as vt,q as ft}from"../chunks/scheduler.e421d989.js";import{S as ce,i as ae,b as M,d as z,m as U,a as N,t as I,e as H,g as Ke,c as Ze}from"../chunks/index.52486247.js";import{e as Re}from"../chunks/each.e59479a4.js";import{V as m,P as Oe,m as bt,a as Xe,T as $t,b as xt,c as Tt,d as kt}from"../chunks/p5utils.fe4d08ff.js";const Ct=(a,e)=>{if(e.geometry.type!=="sphere"||a.geometry.type!=="line")throw new Error("invalid geometry");const t=Et(a,e);if(!t)return;const o=.8,s=.2,r=a.position.x,n=a.position.y,f=a.position.x+a.geometry.vector.x,d=a.position.y+a.geometry.vector.y,i=f-r,l=d-n,c=new m(-l,i),y=new m(l,-i),u=t.clone().add(c),p=t.clone().add(y);let g;e.position.distanceSq(u)<e.position.distanceSq(p)?g=c:g=y;const h=g.clone().normalize(),w=e.velocity.clone(),x=h.multiplyScalar(w.dot(h)),T=w.subtract(x),S=o,D=s;return T.multiplyScalar(1-D).subtract(x.multiplyScalar(S))},Et=(a,e)=>{if(e.geometry.type!=="sphere"||a.geometry.type!=="line")throw new Error("invalid geometry");const t=a.position.clone(),o=a.position.clone().add(a.geometry.vector),s=e.position.clone(),r=e.geometry.r,n=o.clone().subtract(t),f=t.clone().subtract(s),d=n.dot(n),i=f.dot(n)*2,l=f.dot(f)-r*r;let c=i*i-4*d*l;if(c<0)return;c=Math.sqrt(c);const y=(-i-c)/(2*d),u=(-i+c)/(2*d);if(y>=0&&y<=1)return t.add(n.multiplyScalar(y));if(u>=0&&u<=1)return t.add(n.multiplyScalar(u))};class Pe{constructor(e){J(this,"gravityEnabled");J(this,"dimensions");J(this,"t");J(this,"objects");J(this,"gravity",new m(0,-9.8));J(this,"antiGravity",new m(0,9.8));J(this,"drag",.001);J(this,"dt",.005);J(this,"reporter");this.gravityEnabled=e.enableGravity??!0,this.dimensions=e.dimensions||new m(100,100),this.objects=[],this.t=0,this.reporter=e.reporter||console.log}toggleGravity(){this.gravityEnabled=!this.gravityEnabled}addObject(e){this.objects.push(e)}applyGravity(e){e.acceleration.push(this.gravity)}applyDynamics(e,t){this.gravityEnabled&&this.applyGravity(t);const o=new m(0,0);for(;t.acceleration.length;){const r=t.acceleration.pop();r&&o.add(r)}o.divideScalar(t.m);const s=1-this.drag;t.velocity.add(o.multiplyScalar(e)).multiplyScalar(s),t.position.add(t.velocity.clone().multiplyScalar(e))}applyCollisions(e){const t=this.objects.find(n=>n.geometry.type==="sphere"),o=this.objects.filter(n=>n.geometry.type==="line");if(!t)throw new Error("No sphere in world");t.data.isColliding=!1;const s=new m(0,0);let r=0;for(const n of o){n.data.isColliding=!1;const f=Ct(n,t);f&&(r++,s.add(f),n.data.isColliding=!0)}r>0&&(s.divideScalar(r),t.velocity.copy(s),t.position.add(t.velocity.clone().multiplyScalar(e)),t.data.isColliding=!0,t.acceleration.push(this.gravity.clone().multiplyScalar(-1)))}_step(e){this.applyCollisions(e);for(const t of this.objects)t.fixed||this.applyDynamics(e,t)}stepFixedDt(){const t=Date.now()/1e3;Ee=t-pe,pe=t,this._step(.01),this.t+=.01,this.reporter&&this.reporter({...this,frameTime:Ee})}stepAccumulator(){const e=this.dt,t=Date.now()/1e3;pe===0&&(pe=t),Ee=t-pe,pe=t,Je+=Ee;let o=0;for(;Je>=e&&o<5;)o++,this._step(e),Je-=e,this.t+=e,this.reporter&&this.reporter({...this,frameTime:Ee})}step(){this.stepAccumulator()}}let pe=0,Ee=0,Je=0;const E=a=>{var e,t;return{geometry:a.geometry,m:a.mass??1,position:((e=a.position)==null?void 0:e.clone())??new m(0,0),velocity:((t=a.velocity)==null?void 0:t.clone())??new m(0,0),acceleration:[],fixed:a.fixed??!1,data:{isColliding:!1}}};function jt(a){let e,t,o,s,r=a[0][a[0].length-1]+"",n,f,d,i="New ball",l,c,y;return t=new Oe({props:{sketch:a[2]}}),{c(){e=_("div"),M(t.$$.fragment),o=O(),s=_("p"),n=R(r),f=O(),d=_("button"),d.textContent=i,this.h()},l(u){e=$(u,"DIV",{class:!0});var p=C(e);z(t.$$.fragment,p),p.forEach(v),o=P(u),s=$(u,"P",{});var g=C(s);n=X(g,r),g.forEach(v),f=P(u),d=$(u,"BUTTON",{"data-svelte-h":!0}),A(d)!=="svelte-1jwbm46"&&(d.textContent=i),this.h()},h(){B(e,"class","d-flex justify-content-center")},m(u,p){j(u,e,p),U(t,e,null),j(u,o,p),j(u,s,p),b(s,n),j(u,f,p),j(u,d,p),l=!0,c||(y=te(d,"click",a[1]),c=!0)},p(u,[p]){(!l||p&1)&&r!==(r=u[0][u[0].length-1]+"")&&K(n,r)},i(u){l||(N(t.$$.fragment,u),l=!0)},o(u){I(t.$$.fragment,u),l=!1},d(u){u&&(v(e),v(o),v(s),v(f),v(d)),H(t),c=!1,y()}}}function St(a,e,t){console.clear();let o=[];const s=i=>{const l=i.objects[i.objects.length-1],c=l.position.clone().toFixed(2),y=l.velocity.clone().toFixed(2);o.push(`${i.t.toFixed(2)} - pos: ${c} - vel: ${y}`),o.length>50&&o.shift(),t(0,o)},r=new Pe({reporter:s,enableGravity:!0}),n=()=>{for(;r.objects.length;)r.objects.pop();const i=E({geometry:{type:"line",vector:new m(100,0)},position:new m(0,0),fixed:!0});r.addObject(i);for(let l=0;l<1;l++){const c=E({geometry:{type:"sphere",r:5},position:new m(20,50),velocity:new m(Math.random()*5-2.5,Math.random()*20)});r.addObject(c)}};let f;const d=i=>{i.setup=()=>{f=i,i.createCanvas(900,600),i.background(0),i.fill(255),i.stroke(255),n()},i.draw=()=>{i.background(0),r.step();for(const l of r.objects){const c=i.map(l.position.x,0,r.dimensions.x,0,i.width),y=i.map(l.position.y,0,r.dimensions.y,i.height,0);if(l.geometry.type==="sphere"&&(i.strokeWeight(l.geometry.r*2),i.point(c,y)),l.geometry.type==="line"){const u=c+i.map(l.geometry.vector.x,0,r.dimensions.x,0,i.width),p=y+i.map(l.geometry.vector.y,0,r.dimensions.y,0,i.height);i.strokeWeight(2),i.line(c,y,u,p)}}}};return Se(()=>{f==null||f.remove()}),[o,n,d]}class Ot extends ce{constructor(e){super(),ae(this,e,St,jt,le,{})}}function Pt(a){let e,t,o,s,r=a[0][a[0].length-1]+"",n,f,d,i="New ball",l,c,y;return t=new Oe({props:{sketch:a[2]}}),{c(){e=_("div"),M(t.$$.fragment),o=O(),s=_("p"),n=R(r),f=O(),d=_("button"),d.textContent=i,this.h()},l(u){e=$(u,"DIV",{class:!0});var p=C(e);z(t.$$.fragment,p),p.forEach(v),o=P(u),s=$(u,"P",{});var g=C(s);n=X(g,r),g.forEach(v),f=P(u),d=$(u,"BUTTON",{"data-svelte-h":!0}),A(d)!=="svelte-1jwbm46"&&(d.textContent=i),this.h()},h(){B(e,"class","d-flex justify-content-center")},m(u,p){j(u,e,p),U(t,e,null),j(u,o,p),j(u,s,p),b(s,n),j(u,f,p),j(u,d,p),l=!0,c||(y=te(d,"click",a[1]),c=!0)},p(u,[p]){(!l||p&1)&&r!==(r=u[0][u[0].length-1]+"")&&K(n,r)},i(u){l||(N(t.$$.fragment,u),l=!0)},o(u){I(t.$$.fragment,u),l=!1},d(u){u&&(v(e),v(o),v(s),v(f),v(d)),H(t),c=!1,y()}}}const Ie=6;function Dt(a,e,t){console.clear();let o=[];const s=c=>{const y=c.objects[c.objects.length-1],u=y.position.clone().toFixed(2),p=y.velocity.clone().toFixed(2);o.push(`${c.t.toFixed(2)} - pos: ${u} - vel: ${p}`),o.length>50&&o.shift(),t(0,o)},r=new Pe({reporter:s,enableGravity:!0});let n,f;const d=()=>{for(;r.objects.length;)r.objects.pop();f=E({geometry:{type:"line",vector:new m(40,40)},position:new m(30,30),fixed:!0}),r.addObject(f),n=E({geometry:{type:"sphere",r:10},position:new m(20,50),velocity:new m(2.5,2.5),fixed:!0}),r.addObject(n)};let i;const l=c=>{const y=g=>typeof g=="number"?g*Ie:g.clone().multiplyScalar(Ie),u=g=>typeof g=="number"?g/Ie:g.clone().divideScalar(Ie);c.setup=()=>{i=c;const g=y(r.dimensions);c.createCanvas(g.x,g.y),c.background(0),c.fill(255),c.stroke(255),d()};let p;c.draw=()=>{if(c.background(0),r.step(),c.mouseIsPressed){const g=u(new m(c.mouseX,c.height-c.mouseY));if(p||(g.distance(n.position)<2?p="sphere":g.distance(f.position)<2?p="wallstart":g.distance(f.geometry.vector.clone().add(f.position))<2&&(p="wallend")),p==="sphere"&&n.position.copy(g),p==="wallstart"&&f.position.copy(g),p==="wallend"){const h=g.clone().subtract(f.position);f.geometry.vector.copy(h)}}else p=void 0;for(const g of r.objects){c.stroke(n.data.isColliding?"red":"white");const h=c.map(g.position.x,0,r.dimensions.x,0,c.width),w=c.map(g.position.y,0,r.dimensions.y,c.height,0);if(g.geometry.type==="sphere"){const x=y(g.geometry.r*2);c.strokeWeight(x),c.point(h,w)}if(g.geometry.type==="line"){const x=h+c.map(g.geometry.vector.x,0,r.dimensions.x,0,c.width),T=w-c.map(g.geometry.vector.y,0,r.dimensions.y,0,c.height);c.strokeWeight(2),c.line(h,w,x,T)}}}};return Se(()=>{i==null||i.remove()}),[o,d,l]}class Wt extends ce{constructor(e){super(),ae(this,e,Dt,Pt,le,{})}}function Nt(a){let e,t,o;return t=new Oe({props:{sketch:a[0]}}),{c(){e=_("div"),M(t.$$.fragment),this.h()},l(s){e=$(s,"DIV",{class:!0});var r=C(e);z(t.$$.fragment,r),r.forEach(v),this.h()},h(){B(e,"class","d-flex justify-content-center")},m(s,r){j(s,e,r),U(t,e,null),o=!0},p:je,i(s){o||(N(t.$$.fragment,s),o=!0)},o(s){I(t.$$.fragment,s),o=!1},d(s){s&&v(e),H(t)}}}const Be=6;function Ft(a){console.clear();const e=new Pe({reporter:()=>{},enableGravity:!0});let t;const o=()=>{for(;e.objects.length;)e.objects.pop();const i=E({geometry:{type:"line",vector:new m(100,0)},position:new m(0,2),fixed:!0});e.addObject(i);const l=E({geometry:{type:"line",vector:new m(100,0)},position:new m(0,98),fixed:!0});e.addObject(l);const c=E({geometry:{type:"line",vector:new m(0,100)},position:new m(2,0),fixed:!0});e.addObject(c);const y=E({geometry:{type:"line",vector:new m(0,100)},position:new m(98,0),fixed:!0});e.addObject(y);const u=E({geometry:{type:"line",vector:new m(50,50)},position:new m(20,10),fixed:!0});e.addObject(u),t=E({geometry:{type:"sphere",r:5},position:new m(20,50),velocity:new m(Math.random()*5-2.5,Math.random()*20)}),e.addObject(t)},s=i=>typeof i=="number"?i*Be:i.clone().multiplyScalar(Be),r=i=>typeof i=="number"?i/Be:i.clone().divideScalar(Be),n=(i,l)=>{for(const c of l.objects){i.stroke(c.data.isColliding?"red":"white");const y=i.map(c.position.x,0,l.dimensions.x,0,i.width),u=i.map(c.position.y,0,l.dimensions.y,i.height,0);if(c.geometry.type==="sphere"){const p=s(c.geometry.r*2);i.strokeWeight(p),i.point(y,u)}if(c.geometry.type==="line"){const p=y+i.map(c.geometry.vector.x,0,l.dimensions.x,0,i.width),g=u-i.map(c.geometry.vector.y,0,l.dimensions.y,0,i.height);i.strokeWeight(2),i.line(y,u,p,g)}}};let f;const d=i=>{i.setup=()=>{f=i;const c=s(e.dimensions);i.createCanvas(c.x,c.y),i.background(0),i.fill(255),i.stroke(255),o()},i.draw=()=>{if(i.background(0),i.mouseIsPressed){t.fixed=!0;const c=r(new m(i.mouseX,i.height-i.mouseY));t.position.copy(c)}else t.fixed=!1;e.step(),n(i,e)};let l;i.mousePressed=()=>{l=r(new m(i.mouseX,i.height-i.mouseY))},i.mouseReleased=()=>{const c=r(new m(i.mouseX,i.height-i.mouseY)),y=l.subtract(c);t.position.copy(c),t.velocity.copy(y)}};return Se(()=>{f==null||f.remove()}),[d]}class Vt extends ce{constructor(e){super(),ae(this,e,Ft,Nt,le,{})}}function It(a){let e,t,o,s,r,n,f,d="Gravity",i,l,c,y="Toggle",u,p,g;return t=new Oe({props:{sketch:a[1]}}),{c(){e=_("div"),M(t.$$.fragment),o=O(),s=_("table"),r=_("tbody"),n=_("tr"),f=_("th"),f.textContent=d,i=O(),l=_("td"),c=_("button"),c.textContent=y,this.h()},l(h){e=$(h,"DIV",{class:!0});var w=C(e);z(t.$$.fragment,w),w.forEach(v),o=P(h),s=$(h,"TABLE",{});var x=C(s);r=$(x,"TBODY",{});var T=C(r);n=$(T,"TR",{});var S=C(n);f=$(S,"TH",{"data-svelte-h":!0}),A(f)!=="svelte-vy75us"&&(f.textContent=d),i=P(S),l=$(S,"TD",{});var D=C(l);c=$(D,"BUTTON",{"data-svelte-h":!0}),A(c)!=="svelte-18lc94l"&&(c.textContent=y),D.forEach(v),S.forEach(v),T.forEach(v),x.forEach(v),this.h()},h(){B(e,"class","d-flex justify-content-center")},m(h,w){j(h,e,w),U(t,e,null),j(h,o,w),j(h,s,w),b(s,r),b(r,n),b(n,f),b(n,i),b(n,l),b(l,c),u=!0,p||(g=te(c,"click",a[2]),p=!0)},p:je,i(h){u||(N(t.$$.fragment,h),u=!0)},o(h){I(t.$$.fragment,h),u=!1},d(h){h&&(v(e),v(o),v(s)),H(t),p=!1,g()}}}const Ye=6;function Bt(a){console.clear();const e=new Pe({reporter:()=>{},enableGravity:!0});let t;const o=()=>{for(;e.objects.length;)e.objects.pop();const l=E({geometry:{type:"line",vector:new m(100,0)},position:new m(0,0),fixed:!0});e.addObject(l);const c=E({geometry:{type:"line",vector:new m(100,0)},position:new m(0,100),fixed:!0});e.addObject(c);const y=E({geometry:{type:"line",vector:new m(0,100)},position:new m(0,0),fixed:!0});e.addObject(y);const u=E({geometry:{type:"line",vector:new m(0,100)},position:new m(100,0),fixed:!0});e.addObject(u);const p=E({geometry:{type:"line",vector:new m(50,50)},position:new m(20,10),fixed:!0});e.addObject(p),t=E({geometry:{type:"sphere",r:2},position:new m(20,50),velocity:new m(Math.random()*5-2.5,Math.random()*20)}),e.addObject(t)},s=l=>typeof l=="number"?l*Ye:l.clone().multiplyScalar(Ye),r=l=>typeof l=="number"?l/Ye:l.clone().divideScalar(Ye),n=(l,c)=>{for(const y of c.objects){l.stroke(y.data.isColliding?"red":"white");const u=l.map(y.position.x,0,c.dimensions.x,0,l.width),p=l.map(y.position.y,0,c.dimensions.y,l.height,0);if(y.geometry.type==="sphere"){const g=s(y.geometry.r*2);l.strokeWeight(g),l.point(u,p)}if(y.geometry.type==="line"){const g=u+l.map(y.geometry.vector.x,0,c.dimensions.x,0,l.width),h=p-l.map(y.geometry.vector.y,0,c.dimensions.y,0,l.height);l.strokeWeight(2),l.line(u,p,g,h)}}};let f;const d=l=>{l.setup=()=>{f=l;const y=s(e.dimensions);l.createCanvas(y.x,y.y),l.background(0),l.fill(255),l.stroke(255),o()},l.draw=()=>{if(l.background(0),bt(l)){t.fixed=!0;const y=r(new m(l.mouseX,l.height-l.mouseY));t.position.copy(y)}else t.fixed=!1;e.step(),n(l,e)};let c;l.mousePressed=()=>{Xe(l)&&(c=r(new m(l.mouseX,l.height-l.mouseY)))},l.mouseReleased=()=>{if(!Xe(l))return;const y=r(new m(l.mouseX,l.height-l.mouseY)),u=c.subtract(y);t.position.copy(y),t.velocity.copy(u)}};return Se(()=>{f==null||f.remove()}),[e,d,()=>e.toggleGravity()]}class Yt extends ce{constructor(e){super(),ae(this,e,Bt,It,le,{})}}function ut(a){let e,t,o,s,r="dt",n,f,d,i,l,c,y="drag",u,p,g,h,w,x,T="gravity enabled",S,D,F,de,fe;return{c(){e=_("table"),t=_("tbody"),o=_("tr"),s=_("th"),s.textContent=r,n=O(),f=_("td"),d=_("input"),i=O(),l=_("tr"),c=_("th"),c.textContent=y,u=O(),p=_("td"),g=_("input"),h=O(),w=_("tr"),x=_("th"),x.textContent=T,S=O(),D=_("td"),F=_("input"),this.h()},l(V){e=$(V,"TABLE",{});var Y=C(e);t=$(Y,"TBODY",{});var q=C(t);o=$(q,"TR",{});var oe=C(o);s=$(oe,"TH",{"data-svelte-h":!0}),A(s)!=="svelte-16dheti"&&(s.textContent=r),n=P(oe),f=$(oe,"TD",{});var ne=C(f);d=$(ne,"INPUT",{type:!0,min:!0,max:!0,step:!0}),ne.forEach(v),oe.forEach(v),i=P(q),l=$(q,"TR",{});var Q=C(l);c=$(Q,"TH",{"data-svelte-h":!0}),A(c)!=="svelte-2hq5g"&&(c.textContent=y),u=P(Q),p=$(Q,"TD",{});var ie=C(p);g=$(ie,"INPUT",{type:!0,min:!0,max:!0,step:!0}),ie.forEach(v),Q.forEach(v),h=P(q),w=$(q,"TR",{});var se=C(w);x=$(se,"TH",{"data-svelte-h":!0}),A(x)!=="svelte-ic0r87"&&(x.textContent=T),S=P(se),D=$(se,"TD",{});var G=C(D);F=$(G,"INPUT",{type:!0}),G.forEach(v),se.forEach(v),q.forEach(v),Y.forEach(v),this.h()},h(){B(d,"type","number"),B(d,"min","0"),B(d,"max","0.5"),B(d,"step","0.001"),B(g,"type","number"),B(g,"min","0"),B(g,"max","0.01"),B(g,"step","0.001"),B(F,"type","checkbox")},m(V,Y){j(V,e,Y),b(e,t),b(t,o),b(o,s),b(o,n),b(o,f),b(f,d),Ve(d,a[0].dt),b(t,i),b(t,l),b(l,c),b(l,u),b(l,p),b(p,g),Ve(g,a[0].drag),b(t,h),b(t,w),b(w,x),b(w,S),b(w,D),b(D,F),F.checked=a[0].gravityEnabled,de||(fe=[te(d,"input",a[1]),te(g,"input",a[2]),te(F,"change",a[3])],de=!0)},p(V,Y){Y&1&&Le(d.value)!==V[0].dt&&Ve(d,V[0].dt),Y&1&&Le(g.value)!==V[0].drag&&Ve(g,V[0].drag),Y&1&&(F.checked=V[0].gravityEnabled)},d(V){V&&v(e),de=!1,gt(fe)}}}function Gt(a){let e,t="Engine settings",o,s,r=a[0]&&ut(a);return{c(){e=_("p"),e.textContent=t,o=O(),r&&r.c(),s=ge(),this.h()},l(n){e=$(n,"P",{class:!0,"data-svelte-h":!0}),A(e)!=="svelte-gf3gek"&&(e.textContent=t),o=P(n),r&&r.l(n),s=ge(),this.h()},h(){B(e,"class","title svelte-g74uk9")},m(n,f){j(n,e,f),j(n,o,f),r&&r.m(n,f),j(n,s,f)},p(n,[f]){n[0]?r?r.p(n,f):(r=ut(n),r.c(),r.m(s.parentNode,s)):r&&(r.d(1),r=null)},i:je,o:je,d(n){n&&(v(e),v(o),v(s)),r&&r.d(n)}}}function Lt(a,e,t){let{world:o}=e;function s(){o.dt=Le(this.value),t(0,o)}function r(){o.drag=Le(this.value),t(0,o)}function n(){o.gravityEnabled=this.checked,t(0,o)}return a.$$set=f=>{"world"in f&&t(0,o=f.world)},[o,s,r,n]}class Rt extends ce{constructor(e){super(),ae(this,e,Lt,Gt,le,{world:0})}}const Xt=()=>{const a=[],e=E({geometry:{type:"line",vector:new m(15,0)},position:new m(0,0),fixed:!0});a.push(e);const t=E({geometry:{type:"line",vector:new m(0,100)},position:new m(0,0),fixed:!0});a.push(t);const o=E({geometry:{type:"line",vector:new m(0,100)},position:new m(15,0),fixed:!0});a.push(o);const s=E({geometry:{type:"line",vector:new m(3,-3)},position:new m(3.5,8),fixed:!0});a.push(s);const r=E({geometry:{type:"line",vector:new m(3,3)},position:new m(3.5,5),fixed:!0});a.push(r);const n=E({geometry:{type:"line",vector:new m(6,0)},position:new m(2,2),fixed:!0});a.push(n);const f=E({geometry:{type:"line",vector:new m(4,0)},position:new m(3,2.5),fixed:!0});a.push(f);const d=E({geometry:{type:"line",vector:new m(2,0)},position:new m(4,3),fixed:!0});a.push(d);const i=E({geometry:{type:"line",vector:new m(.6,0)},position:new m(4.7,3.5),fixed:!0});a.push(i);const l=E({geometry:{type:"line",vector:new m(1,0)},position:new m(10,10),fixed:!0});a.push(l);const c=E({geometry:{type:"line",vector:new m(0,-4)},position:new m(11,10),fixed:!0});a.push(c);const y=E({geometry:{type:"line",vector:new m(0,-4)},position:new m(11.5,10),fixed:!0});a.push(y);const u=E({geometry:{type:"line",vector:new m(0,-4)},position:new m(12,10),fixed:!0});a.push(u);const p=E({geometry:{type:"line",vector:new m(1,0)},position:new m(12,10),fixed:!0});a.push(p);const g=E({geometry:{type:"sphere",r:.1},position:new m(5,10),velocity:new m(0,0)});return a.push(g),{objects:a,sphere:g}};function At(a){let e,t,o,s,r,n=a[0]?"Disable":"Enable",f,d,i,l,c=a[1]?"Play":"Pause",y,u,p,g="Reset",h,w,x,T,S,D,F,de="Simulation time/Frame duration",fe,V,Y=a[2].t+"",q,oe,ne,Q=a[2].frameTime+"",ie,se,G,ue,et="Sphere position",Ae,ve,be=a[2].spherePos.x.toFixed(2)+"",De,Me,we,_e=a[2].spherePos.y.toFixed(2)+"",We,Ue,Z,me,tt="Sphere velocity",He,$e,xe=a[2].sphereVel.x.toFixed(2)+"",Ne,qe,Te,ke=a[2].sphereVel.y.toFixed(2)+"",Fe,L,ze,ot;return t=new Oe({props:{sketch:a[5]}}),w=new Rt({props:{world:a[3]}}),{c(){e=_("div"),M(t.$$.fragment),o=O(),s=_("div"),r=_("button"),f=R(n),d=R(" pause on collision"),i=O(),l=_("button"),y=R(c),u=O(),p=_("button"),p.textContent=g,h=O(),M(w.$$.fragment),x=O(),T=_("table"),S=_("tbody"),D=_("tr"),F=_("th"),F.textContent=de,fe=O(),V=_("td"),q=R(Y),oe=O(),ne=_("td"),ie=R(Q),se=O(),G=_("tr"),ue=_("th"),ue.textContent=et,Ae=O(),ve=_("td"),De=R(be),Me=O(),we=_("td"),We=R(_e),Ue=O(),Z=_("tr"),me=_("th"),me.textContent=tt,He=O(),$e=_("td"),Ne=R(xe),qe=O(),Te=_("td"),Fe=R(ke),this.h()},l(k){e=$(k,"DIV",{class:!0});var W=C(e);z(t.$$.fragment,W),W.forEach(v),o=P(k),s=$(k,"DIV",{});var ee=C(s);r=$(ee,"BUTTON",{});var Qe=C(r);f=X(Qe,n),d=X(Qe," pause on collision"),Qe.forEach(v),i=P(ee),l=$(ee,"BUTTON",{});var nt=C(l);y=X(nt,c),nt.forEach(v),u=P(ee),p=$(ee,"BUTTON",{"data-svelte-h":!0}),A(p)!=="svelte-tlxueg"&&(p.textContent=g),ee.forEach(v),h=P(k),z(w.$$.fragment,k),x=P(k),T=$(k,"TABLE",{});var st=C(T);S=$(st,"TBODY",{});var Ce=C(S);D=$(Ce,"TR",{});var he=C(D);F=$(he,"TH",{"data-svelte-h":!0}),A(F)!=="svelte-rirgm4"&&(F.textContent=de),fe=P(he),V=$(he,"TD",{});var it=C(V);q=X(it,Y),it.forEach(v),oe=P(he),ne=$(he,"TD",{});var rt=C(ne);ie=X(rt,Q),rt.forEach(v),he.forEach(v),se=P(Ce),G=$(Ce,"TR",{});var re=C(G);ue=$(re,"TH",{"data-svelte-h":!0}),A(ue)!=="svelte-1y1nif6"&&(ue.textContent=et),Ae=P(re),ve=$(re,"TD",{});var lt=C(ve);De=X(lt,be),lt.forEach(v),Me=P(re),we=$(re,"TD",{});var ct=C(we);We=X(ct,_e),ct.forEach(v),Ue=P(re),re.forEach(v),Z=$(Ce,"TR",{});var ye=C(Z);me=$(ye,"TH",{"data-svelte-h":!0}),A(me)!=="svelte-1uw1fs2"&&(me.textContent=tt),He=P(ye),$e=$(ye,"TD",{});var at=C($e);Ne=X(at,xe),at.forEach(v),qe=P(ye),Te=$(ye,"TD",{});var dt=C(Te);Fe=X(dt,ke),dt.forEach(v),ye.forEach(v),Ce.forEach(v),st.forEach(v),this.h()},h(){B(e,"class","d-flex justify-content-center")},m(k,W){j(k,e,W),U(t,e,null),j(k,o,W),j(k,s,W),b(s,r),b(r,f),b(r,d),b(s,i),b(s,l),b(l,y),b(s,u),b(s,p),j(k,h,W),U(w,k,W),j(k,x,W),j(k,T,W),b(T,S),b(S,D),b(D,F),b(D,fe),b(D,V),b(V,q),b(D,oe),b(D,ne),b(ne,ie),b(S,se),b(S,G),b(G,ue),b(G,Ae),b(G,ve),b(ve,De),b(G,Me),b(G,we),b(we,We),b(G,Ue),b(S,Z),b(Z,me),b(Z,He),b(Z,$e),b($e,Ne),b(Z,qe),b(Z,Te),b(Te,Fe),L=!0,ze||(ot=[te(r,"click",a[6]),te(l,"click",a[7]),te(p,"click",a[4])],ze=!0)},p(k,[W]){(!L||W&1)&&n!==(n=k[0]?"Disable":"Enable")&&K(f,n),(!L||W&2)&&c!==(c=k[1]?"Play":"Pause")&&K(y,c);const ee={};W&8&&(ee.world=k[3]),w.$set(ee),(!L||W&4)&&Y!==(Y=k[2].t+"")&&K(q,Y),(!L||W&4)&&Q!==(Q=k[2].frameTime+"")&&K(ie,Q),(!L||W&4)&&be!==(be=k[2].spherePos.x.toFixed(2)+"")&&K(De,be),(!L||W&4)&&_e!==(_e=k[2].spherePos.y.toFixed(2)+"")&&K(We,_e),(!L||W&4)&&xe!==(xe=k[2].sphereVel.x.toFixed(2)+"")&&K(Ne,xe),(!L||W&4)&&ke!==(ke=k[2].sphereVel.y.toFixed(2)+"")&&K(Fe,ke)},i(k){L||(N(t.$$.fragment,k),N(w.$$.fragment,k),L=!0)},o(k){I(t.$$.fragment,k),I(w.$$.fragment,k),L=!1},d(k){k&&(v(e),v(o),v(s),v(h),v(x),v(T)),H(t),H(w,k),ze=!1,gt(ot)}}}const Ge=60;function Mt(a,e,t){console.clear();let o=!1,s=!1,r={t:"0",frameTime:"0",spherePos:new m(0,0),sphereVel:new m(0,0),ballIsColliding:!1},n,f;const d=()=>{t(3,n=new Pe({dimensions:new m(15,15),reporter:w=>{var x;t(2,r.t=(x=w==null?void 0:w.t)==null?void 0:x.toFixed(1),r),r.spherePos.copy(f.position).unfloat(),r.sphereVel.copy(f.velocity).unfloat(),t(2,r.frameTime=w.frameTime.toFixed(2),r),t(2,r),t(2,r.ballIsColliding=f.data.isColliding,r),o&&f.data.isColliding&&!s&&t(1,s=!0)},enableGravity:!0}));const h=Xt();f=h.sphere;for(const w of h.objects)n.addObject(w)},i=h=>typeof h=="number"?h*Ge:h.clone().multiplyScalar(Ge),l=h=>typeof h=="number"?h/Ge:h.clone().divideScalar(Ge),c=(h,w)=>{for(const x of w.objects){h.stroke(x.data.isColliding?"red":"white");const T=h.map(x.position.x,0,w.dimensions.x,0,h.width),S=h.map(x.position.y,0,w.dimensions.y,h.height,0);if(x.geometry.type==="sphere"){const D=i(x.geometry.r*2);h.strokeWeight(D),h.point(T,S)}if(x.geometry.type==="line"){const D=T+h.map(x.geometry.vector.x,0,w.dimensions.x,0,h.width),F=S-h.map(x.geometry.vector.y,0,w.dimensions.y,0,h.height);h.strokeWeight(2),h.line(T,S,D,F)}}};let y;const u=h=>{h.setup=()=>{y=h,d();const T=i(n.dimensions);h.createCanvas(T.x,T.y),h.background(0),h.fill(255),h.stroke(255),d()},h.draw=()=>{if(h.background(0),bt(h)){f.fixed=!0;const T=l(new m(h.mouseX,h.height-h.mouseY));f.position.copy(T)}else f.fixed=!1;s||n.step(),c(h,n),x(h)};let w;h.mousePressed=()=>{Xe(h)&&(w=l(new m(h.mouseX,h.height-h.mouseY)))},h.mouseReleased=()=>{if(!Xe(h)||!w)return;const T=l(new m(h.mouseX,h.height-h.mouseY)),S=w.subtract(T).multiplyScalar(3);w=void 0,f.position.copy(T),f.velocity.copy(S)};const x=T=>{if(!w)return;T.stroke("blue"),T.strokeWeight(2);const S=i(w);T.line(S.x,T.height-S.y,T.mouseX,T.mouseY)}};return Se(()=>{y==null||y.remove()}),[o,s,r,n,d,u,()=>t(0,o=!o),()=>t(1,s=!s)]}class Ut extends ce{constructor(e){super(),ae(this,e,Mt,At,le,{})}}function mt(a,e,t){const o=a.slice();return o[1]=e[t],o}function ht(a,e,t){const o=a.slice();return o[1]=e[t],o}function Ht(a){let e=a[1].title+"",t;return{c(){t=R(e)},l(o){t=X(o,e)},m(o,s){j(o,t,s)},p:je,d(o){o&&v(t)}}}function yt(a){let e,t;return e=new kt({props:{$$slots:{default:[Ht]},$$scope:{ctx:a}}}),{c(){M(e.$$.fragment)},l(o){z(e.$$.fragment,o)},m(o,s){U(e,o,s),t=!0},p(o,s){const r={};s&64&&(r.$$scope={dirty:s,ctx:o}),e.$set(r)},i(o){t||(N(e.$$.fragment,o),t=!0)},o(o){I(e.$$.fragment,o),t=!1},d(o){H(e,o)}}}function qt(a){let e,t,o=Re(a[0]),s=[];for(let n=0;n<o.length;n+=1)s[n]=yt(ht(a,o,n));const r=n=>I(s[n],1,1,()=>{s[n]=null});return{c(){for(let n=0;n<s.length;n+=1)s[n].c();e=ge()},l(n){for(let f=0;f<s.length;f+=1)s[f].l(n);e=ge()},m(n,f){for(let d=0;d<s.length;d+=1)s[d]&&s[d].m(n,f);j(n,e,f),t=!0},p(n,f){if(f&1){o=Re(n[0]);let d;for(d=0;d<o.length;d+=1){const i=ht(n,o,d);s[d]?(s[d].p(i,f),N(s[d],1)):(s[d]=yt(i),s[d].c(),N(s[d],1),s[d].m(e.parentNode,e))}for(Ke(),d=o.length;d<s.length;d+=1)r(d);Ze()}},i(n){if(!t){for(let f=0;f<o.length;f+=1)N(s[f]);t=!0}},o(n){s=s.filter(Boolean);for(let f=0;f<s.length;f+=1)I(s[f]);t=!1},d(n){n&&v(e),vt(s,n)}}}function zt(a){let e,t,o;var s=a[1].component;function r(n,f){return{}}return s&&(e=ft(s,r())),{c(){e&&M(e.$$.fragment),t=O()},l(n){e&&z(e.$$.fragment,n),t=P(n)},m(n,f){e&&U(e,n,f),j(n,t,f),o=!0},p(n,f){if(s!==(s=n[1].component)){if(e){Ke();const d=e;I(d.$$.fragment,1,0,()=>{H(d,1)}),Ze()}s?(e=ft(s,r()),M(e.$$.fragment),N(e.$$.fragment,1),U(e,t.parentNode,t)):e=null}},i(n){o||(e&&N(e.$$.fragment,n),o=!0)},o(n){e&&I(e.$$.fragment,n),o=!1},d(n){n&&v(t),e&&H(e,n)}}}function pt(a){let e,t;return e=new Tt({props:{$$slots:{default:[zt]},$$scope:{ctx:a}}}),{c(){M(e.$$.fragment)},l(o){z(e.$$.fragment,o)},m(o,s){U(e,o,s),t=!0},p(o,s){const r={};s&64&&(r.$$scope={dirty:s,ctx:o}),e.$set(r)},i(o){t||(N(e.$$.fragment,o),t=!0)},o(o){I(e.$$.fragment,o),t=!1},d(o){H(e,o)}}}function Qt(a){let e,t,o,s;e=new xt({props:{$$slots:{default:[qt]},$$scope:{ctx:a}}});let r=Re(a[0]),n=[];for(let d=0;d<r.length;d+=1)n[d]=pt(mt(a,r,d));const f=d=>I(n[d],1,1,()=>{n[d]=null});return{c(){M(e.$$.fragment),t=O();for(let d=0;d<n.length;d+=1)n[d].c();o=ge()},l(d){z(e.$$.fragment,d),t=P(d);for(let i=0;i<n.length;i+=1)n[i].l(d);o=ge()},m(d,i){U(e,d,i),j(d,t,i);for(let l=0;l<n.length;l+=1)n[l]&&n[l].m(d,i);j(d,o,i),s=!0},p(d,i){const l={};if(i&64&&(l.$$scope={dirty:i,ctx:d}),e.$set(l),i&1){r=Re(d[0]);let c;for(c=0;c<r.length;c+=1){const y=mt(d,r,c);n[c]?(n[c].p(y,i),N(n[c],1)):(n[c]=pt(y),n[c].c(),N(n[c],1),n[c].m(o.parentNode,o))}for(Ke(),c=r.length;c<n.length;c+=1)f(c);Ze()}},i(d){if(!s){N(e.$$.fragment,d);for(let i=0;i<r.length;i+=1)N(n[i]);s=!0}},o(d){I(e.$$.fragment,d),n=n.filter(Boolean);for(let i=0;i<n.length;i+=1)I(n[i]);s=!1},d(d){d&&(v(t),v(o)),H(e,d),vt(n,d)}}}function Jt(a){let e,t;return e=new $t({props:{$$slots:{default:[Qt]},$$scope:{ctx:a}}}),{c(){M(e.$$.fragment)},l(o){z(e.$$.fragment,o)},m(o,s){U(e,o,s),t=!0},p(o,[s]){const r={};s&64&&(r.$$scope={dirty:s,ctx:o}),e.$set(r)},i(o){t||(N(e.$$.fragment,o),t=!0)},o(o){I(e.$$.fragment,o),t=!1},d(o){H(e,o)}}}function Kt(a){return[[{title:"Obstacles",component:Ut},{title:"Test collisions 3",component:Yt},{title:"Test collisions 2",component:Vt},{title:"Test collisions",component:Wt},{title:"Test engine",component:Ot}]]}class so extends ce{constructor(e){super(),ae(this,e,Kt,Jt,le,{})}}export{so as component};
