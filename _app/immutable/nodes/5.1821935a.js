import{s as D,f as T,a as C,g as L,h as O,d as w,c as E,u as J,j as K,i as v,y as Q,L as Z,z as X,M as ee,e as S,E as A,q as H,l as te,m as oe}from"../chunks/scheduler.e421d989.js";import{S as G,i as U,b as k,d as M,m as j,a as g,t as x,e as W,g as B,c as I}from"../chunks/index.52486247.js";import{e as P}from"../chunks/each.e59479a4.js";import{V as h,P as ne,a as N,T as se,b as re,c as ie,d as ce}from"../chunks/p5utils.fe4d08ff.js";import{c as b,W as ae}from"../chunks/PhysicObject.c3e4b7e0.js";const le=(f,e)=>{const s=[],t=f.x,n=f.y,a=3,o=5,l=.3,r=4,u=.5,i=.1,c=3,p=Math.random()*(t-o),m=n-c-Math.random()*(n-r-c),d=Math.random()*o+a,_=Math.random()*r+l,y=Math.random()*u+i;me({x:p,y:m,w:d,h:_,topRatio:y},e).forEach(R=>s.push(R)),ue(f).forEach(R=>s.push(R));const $=fe(new h(Math.random()*t,Math.random()*n));for(;$.position.x>p&&$.position.x<p+d&&$.position.y<m&&$.position.y>m+_;)$.position.x=Math.random()*t,$.position.y=Math.random()*n;return s.push($),{objects:s,sphere:$}},fe=f=>b({geometry:{type:"sphere",r:.1},position:f,velocity:new h(0,0)}),ue=f=>{const e=f.x,s=f.y,t=[],n=b({geometry:{type:"line",vector:new h(e,0)},position:new h(0,0),fixed:!0});t.push(n);const a=b({geometry:{type:"line",vector:new h(0,s*10)},position:new h(0,0),fixed:!0});t.push(a);const o=b({geometry:{type:"line",vector:new h(0,s*10)},position:new h(15,0),fixed:!0});return t.push(o),t},me=(f,e)=>{const{x:s,y:t,h:n,w:a,topRatio:o}=f;if(o<0||o>1)throw new Error("topRatio must be between 0 and 1");const l=a*o/2,r=a*(1-o),u=.1,i=[],c=b({geometry:{type:"line",vector:new h(l,0)},position:new h(s,t+u),fixed:!0});i.push(c);const p=b({geometry:{type:"line",vector:new h(0,-n)},position:new h(s+l,t),fixed:!0});i.push(p);const m=b({geometry:{type:"line",vector:new h(r,0)},position:new h(s+l,t-n-u),fixed:!0});i.push(m);const d=b({geometry:{type:"line",vector:new h(r-2*u,0)},position:new h(s+l+u,t-n+u),fixed:!0,friction:1,restitution:0,collisionListener:e});i.push(d);const _=b({geometry:{type:"line",vector:new h(0,n)},position:new h(s+l+r,t-n),fixed:!0});i.push(_);const y=b({geometry:{type:"line",vector:new h(l,0)},position:new h(s+l+r,t+u),fixed:!0});return i.push(y),i};function he(f){let e,s,t,n,a,o="Reset",l,r,u;return s=new ne({props:{sketch:f[1]}}),{c(){e=T("div"),k(s.$$.fragment),t=C(),n=T("div"),a=T("button"),a.textContent=o,this.h()},l(i){e=L(i,"DIV",{class:!0});var c=O(e);M(s.$$.fragment,c),c.forEach(w),t=E(i),n=L(i,"DIV",{});var p=O(n);a=L(p,"BUTTON",{"data-svelte-h":!0}),J(a)!=="svelte-tlxueg"&&(a.textContent=o),p.forEach(w),this.h()},h(){K(e,"class","d-flex justify-content-center")},m(i,c){v(i,e,c),j(s,e,null),v(i,t,c),v(i,n,c),Q(n,a),l=!0,r||(u=Z(a,"click",f[0]),r=!0)},p:X,i(i){l||(g(s.$$.fragment,i),l=!0)},o(i){x(s.$$.fragment,i),l=!1},d(i){i&&(w(e),w(t),w(n)),W(s),r=!1,u()}}}const V=60;function pe(f){console.clear();let e,s,t;const n=()=>{a()},a=()=>{e=new ae({dimensions:new h(15,15),reporter:()=>{},enableGravity:!0});const i=le(e.dimensions,n);i.sphere.fixed=!0,s=i.sphere,t=s.position.clone();for(const c of i.objects)e.addObject(c)},o=i=>typeof i=="number"?i*V:i.clone().multiplyScalar(V),l=(i,c)=>{for(const p of c.objects){i.stroke(p.data.isColliding?"red":"white");const m=i.map(p.position.x,0,c.dimensions.x,0,i.width),d=i.map(p.position.y,0,c.dimensions.y,i.height,0);if(p.geometry.type==="sphere"){const _=o(p.geometry.r*2);i.strokeWeight(_),i.point(m,d)}if(p.geometry.type==="line"){const _=m+i.map(p.geometry.vector.x,0,c.dimensions.x,0,i.width),y=d-i.map(p.geometry.vector.y,0,c.dimensions.y,0,i.height);i.strokeWeight(2),i.line(m,d,_,y)}}};let r;const u=i=>{i.setup=()=>{r=i,a();const m=o(e.dimensions);i.createCanvas(m.x,m.y),i.background(0),i.fill(255),i.stroke(255),a()},i.draw=()=>{i.background(0),e.step(),l(i,e),p(i)};let c;i.mousePressed=()=>{N(i)&&(c=new h(i.width,i.height).divideScalar(2),s.position.copy(t),s.velocity.zero(),s.fixed=!0)},i.mouseReleased=()=>{if(!N(i)||!c)return;const m=c,_=new h(i.mouseX,i.mouseY).clone().subtract(m).multiplyScalar(20);_.x*=-1,e.applyForce(s,_),s.fixed=!1,c=void 0};const p=m=>{if(!s.fixed||!c)return;m.stroke("red"),m.strokeWeight(1),m.noFill(),m.circle(c.x,c.y,15),m.stroke("blue"),m.strokeWeight(2);const d=c,y=new h(m.mouseX,m.mouseY).clone().subtract(d);m.line(d.x,d.y,d.x+y.x,d.y+y.y);const $=o(s.position);y.x*=-1,y.y*=-1,m.line($.x,m.height-$.y,$.x+y.x,m.height-$.y+y.y)}};return ee(()=>{r==null||r.remove()}),[a,u]}class de extends G{constructor(e){super(),U(this,e,pe,he,D,{})}}function F(f,e,s){const t=f.slice();return t[1]=e[s],t}function Y(f,e,s){const t=f.slice();return t[1]=e[s],t}function $e(f){let e=f[1].title+"",s;return{c(){s=te(e)},l(t){s=oe(t,e)},m(t,n){v(t,s,n)},p:X,d(t){t&&w(s)}}}function q(f){let e,s;return e=new ce({props:{$$slots:{default:[$e]},$$scope:{ctx:f}}}),{c(){k(e.$$.fragment)},l(t){M(e.$$.fragment,t)},m(t,n){j(e,t,n),s=!0},p(t,n){const a={};n&64&&(a.$$scope={dirty:n,ctx:t}),e.$set(a)},i(t){s||(g(e.$$.fragment,t),s=!0)},o(t){x(e.$$.fragment,t),s=!1},d(t){W(e,t)}}}function ge(f){let e,s,t=P(f[0]),n=[];for(let o=0;o<t.length;o+=1)n[o]=q(Y(f,t,o));const a=o=>x(n[o],1,1,()=>{n[o]=null});return{c(){for(let o=0;o<n.length;o+=1)n[o].c();e=S()},l(o){for(let l=0;l<n.length;l+=1)n[l].l(o);e=S()},m(o,l){for(let r=0;r<n.length;r+=1)n[r]&&n[r].m(o,l);v(o,e,l),s=!0},p(o,l){if(l&1){t=P(o[0]);let r;for(r=0;r<t.length;r+=1){const u=Y(o,t,r);n[r]?(n[r].p(u,l),g(n[r],1)):(n[r]=q(u),n[r].c(),g(n[r],1),n[r].m(e.parentNode,e))}for(B(),r=t.length;r<n.length;r+=1)a(r);I()}},i(o){if(!s){for(let l=0;l<t.length;l+=1)g(n[l]);s=!0}},o(o){n=n.filter(Boolean);for(let l=0;l<n.length;l+=1)x(n[l]);s=!1},d(o){o&&w(e),A(n,o)}}}function _e(f){let e,s,t;var n=f[1].component;function a(o,l){return{}}return n&&(e=H(n,a())),{c(){e&&k(e.$$.fragment),s=C()},l(o){e&&M(e.$$.fragment,o),s=E(o)},m(o,l){e&&j(e,o,l),v(o,s,l),t=!0},p(o,l){if(n!==(n=o[1].component)){if(e){B();const r=e;x(r.$$.fragment,1,0,()=>{W(r,1)}),I()}n?(e=H(n,a()),k(e.$$.fragment),g(e.$$.fragment,1),j(e,s.parentNode,s)):e=null}},i(o){t||(e&&g(e.$$.fragment,o),t=!0)},o(o){e&&x(e.$$.fragment,o),t=!1},d(o){o&&w(s),e&&W(e,o)}}}function z(f){let e,s;return e=new ie({props:{$$slots:{default:[_e]},$$scope:{ctx:f}}}),{c(){k(e.$$.fragment)},l(t){M(e.$$.fragment,t)},m(t,n){j(e,t,n),s=!0},p(t,n){const a={};n&64&&(a.$$scope={dirty:n,ctx:t}),e.$set(a)},i(t){s||(g(e.$$.fragment,t),s=!0)},o(t){x(e.$$.fragment,t),s=!1},d(t){W(e,t)}}}function ye(f){let e,s,t,n;e=new re({props:{$$slots:{default:[ge]},$$scope:{ctx:f}}});let a=P(f[0]),o=[];for(let r=0;r<a.length;r+=1)o[r]=z(F(f,a,r));const l=r=>x(o[r],1,1,()=>{o[r]=null});return{c(){k(e.$$.fragment),s=C();for(let r=0;r<o.length;r+=1)o[r].c();t=S()},l(r){M(e.$$.fragment,r),s=E(r);for(let u=0;u<o.length;u+=1)o[u].l(r);t=S()},m(r,u){j(e,r,u),v(r,s,u);for(let i=0;i<o.length;i+=1)o[i]&&o[i].m(r,u);v(r,t,u),n=!0},p(r,u){const i={};if(u&64&&(i.$$scope={dirty:u,ctx:r}),e.$set(i),u&1){a=P(r[0]);let c;for(c=0;c<a.length;c+=1){const p=F(r,a,c);o[c]?(o[c].p(p,u),g(o[c],1)):(o[c]=z(p),o[c].c(),g(o[c],1),o[c].m(t.parentNode,t))}for(B(),c=a.length;c<o.length;c+=1)l(c);I()}},i(r){if(!n){g(e.$$.fragment,r);for(let u=0;u<a.length;u+=1)g(o[u]);n=!0}},o(r){x(e.$$.fragment,r),o=o.filter(Boolean);for(let u=0;u<o.length;u+=1)x(o[u]);n=!1},d(r){r&&(w(s),w(t)),W(e,r),A(o,r)}}}function xe(f){let e,s;return e=new se({props:{$$slots:{default:[ye]},$$scope:{ctx:f}}}),{c(){k(e.$$.fragment)},l(t){M(e.$$.fragment,t)},m(t,n){j(e,t,n),s=!0},p(t,[n]){const a={};n&64&&(a.$$scope={dirty:n,ctx:t}),e.$set(a)},i(t){s||(g(e.$$.fragment,t),s=!0)},o(t){x(e.$$.fragment,t),s=!1},d(t){W(e,t)}}}function be(f){return[[{title:"Bucket",component:de}]]}class Me extends G{constructor(e){super(),U(this,e,be,xe,D,{})}}export{Me as component};
