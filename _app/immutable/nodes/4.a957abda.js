import{s as fe,f as _,g as $,h as T,d as p,j as L,i as C,z as $e,M as ke,a as E,e as mt,u as H,c as j,y,P as ve,L as G,Q as xe,O as Ue,l as J,m as K,n as ne}from"../chunks/scheduler.32ebed32.js";import{S as me,i as he,b as oe,d as se,m as re,a as le,t as ie,e as ce}from"../chunks/index.c25c2528.js";import{P as Te,V as a,w as ue,d as Le,c as k,m as Re,a as Ie,s as yt,C as gt}from"../chunks/PhysicObject.edd17eee.js";import{_ as bt}from"../chunks/preload-helper.a4192956.js";import{W as Pe,L as wt,S as _t}from"../chunks/World.4e963e81.js";function $t(i){let e,t,l;return t=new Te({props:{sketch:i[0]}}),{c(){e=_("div"),oe(t.$$.fragment),this.h()},l(o){e=$(o,"DIV",{class:!0});var s=T(e);se(t.$$.fragment,s),s.forEach(p),this.h()},h(){L(e,"class","d-flex justify-content-center")},m(o,s){C(o,e,s),re(t,e,null),l=!0},p:$e,i(o){l||(le(t.$$.fragment,o),l=!0)},o(o){ie(t.$$.fragment,o),l=!1},d(o){o&&p(e),ce(t)}}}const xt=6;function kt(i){console.clear();let e;const t={world:{collisions:!1,ttl:800,maxNbObjects:300,particleSize:1},cannon:{creationDelay:5,minYVelocity:30,maxYVelocityVariation:1,maxXVelocity:30}};let l;const o=async()=>{const r=await bt(()=>import("../chunks/dat.gui.module.ff711f94.js"),[],import.meta.url);l=new r.GUI,l.domElement.setAttribute("style","background-color: black");const m=l.addFolder("World");m.open(),m.add(h==null?void 0:h.objects,"length").name("Nb objects").listen(),m.add(t.world,"collisions").name("Enable collisions").onFinishChange(()=>h.collisionEnabled=t.world.collisions),m.add(t.world,"ttl",0,1e4).name("Particles TTL"),m.add(t.world,"maxNbObjects",0,3e3).name("Max nb particles"),m.add(t.world,"particleSize",1,20,1).name("Particles size");const d=l.addFolder("Cannon");d.open(),d.add(t.cannon,"minYVelocity",0,100).name("min. Y velocity"),d.add(t.cannon,"maxYVelocityVariation",0,2).name("Y vel. variation"),d.add(t.cannon,"maxXVelocity",0,100).name("max. X velocity "),d.add(t.cannon,"creationDelay",1,30,1).name("Fire rate")},s=()=>{const{minYVelocity:r,maxYVelocityVariation:m,maxXVelocity:d}=t.cannon,w=Math.random()*d-d/2,v=r+(m-Math.random())*r;return new a(w,v)},n=r=>{const m={...k({geometry:{type:"sphere",r:t.world.particleSize},position:new a(r.dimensions.x/2,10),velocity:s()}),age:0};r.addObject(m)};let h;const u=r=>{const m=new a(100,100),d=ue(m,xt);r.setup=()=>{e=r,r.createCanvas(d.x,d.y),r.noFill(),h=new Pe({dimensions:m,enableGravity:!0,enableCollisions:!1}),n(h),o()},r.draw=()=>{r.background(0),r.frameCount%t.cannon.creationDelay===0&&h.objects.length<t.world.maxNbObjects&&n(h),h.step(),h.objects.forEach(w=>{w.data.age>t.world.ttl&&h.removeObject(w)}),Le(r,h)}};return ke(()=>{l==null||l.destroy(),e==null||e.remove()}),[u]}let Tt=class extends me{constructor(e){super(),he(this,e,kt,$t,fe,{})}};function ht(i){let e,t,l,o,s="dt",n,h,u,r,m,d,w="drag",v,b,g,f,c,x,S="gravity enabled",O,F,N,W,Q;return{c(){e=_("table"),t=_("tbody"),l=_("tr"),o=_("th"),o.textContent=s,n=E(),h=_("td"),u=_("input"),r=E(),m=_("tr"),d=_("th"),d.textContent=w,v=E(),b=_("td"),g=_("input"),f=E(),c=_("tr"),x=_("th"),x.textContent=S,O=E(),F=_("td"),N=_("input"),this.h()},l(Y){e=$(Y,"TABLE",{});var M=T(e);t=$(M,"TBODY",{});var D=T(t);l=$(D,"TR",{});var B=T(l);o=$(B,"TH",{"data-svelte-h":!0}),H(o)!=="svelte-16dheti"&&(o.textContent=s),n=j(B),h=$(B,"TD",{});var A=T(h);u=$(A,"INPUT",{type:!0,min:!0,max:!0,step:!0}),A.forEach(p),B.forEach(p),r=j(D),m=$(D,"TR",{});var ee=T(m);d=$(ee,"TH",{"data-svelte-h":!0}),H(d)!=="svelte-2hq5g"&&(d.textContent=w),v=j(ee),b=$(ee,"TD",{});var te=T(b);g=$(te,"INPUT",{type:!0,min:!0,max:!0,step:!0}),te.forEach(p),ee.forEach(p),f=j(D),c=$(D,"TR",{});var R=T(c);x=$(R,"TH",{"data-svelte-h":!0}),H(x)!=="svelte-ic0r87"&&(x.textContent=S),O=j(R),F=$(R,"TD",{});var z=T(F);N=$(z,"INPUT",{type:!0}),z.forEach(p),R.forEach(p),D.forEach(p),M.forEach(p),this.h()},h(){L(u,"type","number"),L(u,"min","0"),L(u,"max","0.5"),L(u,"step","0.001"),L(g,"type","number"),L(g,"min","0"),L(g,"max","0.01"),L(g,"step","0.001"),L(N,"type","checkbox")},m(Y,M){C(Y,e,M),y(e,t),y(t,l),y(l,o),y(l,n),y(l,h),y(h,u),ve(u,i[0].dt),y(t,r),y(t,m),y(m,d),y(m,v),y(m,b),y(b,g),ve(g,i[0].drag),y(t,f),y(t,c),y(c,x),y(c,O),y(c,F),y(F,N),N.checked=i[0].gravityEnabled,W||(Q=[G(u,"input",i[1]),G(g,"input",i[2]),G(N,"change",i[3])],W=!0)},p(Y,M){M&1&&xe(u.value)!==Y[0].dt&&ve(u,Y[0].dt),M&1&&xe(g.value)!==Y[0].drag&&ve(g,Y[0].drag),M&1&&(N.checked=Y[0].gravityEnabled)},d(Y){Y&&p(e),W=!1,Ue(Q)}}}function Ct(i){let e,t="Engine settings",l,o,s=i[0]&&ht(i);return{c(){e=_("p"),e.textContent=t,l=E(),s&&s.c(),o=mt(),this.h()},l(n){e=$(n,"P",{class:!0,"data-svelte-h":!0}),H(e)!=="svelte-gf3gek"&&(e.textContent=t),l=j(n),s&&s.l(n),o=mt(),this.h()},h(){L(e,"class","title svelte-g74uk9")},m(n,h){C(n,e,h),C(n,l,h),s&&s.m(n,h),C(n,o,h)},p(n,[h]){n[0]?s?s.p(n,h):(s=ht(n),s.c(),s.m(o.parentNode,o)):s&&(s.d(1),s=null)},i:$e,o:$e,d(n){n&&(p(e),p(l),p(o)),s&&s.d(n)}}}function St(i,e,t){let{world:l}=e;function o(){l.dt=xe(this.value),t(0,l)}function s(){l.drag=xe(this.value),t(0,l)}function n(){l.gravityEnabled=this.checked,t(0,l)}return i.$$set=h=>{"world"in h&&t(0,l=h.world)},[l,o,s,n]}class nt extends me{constructor(e){super(),he(this,e,St,Ct,fe,{world:0})}}function Et(i){let e,t="Shooter",l,o,s,n="Angle",h,u,r,m,d,w,v,b,g="Magnitude",f,c,x,S,O,F,N,W,Q="Shoot",Y,M;return{c(){e=_("p"),e.textContent=t,l=E(),o=_("span"),s=_("label"),s.textContent=n,h=E(),u=_("input"),r=E(),m=J(i[0]),d=J(" deg"),w=E(),v=_("span"),b=_("label"),b.textContent=g,f=E(),c=_("input"),x=E(),S=J(i[1]),O=E(),F=_("br"),N=E(),W=_("button"),W.textContent=Q,this.h()},l(D){e=$(D,"P",{class:!0,"data-svelte-h":!0}),H(e)!=="svelte-198ugk3"&&(e.textContent=t),l=j(D),o=$(D,"SPAN",{});var B=T(o);s=$(B,"LABEL",{for:!0,"data-svelte-h":!0}),H(s)!=="svelte-lab87n"&&(s.textContent=n),h=j(B),u=$(B,"INPUT",{id:!0,type:!0,min:!0,max:!0}),r=j(B),m=K(B,i[0]),d=K(B," deg"),B.forEach(p),w=j(D),v=$(D,"SPAN",{});var A=T(v);b=$(A,"LABEL",{for:!0,"data-svelte-h":!0}),H(b)!=="svelte-1vc5oxa"&&(b.textContent=g),f=j(A),c=$(A,"INPUT",{id:!0,type:!0,min:!0,max:!0,step:!0}),x=j(A),S=K(A,i[1]),A.forEach(p),O=j(D),F=$(D,"BR",{}),N=j(D),W=$(D,"BUTTON",{"data-svelte-h":!0}),H(W)!=="svelte-8jpwxr"&&(W.textContent=Q),this.h()},h(){L(e,"class","title svelte-g74uk9"),L(s,"for","angleSlider"),L(u,"id","angleSlider"),L(u,"type","range"),L(u,"min","0"),L(u,"max","360"),L(b,"for","magSlider"),L(c,"id","magSlider"),L(c,"type","range"),L(c,"min","0"),L(c,"max","1"),L(c,"step","0.01")},m(D,B){C(D,e,B),C(D,l,B),C(D,o,B),y(o,s),y(o,h),y(o,u),ve(u,i[0]),y(o,r),y(o,m),y(o,d),C(D,w,B),C(D,v,B),y(v,b),y(v,f),y(v,c),ve(c,i[1]),y(v,x),y(v,S),C(D,O,B),C(D,F,B),C(D,N,B),C(D,W,B),Y||(M=[G(u,"change",i[4]),G(u,"input",i[4]),G(c,"change",i[5]),G(c,"input",i[5]),G(W,"click",i[6])],Y=!0)},p(D,[B]){B&1&&ve(u,D[0]),B&1&&ne(m,D[0]),B&2&&ve(c,D[1]),B&2&&ne(S,D[1])},i:$e,o:$e,d(D){D&&(p(e),p(l),p(o),p(w),p(v),p(O),p(F),p(N),p(W)),Y=!1,Ue(M)}}}function jt(i,e,t){let{onShoot:l}=e,o=0,s=.5;const n=()=>{const m=new a(1,0);m.rotateDeg(o),m.multiplyScalar(s),l(m)};function h(){o=xe(this.value),t(0,o)}function u(){s=xe(this.value),t(1,s)}const r=()=>n();return i.$$set=m=>{"onShoot"in m&&t(3,l=m.onShoot)},[o,s,n,l,h,u,r]}class vt extends me{constructor(e){super(),he(this,e,jt,Et,fe,{onShoot:3})}}const Pt=i=>{const e=[],t=k({geometry:{type:"line",vector:new a(15,0)},position:new a(0,15),fixed:!0});e.push(t);const l=k({geometry:{type:"line",vector:new a(15,0)},position:new a(0,0),fixed:!0});e.push(l);const o=k({geometry:{type:"line",vector:new a(0,100)},position:new a(0,0),fixed:!0});e.push(o);const s=k({geometry:{type:"line",vector:new a(0,100)},position:new a(15,0),fixed:!0});e.push(s);let n;for(let h=0;h<i.nbBalls;h++){const u=k({geometry:{type:"sphere",r:i.rBalls},position:new a(Math.random()*15,Math.random()*15),velocity:new a(Math.random()*15,Math.random()*15)});e.push(u),n||(n=u)}return{objects:e,sphere:n}};function Ot(i){let e,t,l,o,s,n=i[0]?"Play":"Pause",h,u,r,m="Reset",d,w,v="Add ball",b,g,f,c,x,S,O,F,N,W="Number of balls",Q,Y,M,D,B,A,ee="Balls radius",te,R,z,pe,V,U;return t=new Te({props:{sketch:i[5]}}),g=new vt({props:{onShoot:i[6]}}),c=new nt({props:{world:i[2]}}),{c(){e=_("div"),oe(t.$$.fragment),l=E(),o=_("div"),s=_("button"),h=J(n),u=E(),r=_("button"),r.textContent=m,d=E(),w=_("button"),w.textContent=v,b=E(),oe(g.$$.fragment),f=E(),oe(c.$$.fragment),x=E(),S=_("table"),O=_("tbody"),F=_("tr"),N=_("th"),N.textContent=W,Q=E(),Y=_("td"),M=_("input"),D=E(),B=_("tr"),A=_("th"),A.textContent=ee,te=E(),R=_("td"),z=_("input"),this.h()},l(P){e=$(P,"DIV",{class:!0});var X=T(e);se(t.$$.fragment,X),X.forEach(p),l=j(P),o=$(P,"DIV",{});var Z=T(o);s=$(Z,"BUTTON",{});var ge=T(s);h=K(ge,n),ge.forEach(p),u=j(Z),r=$(Z,"BUTTON",{"data-svelte-h":!0}),H(r)!=="svelte-tlxueg"&&(r.textContent=m),d=j(Z),w=$(Z,"BUTTON",{"data-svelte-h":!0}),H(w)!=="svelte-1xau3n8"&&(w.textContent=v),Z.forEach(p),b=j(P),se(g.$$.fragment,P),f=j(P),se(c.$$.fragment,P),x=j(P),S=$(P,"TABLE",{});var we=T(S);O=$(we,"TBODY",{});var ae=T(O);F=$(ae,"TR",{});var de=T(F);N=$(de,"TH",{"data-svelte-h":!0}),H(N)!=="svelte-eg4byi"&&(N.textContent=W),Q=j(de),Y=$(de,"TD",{});var be=T(Y);M=$(be,"INPUT",{type:!0,min:!0}),be.forEach(p),de.forEach(p),D=j(ae),B=$(ae,"TR",{});var Ce=T(B);A=$(Ce,"TH",{"data-svelte-h":!0}),H(A)!=="svelte-10gtk36"&&(A.textContent=ee),te=j(Ce),R=$(Ce,"TD",{});var De=T(R);z=$(De,"INPUT",{type:!0,min:!0}),De.forEach(p),Ce.forEach(p),ae.forEach(p),we.forEach(p),this.h()},h(){L(e,"class","d-flex justify-content-center"),L(M,"type","number"),L(M,"min","1"),L(z,"type","number"),L(z,"min","1")},m(P,X){C(P,e,X),re(t,e,null),C(P,l,X),C(P,o,X),y(o,s),y(s,h),y(o,u),y(o,r),y(o,d),y(o,w),C(P,b,X),re(g,P,X),C(P,f,X),re(c,P,X),C(P,x,X),C(P,S,X),y(S,O),y(O,F),y(F,N),y(F,Q),y(F,Y),y(Y,M),ve(M,i[1].nbBalls),y(O,D),y(O,B),y(B,A),y(B,te),y(B,R),y(R,z),ve(z,i[1].rBalls),pe=!0,V||(U=[G(s,"click",i[7]),G(r,"click",i[3]),G(w,"click",i[4]),G(M,"change",i[3]),G(M,"input",i[8]),G(z,"change",i[3]),G(z,"input",i[9])],V=!0)},p(P,[X]){(!pe||X&1)&&n!==(n=P[0]?"Play":"Pause")&&ne(h,n);const Z={};X&4&&(Z.world=P[2]),c.$set(Z),X&2&&xe(M.value)!==P[1].nbBalls&&ve(M,P[1].nbBalls),X&2&&xe(z.value)!==P[1].rBalls&&ve(z,P[1].rBalls)},i(P){pe||(le(t.$$.fragment,P),le(g.$$.fragment,P),le(c.$$.fragment,P),pe=!0)},o(P){ie(t.$$.fragment,P),ie(g.$$.fragment,P),ie(c.$$.fragment,P),pe=!1},d(P){P&&(p(e),p(l),p(o),p(b),p(f),p(x),p(S)),ce(t),ce(g,P),ce(c,P),V=!1,Ue(U)}}}const He=60;function Dt(i,e,t){console.clear();let l=!1,o={nbBalls:5,rBalls:.2},s,n;const h=()=>{const c=(s==null?void 0:s.gravityEnabled)??!0;t(2,s=new Pe({dimensions:new a(15,15),reporter:()=>{},enableGravity:c}));const x=Pt(o);n=x.sphere;for(const S of x.objects)s.addObject(S)},u=()=>{const c=k({geometry:{type:"sphere",r:o.rBalls},position:new a(7,7),velocity:new a(0,0)});s.addObject(c)},r=c=>typeof c=="number"?c*He:c.clone().multiplyScalar(He),m=c=>typeof c=="number"?c/He:c.clone().divideScalar(He);let d;const w=c=>{c.setup=()=>{d=c,h();const O=r(s.dimensions);c.createCanvas(O.x,O.y),c.background(0),c.fill(255),c.stroke(255),h()},c.draw=()=>{c.background(0),Re(c)?n.fixed=!0:n.fixed=!1,l||s.step(),Le(c,s),S(c)};let x;c.mousePressed=()=>{Ie(c)&&(x=m(new a(c.mouseX,c.height-c.mouseY)),n.position.copy(x))},c.mouseReleased=()=>{if(!Ie(c)||!x)return;const O=m(new a(c.mouseX,c.height-c.mouseY)),F=x.subtract(O).multiplyScalar(3);x=void 0,n.velocity.copy(F)};const S=O=>{if(!x)return;O.stroke("blue"),O.strokeWeight(2);const F=r(x);O.line(F.x,O.height-F.y,O.mouseX,O.mouseY)}},v=c=>{c.multiplyScalar(1e4),s.applyForce(n,c)};ke(()=>{d==null||d.remove()});const b=()=>t(0,l=!l);function g(){o.nbBalls=xe(this.value),t(1,o)}function f(){o.rBalls=xe(this.value),t(1,o)}return[l,o,s,h,u,w,v,b,g,f]}let Bt=class extends me{constructor(e){super(),he(this,e,Dt,Ot,fe,{})}};function Vt(i){let e,t,l,o,s=i[0][i[0].length-1]+"",n,h,u,r="New ball",m,d,w;return t=new Te({props:{sketch:i[2]}}),{c(){e=_("div"),oe(t.$$.fragment),l=E(),o=_("p"),n=J(s),h=E(),u=_("button"),u.textContent=r,this.h()},l(v){e=$(v,"DIV",{class:!0});var b=T(e);se(t.$$.fragment,b),b.forEach(p),l=j(v),o=$(v,"P",{});var g=T(o);n=K(g,s),g.forEach(p),h=j(v),u=$(v,"BUTTON",{"data-svelte-h":!0}),H(u)!=="svelte-1jwbm46"&&(u.textContent=r),this.h()},h(){L(e,"class","d-flex justify-content-center")},m(v,b){C(v,e,b),re(t,e,null),C(v,l,b),C(v,o,b),y(o,n),C(v,h,b),C(v,u,b),m=!0,d||(w=G(u,"click",i[1]),d=!0)},p(v,[b]){(!m||b&1)&&s!==(s=v[0][v[0].length-1]+"")&&ne(n,s)},i(v){m||(le(t.$$.fragment,v),m=!0)},o(v){ie(t.$$.fragment,v),m=!1},d(v){v&&(p(e),p(l),p(o),p(h),p(u)),ce(t),d=!1,w()}}}function Ft(i,e,t){console.clear();let l=[];const o=r=>{const m=r.objects[r.objects.length-1],d=m.position.clone().toFixed(2),w=m.velocity.clone().toFixed(2);l.push(`${r.t.toFixed(2)} - pos: ${d} - vel: ${w}`),l.length>50&&l.shift(),t(0,l)},s=new Pe({reporter:o,enableGravity:!0}),n=()=>{for(;s.objects.length;)s.objects.pop();const r=k({geometry:{type:"line",vector:new a(100,0)},position:new a(0,0),fixed:!0});s.addObject(r);for(let m=0;m<1;m++){const d=k({geometry:{type:"sphere",r:5},position:new a(20,50),velocity:new a(Math.random()*5-2.5,Math.random()*20)});s.addObject(d)}};let h;const u=r=>{r.setup=()=>{h=r,r.createCanvas(900,600),r.background(0),r.fill(255),r.stroke(255),n()},r.draw=()=>{r.background(0),s.step();for(const m of s.objects){const d=r.map(m.position.x,0,s.dimensions.x,0,r.width),w=r.map(m.position.y,0,s.dimensions.y,r.height,0);if(m.geometry.type==="sphere"&&(r.strokeWeight(m.geometry.r*2),r.point(d,w)),m.geometry.type==="line"){const v=d+r.map(m.geometry.vector.x,0,s.dimensions.x,0,r.width),b=w+r.map(m.geometry.vector.y,0,s.dimensions.y,0,r.height);r.strokeWeight(2),r.line(d,w,v,b)}}}};return ke(()=>{h==null||h.remove()}),[l,n,u]}class It extends me{constructor(e){super(),he(this,e,Ft,Vt,fe,{})}}function Lt(i){let e,t,l,o,s=i[0][i[0].length-1]+"",n,h,u,r="New ball",m,d,w;return t=new Te({props:{sketch:i[2]}}),{c(){e=_("div"),oe(t.$$.fragment),l=E(),o=_("p"),n=J(s),h=E(),u=_("button"),u.textContent=r,this.h()},l(v){e=$(v,"DIV",{class:!0});var b=T(e);se(t.$$.fragment,b),b.forEach(p),l=j(v),o=$(v,"P",{});var g=T(o);n=K(g,s),g.forEach(p),h=j(v),u=$(v,"BUTTON",{"data-svelte-h":!0}),H(u)!=="svelte-1jwbm46"&&(u.textContent=r),this.h()},h(){L(e,"class","d-flex justify-content-center")},m(v,b){C(v,e,b),re(t,e,null),C(v,l,b),C(v,o,b),y(o,n),C(v,h,b),C(v,u,b),m=!0,d||(w=G(u,"click",i[1]),d=!0)},p(v,[b]){(!m||b&1)&&s!==(s=v[0][v[0].length-1]+"")&&ne(n,s)},i(v){m||(le(t.$$.fragment,v),m=!0)},o(v){ie(t.$$.fragment,v),m=!1},d(v){v&&(p(e),p(l),p(o),p(h),p(u)),ce(t),d=!1,w()}}}const ze=6;function Nt(i,e,t){console.clear();let l=[];const o=d=>{const w=d.objects[d.objects.length-1],v=w.position.clone().toFixed(2),b=w.velocity.clone().toFixed(2);l.push(`${d.t.toFixed(2)} - pos: ${v} - vel: ${b}`),l.length>50&&l.shift(),t(0,l)},s=new Pe({reporter:o,enableGravity:!0});let n,h;const u=()=>{for(;s.objects.length;)s.objects.pop();h=k({geometry:{type:"line",vector:new a(40,40)},position:new a(30,30),fixed:!0}),s.addObject(h),n=k({geometry:{type:"sphere",r:10},position:new a(20,50),velocity:new a(2.5,2.5),fixed:!0}),s.addObject(n)};let r;const m=d=>{const w=g=>typeof g=="number"?g*ze:g.clone().multiplyScalar(ze),v=g=>typeof g=="number"?g/ze:g.clone().divideScalar(ze);d.setup=()=>{r=d;const g=w(s.dimensions);d.createCanvas(g.x,g.y),d.background(0),d.fill(255),d.stroke(255),u()};let b;d.draw=()=>{if(d.background(0),s.step(),d.mouseIsPressed){const g=v(new a(d.mouseX,d.height-d.mouseY));if(b||(g.distance(n.position)<2?b="sphere":g.distance(h.position)<2?b="wallstart":g.distance(h.geometry.vector.clone().add(h.position))<2&&(b="wallend")),b==="sphere"&&n.position.copy(g),b==="wallstart"&&h.position.copy(g),b==="wallend"){const f=g.clone().subtract(h.position);h.geometry.vector.copy(f)}}else b=void 0;for(const g of s.objects.sort((f,c)=>f.geometry.type<c.geometry.type?1:-1)){d.stroke(n.data.isColliding?"red":"white");const f=d.map(g.position.x,0,s.dimensions.x,0,d.width),c=d.map(g.position.y,0,s.dimensions.y,d.height,0);if(g.geometry.type==="sphere"){const x=w(g.geometry.r*2);d.strokeWeight(x),d.point(f,c)}if(g.geometry.type==="line"){const x=f+d.map(g.geometry.vector.x,0,s.dimensions.x,0,d.width),S=c-d.map(g.geometry.vector.y,0,s.dimensions.y,0,d.height);d.stroke("blue"),d.strokeWeight(2),d.line(f,c,x,S)}}}};return ke(()=>{r==null||r.remove()}),[l,u,m]}class Mt extends me{constructor(e){super(),he(this,e,Nt,Lt,fe,{})}}function Yt(i){let e,t,l;return t=new Te({props:{sketch:i[0]}}),{c(){e=_("div"),oe(t.$$.fragment),this.h()},l(o){e=$(o,"DIV",{class:!0});var s=T(e);se(t.$$.fragment,s),s.forEach(p),this.h()},h(){L(e,"class","d-flex justify-content-center")},m(o,s){C(o,e,s),re(t,e,null),l=!0},p:$e,i(o){l||(le(t.$$.fragment,o),l=!0)},o(o){ie(t.$$.fragment,o),l=!1},d(o){o&&p(e),ce(t)}}}const qe=6;function Wt(i){console.clear();const e=new Pe({reporter:()=>{},enableGravity:!0});let t;const l=()=>{for(;e.objects.length;)e.objects.pop();t=k({geometry:{type:"sphere",r:5},position:new a(20,50),velocity:new a(Math.random()*5-2.5,Math.random()*20)}),e.addObject(t);const u=k({geometry:{type:"line",vector:new a(100,0)},position:new a(0,2),fixed:!0});e.addObject(u);const r=k({geometry:{type:"line",vector:new a(100,0)},position:new a(0,98),fixed:!0});e.addObject(r);const m=k({geometry:{type:"line",vector:new a(0,100)},position:new a(2,0),fixed:!0});e.addObject(m);const d=k({geometry:{type:"line",vector:new a(0,100)},position:new a(98,0),fixed:!0});e.addObject(d);const w=k({geometry:{type:"line",vector:new a(50,50)},position:new a(20,10),fixed:!0});e.addObject(w)},o=u=>typeof u=="number"?u*qe:u.clone().multiplyScalar(qe),s=u=>typeof u=="number"?u/qe:u.clone().divideScalar(qe);let n;const h=u=>{u.setup=()=>{n=u;const m=o(e.dimensions);u.createCanvas(m.x,m.y),u.background(0),u.fill(255),u.stroke(255),l()},u.draw=()=>{if(u.background(0),u.mouseIsPressed){t.fixed=!0;const m=s(new a(u.mouseX,u.height-u.mouseY));t.position.copy(m)}else t.fixed=!1;e.step(),Le(u,e)};let r;u.mousePressed=()=>{r=s(new a(u.mouseX,u.height-u.mouseY))},u.mouseReleased=()=>{const m=s(new a(u.mouseX,u.height-u.mouseY)),d=r.subtract(m);t.position.copy(m),t.velocity.copy(d)}};return ke(()=>{n==null||n.remove()}),[h]}class At extends me{constructor(e){super(),he(this,e,Wt,Yt,fe,{})}}function Ut(i){let e,t,l,o,s,n,h,u="Gravity",r,m,d,w="Toggle",v,b,g;return t=new Te({props:{sketch:i[1]}}),{c(){e=_("div"),oe(t.$$.fragment),l=E(),o=_("table"),s=_("tbody"),n=_("tr"),h=_("th"),h.textContent=u,r=E(),m=_("td"),d=_("button"),d.textContent=w,this.h()},l(f){e=$(f,"DIV",{class:!0});var c=T(e);se(t.$$.fragment,c),c.forEach(p),l=j(f),o=$(f,"TABLE",{});var x=T(o);s=$(x,"TBODY",{});var S=T(s);n=$(S,"TR",{});var O=T(n);h=$(O,"TH",{"data-svelte-h":!0}),H(h)!=="svelte-vy75us"&&(h.textContent=u),r=j(O),m=$(O,"TD",{});var F=T(m);d=$(F,"BUTTON",{"data-svelte-h":!0}),H(d)!=="svelte-18lc94l"&&(d.textContent=w),F.forEach(p),O.forEach(p),S.forEach(p),x.forEach(p),this.h()},h(){L(e,"class","d-flex justify-content-center")},m(f,c){C(f,e,c),re(t,e,null),C(f,l,c),C(f,o,c),y(o,s),y(s,n),y(n,h),y(n,r),y(n,m),y(m,d),v=!0,b||(g=G(d,"click",i[2]),b=!0)},p:$e,i(f){v||(le(t.$$.fragment,f),v=!0)},o(f){ie(t.$$.fragment,f),v=!1},d(f){f&&(p(e),p(l),p(o)),ce(t),b=!1,g()}}}const Qe=6;function Rt(i){console.clear();const e=new Pe({reporter:()=>{},enableGravity:!0});let t;const l=()=>{for(;e.objects.length;)e.objects.pop();const r=k({geometry:{type:"line",vector:new a(100,0)},position:new a(0,0),fixed:!0});e.addObject(r);const m=k({geometry:{type:"line",vector:new a(100,0)},position:new a(0,100),fixed:!0});e.addObject(m);const d=k({geometry:{type:"line",vector:new a(0,100)},position:new a(0,0),fixed:!0});e.addObject(d);const w=k({geometry:{type:"line",vector:new a(0,100)},position:new a(100,0),fixed:!0});e.addObject(w);const v=k({geometry:{type:"line",vector:new a(50,50)},position:new a(20,10),fixed:!0});e.addObject(v),t=k({geometry:{type:"sphere",r:2},position:new a(20,50),velocity:new a(Math.random()*5-2.5,Math.random()*20)}),e.addObject(t)},o=r=>typeof r=="number"?r*Qe:r.clone().multiplyScalar(Qe),s=r=>typeof r=="number"?r/Qe:r.clone().divideScalar(Qe);let n;const h=r=>{r.setup=()=>{n=r;const d=o(e.dimensions);r.createCanvas(d.x,d.y),r.background(0),r.fill(255),r.stroke(255),l()},r.draw=()=>{if(r.background(0),Re(r)){t.fixed=!0;const d=s(new a(r.mouseX,r.height-r.mouseY));t.position.copy(d)}else t.fixed=!1;e.step(),Le(r,e)};let m;r.mousePressed=()=>{Ie(r)&&(m=s(new a(r.mouseX,r.height-r.mouseY)))},r.mouseReleased=()=>{if(!Ie(r))return;const d=s(new a(r.mouseX,r.height-r.mouseY)),w=m.subtract(d);t.position.copy(d),t.velocity.copy(w)}};return ke(()=>{n==null||n.remove()}),[e,h,()=>e.toggleGravity()]}class Xt extends me{constructor(e){super(),he(this,e,Rt,Ut,fe,{})}}const Gt=()=>{const i=[],e=k({geometry:{type:"line",vector:new a(15,0)},position:new a(0,0),fixed:!0});i.push(e);const t=k({geometry:{type:"line",vector:new a(0,100)},position:new a(0,0),fixed:!0});i.push(t);const l=k({geometry:{type:"line",vector:new a(0,100)},position:new a(15,0),fixed:!0});i.push(l);const o=k({geometry:{type:"line",vector:new a(3,-3)},position:new a(3.5,8),fixed:!0});i.push(o);const s=k({geometry:{type:"line",vector:new a(3,3)},position:new a(3.5,5),fixed:!0});i.push(s);const n=k({geometry:{type:"line",vector:new a(6,0)},position:new a(2,2),fixed:!0});i.push(n);const h=k({geometry:{type:"line",vector:new a(4,0)},position:new a(3,2.5),fixed:!0});i.push(h);const u=k({geometry:{type:"line",vector:new a(2,0)},position:new a(4,3),fixed:!0});i.push(u);const r=k({geometry:{type:"line",vector:new a(.6,0)},position:new a(4.7,3.5),fixed:!0});i.push(r);const m=k({geometry:{type:"line",vector:new a(1,0)},position:new a(10,10.1),fixed:!0});i.push(m);const d=k({geometry:{type:"line",vector:new a(0,-4)},position:new a(11,10),fixed:!0});i.push(d);const w=k({geometry:{type:"line",vector:new a(0,-4)},position:new a(11.5,10),fixed:!0});i.push(w);const v=k({geometry:{type:"line",vector:new a(0,-4)},position:new a(12,10),fixed:!0});i.push(v);const b=k({geometry:{type:"line",vector:new a(1,0)},position:new a(12,10.1),fixed:!0});i.push(b);for(let f=.2;f<.5;f+=.1)for(let c=0;c<10;c++){const x=k({geometry:{type:"line",vector:new a(0,3)},position:new a(9+c*f,1),fixed:!0});i.push(x)}const g=k({geometry:{type:"sphere",r:.1},position:new a(5,10),velocity:new a(0,0)});return i.push(g),{objects:i,sphere:g}};function Ht(i){let e,t,l,o,s,n=i[0]?"Disable":"Enable",h,u,r,m,d=i[1]?"Play":"Pause",w,v,b,g="Reset",f,c,x,S,O,F,N,W,Q,Y="Simulation time/Frame duration",M,D,B=i[2].t+"",A,ee,te,R=i[2].frameTime+"",z,pe,V,U,P="Sphere position",X,Z,ge=i[2].spherePos.x.toFixed(2)+"",we,ae,de,be=i[2].spherePos.y.toFixed(2)+"",Ce,De,Se,Be,ot="Sphere velocity",Ke,Ne,Me=i[2].sphereVel.x.toFixed(2)+"",Xe,Ze,Ye,We=i[2].sphereVel.y.toFixed(2)+"",Ge,ye,et,st;return t=new Te({props:{sketch:i[5]}}),c=new vt({props:{onShoot:i[6]}}),S=new nt({props:{world:i[3]}}),{c(){e=_("div"),oe(t.$$.fragment),l=E(),o=_("div"),s=_("button"),h=J(n),u=J(" pause on collision"),r=E(),m=_("button"),w=J(d),v=E(),b=_("button"),b.textContent=g,f=E(),oe(c.$$.fragment),x=E(),oe(S.$$.fragment),O=E(),F=_("table"),N=_("tbody"),W=_("tr"),Q=_("th"),Q.textContent=Y,M=E(),D=_("td"),A=J(B),ee=E(),te=_("td"),z=J(R),pe=E(),V=_("tr"),U=_("th"),U.textContent=P,X=E(),Z=_("td"),we=J(ge),ae=E(),de=_("td"),Ce=J(be),De=E(),Se=_("tr"),Be=_("th"),Be.textContent=ot,Ke=E(),Ne=_("td"),Xe=J(Me),Ze=E(),Ye=_("td"),Ge=J(We),this.h()},l(I){e=$(I,"DIV",{class:!0});var q=T(e);se(t.$$.fragment,q),q.forEach(p),l=j(I),o=$(I,"DIV",{});var Ee=T(o);s=$(Ee,"BUTTON",{});var tt=T(s);h=K(tt,n),u=K(tt," pause on collision"),tt.forEach(p),r=j(Ee),m=$(Ee,"BUTTON",{});var rt=T(m);w=K(rt,d),rt.forEach(p),v=j(Ee),b=$(Ee,"BUTTON",{"data-svelte-h":!0}),H(b)!=="svelte-tlxueg"&&(b.textContent=g),Ee.forEach(p),f=j(I),se(c.$$.fragment,I),x=j(I),se(S.$$.fragment,I),O=j(I),F=$(I,"TABLE",{});var lt=T(F);N=$(lt,"TBODY",{});var Ae=T(N);W=$(Ae,"TR",{});var Ve=T(W);Q=$(Ve,"TH",{"data-svelte-h":!0}),H(Q)!=="svelte-rirgm4"&&(Q.textContent=Y),M=j(Ve),D=$(Ve,"TD",{});var it=T(D);A=K(it,B),it.forEach(p),ee=j(Ve),te=$(Ve,"TD",{});var ct=T(te);z=K(ct,R),ct.forEach(p),Ve.forEach(p),pe=j(Ae),V=$(Ae,"TR",{});var Oe=T(V);U=$(Oe,"TH",{"data-svelte-h":!0}),H(U)!=="svelte-1y1nif6"&&(U.textContent=P),X=j(Oe),Z=$(Oe,"TD",{});var at=T(Z);we=K(at,ge),at.forEach(p),ae=j(Oe),de=$(Oe,"TD",{});var ut=T(de);Ce=K(ut,be),ut.forEach(p),De=j(Oe),Oe.forEach(p),Se=$(Ae,"TR",{});var Fe=T(Se);Be=$(Fe,"TH",{"data-svelte-h":!0}),H(Be)!=="svelte-1uw1fs2"&&(Be.textContent=ot),Ke=j(Fe),Ne=$(Fe,"TD",{});var dt=T(Ne);Xe=K(dt,Me),dt.forEach(p),Ze=j(Fe),Ye=$(Fe,"TD",{});var ft=T(Ye);Ge=K(ft,We),ft.forEach(p),Fe.forEach(p),Ae.forEach(p),lt.forEach(p),this.h()},h(){L(e,"class","d-flex justify-content-center")},m(I,q){C(I,e,q),re(t,e,null),C(I,l,q),C(I,o,q),y(o,s),y(s,h),y(s,u),y(o,r),y(o,m),y(m,w),y(o,v),y(o,b),C(I,f,q),re(c,I,q),C(I,x,q),re(S,I,q),C(I,O,q),C(I,F,q),y(F,N),y(N,W),y(W,Q),y(W,M),y(W,D),y(D,A),y(W,ee),y(W,te),y(te,z),y(N,pe),y(N,V),y(V,U),y(V,X),y(V,Z),y(Z,we),y(V,ae),y(V,de),y(de,Ce),y(V,De),y(N,Se),y(Se,Be),y(Se,Ke),y(Se,Ne),y(Ne,Xe),y(Se,Ze),y(Se,Ye),y(Ye,Ge),ye=!0,et||(st=[G(s,"click",i[7]),G(m,"click",i[8]),G(b,"click",i[4])],et=!0)},p(I,[q]){(!ye||q&1)&&n!==(n=I[0]?"Disable":"Enable")&&ne(h,n),(!ye||q&2)&&d!==(d=I[1]?"Play":"Pause")&&ne(w,d);const Ee={};q&8&&(Ee.world=I[3]),S.$set(Ee),(!ye||q&4)&&B!==(B=I[2].t+"")&&ne(A,B),(!ye||q&4)&&R!==(R=I[2].frameTime+"")&&ne(z,R),(!ye||q&4)&&ge!==(ge=I[2].spherePos.x.toFixed(2)+"")&&ne(we,ge),(!ye||q&4)&&be!==(be=I[2].spherePos.y.toFixed(2)+"")&&ne(Ce,be),(!ye||q&4)&&Me!==(Me=I[2].sphereVel.x.toFixed(2)+"")&&ne(Xe,Me),(!ye||q&4)&&We!==(We=I[2].sphereVel.y.toFixed(2)+"")&&ne(Ge,We)},i(I){ye||(le(t.$$.fragment,I),le(c.$$.fragment,I),le(S.$$.fragment,I),ye=!0)},o(I){ie(t.$$.fragment,I),ie(c.$$.fragment,I),ie(S.$$.fragment,I),ye=!1},d(I){I&&(p(e),p(l),p(o),p(f),p(x),p(O),p(F)),ce(t),ce(c,I),ce(S,I),et=!1,Ue(st)}}}const Je=60;function zt(i,e,t){console.clear();let l=!1,o=!1,s={t:"0",frameTime:"0",spherePos:new a(0,0),sphereVel:new a(0,0),ballIsColliding:!1},n,h;const u=()=>{t(3,n=new Pe({dimensions:new a(15,15),reporter:c=>{var x;t(2,s.t=(x=c==null?void 0:c.t)==null?void 0:x.toFixed(1),s),s.spherePos.copy(h.position).unfloat(),s.sphereVel.copy(h.velocity).unfloat(),t(2,s.frameTime=c.frameTime.toFixed(2),s),t(2,s),t(2,s.ballIsColliding=h.data.isColliding,s),l&&h.data.isColliding&&!o&&t(1,o=!0)},enableGravity:!0}));const f=Gt();h=f.sphere;for(const c of f.objects)n.addObject(c)},r=f=>typeof f=="number"?f*Je:f.clone().multiplyScalar(Je),m=f=>typeof f=="number"?f/Je:f.clone().divideScalar(Je);let d;const w=f=>{f.setup=()=>{d=f,u();const S=r(n.dimensions);f.createCanvas(S.x,S.y),f.background(0),f.fill(255),f.stroke(255),u()},f.draw=()=>{f.background(0),Re(f)?h.fixed=!0:h.fixed=!1,o||n.step(),Le(f,n),x(f)};let c;f.mousePressed=()=>{Ie(f)&&(c=m(new a(f.mouseX,f.height-f.mouseY)),h.position.copy(c))},f.mouseReleased=()=>{if(!Ie(f)||!c)return;const S=m(new a(f.mouseX,f.height-f.mouseY)),O=c.subtract(S).multiplyScalar(3);c=void 0,h.velocity.copy(O)};const x=S=>{if(!c)return;S.stroke("blue"),S.strokeWeight(2);const O=r(c);S.line(O.x,S.height-O.y,S.mouseX,S.mouseY)}},v=f=>{f.multiplyScalar(1e4),n.applyForce(h,f)};return ke(()=>{d==null||d.remove()}),[l,o,s,n,u,w,v,()=>t(0,l=!l),()=>t(1,o=!o)]}let qt=class extends me{constructor(e){super(),he(this,e,zt,Ht,fe,{})}};const Qt=()=>{const i=[],e=k({geometry:{type:"line",vector:new a(15,0)},position:new a(0,0),fixed:!0});i.push(e);const t=k({geometry:{type:"line",vector:new a(0,100)},position:new a(0,0),fixed:!0});i.push(t);const l=k({geometry:{type:"line",vector:new a(0,100)},position:new a(15,0),fixed:!0});i.push(l);const o=k({geometry:{type:"line",vector:new a(3,-3)},position:new a(3.5,8),fixed:!0});i.push(o);const s=k({geometry:{type:"line",vector:new a(3,3)},position:new a(3.5,5),fixed:!0});i.push(s);const n=k({geometry:{type:"line",vector:new a(6,0)},position:new a(2,2),fixed:!0});i.push(n);const h=k({geometry:{type:"line",vector:new a(4,0)},position:new a(3,2.5),fixed:!0});i.push(h);const u=k({geometry:{type:"line",vector:new a(2,0)},position:new a(4,3),fixed:!0});i.push(u);const r=k({geometry:{type:"line",vector:new a(.6,0)},position:new a(4.7,3.5),fixed:!0});i.push(r);const m=k({geometry:{type:"line",vector:new a(1,0)},position:new a(10,10.1),fixed:!0});i.push(m);const d=k({geometry:{type:"line",vector:new a(0,-4)},position:new a(11,10),fixed:!0});i.push(d);const w=k({geometry:{type:"line",vector:new a(0,-4)},position:new a(11.5,10),fixed:!0});i.push(w);const v=k({geometry:{type:"line",vector:new a(0,-4)},position:new a(12,10),fixed:!0});i.push(v);const b=k({geometry:{type:"line",vector:new a(1,0)},position:new a(12,10.1),fixed:!0});i.push(b);for(let g=.2;g<.5;g+=.1)for(let f=0;f<10;f++){const c=k({geometry:{type:"line",vector:new a(0,3)},position:new a(9+f*g,1),fixed:!0});i.push(c)}return{objects:i}};function Jt(i){let e,t,l,o,s,n=i[0]?"Disable":"Enable",h,u,r,m,d=i[1]?"Play":"Pause",w,v,b,g="Reset",f,c,x,S,O,F,N,W="Simulation time/Frame duration",Q,Y,M=i[2].t+"",D,B,A,ee=i[2].frameTime+"",te,R,z,pe;return t=new Te({props:{sketch:i[5]}}),c=new nt({props:{world:i[3]}}),{c(){e=_("div"),oe(t.$$.fragment),l=E(),o=_("div"),s=_("button"),h=J(n),u=J(" pause on collision"),r=E(),m=_("button"),w=J(d),v=E(),b=_("button"),b.textContent=g,f=E(),oe(c.$$.fragment),x=E(),S=_("table"),O=_("tbody"),F=_("tr"),N=_("th"),N.textContent=W,Q=E(),Y=_("td"),D=J(M),B=E(),A=_("td"),te=J(ee),this.h()},l(V){e=$(V,"DIV",{class:!0});var U=T(e);se(t.$$.fragment,U),U.forEach(p),l=j(V),o=$(V,"DIV",{});var P=T(o);s=$(P,"BUTTON",{});var X=T(s);h=K(X,n),u=K(X," pause on collision"),X.forEach(p),r=j(P),m=$(P,"BUTTON",{});var Z=T(m);w=K(Z,d),Z.forEach(p),v=j(P),b=$(P,"BUTTON",{"data-svelte-h":!0}),H(b)!=="svelte-tlxueg"&&(b.textContent=g),P.forEach(p),f=j(V),se(c.$$.fragment,V),x=j(V),S=$(V,"TABLE",{});var ge=T(S);O=$(ge,"TBODY",{});var we=T(O);F=$(we,"TR",{});var ae=T(F);N=$(ae,"TH",{"data-svelte-h":!0}),H(N)!=="svelte-rirgm4"&&(N.textContent=W),Q=j(ae),Y=$(ae,"TD",{});var de=T(Y);D=K(de,M),de.forEach(p),B=j(ae),A=$(ae,"TD",{});var be=T(A);te=K(be,ee),be.forEach(p),ae.forEach(p),we.forEach(p),ge.forEach(p),this.h()},h(){L(e,"class","d-flex justify-content-center")},m(V,U){C(V,e,U),re(t,e,null),C(V,l,U),C(V,o,U),y(o,s),y(s,h),y(s,u),y(o,r),y(o,m),y(m,w),y(o,v),y(o,b),C(V,f,U),re(c,V,U),C(V,x,U),C(V,S,U),y(S,O),y(O,F),y(F,N),y(F,Q),y(F,Y),y(Y,D),y(F,B),y(F,A),y(A,te),R=!0,z||(pe=[G(s,"click",i[6]),G(m,"click",i[7]),G(b,"click",i[4])],z=!0)},p(V,[U]){(!R||U&1)&&n!==(n=V[0]?"Disable":"Enable")&&ne(h,n),(!R||U&2)&&d!==(d=V[1]?"Play":"Pause")&&ne(w,d);const P={};U&8&&(P.world=V[3]),c.$set(P),(!R||U&4)&&M!==(M=V[2].t+"")&&ne(D,M),(!R||U&4)&&ee!==(ee=V[2].frameTime+"")&&ne(te,ee)},i(V){R||(le(t.$$.fragment,V),le(c.$$.fragment,V),R=!0)},o(V){ie(t.$$.fragment,V),ie(c.$$.fragment,V),R=!1},d(V){V&&(p(e),p(l),p(o),p(f),p(x),p(S)),ce(t),ce(c,V),z=!1,Ue(pe)}}}const pt=60;function Kt(i,e,t){console.clear();let l=!1,o=!1,s={t:"0",frameTime:"0"},n;const h=()=>{clearInterval(d),d=setInterval(u,100),t(3,n=new Pe({dimensions:new a(15,15),reporter:f=>{var c;t(2,s.t=(c=f==null?void 0:f.t)==null?void 0:c.toFixed(1),s),t(2,s.frameTime=f.frameTime.toFixed(2),s),t(2,s)},enableGravity:!0}));const g=Qt();for(const f of g.objects)n.addObject(f)},u=()=>{console.log("add ball");const g=Math.random()*n.dimensions.x,f=Math.random()*n.dimensions.y,c=-5+Math.random()*10,x=-5+Math.random()*10,S=k({geometry:{type:"sphere",r:.1},position:new a(g,f),velocity:new a(c,x)});n.addObject(S)},r=g=>typeof g=="number"?g*pt:g.clone().multiplyScalar(pt);let m,d;const w=g=>{g.setup=()=>{m=g,h();const f=r(n.dimensions);g.createCanvas(f.x,f.y),g.background(0),g.fill(255),g.stroke(255),h()},g.draw=()=>{g.background(0),o||n.step(),Le(g,n)}};return ke(()=>{m==null||m.remove(),clearInterval(d)}),[l,o,s,n,h,w,()=>t(0,l=!l),()=>t(1,o=!o)]}class Zt extends me{constructor(e){super(),he(this,e,Kt,Jt,fe,{})}}function en(i){let e,t,l;return t=new Te({props:{sketch:i[0]}}),{c(){e=_("div"),oe(t.$$.fragment),this.h()},l(o){e=$(o,"DIV",{class:!0});var s=T(e);se(t.$$.fragment,s),s.forEach(p),this.h()},h(){L(e,"class","d-flex justify-content-center")},m(o,s){C(o,e,s),re(t,e,null),l=!0},p:$e,i(o){l||(le(t.$$.fragment,o),l=!0)},o(o){ie(t.$$.fragment,o),l=!1},d(o){o&&p(e),ce(t)}}}const je=6;function tn(i){console.clear();let e;const t=k({geometry:{type:"sphere",r:10},position:new a(30,50),velocity:new a(15,15)}),l=k({geometry:{type:"line",vector:new a(80,0)},position:new a(10,70)}),o=new wt,s=n=>{const h=new a(100,100),u=ue(h,je);n.setup=()=>{e=n,n.createCanvas(u.x,u.y),n.noFill()};let r;n.draw=()=>{if(n.background(0),!Re(n))r=void 0;else{const c=yt(new a(n.mouseX,n.height-n.mouseY),je);if(r||(c.distance(t.position)<=t.geometry.r?r="sphere":c.distance(t.position.clone().add(t.velocity))<=6?r="spherevelocity":c.distance(l.position)<=6?r="linestart":c.distance(l.geometry.vector.clone().add(l.position))<=6&&(r="lineend")),r==="sphere")t.position.copy(c);else if(r==="spherevelocity"){const x=c.clone().subtract(t.position);t.velocity.copy(x)}else if(r==="linestart")l.position.copy(c);else if(r==="lineend"){const x=c.clone().subtract(l.position);l.geometry.vector.copy(x)}}const{intersection:m,bouncedVelocity:d}=o.apply(l,t);for(let c=0;c<10;c++){const{positionCorrection:x}=o.apply(l,t);x&&(t.position.add(x.multiplyScalar(.5)),l.position.subtract(x.multiplyScalar(.5)))}n.stroke(255),n.noFill();const w=ue(t.position,je);n.circle(w.x,n.height-w.y,2*t.geometry.r*je),n.stroke(255);const v=ue(t.velocity,je);n.line(w.x,n.height-w.y,w.x+v.x,n.height-(w.y+v.y)),n.stroke(255);const{x:b,y:g}=ue(l.position,je),f=ue(l.geometry.vector,je);if(n.line(b,n.height-g,b+f.x,n.height-(g+f.y)),m){n.stroke("#54d7ff"),n.fill("#54d7ff");const c=ue(m,je);n.circle(c.x,n.height-c.y,5)}if(d){n.stroke("green"),n.fill("green");const c=ue(d,je);n.line(w.x,n.height-w.y,w.x+c.x,n.height-(w.y+c.y))}}};return ke(()=>{e==null||e.remove()}),[s]}class nn extends me{constructor(e){super(),he(this,e,tn,en,fe,{})}}function on(i){let e,t,l;return t=new Te({props:{sketch:i[0]}}),{c(){e=_("div"),oe(t.$$.fragment),this.h()},l(o){e=$(o,"DIV",{class:!0});var s=T(e);se(t.$$.fragment,s),s.forEach(p),this.h()},h(){L(e,"class","d-flex justify-content-center")},m(o,s){C(o,e,s),re(t,e,null),l=!0},p:$e,i(o){l||(le(t.$$.fragment,o),l=!0)},o(o){ie(t.$$.fragment,o),l=!1},d(o){o&&p(e),ce(t)}}}const _e=6;function sn(i){console.clear();let e;const t=k({geometry:{type:"sphere",r:10},position:new a(30,50),velocity:new a(15,15)}),l=k({geometry:{type:"sphere",r:10},position:new a(70,50),velocity:new a(0,45)}),o=new _t,s=n=>{const h=new a(100,100),u=ue(h,_e);n.setup=()=>{e=n,n.createCanvas(u.x,u.y),n.noFill()};let r;n.draw=()=>{if(n.background(0),!Re(n))r=void 0;else{const f=yt(new a(n.mouseX,n.height-n.mouseY),_e);if(r||(f.distance(t.position)<=t.geometry.r?r="sphere":f.distance(t.position.clone().add(t.velocity))<=6?r="spherevelocity":f.distance(l.position)<=l.geometry.r?r="sphere2":f.distance(l.position.clone().add(l.velocity))<=6&&(r="sphere2velocity")),r==="sphere")t.position.copy(f);else if(r==="spherevelocity"){const c=f.clone().subtract(t.position);t.velocity.copy(c)}else if(r==="sphere2")l.position.copy(f);else if(r==="sphere2velocity"){const c=f.clone().subtract(l.position);l.velocity.copy(c)}}const{intersection:m,bouncedVelocity:d}=o.apply(t,l);for(let f=0;f<10;f++){const{positionCorrection:c}=o.apply(t,l);c&&(t.position.add(c.multiplyScalar(.5)),l.position.subtract(c.multiplyScalar(.5)))}n.stroke(255),n.noFill();const w=ue(t.position,_e);n.circle(w.x,n.height-w.y,2*t.geometry.r*_e),n.stroke(255);const v=ue(t.velocity,_e);n.line(w.x,n.height-w.y,w.x+v.x,n.height-(w.y+v.y)),n.stroke(255),n.noFill();const b=ue(l.position,_e);n.circle(b.x,n.height-b.y,2*l.geometry.r*_e),n.stroke(255);const g=ue(l.velocity,_e);if(n.line(b.x,n.height-b.y,b.x+g.x,n.height-(b.y+g.y)),m){n.stroke("#54d7ff"),n.fill("#54d7ff");const f=ue(m,_e);n.circle(f.x,n.height-f.y,5)}if(d){n.stroke("green"),n.fill("green");const f=ue(d,_e);n.line(w.x,n.height-w.y,w.x+f.x,n.height-(w.y+f.y))}}};return ke(()=>{e==null||e.remove()}),[s]}class rn extends me{constructor(e){super(),he(this,e,sn,on,fe,{})}}function ln(i){let e,t="<span>This page is a list of engine tests. They use the actual engine and allow me to setup different situations and check manually for regressions and bugs.</span> <br/> <span>Use the selection menu to see the different pages</span>",l,o,s,n,h;return n=new gt({props:{tabs:i[0]}}),{c(){e=_("div"),e.innerHTML=t,l=E(),o=_("br"),s=E(),oe(n.$$.fragment)},l(u){e=$(u,"DIV",{"data-svelte-h":!0}),H(e)!=="svelte-11mzr87"&&(e.innerHTML=t),l=j(u),o=$(u,"BR",{}),s=j(u),se(n.$$.fragment,u)},m(u,r){C(u,e,r),C(u,l,r),C(u,o,r),C(u,s,r),re(n,u,r),h=!0},p:$e,i(u){h||(le(n.$$.fragment,u),h=!0)},o(u){ie(n.$$.fragment,u),h=!1},d(u){u&&(p(e),p(l),p(o),p(s)),ce(n,u)}}}function cn(i){return[[{label:"Fireworks",value:Tt},{label:"Ball pool",value:Bt},{label:"Sphere Sphere Collider",value:rn},{label:"Line Sphere Collider",value:nn},{label:"Perfs - Multiple balls",value:Zt},{label:"Playground - Engine settings",value:qt},{label:"Dynamics + collisions - 1",value:Xt},{label:"Dynamics + collisions - 2",value:At},{label:"Sphere Line - pull apart",value:Mt},{label:"One ball bounce",value:It}]]}class vn extends me{constructor(e){super(),he(this,e,cn,ln,fe,{})}}export{vn as component};
