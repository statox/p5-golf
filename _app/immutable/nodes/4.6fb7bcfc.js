var vt=Object.defineProperty;var gt=(l,e,t)=>e in l?vt(l,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):l[e]=t;var We=(l,e,t)=>(gt(l,typeof e!="symbol"?e+"":e,t),t);import{s as ae,f as x,a as j,l as H,g as _,h as S,d as v,c as P,m as G,u as q,j as L,i as C,y as b,L as z,n as Q,M as $e,z as ve,e as ft,P as _e,Q as De,O as qe}from"../chunks/scheduler.32ebed32.js";import{S as ue,i as de,b as oe,d as se,m as ie,a as re,t as le,e as ce}from"../chunks/index.c25c2528.js";import{P as ke,c as $,V as a,d as ze,m as Qe,a as Ge,w as Z,s as yt,C as bt}from"../chunks/PhysicObject.d0894205.js";import{W as Ve,L as wt}from"../chunks/World.2902d636.js";function xt(l){let e,t,i,s,o=l[0][l[0].length-1]+"",n,m,c,r="New ball",h,d,w;return t=new ke({props:{sketch:l[2]}}),{c(){e=x("div"),oe(t.$$.fragment),i=j(),s=x("p"),n=H(o),m=j(),c=x("button"),c.textContent=r,this.h()},l(p){e=_(p,"DIV",{class:!0});var g=S(e);se(t.$$.fragment,g),g.forEach(v),i=P(p),s=_(p,"P",{});var y=S(s);n=G(y,o),y.forEach(v),m=P(p),c=_(p,"BUTTON",{"data-svelte-h":!0}),q(c)!=="svelte-1jwbm46"&&(c.textContent=r),this.h()},h(){L(e,"class","d-flex justify-content-center")},m(p,g){C(p,e,g),ie(t,e,null),C(p,i,g),C(p,s,g),b(s,n),C(p,m,g),C(p,c,g),h=!0,d||(w=z(c,"click",l[1]),d=!0)},p(p,[g]){(!h||g&1)&&o!==(o=p[0][p[0].length-1]+"")&&Q(n,o)},i(p){h||(re(t.$$.fragment,p),h=!0)},o(p){le(t.$$.fragment,p),h=!1},d(p){p&&(v(e),v(i),v(s),v(m),v(c)),ce(t),d=!1,w()}}}function _t(l,e,t){console.clear();let i=[];const s=r=>{const h=r.objects[r.objects.length-1],d=h.position.clone().toFixed(2),w=h.velocity.clone().toFixed(2);i.push(`${r.t.toFixed(2)} - pos: ${d} - vel: ${w}`),i.length>50&&i.shift(),t(0,i)},o=new Ve({reporter:s,enableGravity:!0}),n=()=>{for(;o.objects.length;)o.objects.pop();const r=$({geometry:{type:"line",vector:new a(100,0)},position:new a(0,0),fixed:!0});o.addObject(r);for(let h=0;h<1;h++){const d=$({geometry:{type:"sphere",r:5},position:new a(20,50),velocity:new a(Math.random()*5-2.5,Math.random()*20)});o.addObject(d)}};let m;const c=r=>{r.setup=()=>{m=r,r.createCanvas(900,600),r.background(0),r.fill(255),r.stroke(255),n()},r.draw=()=>{r.background(0),o.step();for(const h of o.objects){const d=r.map(h.position.x,0,o.dimensions.x,0,r.width),w=r.map(h.position.y,0,o.dimensions.y,r.height,0);if(h.geometry.type==="sphere"&&(r.strokeWeight(h.geometry.r*2),r.point(d,w)),h.geometry.type==="line"){const p=d+r.map(h.geometry.vector.x,0,o.dimensions.x,0,r.width),g=w+r.map(h.geometry.vector.y,0,o.dimensions.y,0,r.height);r.strokeWeight(2),r.line(d,w,p,g)}}}};return $e(()=>{m==null||m.remove()}),[i,n,c]}class $t extends ue{constructor(e){super(),de(this,e,_t,xt,ae,{})}}function kt(l){let e,t,i,s,o=l[0][l[0].length-1]+"",n,m,c,r="New ball",h,d,w;return t=new ke({props:{sketch:l[2]}}),{c(){e=x("div"),oe(t.$$.fragment),i=j(),s=x("p"),n=H(o),m=j(),c=x("button"),c.textContent=r,this.h()},l(p){e=_(p,"DIV",{class:!0});var g=S(e);se(t.$$.fragment,g),g.forEach(v),i=P(p),s=_(p,"P",{});var y=S(s);n=G(y,o),y.forEach(v),m=P(p),c=_(p,"BUTTON",{"data-svelte-h":!0}),q(c)!=="svelte-1jwbm46"&&(c.textContent=r),this.h()},h(){L(e,"class","d-flex justify-content-center")},m(p,g){C(p,e,g),ie(t,e,null),C(p,i,g),C(p,s,g),b(s,n),C(p,m,g),C(p,c,g),h=!0,d||(w=z(c,"click",l[1]),d=!0)},p(p,[g]){(!h||g&1)&&o!==(o=p[0][p[0].length-1]+"")&&Q(n,o)},i(p){h||(re(t.$$.fragment,p),h=!0)},o(p){le(t.$$.fragment,p),h=!1},d(p){p&&(v(e),v(i),v(s),v(m),v(c)),ce(t),d=!1,w()}}}const Ye=6;function Tt(l,e,t){console.clear();let i=[];const s=d=>{const w=d.objects[d.objects.length-1],p=w.position.clone().toFixed(2),g=w.velocity.clone().toFixed(2);i.push(`${d.t.toFixed(2)} - pos: ${p} - vel: ${g}`),i.length>50&&i.shift(),t(0,i)},o=new Ve({reporter:s,enableGravity:!0});let n,m;const c=()=>{for(;o.objects.length;)o.objects.pop();m=$({geometry:{type:"line",vector:new a(40,40)},position:new a(30,30),fixed:!0}),o.addObject(m),n=$({geometry:{type:"sphere",r:10},position:new a(20,50),velocity:new a(2.5,2.5),fixed:!0}),o.addObject(n)};let r;const h=d=>{const w=y=>typeof y=="number"?y*Ye:y.clone().multiplyScalar(Ye),p=y=>typeof y=="number"?y/Ye:y.clone().divideScalar(Ye);d.setup=()=>{r=d;const y=w(o.dimensions);d.createCanvas(y.x,y.y),d.background(0),d.fill(255),d.stroke(255),c()};let g;d.draw=()=>{if(d.background(0),o.step(),d.mouseIsPressed){const y=p(new a(d.mouseX,d.height-d.mouseY));if(g||(y.distance(n.position)<2?g="sphere":y.distance(m.position)<2?g="wallstart":y.distance(m.geometry.vector.clone().add(m.position))<2&&(g="wallend")),g==="sphere"&&n.position.copy(y),g==="wallstart"&&m.position.copy(y),g==="wallend"){const u=y.clone().subtract(m.position);m.geometry.vector.copy(u)}}else g=void 0;for(const y of o.objects.sort((u,f)=>u.geometry.type<f.geometry.type?1:-1)){d.stroke(n.data.isColliding?"red":"white");const u=d.map(y.position.x,0,o.dimensions.x,0,d.width),f=d.map(y.position.y,0,o.dimensions.y,d.height,0);if(y.geometry.type==="sphere"){const k=w(y.geometry.r*2);d.strokeWeight(k),d.point(u,f)}if(y.geometry.type==="line"){const k=u+d.map(y.geometry.vector.x,0,o.dimensions.x,0,d.width),E=f-d.map(y.geometry.vector.y,0,o.dimensions.y,0,d.height);d.stroke("blue"),d.strokeWeight(2),d.line(u,f,k,E)}}}};return $e(()=>{r==null||r.remove()}),[i,c,h]}class St extends ue{constructor(e){super(),de(this,e,Tt,kt,ae,{})}}function Ct(l){let e,t,i;return t=new ke({props:{sketch:l[0]}}),{c(){e=x("div"),oe(t.$$.fragment),this.h()},l(s){e=_(s,"DIV",{class:!0});var o=S(e);se(t.$$.fragment,o),o.forEach(v),this.h()},h(){L(e,"class","d-flex justify-content-center")},m(s,o){C(s,e,o),ie(t,e,null),i=!0},p:ve,i(s){i||(re(t.$$.fragment,s),i=!0)},o(s){le(t.$$.fragment,s),i=!1},d(s){s&&v(e),ce(t)}}}const Re=6;function Et(l){console.clear();const e=new Ve({reporter:()=>{},enableGravity:!0});let t;const i=()=>{for(;e.objects.length;)e.objects.pop();t=$({geometry:{type:"sphere",r:5},position:new a(20,50),velocity:new a(Math.random()*5-2.5,Math.random()*20)}),e.addObject(t);const c=$({geometry:{type:"line",vector:new a(100,0)},position:new a(0,2),fixed:!0});e.addObject(c);const r=$({geometry:{type:"line",vector:new a(100,0)},position:new a(0,98),fixed:!0});e.addObject(r);const h=$({geometry:{type:"line",vector:new a(0,100)},position:new a(2,0),fixed:!0});e.addObject(h);const d=$({geometry:{type:"line",vector:new a(0,100)},position:new a(98,0),fixed:!0});e.addObject(d);const w=$({geometry:{type:"line",vector:new a(50,50)},position:new a(20,10),fixed:!0});e.addObject(w)},s=c=>typeof c=="number"?c*Re:c.clone().multiplyScalar(Re),o=c=>typeof c=="number"?c/Re:c.clone().divideScalar(Re);let n;const m=c=>{c.setup=()=>{n=c;const h=s(e.dimensions);c.createCanvas(h.x,h.y),c.background(0),c.fill(255),c.stroke(255),i()},c.draw=()=>{if(c.background(0),c.mouseIsPressed){t.fixed=!0;const h=o(new a(c.mouseX,c.height-c.mouseY));t.position.copy(h)}else t.fixed=!1;e.step(),ze(c,e)};let r;c.mousePressed=()=>{r=o(new a(c.mouseX,c.height-c.mouseY))},c.mouseReleased=()=>{const h=o(new a(c.mouseX,c.height-c.mouseY)),d=r.subtract(h);t.position.copy(h),t.velocity.copy(d)}};return $e(()=>{n==null||n.remove()}),[m]}class jt extends ue{constructor(e){super(),de(this,e,Et,Ct,ae,{})}}function Pt(l){let e,t,i,s,o,n,m,c="Gravity",r,h,d,w="Toggle",p,g,y;return t=new ke({props:{sketch:l[1]}}),{c(){e=x("div"),oe(t.$$.fragment),i=j(),s=x("table"),o=x("tbody"),n=x("tr"),m=x("th"),m.textContent=c,r=j(),h=x("td"),d=x("button"),d.textContent=w,this.h()},l(u){e=_(u,"DIV",{class:!0});var f=S(e);se(t.$$.fragment,f),f.forEach(v),i=P(u),s=_(u,"TABLE",{});var k=S(s);o=_(k,"TBODY",{});var E=S(o);n=_(E,"TR",{});var I=S(n);m=_(I,"TH",{"data-svelte-h":!0}),q(m)!=="svelte-vy75us"&&(m.textContent=c),r=P(I),h=_(I,"TD",{});var F=S(h);d=_(F,"BUTTON",{"data-svelte-h":!0}),q(d)!=="svelte-18lc94l"&&(d.textContent=w),F.forEach(v),I.forEach(v),E.forEach(v),k.forEach(v),this.h()},h(){L(e,"class","d-flex justify-content-center")},m(u,f){C(u,e,f),ie(t,e,null),C(u,i,f),C(u,s,f),b(s,o),b(o,n),b(n,m),b(n,r),b(n,h),b(h,d),p=!0,g||(y=z(d,"click",l[2]),g=!0)},p:ve,i(u){p||(re(t.$$.fragment,u),p=!0)},o(u){le(t.$$.fragment,u),p=!1},d(u){u&&(v(e),v(i),v(s)),ce(t),g=!1,y()}}}const Xe=6;function Ot(l){console.clear();const e=new Ve({reporter:()=>{},enableGravity:!0});let t;const i=()=>{for(;e.objects.length;)e.objects.pop();const r=$({geometry:{type:"line",vector:new a(100,0)},position:new a(0,0),fixed:!0});e.addObject(r);const h=$({geometry:{type:"line",vector:new a(100,0)},position:new a(0,100),fixed:!0});e.addObject(h);const d=$({geometry:{type:"line",vector:new a(0,100)},position:new a(0,0),fixed:!0});e.addObject(d);const w=$({geometry:{type:"line",vector:new a(0,100)},position:new a(100,0),fixed:!0});e.addObject(w);const p=$({geometry:{type:"line",vector:new a(50,50)},position:new a(20,10),fixed:!0});e.addObject(p),t=$({geometry:{type:"sphere",r:2},position:new a(20,50),velocity:new a(Math.random()*5-2.5,Math.random()*20)}),e.addObject(t)},s=r=>typeof r=="number"?r*Xe:r.clone().multiplyScalar(Xe),o=r=>typeof r=="number"?r/Xe:r.clone().divideScalar(Xe);let n;const m=r=>{r.setup=()=>{n=r;const d=s(e.dimensions);r.createCanvas(d.x,d.y),r.background(0),r.fill(255),r.stroke(255),i()},r.draw=()=>{if(r.background(0),Qe(r)){t.fixed=!0;const d=o(new a(r.mouseX,r.height-r.mouseY));t.position.copy(d)}else t.fixed=!1;e.step(),ze(r,e)};let h;r.mousePressed=()=>{Ge(r)&&(h=o(new a(r.mouseX,r.height-r.mouseY)))},r.mouseReleased=()=>{if(!Ge(r))return;const d=o(new a(r.mouseX,r.height-r.mouseY)),w=h.subtract(d);t.position.copy(d),t.velocity.copy(w)}};return $e(()=>{n==null||n.remove()}),[e,m,()=>e.toggleGravity()]}class Dt extends ue{constructor(e){super(),de(this,e,Ot,Pt,ae,{})}}function ht(l){let e,t,i,s,o="dt",n,m,c,r,h,d,w="drag",p,g,y,u,f,k,E="gravity enabled",I,F,B,N,X;return{c(){e=x("table"),t=x("tbody"),i=x("tr"),s=x("th"),s.textContent=o,n=j(),m=x("td"),c=x("input"),r=j(),h=x("tr"),d=x("th"),d.textContent=w,p=j(),g=x("td"),y=x("input"),u=j(),f=x("tr"),k=x("th"),k.textContent=E,I=j(),F=x("td"),B=x("input"),this.h()},l(W){e=_(W,"TABLE",{});var A=S(e);t=_(A,"TBODY",{});var T=S(t);i=_(T,"TR",{});var V=S(i);s=_(V,"TH",{"data-svelte-h":!0}),q(s)!=="svelte-16dheti"&&(s.textContent=o),n=P(V),m=_(V,"TD",{});var U=S(m);c=_(U,"INPUT",{type:!0,min:!0,max:!0,step:!0}),U.forEach(v),V.forEach(v),r=P(T),h=_(T,"TR",{});var J=S(h);d=_(J,"TH",{"data-svelte-h":!0}),q(d)!=="svelte-2hq5g"&&(d.textContent=w),p=P(J),g=_(J,"TD",{});var K=S(g);y=_(K,"INPUT",{type:!0,min:!0,max:!0,step:!0}),K.forEach(v),J.forEach(v),u=P(T),f=_(T,"TR",{});var R=S(f);k=_(R,"TH",{"data-svelte-h":!0}),q(k)!=="svelte-ic0r87"&&(k.textContent=E),I=P(R),F=_(R,"TD",{});var ee=S(F);B=_(ee,"INPUT",{type:!0}),ee.forEach(v),R.forEach(v),T.forEach(v),A.forEach(v),this.h()},h(){L(c,"type","number"),L(c,"min","0"),L(c,"max","0.5"),L(c,"step","0.001"),L(y,"type","number"),L(y,"min","0"),L(y,"max","0.01"),L(y,"step","0.001"),L(B,"type","checkbox")},m(W,A){C(W,e,A),b(e,t),b(t,i),b(i,s),b(i,n),b(i,m),b(m,c),_e(c,l[0].dt),b(t,r),b(t,h),b(h,d),b(h,p),b(h,g),b(g,y),_e(y,l[0].drag),b(t,u),b(t,f),b(f,k),b(f,I),b(f,F),b(F,B),B.checked=l[0].gravityEnabled,N||(X=[z(c,"input",l[1]),z(y,"input",l[2]),z(B,"change",l[3])],N=!0)},p(W,A){A&1&&De(c.value)!==W[0].dt&&_e(c,W[0].dt),A&1&&De(y.value)!==W[0].drag&&_e(y,W[0].drag),A&1&&(B.checked=W[0].gravityEnabled)},d(W){W&&v(e),N=!1,qe(X)}}}function Vt(l){let e,t="Engine settings",i,s,o=l[0]&&ht(l);return{c(){e=x("p"),e.textContent=t,i=j(),o&&o.c(),s=ft(),this.h()},l(n){e=_(n,"P",{class:!0,"data-svelte-h":!0}),q(e)!=="svelte-gf3gek"&&(e.textContent=t),i=P(n),o&&o.l(n),s=ft(),this.h()},h(){L(e,"class","title svelte-g74uk9")},m(n,m){C(n,e,m),C(n,i,m),o&&o.m(n,m),C(n,s,m)},p(n,[m]){n[0]?o?o.p(n,m):(o=ht(n),o.c(),o.m(s.parentNode,s)):o&&(o.d(1),o=null)},i:ve,o:ve,d(n){n&&(v(e),v(i),v(s)),o&&o.d(n)}}}function It(l,e,t){let{world:i}=e;function s(){i.dt=De(this.value),t(0,i)}function o(){i.drag=De(this.value),t(0,i)}function n(){i.gravityEnabled=this.checked,t(0,i)}return l.$$set=m=>{"world"in m&&t(0,i=m.world)},[i,s,o,n]}class pt extends ue{constructor(e){super(),de(this,e,It,Vt,ae,{world:0})}}function Ft(l){let e,t="Shooter",i,s,o,n="Angle",m,c,r,h,d,w,p,g,y="Magnitude",u,f,k,E,I,F,B,N,X="Shoot",W,A;return{c(){e=x("p"),e.textContent=t,i=j(),s=x("span"),o=x("label"),o.textContent=n,m=j(),c=x("input"),r=j(),h=H(l[0]),d=H(" deg"),w=j(),p=x("span"),g=x("label"),g.textContent=y,u=j(),f=x("input"),k=j(),E=H(l[1]),I=j(),F=x("br"),B=j(),N=x("button"),N.textContent=X,this.h()},l(T){e=_(T,"P",{class:!0,"data-svelte-h":!0}),q(e)!=="svelte-198ugk3"&&(e.textContent=t),i=P(T),s=_(T,"SPAN",{});var V=S(s);o=_(V,"LABEL",{for:!0,"data-svelte-h":!0}),q(o)!=="svelte-lab87n"&&(o.textContent=n),m=P(V),c=_(V,"INPUT",{id:!0,type:!0,min:!0,max:!0}),r=P(V),h=G(V,l[0]),d=G(V," deg"),V.forEach(v),w=P(T),p=_(T,"SPAN",{});var U=S(p);g=_(U,"LABEL",{for:!0,"data-svelte-h":!0}),q(g)!=="svelte-1vc5oxa"&&(g.textContent=y),u=P(U),f=_(U,"INPUT",{id:!0,type:!0,min:!0,max:!0,step:!0}),k=P(U),E=G(U,l[1]),U.forEach(v),I=P(T),F=_(T,"BR",{}),B=P(T),N=_(T,"BUTTON",{"data-svelte-h":!0}),q(N)!=="svelte-8jpwxr"&&(N.textContent=X),this.h()},h(){L(e,"class","title svelte-g74uk9"),L(o,"for","angleSlider"),L(c,"id","angleSlider"),L(c,"type","range"),L(c,"min","0"),L(c,"max","360"),L(g,"for","magSlider"),L(f,"id","magSlider"),L(f,"type","range"),L(f,"min","0"),L(f,"max","1"),L(f,"step","0.01")},m(T,V){C(T,e,V),C(T,i,V),C(T,s,V),b(s,o),b(s,m),b(s,c),_e(c,l[0]),b(s,r),b(s,h),b(s,d),C(T,w,V),C(T,p,V),b(p,g),b(p,u),b(p,f),_e(f,l[1]),b(p,k),b(p,E),C(T,I,V),C(T,F,V),C(T,B,V),C(T,N,V),W||(A=[z(c,"change",l[4]),z(c,"input",l[4]),z(f,"change",l[5]),z(f,"input",l[5]),z(N,"click",l[6])],W=!0)},p(T,[V]){V&1&&_e(c,T[0]),V&1&&Q(h,T[0]),V&2&&_e(f,T[1]),V&2&&Q(E,T[1])},i:ve,o:ve,d(T){T&&(v(e),v(i),v(s),v(w),v(p),v(I),v(F),v(B),v(N)),W=!1,qe(A)}}}function Bt(l,e,t){let{onShoot:i}=e,s=0,o=.5;const n=()=>{const h=new a(1,0);h.rotateDeg(s),h.multiplyScalar(o),i(h)};function m(){s=De(this.value),t(0,s)}function c(){o=De(this.value),t(1,o)}const r=()=>n();return l.$$set=h=>{"onShoot"in h&&t(3,i=h.onShoot)},[s,o,n,i,m,c,r]}class Lt extends ue{constructor(e){super(),de(this,e,Bt,Ft,ae,{onShoot:3})}}const Nt=()=>{const l=[],e=$({geometry:{type:"line",vector:new a(15,0)},position:new a(0,0),fixed:!0});l.push(e);const t=$({geometry:{type:"line",vector:new a(0,100)},position:new a(0,0),fixed:!0});l.push(t);const i=$({geometry:{type:"line",vector:new a(0,100)},position:new a(15,0),fixed:!0});l.push(i);const s=$({geometry:{type:"line",vector:new a(3,-3)},position:new a(3.5,8),fixed:!0});l.push(s);const o=$({geometry:{type:"line",vector:new a(3,3)},position:new a(3.5,5),fixed:!0});l.push(o);const n=$({geometry:{type:"line",vector:new a(6,0)},position:new a(2,2),fixed:!0});l.push(n);const m=$({geometry:{type:"line",vector:new a(4,0)},position:new a(3,2.5),fixed:!0});l.push(m);const c=$({geometry:{type:"line",vector:new a(2,0)},position:new a(4,3),fixed:!0});l.push(c);const r=$({geometry:{type:"line",vector:new a(.6,0)},position:new a(4.7,3.5),fixed:!0});l.push(r);const h=$({geometry:{type:"line",vector:new a(1,0)},position:new a(10,10.1),fixed:!0});l.push(h);const d=$({geometry:{type:"line",vector:new a(0,-4)},position:new a(11,10),fixed:!0});l.push(d);const w=$({geometry:{type:"line",vector:new a(0,-4)},position:new a(11.5,10),fixed:!0});l.push(w);const p=$({geometry:{type:"line",vector:new a(0,-4)},position:new a(12,10),fixed:!0});l.push(p);const g=$({geometry:{type:"line",vector:new a(1,0)},position:new a(12,10.1),fixed:!0});l.push(g);for(let u=.2;u<.5;u+=.1)for(let f=0;f<10;f++){const k=$({geometry:{type:"line",vector:new a(0,3)},position:new a(9+f*u,1),fixed:!0});l.push(k)}const y=$({geometry:{type:"sphere",r:.1},position:new a(5,10),velocity:new a(0,0)});return l.push(y),{objects:l,sphere:y}};function Wt(l){let e,t,i,s,o,n=l[0]?"Disable":"Enable",m,c,r,h,d=l[1]?"Play":"Pause",w,p,g,y="Reset",u,f,k,E,I,F,B,N,X,W="Simulation time/Frame duration",A,T,V=l[2].t+"",U,J,K,R=l[2].frameTime+"",ee,Ee,O,M,te="Sphere position",Te,ge,be=l[2].spherePos.x.toFixed(2)+"",Se,fe,we,xe=l[2].spherePos.y.toFixed(2)+"",Ae,Je,me,je,nt="Sphere velocity",Ke,Ie,Fe=l[2].sphereVel.x.toFixed(2)+"",Me,Ze,Be,Le=l[2].sphereVel.y.toFixed(2)+"",Ue,ne,et,ot;return t=new ke({props:{sketch:l[5]}}),f=new Lt({props:{onShoot:l[6]}}),E=new pt({props:{world:l[3]}}),{c(){e=x("div"),oe(t.$$.fragment),i=j(),s=x("div"),o=x("button"),m=H(n),c=H(" pause on collision"),r=j(),h=x("button"),w=H(d),p=j(),g=x("button"),g.textContent=y,u=j(),oe(f.$$.fragment),k=j(),oe(E.$$.fragment),I=j(),F=x("table"),B=x("tbody"),N=x("tr"),X=x("th"),X.textContent=W,A=j(),T=x("td"),U=H(V),J=j(),K=x("td"),ee=H(R),Ee=j(),O=x("tr"),M=x("th"),M.textContent=te,Te=j(),ge=x("td"),Se=H(be),fe=j(),we=x("td"),Ae=H(xe),Je=j(),me=x("tr"),je=x("th"),je.textContent=nt,Ke=j(),Ie=x("td"),Me=H(Fe),Ze=j(),Be=x("td"),Ue=H(Le),this.h()},l(D){e=_(D,"DIV",{class:!0});var Y=S(e);se(t.$$.fragment,Y),Y.forEach(v),i=P(D),s=_(D,"DIV",{});var ye=S(s);o=_(ye,"BUTTON",{});var tt=S(o);m=G(tt,n),c=G(tt," pause on collision"),tt.forEach(v),r=P(ye),h=_(ye,"BUTTON",{});var st=S(h);w=G(st,d),st.forEach(v),p=P(ye),g=_(ye,"BUTTON",{"data-svelte-h":!0}),q(g)!=="svelte-tlxueg"&&(g.textContent=y),ye.forEach(v),u=P(D),se(f.$$.fragment,D),k=P(D),se(E.$$.fragment,D),I=P(D),F=_(D,"TABLE",{});var it=S(F);B=_(it,"TBODY",{});var Ne=S(B);N=_(Ne,"TR",{});var Pe=S(N);X=_(Pe,"TH",{"data-svelte-h":!0}),q(X)!=="svelte-rirgm4"&&(X.textContent=W),A=P(Pe),T=_(Pe,"TD",{});var rt=S(T);U=G(rt,V),rt.forEach(v),J=P(Pe),K=_(Pe,"TD",{});var lt=S(K);ee=G(lt,R),lt.forEach(v),Pe.forEach(v),Ee=P(Ne),O=_(Ne,"TR",{});var Ce=S(O);M=_(Ce,"TH",{"data-svelte-h":!0}),q(M)!=="svelte-1y1nif6"&&(M.textContent=te),Te=P(Ce),ge=_(Ce,"TD",{});var ct=S(ge);Se=G(ct,be),ct.forEach(v),fe=P(Ce),we=_(Ce,"TD",{});var at=S(we);Ae=G(at,xe),at.forEach(v),Je=P(Ce),Ce.forEach(v),me=_(Ne,"TR",{});var Oe=S(me);je=_(Oe,"TH",{"data-svelte-h":!0}),q(je)!=="svelte-1uw1fs2"&&(je.textContent=nt),Ke=P(Oe),Ie=_(Oe,"TD",{});var ut=S(Ie);Me=G(ut,Fe),ut.forEach(v),Ze=P(Oe),Be=_(Oe,"TD",{});var dt=S(Be);Ue=G(dt,Le),dt.forEach(v),Oe.forEach(v),Ne.forEach(v),it.forEach(v),this.h()},h(){L(e,"class","d-flex justify-content-center")},m(D,Y){C(D,e,Y),ie(t,e,null),C(D,i,Y),C(D,s,Y),b(s,o),b(o,m),b(o,c),b(s,r),b(s,h),b(h,w),b(s,p),b(s,g),C(D,u,Y),ie(f,D,Y),C(D,k,Y),ie(E,D,Y),C(D,I,Y),C(D,F,Y),b(F,B),b(B,N),b(N,X),b(N,A),b(N,T),b(T,U),b(N,J),b(N,K),b(K,ee),b(B,Ee),b(B,O),b(O,M),b(O,Te),b(O,ge),b(ge,Se),b(O,fe),b(O,we),b(we,Ae),b(O,Je),b(B,me),b(me,je),b(me,Ke),b(me,Ie),b(Ie,Me),b(me,Ze),b(me,Be),b(Be,Ue),ne=!0,et||(ot=[z(o,"click",l[7]),z(h,"click",l[8]),z(g,"click",l[4])],et=!0)},p(D,[Y]){(!ne||Y&1)&&n!==(n=D[0]?"Disable":"Enable")&&Q(m,n),(!ne||Y&2)&&d!==(d=D[1]?"Play":"Pause")&&Q(w,d);const ye={};Y&8&&(ye.world=D[3]),E.$set(ye),(!ne||Y&4)&&V!==(V=D[2].t+"")&&Q(U,V),(!ne||Y&4)&&R!==(R=D[2].frameTime+"")&&Q(ee,R),(!ne||Y&4)&&be!==(be=D[2].spherePos.x.toFixed(2)+"")&&Q(Se,be),(!ne||Y&4)&&xe!==(xe=D[2].spherePos.y.toFixed(2)+"")&&Q(Ae,xe),(!ne||Y&4)&&Fe!==(Fe=D[2].sphereVel.x.toFixed(2)+"")&&Q(Me,Fe),(!ne||Y&4)&&Le!==(Le=D[2].sphereVel.y.toFixed(2)+"")&&Q(Ue,Le)},i(D){ne||(re(t.$$.fragment,D),re(f.$$.fragment,D),re(E.$$.fragment,D),ne=!0)},o(D){le(t.$$.fragment,D),le(f.$$.fragment,D),le(E.$$.fragment,D),ne=!1},d(D){D&&(v(e),v(i),v(s),v(u),v(k),v(I),v(F)),ce(t),ce(f,D),ce(E,D),et=!1,qe(ot)}}}const He=60;function At(l,e,t){console.clear();let i=!1,s=!1,o={t:"0",frameTime:"0",spherePos:new a(0,0),sphereVel:new a(0,0),ballIsColliding:!1},n,m;const c=()=>{t(3,n=new Ve({dimensions:new a(15,15),reporter:f=>{var k;t(2,o.t=(k=f==null?void 0:f.t)==null?void 0:k.toFixed(1),o),o.spherePos.copy(m.position).unfloat(),o.sphereVel.copy(m.velocity).unfloat(),t(2,o.frameTime=f.frameTime.toFixed(2),o),t(2,o),t(2,o.ballIsColliding=m.data.isColliding,o),i&&m.data.isColliding&&!s&&t(1,s=!0)},enableGravity:!0}));const u=Nt();m=u.sphere;for(const f of u.objects)n.addObject(f)},r=u=>typeof u=="number"?u*He:u.clone().multiplyScalar(He),h=u=>typeof u=="number"?u/He:u.clone().divideScalar(He);let d;const w=u=>{u.setup=()=>{d=u,c();const E=r(n.dimensions);u.createCanvas(E.x,E.y),u.background(0),u.fill(255),u.stroke(255),c()},u.draw=()=>{u.background(0),Qe(u)?m.fixed=!0:m.fixed=!1,s||n.step(),ze(u,n),k(u)};let f;u.mousePressed=()=>{Ge(u)&&(f=h(new a(u.mouseX,u.height-u.mouseY)),m.position.copy(f))},u.mouseReleased=()=>{if(!Ge(u)||!f)return;const E=h(new a(u.mouseX,u.height-u.mouseY)),I=f.subtract(E).multiplyScalar(3);f=void 0,m.velocity.copy(I)};const k=E=>{if(!f)return;E.stroke("blue"),E.strokeWeight(2);const I=r(f);E.line(I.x,E.height-I.y,E.mouseX,E.mouseY)}},p=u=>{u.multiplyScalar(1e4),n.applyForce(m,u)};return $e(()=>{d==null||d.remove()}),[i,s,o,n,c,w,p,()=>t(0,i=!i),()=>t(1,s=!s)]}let Mt=class extends ue{constructor(e){super(),de(this,e,At,Wt,ae,{})}};const Ut=()=>{const l=[],e=$({geometry:{type:"line",vector:new a(15,0)},position:new a(0,0),fixed:!0});l.push(e);const t=$({geometry:{type:"line",vector:new a(0,100)},position:new a(0,0),fixed:!0});l.push(t);const i=$({geometry:{type:"line",vector:new a(0,100)},position:new a(15,0),fixed:!0});l.push(i);const s=$({geometry:{type:"line",vector:new a(3,-3)},position:new a(3.5,8),fixed:!0});l.push(s);const o=$({geometry:{type:"line",vector:new a(3,3)},position:new a(3.5,5),fixed:!0});l.push(o);const n=$({geometry:{type:"line",vector:new a(6,0)},position:new a(2,2),fixed:!0});l.push(n);const m=$({geometry:{type:"line",vector:new a(4,0)},position:new a(3,2.5),fixed:!0});l.push(m);const c=$({geometry:{type:"line",vector:new a(2,0)},position:new a(4,3),fixed:!0});l.push(c);const r=$({geometry:{type:"line",vector:new a(.6,0)},position:new a(4.7,3.5),fixed:!0});l.push(r);const h=$({geometry:{type:"line",vector:new a(1,0)},position:new a(10,10.1),fixed:!0});l.push(h);const d=$({geometry:{type:"line",vector:new a(0,-4)},position:new a(11,10),fixed:!0});l.push(d);const w=$({geometry:{type:"line",vector:new a(0,-4)},position:new a(11.5,10),fixed:!0});l.push(w);const p=$({geometry:{type:"line",vector:new a(0,-4)},position:new a(12,10),fixed:!0});l.push(p);const g=$({geometry:{type:"line",vector:new a(1,0)},position:new a(12,10.1),fixed:!0});l.push(g);for(let y=.2;y<.5;y+=.1)for(let u=0;u<10;u++){const f=$({geometry:{type:"line",vector:new a(0,3)},position:new a(9+u*y,1),fixed:!0});l.push(f)}return{objects:l}};function Yt(l){let e,t,i,s,o,n=l[0]?"Disable":"Enable",m,c,r,h,d=l[1]?"Play":"Pause",w,p,g,y="Reset",u,f,k,E,I,F,B,N="Simulation time/Frame duration",X,W,A=l[2].t+"",T,V,U,J=l[2].frameTime+"",K,R,ee,Ee;return t=new ke({props:{sketch:l[5]}}),f=new pt({props:{world:l[3]}}),{c(){e=x("div"),oe(t.$$.fragment),i=j(),s=x("div"),o=x("button"),m=H(n),c=H(" pause on collision"),r=j(),h=x("button"),w=H(d),p=j(),g=x("button"),g.textContent=y,u=j(),oe(f.$$.fragment),k=j(),E=x("table"),I=x("tbody"),F=x("tr"),B=x("th"),B.textContent=N,X=j(),W=x("td"),T=H(A),V=j(),U=x("td"),K=H(J),this.h()},l(O){e=_(O,"DIV",{class:!0});var M=S(e);se(t.$$.fragment,M),M.forEach(v),i=P(O),s=_(O,"DIV",{});var te=S(s);o=_(te,"BUTTON",{});var Te=S(o);m=G(Te,n),c=G(Te," pause on collision"),Te.forEach(v),r=P(te),h=_(te,"BUTTON",{});var ge=S(h);w=G(ge,d),ge.forEach(v),p=P(te),g=_(te,"BUTTON",{"data-svelte-h":!0}),q(g)!=="svelte-tlxueg"&&(g.textContent=y),te.forEach(v),u=P(O),se(f.$$.fragment,O),k=P(O),E=_(O,"TABLE",{});var be=S(E);I=_(be,"TBODY",{});var Se=S(I);F=_(Se,"TR",{});var fe=S(F);B=_(fe,"TH",{"data-svelte-h":!0}),q(B)!=="svelte-rirgm4"&&(B.textContent=N),X=P(fe),W=_(fe,"TD",{});var we=S(W);T=G(we,A),we.forEach(v),V=P(fe),U=_(fe,"TD",{});var xe=S(U);K=G(xe,J),xe.forEach(v),fe.forEach(v),Se.forEach(v),be.forEach(v),this.h()},h(){L(e,"class","d-flex justify-content-center")},m(O,M){C(O,e,M),ie(t,e,null),C(O,i,M),C(O,s,M),b(s,o),b(o,m),b(o,c),b(s,r),b(s,h),b(h,w),b(s,p),b(s,g),C(O,u,M),ie(f,O,M),C(O,k,M),C(O,E,M),b(E,I),b(I,F),b(F,B),b(F,X),b(F,W),b(W,T),b(F,V),b(F,U),b(U,K),R=!0,ee||(Ee=[z(o,"click",l[6]),z(h,"click",l[7]),z(g,"click",l[4])],ee=!0)},p(O,[M]){(!R||M&1)&&n!==(n=O[0]?"Disable":"Enable")&&Q(m,n),(!R||M&2)&&d!==(d=O[1]?"Play":"Pause")&&Q(w,d);const te={};M&8&&(te.world=O[3]),f.$set(te),(!R||M&4)&&A!==(A=O[2].t+"")&&Q(T,A),(!R||M&4)&&J!==(J=O[2].frameTime+"")&&Q(K,J)},i(O){R||(re(t.$$.fragment,O),re(f.$$.fragment,O),R=!0)},o(O){le(t.$$.fragment,O),le(f.$$.fragment,O),R=!1},d(O){O&&(v(e),v(i),v(s),v(u),v(k),v(E)),ce(t),ce(f,O),ee=!1,qe(Ee)}}}const mt=60;function Rt(l,e,t){console.clear();let i=!1,s=!1,o={t:"0",frameTime:"0"},n;const m=()=>{clearInterval(d),d=setInterval(c,100),t(3,n=new Ve({dimensions:new a(15,15),reporter:u=>{var f;t(2,o.t=(f=u==null?void 0:u.t)==null?void 0:f.toFixed(1),o),t(2,o.frameTime=u.frameTime.toFixed(2),o),t(2,o)},enableGravity:!0}));const y=Ut();for(const u of y.objects)n.addObject(u)},c=()=>{console.log("add ball");const y=Math.random()*n.dimensions.x,u=Math.random()*n.dimensions.y,f=-5+Math.random()*10,k=-5+Math.random()*10,E=$({geometry:{type:"sphere",r:.1},position:new a(y,u),velocity:new a(f,k)});n.addObject(E)},r=y=>typeof y=="number"?y*mt:y.clone().multiplyScalar(mt);let h,d;const w=y=>{y.setup=()=>{h=y,m();const u=r(n.dimensions);y.createCanvas(u.x,u.y),y.background(0),y.fill(255),y.stroke(255),m()},y.draw=()=>{y.background(0),s||n.step(),ze(y,n)}};return $e(()=>{h==null||h.remove(),clearInterval(d)}),[i,s,o,n,m,w,()=>t(0,i=!i),()=>t(1,s=!s)]}class Xt extends ue{constructor(e){super(),de(this,e,Rt,Yt,ae,{})}}function Ht(l){let e,t,i;return t=new ke({props:{sketch:l[0]}}),{c(){e=x("div"),oe(t.$$.fragment),this.h()},l(s){e=_(s,"DIV",{class:!0});var o=S(e);se(t.$$.fragment,o),o.forEach(v),this.h()},h(){L(e,"class","d-flex justify-content-center")},m(s,o){C(s,e,o),ie(t,e,null),i=!0},p:ve,i(s){i||(re(t.$$.fragment,s),i=!0)},o(s){le(t.$$.fragment,s),i=!1},d(s){s&&v(e),ce(t)}}}const pe=6;function Gt(l){console.clear();let e;const t=$({geometry:{type:"sphere",r:10},position:new a(30,50),velocity:new a(15,15)}),i=$({geometry:{type:"line",vector:new a(80,0)},position:new a(10,70)}),s=new wt,o=n=>{const m=new a(100,100),c=Z(m,pe);n.setup=()=>{e=n,n.createCanvas(c.x,c.y),n.noFill()};let r;n.draw=()=>{if(n.background(0),!Qe(n))r=void 0;else{const f=yt(new a(n.mouseX,n.height-n.mouseY),pe);if(r||(f.distance(t.position)<=t.geometry.r?r="sphere":f.distance(t.position.clone().add(t.velocity))<=6?r="spherevelocity":f.distance(i.position)<=6?r="linestart":f.distance(i.geometry.vector.clone().add(i.position))<=6&&(r="lineend")),r==="sphere")t.position.copy(f);else if(r==="spherevelocity"){const k=f.clone().subtract(t.position);t.velocity.copy(k)}else if(r==="linestart")i.position.copy(f);else if(r==="lineend"){const k=f.clone().subtract(i.position);i.geometry.vector.copy(k)}}const{intersection:h,bouncedVelocity:d}=s.apply(i,t);for(let f=0;f<10;f++){const{positionCorrection:k}=s.apply(i,t);k&&(t.position.add(k.multiplyScalar(.5)),i.position.subtract(k.multiplyScalar(.5)))}n.stroke(255),n.noFill();const w=Z(t.position,pe);n.circle(w.x,n.height-w.y,2*t.geometry.r*pe),n.stroke(255);const p=Z(t.velocity,pe);n.line(w.x,n.height-w.y,w.x+p.x,n.height-(w.y+p.y)),n.stroke(255);const{x:g,y}=Z(i.position,pe),u=Z(i.geometry.vector,pe);if(n.line(g,n.height-y,g+u.x,n.height-(y+u.y)),h){n.stroke("#54d7ff"),n.fill("#54d7ff");const f=Z(h,pe);n.circle(f.x,n.height-f.y,5)}if(d){n.stroke("green"),n.fill("green");const f=Z(d,pe);n.line(w.x,n.height-w.y,w.x+f.x,n.height-(w.y+f.y))}}};return $e(()=>{e==null||e.remove()}),[o]}class qt extends ue{constructor(e){super(),de(this,e,Gt,Ht,ae,{})}}class zt{constructor(){We(this,"apply",(e,t)=>({intersection:this.intersectionPoint(e,t),bouncedVelocity:new a(0,0),...this.pullApart(e,t)}));We(this,"intersectionPoint",(e,t)=>{if(e.geometry.type!=="sphere"||t.geometry.type!=="sphere")return;const i=e.geometry.r,s=t.geometry.r,o=e.position.distanceSq(t.position),n=(i+s)**2;if(o>n)return;const m=t.position.clone().subtract(e.position),c=i/(i+s);return m.multiplyScalar(c),e.position.clone().add(m)});We(this,"bounce",(e,t)=>{if(t.geometry.type!=="sphere"||e.geometry.type!=="line")throw new Error("invalid geometry");const i=this.intersectionPoint(e,t);if(!i)return;const s=e.restitution*t.restitution,o=e.friction*t.friction,n=e.position.x,m=e.position.y,c=e.position.x+e.geometry.vector.x,r=e.position.y+e.geometry.vector.y,h=t.position.x,d=t.position.y,w=t.position.x+t.velocity.x,p=t.position.y+t.velocity.y;let g=(r-m)/(c-n),y=(p-d)/(w-h);if(g=[1/0,-1/0].includes(g)?360:g,y=[1/0,-1/0].includes(y)?360:y,(g-y)/(1+g*y)===0){const K=s,R=o;return{bouncedVelocity:t.velocity.multiplyScalar(1-R).multiplyScalar(-K),intersection:i}}const f=c-n,k=r-m,E=new a(-k,f),I=new a(k,-f),F=i.clone().add(E),B=i.clone().add(I);let N;t.position.distanceSq(F)<t.position.distanceSq(B)?N=E:N=I;const X=N.clone().normalize(),W=t.velocity.clone(),A=X.multiplyScalar(W.dot(X)),T=W.subtract(A),V=s,U=o;return{bouncedVelocity:T.multiplyScalar(1-U).subtract(A.multiplyScalar(V)),intersection:i}});We(this,"pullApart",(e,t)=>{if(e.geometry.type!=="sphere"||t.geometry.type!=="sphere")throw new Error("invalid geometry");const i=this.intersectionPoint(e,t);if(!i)return;const s=e.position.clone().subtract(i),o=s.length(),n=e.geometry.r-o;return s.normalize().multiplyScalar(n),{positionCorrection:s}})}}function Qt(l){let e,t,i;return t=new ke({props:{sketch:l[0]}}),{c(){e=x("div"),oe(t.$$.fragment),this.h()},l(s){e=_(s,"DIV",{class:!0});var o=S(e);se(t.$$.fragment,o),o.forEach(v),this.h()},h(){L(e,"class","d-flex justify-content-center")},m(s,o){C(s,e,o),ie(t,e,null),i=!0},p:ve,i(s){i||(re(t.$$.fragment,s),i=!0)},o(s){le(t.$$.fragment,s),i=!1},d(s){s&&v(e),ce(t)}}}const he=6;function Jt(l){console.clear();let e;const t=$({geometry:{type:"sphere",r:10},position:new a(30,50),velocity:new a(15,15)}),i=$({geometry:{type:"sphere",r:10},position:new a(70,50),velocity:new a(15,15)}),s=new zt,o=n=>{const m=new a(100,100),c=Z(m,he);n.setup=()=>{e=n,n.createCanvas(c.x,c.y),n.noFill()};let r;n.draw=()=>{if(n.background(0),!Qe(n))r=void 0;else{const u=yt(new a(n.mouseX,n.height-n.mouseY),he);if(r||(u.distance(t.position)<=t.geometry.r?r="sphere":u.distance(t.position.clone().add(t.velocity))<=6?r="spherevelocity":u.distance(i.position)<=i.geometry.r?r="sphere2":u.distance(i.position.clone().add(i.velocity))<=6&&(r="sphere2velocity")),r==="sphere")t.position.copy(u);else if(r==="spherevelocity"){const f=u.clone().subtract(t.position);t.velocity.copy(f)}else if(r==="sphere2")i.position.copy(u);else if(r==="sphere2velocity"){const f=u.clone().subtract(i.position);i.velocity.copy(f)}}const{intersection:h,bouncedVelocity:d}=s.apply(t,i);for(let u=0;u<10;u++){const{positionCorrection:f}=s.apply(t,i);f&&(t.position.add(f.multiplyScalar(.5)),i.position.subtract(f.multiplyScalar(.5)))}n.stroke(255),n.noFill();const w=Z(t.position,he);n.circle(w.x,n.height-w.y,2*t.geometry.r*he),n.stroke(255);const p=Z(t.velocity,he);n.line(w.x,n.height-w.y,w.x+p.x,n.height-(w.y+p.y)),n.stroke(255),n.noFill();const g=Z(i.position,he);n.circle(g.x,n.height-g.y,2*i.geometry.r*he),n.stroke(255);const y=Z(i.velocity,he);if(n.line(g.x,n.height-g.y,g.x+y.x,n.height-(g.y+y.y)),h){n.stroke("#54d7ff"),n.fill("#54d7ff");const u=Z(h,he);n.circle(u.x,n.height-u.y,5)}if(d){n.stroke("green"),n.fill("green");const u=Z(d,he);n.line(w.x,n.height-w.y,w.x+u.x,n.height-(w.y+u.y))}}};return $e(()=>{e==null||e.remove()}),[o]}class Kt extends ue{constructor(e){super(),de(this,e,Jt,Qt,ae,{})}}function Zt(l){let e,t="<span>This page is a list of engine tests. They use the actual engine and allow me to setup different situations and check manually for regressions and bugs.</span> <br/> <span>Use the selection menu to see the different pages</span>",i,s,o,n,m;return n=new bt({props:{tabs:l[0]}}),{c(){e=x("div"),e.innerHTML=t,i=j(),s=x("br"),o=j(),oe(n.$$.fragment)},l(c){e=_(c,"DIV",{"data-svelte-h":!0}),q(e)!=="svelte-11mzr87"&&(e.innerHTML=t),i=P(c),s=_(c,"BR",{}),o=P(c),se(n.$$.fragment,c)},m(c,r){C(c,e,r),C(c,i,r),C(c,s,r),C(c,o,r),ie(n,c,r),m=!0},p:ve,i(c){m||(re(n.$$.fragment,c),m=!0)},o(c){le(n.$$.fragment,c),m=!1},d(c){c&&(v(e),v(i),v(s),v(o)),ce(n,c)}}}function en(l){return[[{label:"Sphere Sphere Collider",value:Kt},{label:"Line Sphere Collider",value:qt},{label:"Perfs - Multiple balls",value:Xt},{label:"Playground - Engine settings",value:Mt},{label:"Dynamics + collisions - 1",value:Dt},{label:"Dynamics + collisions - 2",value:jt},{label:"Sphere Line - pull apart",value:St},{label:"One ball bounce",value:$t}]]}class cn extends ue{constructor(e){super(),de(this,e,en,Zt,ae,{})}}export{cn as component};
