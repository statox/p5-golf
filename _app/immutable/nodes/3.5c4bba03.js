import{s as C,f as M,a as X,g as S,h as I,d as b,c as Y,u as Z,j as z,i as P,y as ie,L as ce,z as E,M as q,o as ee}from"../chunks/scheduler.32ebed32.js";import{S as G,i as L,b as D,d as A,m as T,a as U,t as H,e as B}from"../chunks/index.c25c2528.js";import{V as y,c as g,P as N,d as te,m as K,w as j,a as oe,b as se,C as ae}from"../chunks/p5utils.9a0390ea.js";import{W as J}from"../chunks/World.ddb1facd.js";import{_ as ne}from"../chunks/preload-helper.a4192956.js";const le=(l,t)=>{const e=[],r=l.x,o=l.y,a=3,u=5,h=.3,d=4,n=.5,s=.1,p=3,c=Math.random()*(r-u),i=o-p-Math.random()*(o-d-p),f=Math.random()*u+a,m=Math.random()*d+h,w=Math.random()*n+s;pe({x:c,y:i,w:f,h:m,topRatio:w},t).forEach(W=>e.push(W)),ue(l).forEach(W=>e.push(W));const R=Math.floor(1+Math.random()*2),_=R*.1,x=de(new y(Math.random()*r,Math.random()*o),{m:R,r:_});for(;x.position.x>c&&x.position.x<c+f&&x.position.y<i&&x.position.y>i+m;)x.position.x=Math.random()*r,x.position.y=Math.random()*o;return e.push(x),{objects:e,sphere:x}},de=(l,t)=>g({geometry:{type:"sphere",r:(t==null?void 0:t.r)||.1},mass:t==null?void 0:t.m,position:l,velocity:new y(0,0)}),ue=l=>{const t=l.x,e=l.y,r=[],o=g({geometry:{type:"line",vector:new y(t,0)},position:new y(0,0),fixed:!0});r.push(o);const a=g({geometry:{type:"line",vector:new y(0,e*10)},position:new y(0,0),fixed:!0});r.push(a);const u=g({geometry:{type:"line",vector:new y(0,e*10)},position:new y(15,0),fixed:!0});return r.push(u),r},pe=(l,t)=>{const{x:e,y:r,h:o,w:a,topRatio:u}=l;if(u<0||u>1)throw new Error("topRatio must be between 0 and 1");const h=a*u/2,d=a*(1-u),n=.1,s=[],p=g({geometry:{type:"line",vector:new y(h,0)},position:new y(e,r+n),fixed:!0});s.push(p);const c=g({geometry:{type:"line",vector:new y(0,-o)},position:new y(e+h,r),fixed:!0});s.push(c);const i=g({geometry:{type:"line",vector:new y(d,0)},position:new y(e+h,r-o-n),fixed:!0});s.push(i);const f=g({geometry:{type:"line",vector:new y(d-2*n,0)},position:new y(e+h+n,r-o+n),fixed:!0,friction:1,restitution:0,collisionListener:t});s.push(f);const m=g({geometry:{type:"line",vector:new y(0,o)},position:new y(e+h+d,r-o),fixed:!0});s.push(m);const w=g({geometry:{type:"line",vector:new y(h,0)},position:new y(e+h+d,r+n),fixed:!0});return s.push(w),s};function he(l){let t,e,r,o,a,u="Reset",h,d,n;return e=new N({props:{sketch:l[1]}}),{c(){t=M("div"),D(e.$$.fragment),r=X(),o=M("div"),a=M("button"),a.textContent=u,this.h()},l(s){t=S(s,"DIV",{class:!0});var p=I(t);A(e.$$.fragment,p),p.forEach(b),r=Y(s),o=S(s,"DIV",{});var c=I(o);a=S(c,"BUTTON",{"data-svelte-h":!0}),Z(a)!=="svelte-tlxueg"&&(a.textContent=u),c.forEach(b),this.h()},h(){z(t,"class","d-flex justify-content-center")},m(s,p){P(s,t,p),T(e,t,null),P(s,r,p),P(s,o,p),ie(o,a),h=!0,d||(n=ce(a,"click",l[0]),d=!0)},p:E,i(s){h||(U(e.$$.fragment,s),h=!0)},o(s){H(e.$$.fragment,s),h=!1},d(s){s&&(b(t),b(r),b(o)),B(e),d=!1,n()}}}const Q=60;function me(l){console.clear();let t,e,r;const o=()=>{setTimeout(a,1e3)},a=()=>{t=new J({dimensions:new y(15,15),reporter:()=>{},enableGravity:!0});const n=le(t.dimensions,o);n.sphere.fixed=!0,e=n.sphere,r=e.position.clone();for(const s of n.objects)t.addObject(s)},u=n=>typeof n=="number"?n*Q:n.clone().multiplyScalar(Q);let h;const d=n=>{n.setup=()=>{h=n,a();const c=u(t.dimensions);n.createCanvas(c.x,c.y),n.background(0),n.fill(255),n.stroke(255),a()},n.draw=()=>{n.background(0),t.step(),te(n,t),p(n)};let s;n.mousePressed=()=>{K(n)&&(s=new y(n.width,n.height).divideScalar(2),e.position.copy(r),e.velocity.zero(),e.fixed=!0)},n.mouseReleased=()=>{if(!K(n)||!s)return;const c=s,f=new y(n.mouseX,n.mouseY).clone().subtract(c).multiplyScalar(20);f.x*=-1,t.applyForce(e,f),e.fixed=!1,s=void 0};const p=c=>{if(!e.fixed||!s)return;c.stroke("red"),c.strokeWeight(1),c.noFill(),c.circle(s.x,s.y,15),c.stroke("blue"),c.strokeWeight(2);const i=s,m=new y(c.mouseX,c.mouseY).clone().subtract(i);c.line(i.x,i.y,i.x+m.x,i.y+m.y);const w=u(e.position);m.x*=-1,m.y*=-1,c.line(w.x,c.height-w.y,w.x+m.x,c.height-w.y+m.y)}};return q(()=>{h==null||h.remove()}),[a,d]}let fe=class extends G{constructor(t){super(),L(this,t,me,he,C,{})}},k;const $={physics:{attraction:1580,attractionRadius:90,repulsion:2e3,repulsionRadius:20},world:{nbParticles:2e3,allowOverlaps:!0},render:{showPerception:!1,showVelocity:!1,uniformVelocities:!0}},ye=async l=>{const t=await ne(()=>import("../chunks/dat.gui.module.ff711f94.js"),[],import.meta.url);k=new t.GUI({width:200}),k.domElement.setAttribute("style","background-color: black");const e=k.addFolder("Physics");e.open(),e.add($.physics,"attraction"),e.add($.physics,"attractionRadius",0,150),e.add($.physics,"repulsion"),e.add($.physics,"repulsionRadius",0,150);const r=k.addFolder("World");r.open(),r.add($.world,"nbParticles",0,5e3),r.add($.world,"allowOverlaps").onChange(l),r.add({resetWorld:l},"resetWorld");const o=k.addFolder("Render");return o.open(),o.add($.render,"showPerception"),o.add($.render,"showVelocity"),o.add($.render,"uniformVelocities"),$},we=()=>{k==null||k.destroy()};function be(l){let t,e,r;return e=new N({props:{sketch:l[0]}}),{c(){t=M("div"),D(e.$$.fragment),this.h()},l(o){t=S(o,"DIV",{class:!0});var a=I(t);A(e.$$.fragment,a),a.forEach(b),this.h()},h(){z(t,"class","d-flex justify-content-center")},m(o,a){P(o,t,a),T(e,t,null),r=!0},p:E,i(o){r||(U(e.$$.fragment,o),r=!0)},o(o){H(e.$$.fragment,o),r=!1},d(o){o&&b(t),B(e)}}}const O=1;function ge(l){console.clear();let t,e;const r=new y(800,800),o=s=>{e=new J({enableGravity:!1,enableCollisions:!1,enableOverlaps:n.world.allowOverlaps,dimensions:s,drag:.01});const p=[];for(let c=0;c<n.world.nbParticles;c++)p.push(g({geometry:{type:"sphere",r:.5},position:new y(Math.random()*s.x,Math.random()*s.y)}));e.addObjects(p)},a=s=>{const p=j(r,O);s.setup=()=>{t=s,s.createCanvas(p.x,p.y),s.noFill()};const c={selectedId:void 0,selectedPart:void 0};s.draw=()=>{s.background(0);for(const i of e.objects);for(let i=0;i<e.objects.length;i++)for(let f=0;f<e.objects.length;f++){if(i===f)continue;const m=e.objects[i],w=e.objects[f];d(m,w),h(m,w)}e.step(),oe(s,e,c),!n.render.showPerception&&!n.render.showVelocity?te(s,e):(se(s,e,n.render),u(s,e))}},u=(s,p)=>{if(n.render.showPerception){const c=j(n.physics.attractionRadius,O),i=j(n.physics.repulsionRadius,O);s.noFill();for(const f of p.objects){const m=j(f.position,O);s.stroke(0,255,0,50),s.circle(m.x,s.height-m.y,c),s.stroke(255,0,0,50),s.circle(m.x,s.height-m.y,i)}}},h=(s,p)=>{const c=p.position.distance(s.position);if(c>n.physics.attractionRadius)return;const i=p.position.clone().subtract(s.position),m=n.physics.attraction/(c*c);i.norm().multiplyScalar(m),e.applyForce(s,i),e.applyForce(p,i.clone().multiplyScalar(-1))},d=(s,p)=>{const c=p.position.distance(s.position);if(c>n.physics.repulsionRadius)return;const i=s.position.clone().subtract(p.position),m=n.physics.repulsion/(c*c);i.norm().multiplyScalar(m),e.applyForce(s,i),e.applyForce(p,i.clone().multiplyScalar(-1))};let n;return ee(async()=>{n=await ye(()=>o(e.dimensions)),o(r)}),q(()=>{we(),t==null||t.remove()}),[a]}let xe=class extends G{constructor(t){super(),L(this,t,ge,be,C,{})}},F;const v={physics:{attraction:1580,attractionRadius:90,repulsion:2e3,repulsionRadius:20},world:{nbParticles:700,allowOverlaps:!1},render:{showPerception:!1,showVelocity:!1,uniformVelocities:!0}},$e=async l=>{const t=await ne(()=>import("../chunks/dat.gui.module.ff711f94.js"),[],import.meta.url);F=new t.GUI({width:200}),F.domElement.setAttribute("style","background-color: black");const e=F.addFolder("Physics");e.open(),e.add(v.physics,"attraction"),e.add(v.physics,"attractionRadius",0,150),e.add(v.physics,"repulsion"),e.add(v.physics,"repulsionRadius",0,150);const r=F.addFolder("World");r.open(),r.add(v.world,"nbParticles",0,5e3),r.add(v.world,"allowOverlaps").onChange(l),r.add({resetWorld:l},"resetWorld");const o=F.addFolder("Render");return o.open(),o.add(v.render,"showPerception"),o.add(v.render,"showVelocity"),o.add(v.render,"uniformVelocities"),v},ve=()=>{F==null||F.destroy()},je=(l,t,e)=>{for(let r=0;r<l.objects.length;r++)for(let o=0;o<l.objects.length;o++){if(r===o)continue;const a=l.objects[r],u=l.objects[o];Pe(l,a,u,t,e)}},Pe=(l,t,e,r,o)=>{var c;const a=o[t.data.id],u=o[e.data.id],h=((c=r[a])==null?void 0:c.reactions[u])||0,d=90,n=e.position.distance(t.position);if(n>d)return;const s=e.position.clone().subtract(t.position),p=h/(n*n);s.norm().multiplyScalar(p),l.applyForce(t,s)};function Re(l){let t,e,r;return e=new N({props:{sketch:l[0]}}),{c(){t=M("div"),D(e.$$.fragment),this.h()},l(o){t=S(o,"DIV",{class:!0});var a=I(t);A(e.$$.fragment,a),a.forEach(b),this.h()},h(){z(t,"class","d-flex justify-content-center")},m(o,a){P(o,t,a),T(e,t,null),r=!0},p:E,i(o){r||(U(e.$$.fragment,o),r=!0)},o(o){H(e.$$.fragment,o),r=!1},d(o){o&&b(t),B(e)}}}const V=1;function _e(l,t,e){console.clear();let r,o;const a=new y(800,800),u={},h=[{color:"#fc55ae",reactions:{0:0,1:5e4,2:0,3:0}},{color:"#eab410",reactions:{0:-25e3,1:25e3,2:0,3:0}},{color:"#40f78c",reactions:{0:-1e4,1:-1e4,2:-1e4,3:-1e4}},{color:"#406ef7",reactions:{0:5e4,1:-1e4,2:-1e4,3:-1e4}}],d=i=>{o=new J({enableGravity:!1,enableCollisions:!1,enableOverlaps:c.world.allowOverlaps,dimensions:i,drag:.01,bordersMode:"none"});for(let f=0;f<c.world.nbParticles;f++){const m=g({geometry:{type:"sphere",r:1},position:new y(Math.random()*i.x,Math.random()*i.y)}),R=o.addObject(m).data.id;u[R]=Math.floor(Math.random()*h.length)}},n=i=>{const f=j(a,V);i.setup=()=>{r=i,i.createCanvas(f.x,f.y),i.noFill()};const m={selectedId:void 0,selectedPart:void 0};i.draw=()=>{i.background(0),je(o,h,u),o.step(),oe(i,o,m),!c.render.showPerception&&!c.render.showVelocity?s(i,o):(se(i,o,c.render),p(i,o))}},s=(i,f)=>{const m=i.width/f.dimensions.x;for(const w of f.objects){const R=u[w.data.id],{color:_}=h[R];i.stroke(_);const x=i.map(w.position.x,0,f.dimensions.x,0,i.width),W=i.map(w.position.y,0,f.dimensions.y,i.height,0);if(w.geometry.type==="sphere"){const re=j(w.geometry.r*2,m);i.strokeWeight(re*2),i.point(x,W)}}},p=(i,f)=>{if(c.render.showPerception){const m=j(c.physics.attractionRadius,V),w=j(c.physics.repulsionRadius,V);i.noFill();for(const R of f.objects){const _=j(R.position,V);i.stroke(0,255,0,50),i.circle(_.x,i.height-_.y,m),i.stroke(255,0,0,50),i.circle(_.x,i.height-_.y,w)}}};let c;return ee(async()=>{c=await $e(()=>d(o.dimensions)),d(a)}),q(()=>{ve(),r==null||r.remove()}),[n,s]}class ke extends G{constructor(t){super(),L(this,t,_e,Re,C,{drawWorld:1})}get drawWorld(){return this.$$.ctx[1]}}function Fe(l){let t,e="<span>A list of games implemented using the engine.</span>",r,o,a,u,h;return u=new ae({props:{tabs:l[0]}}),{c(){t=M("div"),t.innerHTML=e,r=X(),o=M("br"),a=X(),D(u.$$.fragment)},l(d){t=S(d,"DIV",{"data-svelte-h":!0}),Z(t)!=="svelte-1is62ld"&&(t.innerHTML=e),r=Y(d),o=S(d,"BR",{}),a=Y(d),A(u.$$.fragment,d)},m(d,n){P(d,t,n),P(d,r,n),P(d,o,n),P(d,a,n),T(u,d,n),h=!0},p:E,i(d){h||(U(u.$$.fragment,d),h=!0)},o(d){H(u.$$.fragment,d),h=!1},d(d){d&&(b(t),b(r),b(o),b(a)),B(u,d)}}}function Me(l){return[[{label:"Particles Life",value:ke},{label:"Particles",value:xe},{label:"Bucket",value:fe}]]}class Ge extends G{constructor(t){super(),L(this,t,Me,Fe,C,{})}}export{Ge as component};
