import{s as L,f as $,a as M,g as _,h as R,d as x,c as S,u as P,j as A,i as v,y as D,L as X,z as T,M as q}from"../chunks/scheduler.32ebed32.js";import{S as E,i as H,b as I,d as O,m as V,a as B,t as F,e as Y}from"../chunks/index.c25c2528.js";import{V as m,c as y,P as G,d as N,a as W,C as U}from"../chunks/PhysicObject.c7bbacd3.js";import{W as J}from"../chunks/World.aab30a7e.js";const K=(d,t)=>{const n=[],r=d.x,i=d.y,a=3,u=5,l=.3,s=4,e=.5,o=.1,p=3,c=Math.random()*(r-u),f=i-p-Math.random()*(i-s-p),w=Math.random()*u+a,h=Math.random()*s+l,g=Math.random()*e+o;ee({x:c,y:f,w,h,topRatio:g},t).forEach(k=>n.push(k)),Z(d).forEach(k=>n.push(k));const j=Math.floor(1+Math.random()*2),z=j*.1,b=Q(new m(Math.random()*r,Math.random()*i),{m:j,r:z});for(;b.position.x>c&&b.position.x<c+w&&b.position.y<f&&b.position.y>f+h;)b.position.x=Math.random()*r,b.position.y=Math.random()*i;return n.push(b),{objects:n,sphere:b}},Q=(d,t)=>y({geometry:{type:"sphere",r:(t==null?void 0:t.r)||.1},mass:t==null?void 0:t.m,position:d,velocity:new m(0,0)}),Z=d=>{const t=d.x,n=d.y,r=[],i=y({geometry:{type:"line",vector:new m(t,0)},position:new m(0,0),fixed:!0});r.push(i);const a=y({geometry:{type:"line",vector:new m(0,n*10)},position:new m(0,0),fixed:!0});r.push(a);const u=y({geometry:{type:"line",vector:new m(0,n*10)},position:new m(15,0),fixed:!0});return r.push(u),r},ee=(d,t)=>{const{x:n,y:r,h:i,w:a,topRatio:u}=d;if(u<0||u>1)throw new Error("topRatio must be between 0 and 1");const l=a*u/2,s=a*(1-u),e=.1,o=[],p=y({geometry:{type:"line",vector:new m(l,0)},position:new m(n,r+e),fixed:!0});o.push(p);const c=y({geometry:{type:"line",vector:new m(0,-i)},position:new m(n+l,r),fixed:!0});o.push(c);const f=y({geometry:{type:"line",vector:new m(s,0)},position:new m(n+l,r-i-e),fixed:!0});o.push(f);const w=y({geometry:{type:"line",vector:new m(s-2*e,0)},position:new m(n+l+e,r-i+e),fixed:!0,friction:1,restitution:0,collisionListener:t});o.push(w);const h=y({geometry:{type:"line",vector:new m(0,i)},position:new m(n+l+s,r-i),fixed:!0});o.push(h);const g=y({geometry:{type:"line",vector:new m(l,0)},position:new m(n+l+s,r+e),fixed:!0});return o.push(g),o};function te(d){let t,n,r,i,a,u="Reset",l,s,e;return n=new G({props:{sketch:d[1]}}),{c(){t=$("div"),I(n.$$.fragment),r=M(),i=$("div"),a=$("button"),a.textContent=u,this.h()},l(o){t=_(o,"DIV",{class:!0});var p=R(t);O(n.$$.fragment,p),p.forEach(x),r=S(o),i=_(o,"DIV",{});var c=R(i);a=_(c,"BUTTON",{"data-svelte-h":!0}),P(a)!=="svelte-tlxueg"&&(a.textContent=u),c.forEach(x),this.h()},h(){A(t,"class","d-flex justify-content-center")},m(o,p){v(o,t,p),V(n,t,null),v(o,r,p),v(o,i,p),D(i,a),l=!0,s||(e=X(a,"click",d[0]),s=!0)},p:T,i(o){l||(B(n.$$.fragment,o),l=!0)},o(o){F(n.$$.fragment,o),l=!1},d(o){o&&(x(t),x(r),x(i)),Y(n),s=!1,e()}}}const C=60;function ne(d){console.clear();let t,n,r;const i=()=>{setTimeout(a,1e3)},a=()=>{t=new J({dimensions:new m(15,15),reporter:()=>{},enableGravity:!0});const e=K(t.dimensions,i);e.sphere.fixed=!0,n=e.sphere,r=n.position.clone();for(const o of e.objects)t.addObject(o)},u=e=>typeof e=="number"?e*C:e.clone().multiplyScalar(C);let l;const s=e=>{e.setup=()=>{l=e,a();const c=u(t.dimensions);e.createCanvas(c.x,c.y),e.background(0),e.fill(255),e.stroke(255),a()},e.draw=()=>{e.background(0),t.step(),N(e,t),p(e)};let o;e.mousePressed=()=>{W(e)&&(o=new m(e.width,e.height).divideScalar(2),n.position.copy(r),n.velocity.zero(),n.fixed=!0)},e.mouseReleased=()=>{if(!W(e)||!o)return;const c=o,w=new m(e.mouseX,e.mouseY).clone().subtract(c).multiplyScalar(20);w.x*=-1,t.applyForce(n,w),n.fixed=!1,o=void 0};const p=c=>{if(!n.fixed||!o)return;c.stroke("red"),c.strokeWeight(1),c.noFill(),c.circle(o.x,o.y,15),c.stroke("blue"),c.strokeWeight(2);const f=o,h=new m(c.mouseX,c.mouseY).clone().subtract(f);c.line(f.x,f.y,f.x+h.x,f.y+h.y);const g=u(n.position);h.x*=-1,h.y*=-1,c.line(g.x,c.height-g.y,g.x+h.x,c.height-g.y+h.y)}};return q(()=>{l==null||l.remove()}),[a,s]}class oe extends E{constructor(t){super(),H(this,t,ne,te,L,{})}}function se(d){let t,n="<span>A list of games implemented using the engine.</span>",r,i,a,u,l;return u=new U({props:{tabs:d[0]}}),{c(){t=$("div"),t.innerHTML=n,r=M(),i=$("br"),a=M(),I(u.$$.fragment)},l(s){t=_(s,"DIV",{"data-svelte-h":!0}),P(t)!=="svelte-1is62ld"&&(t.innerHTML=n),r=S(s),i=_(s,"BR",{}),a=S(s),O(u.$$.fragment,s)},m(s,e){v(s,t,e),v(s,r,e),v(s,i,e),v(s,a,e),V(u,s,e),l=!0},p:T,i(s){l||(B(u.$$.fragment,s),l=!0)},o(s){F(u.$$.fragment,s),l=!1},d(s){s&&(x(t),x(r),x(i),x(a)),Y(u,s)}}}function re(d){return[[{label:"Bucket",value:oe}]]}class me extends E{constructor(t){super(),H(this,t,re,se,L,{})}}export{me as component};
