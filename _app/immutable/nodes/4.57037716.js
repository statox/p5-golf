import{s as fe,f as _,g as $,h as T,d as y,j as L,i as C,z as $e,M as ke,a as E,e as ht,u as H,c as j,y as p,P as ve,L as G,Q as xe,O as Re,l as J,m as K,n as ne}from"../chunks/scheduler.32ebed32.js";import{S as me,i as he,b as oe,d as se,m as re,a as le,t as ie,e as ce}from"../chunks/index.c25c2528.js";import{P as Te,V as u,w as ue,m as Le,s as nt,d as Ne,c as k,a as Ie,C as bt}from"../chunks/PhysicObject.edd17eee.js";import{_ as wt}from"../chunks/preload-helper.a4192956.js";import{W as Pe,L as _t,S as $t}from"../chunks/World.4e963e81.js";function xt(i){let t,e,r;return e=new Te({props:{sketch:i[0]}}),{c(){t=_("div"),oe(e.$$.fragment),this.h()},l(o){t=$(o,"DIV",{class:!0});var s=T(t);se(e.$$.fragment,s),s.forEach(y),this.h()},h(){L(t,"class","d-flex justify-content-center")},m(o,s){C(o,t,s),re(e,t,null),r=!0},p:$e,i(o){r||(le(e.$$.fragment,o),r=!0)},o(o){ie(e.$$.fragment,o),r=!1},d(o){o&&y(t),ce(e)}}}const yt=6;function kt(i){console.clear();let t;const e={world:{gravity:!0,collisions:!1,ttl:160,maxNbObjects:300,particleSize:1},cannon:{angle:272,creationDelay:1,minYVelocity:30,maxYVelocityVariation:1,maxXVelocity:30}};let r;const o=async()=>{const f=await wt(()=>import("../chunks/dat.gui.module.ff711f94.js"),[],import.meta.url);r=new f.GUI,r.domElement.setAttribute("style","background-color: black");const d=r.addFolder("World");d.open(),d.add(l==null?void 0:l.objects,"length").name("Nb objects").listen(),d.add(e.world,"gravity").name("Enable gravity").onFinishChange(()=>l.gravityEnabled=e.world.gravity),d.add(e.world,"collisions").name("Enable collisions").onFinishChange(()=>l.collisionEnabled=e.world.collisions),d.add(e.world,"ttl",0,1e4).name("Particles TTL"),d.add(e.world,"maxNbObjects",0,3e3).name("Max nb particles"),d.add(e.world,"particleSize",1,20,1).name("Particles size");const g=r.addFolder("Cannon");g.open(),g.add(e.cannon,"angle",0,360).name("Angle"),g.add(e.cannon,"minYVelocity",0,100).name("min. Y velocity"),g.add(e.cannon,"maxYVelocityVariation",0,2).name("Y vel. variation"),g.add(e.cannon,"maxXVelocity",0,100).name("max. X velocity "),g.add(e.cannon,"creationDelay",1,30,1).name("Fire rate")},s=()=>{const{minYVelocity:f,maxYVelocityVariation:d,maxXVelocity:g}=e.cannon,v=Math.random()*g-g/2,w=f+(d-Math.random())*f;return new u(v,w).rotateByDeg(e.cannon.angle)},n=f=>{const d={...k({geometry:{type:"sphere",r:e.world.particleSize},position:h,velocity:s()}),age:0};f.addObject(d)},h=new u(0,0);let l;const c=f=>{const d=new u(100,100),g=ue(d,yt);h.x=d.x/2,h.y=10,f.setup=()=>{t=f,f.createCanvas(g.x,g.y),f.noFill(),l=new Pe({dimensions:d,enableGravity:!0,enableCollisions:!1}),n(l),o()},f.draw=()=>{if(f.background(0),Le(f)){const v=nt(new u(f.mouseX,f.height-f.mouseY),yt);h.copy(v)}f.frameCount%e.cannon.creationDelay===0&&l.objects.length<e.world.maxNbObjects&&n(l),l.step(),l.objects.forEach(v=>{v.data.age>e.world.ttl&&l.removeObject(v)}),Ne(f,l)}};return ke(()=>{r==null||r.destroy(),t==null||t.remove()}),[c]}let Tt=class extends me{constructor(t){super(),he(this,t,kt,xt,fe,{})}};function pt(i){let t,e,r,o,s="dt",n,h,l,c,f,d,g="drag",v,w,b,m,a,x,S="gravity enabled",O,F,N,A,Q;return{c(){t=_("table"),e=_("tbody"),r=_("tr"),o=_("th"),o.textContent=s,n=E(),h=_("td"),l=_("input"),c=E(),f=_("tr"),d=_("th"),d.textContent=g,v=E(),w=_("td"),b=_("input"),m=E(),a=_("tr"),x=_("th"),x.textContent=S,O=E(),F=_("td"),N=_("input"),this.h()},l(Y){t=$(Y,"TABLE",{});var M=T(t);e=$(M,"TBODY",{});var D=T(e);r=$(D,"TR",{});var B=T(r);o=$(B,"TH",{"data-svelte-h":!0}),H(o)!=="svelte-16dheti"&&(o.textContent=s),n=j(B),h=$(B,"TD",{});var W=T(h);l=$(W,"INPUT",{type:!0,min:!0,max:!0,step:!0}),W.forEach(y),B.forEach(y),c=j(D),f=$(D,"TR",{});var ee=T(f);d=$(ee,"TH",{"data-svelte-h":!0}),H(d)!=="svelte-2hq5g"&&(d.textContent=g),v=j(ee),w=$(ee,"TD",{});var te=T(w);b=$(te,"INPUT",{type:!0,min:!0,max:!0,step:!0}),te.forEach(y),ee.forEach(y),m=j(D),a=$(D,"TR",{});var R=T(a);x=$(R,"TH",{"data-svelte-h":!0}),H(x)!=="svelte-ic0r87"&&(x.textContent=S),O=j(R),F=$(R,"TD",{});var z=T(F);N=$(z,"INPUT",{type:!0}),z.forEach(y),R.forEach(y),D.forEach(y),M.forEach(y),this.h()},h(){L(l,"type","number"),L(l,"min","0"),L(l,"max","0.5"),L(l,"step","0.001"),L(b,"type","number"),L(b,"min","0"),L(b,"max","0.01"),L(b,"step","0.001"),L(N,"type","checkbox")},m(Y,M){C(Y,t,M),p(t,e),p(e,r),p(r,o),p(r,n),p(r,h),p(h,l),ve(l,i[0].dt),p(e,c),p(e,f),p(f,d),p(f,v),p(f,w),p(w,b),ve(b,i[0].drag),p(e,m),p(e,a),p(a,x),p(a,O),p(a,F),p(F,N),N.checked=i[0].gravityEnabled,A||(Q=[G(l,"input",i[1]),G(b,"input",i[2]),G(N,"change",i[3])],A=!0)},p(Y,M){M&1&&xe(l.value)!==Y[0].dt&&ve(l,Y[0].dt),M&1&&xe(b.value)!==Y[0].drag&&ve(b,Y[0].drag),M&1&&(N.checked=Y[0].gravityEnabled)},d(Y){Y&&y(t),A=!1,Re(Q)}}}function Ct(i){let t,e="Engine settings",r,o,s=i[0]&&pt(i);return{c(){t=_("p"),t.textContent=e,r=E(),s&&s.c(),o=ht(),this.h()},l(n){t=$(n,"P",{class:!0,"data-svelte-h":!0}),H(t)!=="svelte-gf3gek"&&(t.textContent=e),r=j(n),s&&s.l(n),o=ht(),this.h()},h(){L(t,"class","title svelte-g74uk9")},m(n,h){C(n,t,h),C(n,r,h),s&&s.m(n,h),C(n,o,h)},p(n,[h]){n[0]?s?s.p(n,h):(s=pt(n),s.c(),s.m(o.parentNode,o)):s&&(s.d(1),s=null)},i:$e,o:$e,d(n){n&&(y(t),y(r),y(o)),s&&s.d(n)}}}function St(i,t,e){let{world:r}=t;function o(){r.dt=xe(this.value),e(0,r)}function s(){r.drag=xe(this.value),e(0,r)}function n(){r.gravityEnabled=this.checked,e(0,r)}return i.$$set=h=>{"world"in h&&e(0,r=h.world)},[r,o,s,n]}class ot extends me{constructor(t){super(),he(this,t,St,Ct,fe,{world:0})}}function Et(i){let t,e="Shooter",r,o,s,n="Angle",h,l,c,f,d,g,v,w,b="Magnitude",m,a,x,S,O,F,N,A,Q="Shoot",Y,M;return{c(){t=_("p"),t.textContent=e,r=E(),o=_("span"),s=_("label"),s.textContent=n,h=E(),l=_("input"),c=E(),f=J(i[0]),d=J(" deg"),g=E(),v=_("span"),w=_("label"),w.textContent=b,m=E(),a=_("input"),x=E(),S=J(i[1]),O=E(),F=_("br"),N=E(),A=_("button"),A.textContent=Q,this.h()},l(D){t=$(D,"P",{class:!0,"data-svelte-h":!0}),H(t)!=="svelte-198ugk3"&&(t.textContent=e),r=j(D),o=$(D,"SPAN",{});var B=T(o);s=$(B,"LABEL",{for:!0,"data-svelte-h":!0}),H(s)!=="svelte-lab87n"&&(s.textContent=n),h=j(B),l=$(B,"INPUT",{id:!0,type:!0,min:!0,max:!0}),c=j(B),f=K(B,i[0]),d=K(B," deg"),B.forEach(y),g=j(D),v=$(D,"SPAN",{});var W=T(v);w=$(W,"LABEL",{for:!0,"data-svelte-h":!0}),H(w)!=="svelte-1vc5oxa"&&(w.textContent=b),m=j(W),a=$(W,"INPUT",{id:!0,type:!0,min:!0,max:!0,step:!0}),x=j(W),S=K(W,i[1]),W.forEach(y),O=j(D),F=$(D,"BR",{}),N=j(D),A=$(D,"BUTTON",{"data-svelte-h":!0}),H(A)!=="svelte-8jpwxr"&&(A.textContent=Q),this.h()},h(){L(t,"class","title svelte-g74uk9"),L(s,"for","angleSlider"),L(l,"id","angleSlider"),L(l,"type","range"),L(l,"min","0"),L(l,"max","360"),L(w,"for","magSlider"),L(a,"id","magSlider"),L(a,"type","range"),L(a,"min","0"),L(a,"max","1"),L(a,"step","0.01")},m(D,B){C(D,t,B),C(D,r,B),C(D,o,B),p(o,s),p(o,h),p(o,l),ve(l,i[0]),p(o,c),p(o,f),p(o,d),C(D,g,B),C(D,v,B),p(v,w),p(v,m),p(v,a),ve(a,i[1]),p(v,x),p(v,S),C(D,O,B),C(D,F,B),C(D,N,B),C(D,A,B),Y||(M=[G(l,"change",i[4]),G(l,"input",i[4]),G(a,"change",i[5]),G(a,"input",i[5]),G(A,"click",i[6])],Y=!0)},p(D,[B]){B&1&&ve(l,D[0]),B&1&&ne(f,D[0]),B&2&&ve(a,D[1]),B&2&&ne(S,D[1])},i:$e,o:$e,d(D){D&&(y(t),y(r),y(o),y(g),y(v),y(O),y(F),y(N),y(A)),Y=!1,Re(M)}}}function jt(i,t,e){let{onShoot:r}=t,o=0,s=.5;const n=()=>{const f=new u(1,0);f.rotateDeg(o),f.multiplyScalar(s),r(f)};function h(){o=xe(this.value),e(0,o)}function l(){s=xe(this.value),e(1,s)}const c=()=>n();return i.$$set=f=>{"onShoot"in f&&e(3,r=f.onShoot)},[o,s,n,r,h,l,c]}class gt extends me{constructor(t){super(),he(this,t,jt,Et,fe,{onShoot:3})}}const Pt=i=>{const t=[],e=k({geometry:{type:"line",vector:new u(15,0)},position:new u(0,15),fixed:!0});t.push(e);const r=k({geometry:{type:"line",vector:new u(15,0)},position:new u(0,0),fixed:!0});t.push(r);const o=k({geometry:{type:"line",vector:new u(0,100)},position:new u(0,0),fixed:!0});t.push(o);const s=k({geometry:{type:"line",vector:new u(0,100)},position:new u(15,0),fixed:!0});t.push(s);let n;for(let h=0;h<i.nbBalls;h++){const l=k({geometry:{type:"sphere",r:i.rBalls},position:new u(Math.random()*15,Math.random()*15),velocity:new u(Math.random()*15,Math.random()*15)});t.push(l),n||(n=l)}return{objects:t,sphere:n}};function Ot(i){let t,e,r,o,s,n=i[0]?"Play":"Pause",h,l,c,f="Reset",d,g,v="Add ball",w,b,m,a,x,S,O,F,N,A="Number of balls",Q,Y,M,D,B,W,ee="Balls radius",te,R,z,ye,V,U;return e=new Te({props:{sketch:i[5]}}),b=new gt({props:{onShoot:i[6]}}),a=new ot({props:{world:i[2]}}),{c(){t=_("div"),oe(e.$$.fragment),r=E(),o=_("div"),s=_("button"),h=J(n),l=E(),c=_("button"),c.textContent=f,d=E(),g=_("button"),g.textContent=v,w=E(),oe(b.$$.fragment),m=E(),oe(a.$$.fragment),x=E(),S=_("table"),O=_("tbody"),F=_("tr"),N=_("th"),N.textContent=A,Q=E(),Y=_("td"),M=_("input"),D=E(),B=_("tr"),W=_("th"),W.textContent=ee,te=E(),R=_("td"),z=_("input"),this.h()},l(P){t=$(P,"DIV",{class:!0});var X=T(t);se(e.$$.fragment,X),X.forEach(y),r=j(P),o=$(P,"DIV",{});var Z=T(o);s=$(Z,"BUTTON",{});var ge=T(s);h=K(ge,n),ge.forEach(y),l=j(Z),c=$(Z,"BUTTON",{"data-svelte-h":!0}),H(c)!=="svelte-tlxueg"&&(c.textContent=f),d=j(Z),g=$(Z,"BUTTON",{"data-svelte-h":!0}),H(g)!=="svelte-1xau3n8"&&(g.textContent=v),Z.forEach(y),w=j(P),se(b.$$.fragment,P),m=j(P),se(a.$$.fragment,P),x=j(P),S=$(P,"TABLE",{});var we=T(S);O=$(we,"TBODY",{});var ae=T(O);F=$(ae,"TR",{});var de=T(F);N=$(de,"TH",{"data-svelte-h":!0}),H(N)!=="svelte-eg4byi"&&(N.textContent=A),Q=j(de),Y=$(de,"TD",{});var be=T(Y);M=$(be,"INPUT",{type:!0,min:!0}),be.forEach(y),de.forEach(y),D=j(ae),B=$(ae,"TR",{});var Ce=T(B);W=$(Ce,"TH",{"data-svelte-h":!0}),H(W)!=="svelte-10gtk36"&&(W.textContent=ee),te=j(Ce),R=$(Ce,"TD",{});var De=T(R);z=$(De,"INPUT",{type:!0,min:!0}),De.forEach(y),Ce.forEach(y),ae.forEach(y),we.forEach(y),this.h()},h(){L(t,"class","d-flex justify-content-center"),L(M,"type","number"),L(M,"min","1"),L(z,"type","number"),L(z,"min","1")},m(P,X){C(P,t,X),re(e,t,null),C(P,r,X),C(P,o,X),p(o,s),p(s,h),p(o,l),p(o,c),p(o,d),p(o,g),C(P,w,X),re(b,P,X),C(P,m,X),re(a,P,X),C(P,x,X),C(P,S,X),p(S,O),p(O,F),p(F,N),p(F,Q),p(F,Y),p(Y,M),ve(M,i[1].nbBalls),p(O,D),p(O,B),p(B,W),p(B,te),p(B,R),p(R,z),ve(z,i[1].rBalls),ye=!0,V||(U=[G(s,"click",i[7]),G(c,"click",i[3]),G(g,"click",i[4]),G(M,"change",i[3]),G(M,"input",i[8]),G(z,"change",i[3]),G(z,"input",i[9])],V=!0)},p(P,[X]){(!ye||X&1)&&n!==(n=P[0]?"Play":"Pause")&&ne(h,n);const Z={};X&4&&(Z.world=P[2]),a.$set(Z),X&2&&xe(M.value)!==P[1].nbBalls&&ve(M,P[1].nbBalls),X&2&&xe(z.value)!==P[1].rBalls&&ve(z,P[1].rBalls)},i(P){ye||(le(e.$$.fragment,P),le(b.$$.fragment,P),le(a.$$.fragment,P),ye=!0)},o(P){ie(e.$$.fragment,P),ie(b.$$.fragment,P),ie(a.$$.fragment,P),ye=!1},d(P){P&&(y(t),y(r),y(o),y(w),y(m),y(x),y(S)),ce(e),ce(b,P),ce(a,P),V=!1,Re(U)}}}const He=60;function Dt(i,t,e){console.clear();let r=!1,o={nbBalls:5,rBalls:.2},s,n;const h=()=>{const a=(s==null?void 0:s.gravityEnabled)??!0;e(2,s=new Pe({dimensions:new u(15,15),reporter:()=>{},enableGravity:a}));const x=Pt(o);n=x.sphere;for(const S of x.objects)s.addObject(S)},l=()=>{const a=k({geometry:{type:"sphere",r:o.rBalls},position:new u(7,7),velocity:new u(0,0)});s.addObject(a)},c=a=>typeof a=="number"?a*He:a.clone().multiplyScalar(He),f=a=>typeof a=="number"?a/He:a.clone().divideScalar(He);let d;const g=a=>{a.setup=()=>{d=a,h();const O=c(s.dimensions);a.createCanvas(O.x,O.y),a.background(0),a.fill(255),a.stroke(255),h()},a.draw=()=>{a.background(0),Le(a)?n.fixed=!0:n.fixed=!1,r||s.step(),Ne(a,s),S(a)};let x;a.mousePressed=()=>{Ie(a)&&(x=f(new u(a.mouseX,a.height-a.mouseY)),n.position.copy(x))},a.mouseReleased=()=>{if(!Ie(a)||!x)return;const O=f(new u(a.mouseX,a.height-a.mouseY)),F=x.subtract(O).multiplyScalar(3);x=void 0,n.velocity.copy(F)};const S=O=>{if(!x)return;O.stroke("blue"),O.strokeWeight(2);const F=c(x);O.line(F.x,O.height-F.y,O.mouseX,O.mouseY)}},v=a=>{a.multiplyScalar(1e4),s.applyForce(n,a)};ke(()=>{d==null||d.remove()});const w=()=>e(0,r=!r);function b(){o.nbBalls=xe(this.value),e(1,o)}function m(){o.rBalls=xe(this.value),e(1,o)}return[r,o,s,h,l,g,v,w,b,m]}let Bt=class extends me{constructor(t){super(),he(this,t,Dt,Ot,fe,{})}};function Vt(i){let t,e,r,o,s=i[0][i[0].length-1]+"",n,h,l,c="New ball",f,d,g;return e=new Te({props:{sketch:i[2]}}),{c(){t=_("div"),oe(e.$$.fragment),r=E(),o=_("p"),n=J(s),h=E(),l=_("button"),l.textContent=c,this.h()},l(v){t=$(v,"DIV",{class:!0});var w=T(t);se(e.$$.fragment,w),w.forEach(y),r=j(v),o=$(v,"P",{});var b=T(o);n=K(b,s),b.forEach(y),h=j(v),l=$(v,"BUTTON",{"data-svelte-h":!0}),H(l)!=="svelte-1jwbm46"&&(l.textContent=c),this.h()},h(){L(t,"class","d-flex justify-content-center")},m(v,w){C(v,t,w),re(e,t,null),C(v,r,w),C(v,o,w),p(o,n),C(v,h,w),C(v,l,w),f=!0,d||(g=G(l,"click",i[1]),d=!0)},p(v,[w]){(!f||w&1)&&s!==(s=v[0][v[0].length-1]+"")&&ne(n,s)},i(v){f||(le(e.$$.fragment,v),f=!0)},o(v){ie(e.$$.fragment,v),f=!1},d(v){v&&(y(t),y(r),y(o),y(h),y(l)),ce(e),d=!1,g()}}}function Ft(i,t,e){console.clear();let r=[];const o=c=>{const f=c.objects[c.objects.length-1],d=f.position.clone().toFixed(2),g=f.velocity.clone().toFixed(2);r.push(`${c.t.toFixed(2)} - pos: ${d} - vel: ${g}`),r.length>50&&r.shift(),e(0,r)},s=new Pe({reporter:o,enableGravity:!0}),n=()=>{for(;s.objects.length;)s.objects.pop();const c=k({geometry:{type:"line",vector:new u(100,0)},position:new u(0,0),fixed:!0});s.addObject(c);for(let f=0;f<1;f++){const d=k({geometry:{type:"sphere",r:5},position:new u(20,50),velocity:new u(Math.random()*5-2.5,Math.random()*20)});s.addObject(d)}};let h;const l=c=>{c.setup=()=>{h=c,c.createCanvas(900,600),c.background(0),c.fill(255),c.stroke(255),n()},c.draw=()=>{c.background(0),s.step();for(const f of s.objects){const d=c.map(f.position.x,0,s.dimensions.x,0,c.width),g=c.map(f.position.y,0,s.dimensions.y,c.height,0);if(f.geometry.type==="sphere"&&(c.strokeWeight(f.geometry.r*2),c.point(d,g)),f.geometry.type==="line"){const v=d+c.map(f.geometry.vector.x,0,s.dimensions.x,0,c.width),w=g+c.map(f.geometry.vector.y,0,s.dimensions.y,0,c.height);c.strokeWeight(2),c.line(d,g,v,w)}}}};return ke(()=>{h==null||h.remove()}),[r,n,l]}class It extends me{constructor(t){super(),he(this,t,Ft,Vt,fe,{})}}function Lt(i){let t,e,r,o,s=i[0][i[0].length-1]+"",n,h,l,c="New ball",f,d,g;return e=new Te({props:{sketch:i[2]}}),{c(){t=_("div"),oe(e.$$.fragment),r=E(),o=_("p"),n=J(s),h=E(),l=_("button"),l.textContent=c,this.h()},l(v){t=$(v,"DIV",{class:!0});var w=T(t);se(e.$$.fragment,w),w.forEach(y),r=j(v),o=$(v,"P",{});var b=T(o);n=K(b,s),b.forEach(y),h=j(v),l=$(v,"BUTTON",{"data-svelte-h":!0}),H(l)!=="svelte-1jwbm46"&&(l.textContent=c),this.h()},h(){L(t,"class","d-flex justify-content-center")},m(v,w){C(v,t,w),re(e,t,null),C(v,r,w),C(v,o,w),p(o,n),C(v,h,w),C(v,l,w),f=!0,d||(g=G(l,"click",i[1]),d=!0)},p(v,[w]){(!f||w&1)&&s!==(s=v[0][v[0].length-1]+"")&&ne(n,s)},i(v){f||(le(e.$$.fragment,v),f=!0)},o(v){ie(e.$$.fragment,v),f=!1},d(v){v&&(y(t),y(r),y(o),y(h),y(l)),ce(e),d=!1,g()}}}const ze=6;function Nt(i,t,e){console.clear();let r=[];const o=d=>{const g=d.objects[d.objects.length-1],v=g.position.clone().toFixed(2),w=g.velocity.clone().toFixed(2);r.push(`${d.t.toFixed(2)} - pos: ${v} - vel: ${w}`),r.length>50&&r.shift(),e(0,r)},s=new Pe({reporter:o,enableGravity:!0});let n,h;const l=()=>{for(;s.objects.length;)s.objects.pop();h=k({geometry:{type:"line",vector:new u(40,40)},position:new u(30,30),fixed:!0}),s.addObject(h),n=k({geometry:{type:"sphere",r:10},position:new u(20,50),velocity:new u(2.5,2.5),fixed:!0}),s.addObject(n)};let c;const f=d=>{const g=b=>typeof b=="number"?b*ze:b.clone().multiplyScalar(ze),v=b=>typeof b=="number"?b/ze:b.clone().divideScalar(ze);d.setup=()=>{c=d;const b=g(s.dimensions);d.createCanvas(b.x,b.y),d.background(0),d.fill(255),d.stroke(255),l()};let w;d.draw=()=>{if(d.background(0),s.step(),d.mouseIsPressed){const b=v(new u(d.mouseX,d.height-d.mouseY));if(w||(b.distance(n.position)<2?w="sphere":b.distance(h.position)<2?w="wallstart":b.distance(h.geometry.vector.clone().add(h.position))<2&&(w="wallend")),w==="sphere"&&n.position.copy(b),w==="wallstart"&&h.position.copy(b),w==="wallend"){const m=b.clone().subtract(h.position);h.geometry.vector.copy(m)}}else w=void 0;for(const b of s.objects.sort((m,a)=>m.geometry.type<a.geometry.type?1:-1)){d.stroke(n.data.isColliding?"red":"white");const m=d.map(b.position.x,0,s.dimensions.x,0,d.width),a=d.map(b.position.y,0,s.dimensions.y,d.height,0);if(b.geometry.type==="sphere"){const x=g(b.geometry.r*2);d.strokeWeight(x),d.point(m,a)}if(b.geometry.type==="line"){const x=m+d.map(b.geometry.vector.x,0,s.dimensions.x,0,d.width),S=a-d.map(b.geometry.vector.y,0,s.dimensions.y,0,d.height);d.stroke("blue"),d.strokeWeight(2),d.line(m,a,x,S)}}}};return ke(()=>{c==null||c.remove()}),[r,l,f]}class Mt extends me{constructor(t){super(),he(this,t,Nt,Lt,fe,{})}}function Yt(i){let t,e,r;return e=new Te({props:{sketch:i[0]}}),{c(){t=_("div"),oe(e.$$.fragment),this.h()},l(o){t=$(o,"DIV",{class:!0});var s=T(t);se(e.$$.fragment,s),s.forEach(y),this.h()},h(){L(t,"class","d-flex justify-content-center")},m(o,s){C(o,t,s),re(e,t,null),r=!0},p:$e,i(o){r||(le(e.$$.fragment,o),r=!0)},o(o){ie(e.$$.fragment,o),r=!1},d(o){o&&y(t),ce(e)}}}const qe=6;function At(i){console.clear();const t=new Pe({reporter:()=>{},enableGravity:!0});let e;const r=()=>{for(;t.objects.length;)t.objects.pop();e=k({geometry:{type:"sphere",r:5},position:new u(20,50),velocity:new u(Math.random()*5-2.5,Math.random()*20)}),t.addObject(e);const l=k({geometry:{type:"line",vector:new u(100,0)},position:new u(0,2),fixed:!0});t.addObject(l);const c=k({geometry:{type:"line",vector:new u(100,0)},position:new u(0,98),fixed:!0});t.addObject(c);const f=k({geometry:{type:"line",vector:new u(0,100)},position:new u(2,0),fixed:!0});t.addObject(f);const d=k({geometry:{type:"line",vector:new u(0,100)},position:new u(98,0),fixed:!0});t.addObject(d);const g=k({geometry:{type:"line",vector:new u(50,50)},position:new u(20,10),fixed:!0});t.addObject(g)},o=l=>typeof l=="number"?l*qe:l.clone().multiplyScalar(qe),s=l=>typeof l=="number"?l/qe:l.clone().divideScalar(qe);let n;const h=l=>{l.setup=()=>{n=l;const f=o(t.dimensions);l.createCanvas(f.x,f.y),l.background(0),l.fill(255),l.stroke(255),r()},l.draw=()=>{if(l.background(0),l.mouseIsPressed){e.fixed=!0;const f=s(new u(l.mouseX,l.height-l.mouseY));e.position.copy(f)}else e.fixed=!1;t.step(),Ne(l,t)};let c;l.mousePressed=()=>{c=s(new u(l.mouseX,l.height-l.mouseY))},l.mouseReleased=()=>{const f=s(new u(l.mouseX,l.height-l.mouseY)),d=c.subtract(f);e.position.copy(f),e.velocity.copy(d)}};return ke(()=>{n==null||n.remove()}),[h]}class Wt extends me{constructor(t){super(),he(this,t,At,Yt,fe,{})}}function Ut(i){let t,e,r,o,s,n,h,l="Gravity",c,f,d,g="Toggle",v,w,b;return e=new Te({props:{sketch:i[1]}}),{c(){t=_("div"),oe(e.$$.fragment),r=E(),o=_("table"),s=_("tbody"),n=_("tr"),h=_("th"),h.textContent=l,c=E(),f=_("td"),d=_("button"),d.textContent=g,this.h()},l(m){t=$(m,"DIV",{class:!0});var a=T(t);se(e.$$.fragment,a),a.forEach(y),r=j(m),o=$(m,"TABLE",{});var x=T(o);s=$(x,"TBODY",{});var S=T(s);n=$(S,"TR",{});var O=T(n);h=$(O,"TH",{"data-svelte-h":!0}),H(h)!=="svelte-vy75us"&&(h.textContent=l),c=j(O),f=$(O,"TD",{});var F=T(f);d=$(F,"BUTTON",{"data-svelte-h":!0}),H(d)!=="svelte-18lc94l"&&(d.textContent=g),F.forEach(y),O.forEach(y),S.forEach(y),x.forEach(y),this.h()},h(){L(t,"class","d-flex justify-content-center")},m(m,a){C(m,t,a),re(e,t,null),C(m,r,a),C(m,o,a),p(o,s),p(s,n),p(n,h),p(n,c),p(n,f),p(f,d),v=!0,w||(b=G(d,"click",i[2]),w=!0)},p:$e,i(m){v||(le(e.$$.fragment,m),v=!0)},o(m){ie(e.$$.fragment,m),v=!1},d(m){m&&(y(t),y(r),y(o)),ce(e),w=!1,b()}}}const Qe=6;function Rt(i){console.clear();const t=new Pe({reporter:()=>{},enableGravity:!0});let e;const r=()=>{for(;t.objects.length;)t.objects.pop();const c=k({geometry:{type:"line",vector:new u(100,0)},position:new u(0,0),fixed:!0});t.addObject(c);const f=k({geometry:{type:"line",vector:new u(100,0)},position:new u(0,100),fixed:!0});t.addObject(f);const d=k({geometry:{type:"line",vector:new u(0,100)},position:new u(0,0),fixed:!0});t.addObject(d);const g=k({geometry:{type:"line",vector:new u(0,100)},position:new u(100,0),fixed:!0});t.addObject(g);const v=k({geometry:{type:"line",vector:new u(50,50)},position:new u(20,10),fixed:!0});t.addObject(v),e=k({geometry:{type:"sphere",r:2},position:new u(20,50),velocity:new u(Math.random()*5-2.5,Math.random()*20)}),t.addObject(e)},o=c=>typeof c=="number"?c*Qe:c.clone().multiplyScalar(Qe),s=c=>typeof c=="number"?c/Qe:c.clone().divideScalar(Qe);let n;const h=c=>{c.setup=()=>{n=c;const d=o(t.dimensions);c.createCanvas(d.x,d.y),c.background(0),c.fill(255),c.stroke(255),r()},c.draw=()=>{if(c.background(0),Le(c)){e.fixed=!0;const d=s(new u(c.mouseX,c.height-c.mouseY));e.position.copy(d)}else e.fixed=!1;t.step(),Ne(c,t)};let f;c.mousePressed=()=>{Ie(c)&&(f=s(new u(c.mouseX,c.height-c.mouseY)))},c.mouseReleased=()=>{if(!Ie(c))return;const d=s(new u(c.mouseX,c.height-c.mouseY)),g=f.subtract(d);e.position.copy(d),e.velocity.copy(g)}};return ke(()=>{n==null||n.remove()}),[t,h,()=>t.toggleGravity()]}class Xt extends me{constructor(t){super(),he(this,t,Rt,Ut,fe,{})}}const Gt=()=>{const i=[],t=k({geometry:{type:"line",vector:new u(15,0)},position:new u(0,0),fixed:!0});i.push(t);const e=k({geometry:{type:"line",vector:new u(0,100)},position:new u(0,0),fixed:!0});i.push(e);const r=k({geometry:{type:"line",vector:new u(0,100)},position:new u(15,0),fixed:!0});i.push(r);const o=k({geometry:{type:"line",vector:new u(3,-3)},position:new u(3.5,8),fixed:!0});i.push(o);const s=k({geometry:{type:"line",vector:new u(3,3)},position:new u(3.5,5),fixed:!0});i.push(s);const n=k({geometry:{type:"line",vector:new u(6,0)},position:new u(2,2),fixed:!0});i.push(n);const h=k({geometry:{type:"line",vector:new u(4,0)},position:new u(3,2.5),fixed:!0});i.push(h);const l=k({geometry:{type:"line",vector:new u(2,0)},position:new u(4,3),fixed:!0});i.push(l);const c=k({geometry:{type:"line",vector:new u(.6,0)},position:new u(4.7,3.5),fixed:!0});i.push(c);const f=k({geometry:{type:"line",vector:new u(1,0)},position:new u(10,10.1),fixed:!0});i.push(f);const d=k({geometry:{type:"line",vector:new u(0,-4)},position:new u(11,10),fixed:!0});i.push(d);const g=k({geometry:{type:"line",vector:new u(0,-4)},position:new u(11.5,10),fixed:!0});i.push(g);const v=k({geometry:{type:"line",vector:new u(0,-4)},position:new u(12,10),fixed:!0});i.push(v);const w=k({geometry:{type:"line",vector:new u(1,0)},position:new u(12,10.1),fixed:!0});i.push(w);for(let m=.2;m<.5;m+=.1)for(let a=0;a<10;a++){const x=k({geometry:{type:"line",vector:new u(0,3)},position:new u(9+a*m,1),fixed:!0});i.push(x)}const b=k({geometry:{type:"sphere",r:.1},position:new u(5,10),velocity:new u(0,0)});return i.push(b),{objects:i,sphere:b}};function Ht(i){let t,e,r,o,s,n=i[0]?"Disable":"Enable",h,l,c,f,d=i[1]?"Play":"Pause",g,v,w,b="Reset",m,a,x,S,O,F,N,A,Q,Y="Simulation time/Frame duration",M,D,B=i[2].t+"",W,ee,te,R=i[2].frameTime+"",z,ye,V,U,P="Sphere position",X,Z,ge=i[2].spherePos.x.toFixed(2)+"",we,ae,de,be=i[2].spherePos.y.toFixed(2)+"",Ce,De,Se,Be,st="Sphere velocity",Ke,Me,Ye=i[2].sphereVel.x.toFixed(2)+"",Xe,Ze,Ae,We=i[2].sphereVel.y.toFixed(2)+"",Ge,pe,et,rt;return e=new Te({props:{sketch:i[5]}}),a=new gt({props:{onShoot:i[6]}}),S=new ot({props:{world:i[3]}}),{c(){t=_("div"),oe(e.$$.fragment),r=E(),o=_("div"),s=_("button"),h=J(n),l=J(" pause on collision"),c=E(),f=_("button"),g=J(d),v=E(),w=_("button"),w.textContent=b,m=E(),oe(a.$$.fragment),x=E(),oe(S.$$.fragment),O=E(),F=_("table"),N=_("tbody"),A=_("tr"),Q=_("th"),Q.textContent=Y,M=E(),D=_("td"),W=J(B),ee=E(),te=_("td"),z=J(R),ye=E(),V=_("tr"),U=_("th"),U.textContent=P,X=E(),Z=_("td"),we=J(ge),ae=E(),de=_("td"),Ce=J(be),De=E(),Se=_("tr"),Be=_("th"),Be.textContent=st,Ke=E(),Me=_("td"),Xe=J(Ye),Ze=E(),Ae=_("td"),Ge=J(We),this.h()},l(I){t=$(I,"DIV",{class:!0});var q=T(t);se(e.$$.fragment,q),q.forEach(y),r=j(I),o=$(I,"DIV",{});var Ee=T(o);s=$(Ee,"BUTTON",{});var tt=T(s);h=K(tt,n),l=K(tt," pause on collision"),tt.forEach(y),c=j(Ee),f=$(Ee,"BUTTON",{});var lt=T(f);g=K(lt,d),lt.forEach(y),v=j(Ee),w=$(Ee,"BUTTON",{"data-svelte-h":!0}),H(w)!=="svelte-tlxueg"&&(w.textContent=b),Ee.forEach(y),m=j(I),se(a.$$.fragment,I),x=j(I),se(S.$$.fragment,I),O=j(I),F=$(I,"TABLE",{});var it=T(F);N=$(it,"TBODY",{});var Ue=T(N);A=$(Ue,"TR",{});var Ve=T(A);Q=$(Ve,"TH",{"data-svelte-h":!0}),H(Q)!=="svelte-rirgm4"&&(Q.textContent=Y),M=j(Ve),D=$(Ve,"TD",{});var ct=T(D);W=K(ct,B),ct.forEach(y),ee=j(Ve),te=$(Ve,"TD",{});var at=T(te);z=K(at,R),at.forEach(y),Ve.forEach(y),ye=j(Ue),V=$(Ue,"TR",{});var Oe=T(V);U=$(Oe,"TH",{"data-svelte-h":!0}),H(U)!=="svelte-1y1nif6"&&(U.textContent=P),X=j(Oe),Z=$(Oe,"TD",{});var ut=T(Z);we=K(ut,ge),ut.forEach(y),ae=j(Oe),de=$(Oe,"TD",{});var dt=T(de);Ce=K(dt,be),dt.forEach(y),De=j(Oe),Oe.forEach(y),Se=$(Ue,"TR",{});var Fe=T(Se);Be=$(Fe,"TH",{"data-svelte-h":!0}),H(Be)!=="svelte-1uw1fs2"&&(Be.textContent=st),Ke=j(Fe),Me=$(Fe,"TD",{});var ft=T(Me);Xe=K(ft,Ye),ft.forEach(y),Ze=j(Fe),Ae=$(Fe,"TD",{});var mt=T(Ae);Ge=K(mt,We),mt.forEach(y),Fe.forEach(y),Ue.forEach(y),it.forEach(y),this.h()},h(){L(t,"class","d-flex justify-content-center")},m(I,q){C(I,t,q),re(e,t,null),C(I,r,q),C(I,o,q),p(o,s),p(s,h),p(s,l),p(o,c),p(o,f),p(f,g),p(o,v),p(o,w),C(I,m,q),re(a,I,q),C(I,x,q),re(S,I,q),C(I,O,q),C(I,F,q),p(F,N),p(N,A),p(A,Q),p(A,M),p(A,D),p(D,W),p(A,ee),p(A,te),p(te,z),p(N,ye),p(N,V),p(V,U),p(V,X),p(V,Z),p(Z,we),p(V,ae),p(V,de),p(de,Ce),p(V,De),p(N,Se),p(Se,Be),p(Se,Ke),p(Se,Me),p(Me,Xe),p(Se,Ze),p(Se,Ae),p(Ae,Ge),pe=!0,et||(rt=[G(s,"click",i[7]),G(f,"click",i[8]),G(w,"click",i[4])],et=!0)},p(I,[q]){(!pe||q&1)&&n!==(n=I[0]?"Disable":"Enable")&&ne(h,n),(!pe||q&2)&&d!==(d=I[1]?"Play":"Pause")&&ne(g,d);const Ee={};q&8&&(Ee.world=I[3]),S.$set(Ee),(!pe||q&4)&&B!==(B=I[2].t+"")&&ne(W,B),(!pe||q&4)&&R!==(R=I[2].frameTime+"")&&ne(z,R),(!pe||q&4)&&ge!==(ge=I[2].spherePos.x.toFixed(2)+"")&&ne(we,ge),(!pe||q&4)&&be!==(be=I[2].spherePos.y.toFixed(2)+"")&&ne(Ce,be),(!pe||q&4)&&Ye!==(Ye=I[2].sphereVel.x.toFixed(2)+"")&&ne(Xe,Ye),(!pe||q&4)&&We!==(We=I[2].sphereVel.y.toFixed(2)+"")&&ne(Ge,We)},i(I){pe||(le(e.$$.fragment,I),le(a.$$.fragment,I),le(S.$$.fragment,I),pe=!0)},o(I){ie(e.$$.fragment,I),ie(a.$$.fragment,I),ie(S.$$.fragment,I),pe=!1},d(I){I&&(y(t),y(r),y(o),y(m),y(x),y(O),y(F)),ce(e),ce(a,I),ce(S,I),et=!1,Re(rt)}}}const Je=60;function zt(i,t,e){console.clear();let r=!1,o=!1,s={t:"0",frameTime:"0",spherePos:new u(0,0),sphereVel:new u(0,0),ballIsColliding:!1},n,h;const l=()=>{e(3,n=new Pe({dimensions:new u(15,15),reporter:a=>{var x;e(2,s.t=(x=a==null?void 0:a.t)==null?void 0:x.toFixed(1),s),s.spherePos.copy(h.position).unfloat(),s.sphereVel.copy(h.velocity).unfloat(),e(2,s.frameTime=a.frameTime.toFixed(2),s),e(2,s),e(2,s.ballIsColliding=h.data.isColliding,s),r&&h.data.isColliding&&!o&&e(1,o=!0)},enableGravity:!0}));const m=Gt();h=m.sphere;for(const a of m.objects)n.addObject(a)},c=m=>typeof m=="number"?m*Je:m.clone().multiplyScalar(Je),f=m=>typeof m=="number"?m/Je:m.clone().divideScalar(Je);let d;const g=m=>{m.setup=()=>{d=m,l();const S=c(n.dimensions);m.createCanvas(S.x,S.y),m.background(0),m.fill(255),m.stroke(255),l()},m.draw=()=>{m.background(0),Le(m)?h.fixed=!0:h.fixed=!1,o||n.step(),Ne(m,n),x(m)};let a;m.mousePressed=()=>{Ie(m)&&(a=f(new u(m.mouseX,m.height-m.mouseY)),h.position.copy(a))},m.mouseReleased=()=>{if(!Ie(m)||!a)return;const S=f(new u(m.mouseX,m.height-m.mouseY)),O=a.subtract(S).multiplyScalar(3);a=void 0,h.velocity.copy(O)};const x=S=>{if(!a)return;S.stroke("blue"),S.strokeWeight(2);const O=c(a);S.line(O.x,S.height-O.y,S.mouseX,S.mouseY)}},v=m=>{m.multiplyScalar(1e4),n.applyForce(h,m)};return ke(()=>{d==null||d.remove()}),[r,o,s,n,l,g,v,()=>e(0,r=!r),()=>e(1,o=!o)]}let qt=class extends me{constructor(t){super(),he(this,t,zt,Ht,fe,{})}};const Qt=()=>{const i=[],t=k({geometry:{type:"line",vector:new u(15,0)},position:new u(0,0),fixed:!0});i.push(t);const e=k({geometry:{type:"line",vector:new u(0,100)},position:new u(0,0),fixed:!0});i.push(e);const r=k({geometry:{type:"line",vector:new u(0,100)},position:new u(15,0),fixed:!0});i.push(r);const o=k({geometry:{type:"line",vector:new u(3,-3)},position:new u(3.5,8),fixed:!0});i.push(o);const s=k({geometry:{type:"line",vector:new u(3,3)},position:new u(3.5,5),fixed:!0});i.push(s);const n=k({geometry:{type:"line",vector:new u(6,0)},position:new u(2,2),fixed:!0});i.push(n);const h=k({geometry:{type:"line",vector:new u(4,0)},position:new u(3,2.5),fixed:!0});i.push(h);const l=k({geometry:{type:"line",vector:new u(2,0)},position:new u(4,3),fixed:!0});i.push(l);const c=k({geometry:{type:"line",vector:new u(.6,0)},position:new u(4.7,3.5),fixed:!0});i.push(c);const f=k({geometry:{type:"line",vector:new u(1,0)},position:new u(10,10.1),fixed:!0});i.push(f);const d=k({geometry:{type:"line",vector:new u(0,-4)},position:new u(11,10),fixed:!0});i.push(d);const g=k({geometry:{type:"line",vector:new u(0,-4)},position:new u(11.5,10),fixed:!0});i.push(g);const v=k({geometry:{type:"line",vector:new u(0,-4)},position:new u(12,10),fixed:!0});i.push(v);const w=k({geometry:{type:"line",vector:new u(1,0)},position:new u(12,10.1),fixed:!0});i.push(w);for(let b=.2;b<.5;b+=.1)for(let m=0;m<10;m++){const a=k({geometry:{type:"line",vector:new u(0,3)},position:new u(9+m*b,1),fixed:!0});i.push(a)}return{objects:i}};function Jt(i){let t,e,r,o,s,n=i[0]?"Disable":"Enable",h,l,c,f,d=i[1]?"Play":"Pause",g,v,w,b="Reset",m,a,x,S,O,F,N,A="Simulation time/Frame duration",Q,Y,M=i[2].t+"",D,B,W,ee=i[2].frameTime+"",te,R,z,ye;return e=new Te({props:{sketch:i[5]}}),a=new ot({props:{world:i[3]}}),{c(){t=_("div"),oe(e.$$.fragment),r=E(),o=_("div"),s=_("button"),h=J(n),l=J(" pause on collision"),c=E(),f=_("button"),g=J(d),v=E(),w=_("button"),w.textContent=b,m=E(),oe(a.$$.fragment),x=E(),S=_("table"),O=_("tbody"),F=_("tr"),N=_("th"),N.textContent=A,Q=E(),Y=_("td"),D=J(M),B=E(),W=_("td"),te=J(ee),this.h()},l(V){t=$(V,"DIV",{class:!0});var U=T(t);se(e.$$.fragment,U),U.forEach(y),r=j(V),o=$(V,"DIV",{});var P=T(o);s=$(P,"BUTTON",{});var X=T(s);h=K(X,n),l=K(X," pause on collision"),X.forEach(y),c=j(P),f=$(P,"BUTTON",{});var Z=T(f);g=K(Z,d),Z.forEach(y),v=j(P),w=$(P,"BUTTON",{"data-svelte-h":!0}),H(w)!=="svelte-tlxueg"&&(w.textContent=b),P.forEach(y),m=j(V),se(a.$$.fragment,V),x=j(V),S=$(V,"TABLE",{});var ge=T(S);O=$(ge,"TBODY",{});var we=T(O);F=$(we,"TR",{});var ae=T(F);N=$(ae,"TH",{"data-svelte-h":!0}),H(N)!=="svelte-rirgm4"&&(N.textContent=A),Q=j(ae),Y=$(ae,"TD",{});var de=T(Y);D=K(de,M),de.forEach(y),B=j(ae),W=$(ae,"TD",{});var be=T(W);te=K(be,ee),be.forEach(y),ae.forEach(y),we.forEach(y),ge.forEach(y),this.h()},h(){L(t,"class","d-flex justify-content-center")},m(V,U){C(V,t,U),re(e,t,null),C(V,r,U),C(V,o,U),p(o,s),p(s,h),p(s,l),p(o,c),p(o,f),p(f,g),p(o,v),p(o,w),C(V,m,U),re(a,V,U),C(V,x,U),C(V,S,U),p(S,O),p(O,F),p(F,N),p(F,Q),p(F,Y),p(Y,D),p(F,B),p(F,W),p(W,te),R=!0,z||(ye=[G(s,"click",i[6]),G(f,"click",i[7]),G(w,"click",i[4])],z=!0)},p(V,[U]){(!R||U&1)&&n!==(n=V[0]?"Disable":"Enable")&&ne(h,n),(!R||U&2)&&d!==(d=V[1]?"Play":"Pause")&&ne(g,d);const P={};U&8&&(P.world=V[3]),a.$set(P),(!R||U&4)&&M!==(M=V[2].t+"")&&ne(D,M),(!R||U&4)&&ee!==(ee=V[2].frameTime+"")&&ne(te,ee)},i(V){R||(le(e.$$.fragment,V),le(a.$$.fragment,V),R=!0)},o(V){ie(e.$$.fragment,V),ie(a.$$.fragment,V),R=!1},d(V){V&&(y(t),y(r),y(o),y(m),y(x),y(S)),ce(e),ce(a,V),z=!1,Re(ye)}}}const vt=60;function Kt(i,t,e){console.clear();let r=!1,o=!1,s={t:"0",frameTime:"0"},n;const h=()=>{clearInterval(d),d=setInterval(l,100),e(3,n=new Pe({dimensions:new u(15,15),reporter:m=>{var a;e(2,s.t=(a=m==null?void 0:m.t)==null?void 0:a.toFixed(1),s),e(2,s.frameTime=m.frameTime.toFixed(2),s),e(2,s)},enableGravity:!0}));const b=Qt();for(const m of b.objects)n.addObject(m)},l=()=>{console.log("add ball");const b=Math.random()*n.dimensions.x,m=Math.random()*n.dimensions.y,a=-5+Math.random()*10,x=-5+Math.random()*10,S=k({geometry:{type:"sphere",r:.1},position:new u(b,m),velocity:new u(a,x)});n.addObject(S)},c=b=>typeof b=="number"?b*vt:b.clone().multiplyScalar(vt);let f,d;const g=b=>{b.setup=()=>{f=b,h();const m=c(n.dimensions);b.createCanvas(m.x,m.y),b.background(0),b.fill(255),b.stroke(255),h()},b.draw=()=>{b.background(0),o||n.step(),Ne(b,n)}};return ke(()=>{f==null||f.remove(),clearInterval(d)}),[r,o,s,n,h,g,()=>e(0,r=!r),()=>e(1,o=!o)]}class Zt extends me{constructor(t){super(),he(this,t,Kt,Jt,fe,{})}}function en(i){let t,e,r;return e=new Te({props:{sketch:i[0]}}),{c(){t=_("div"),oe(e.$$.fragment),this.h()},l(o){t=$(o,"DIV",{class:!0});var s=T(t);se(e.$$.fragment,s),s.forEach(y),this.h()},h(){L(t,"class","d-flex justify-content-center")},m(o,s){C(o,t,s),re(e,t,null),r=!0},p:$e,i(o){r||(le(e.$$.fragment,o),r=!0)},o(o){ie(e.$$.fragment,o),r=!1},d(o){o&&y(t),ce(e)}}}const je=6;function tn(i){console.clear();let t;const e=k({geometry:{type:"sphere",r:10},position:new u(30,50),velocity:new u(15,15)}),r=k({geometry:{type:"line",vector:new u(80,0)},position:new u(10,70)}),o=new _t,s=n=>{const h=new u(100,100),l=ue(h,je);n.setup=()=>{t=n,n.createCanvas(l.x,l.y),n.noFill()};let c;n.draw=()=>{if(n.background(0),!Le(n))c=void 0;else{const a=nt(new u(n.mouseX,n.height-n.mouseY),je);if(c||(a.distance(e.position)<=e.geometry.r?c="sphere":a.distance(e.position.clone().add(e.velocity))<=6?c="spherevelocity":a.distance(r.position)<=6?c="linestart":a.distance(r.geometry.vector.clone().add(r.position))<=6&&(c="lineend")),c==="sphere")e.position.copy(a);else if(c==="spherevelocity"){const x=a.clone().subtract(e.position);e.velocity.copy(x)}else if(c==="linestart")r.position.copy(a);else if(c==="lineend"){const x=a.clone().subtract(r.position);r.geometry.vector.copy(x)}}const{intersection:f,bouncedVelocity:d}=o.apply(r,e);for(let a=0;a<10;a++){const{positionCorrection:x}=o.apply(r,e);x&&(e.position.add(x.multiplyScalar(.5)),r.position.subtract(x.multiplyScalar(.5)))}n.stroke(255),n.noFill();const g=ue(e.position,je);n.circle(g.x,n.height-g.y,2*e.geometry.r*je),n.stroke(255);const v=ue(e.velocity,je);n.line(g.x,n.height-g.y,g.x+v.x,n.height-(g.y+v.y)),n.stroke(255);const{x:w,y:b}=ue(r.position,je),m=ue(r.geometry.vector,je);if(n.line(w,n.height-b,w+m.x,n.height-(b+m.y)),f){n.stroke("#54d7ff"),n.fill("#54d7ff");const a=ue(f,je);n.circle(a.x,n.height-a.y,5)}if(d){n.stroke("green"),n.fill("green");const a=ue(d,je);n.line(g.x,n.height-g.y,g.x+a.x,n.height-(g.y+a.y))}}};return ke(()=>{t==null||t.remove()}),[s]}class nn extends me{constructor(t){super(),he(this,t,tn,en,fe,{})}}function on(i){let t,e,r;return e=new Te({props:{sketch:i[0]}}),{c(){t=_("div"),oe(e.$$.fragment),this.h()},l(o){t=$(o,"DIV",{class:!0});var s=T(t);se(e.$$.fragment,s),s.forEach(y),this.h()},h(){L(t,"class","d-flex justify-content-center")},m(o,s){C(o,t,s),re(e,t,null),r=!0},p:$e,i(o){r||(le(e.$$.fragment,o),r=!0)},o(o){ie(e.$$.fragment,o),r=!1},d(o){o&&y(t),ce(e)}}}const _e=6;function sn(i){console.clear();let t;const e=k({geometry:{type:"sphere",r:10},position:new u(30,50),velocity:new u(15,15)}),r=k({geometry:{type:"sphere",r:10},position:new u(70,50),velocity:new u(0,45)}),o=new $t,s=n=>{const h=new u(100,100),l=ue(h,_e);n.setup=()=>{t=n,n.createCanvas(l.x,l.y),n.noFill()};let c;n.draw=()=>{if(n.background(0),!Le(n))c=void 0;else{const m=nt(new u(n.mouseX,n.height-n.mouseY),_e);if(c||(m.distance(e.position)<=e.geometry.r?c="sphere":m.distance(e.position.clone().add(e.velocity))<=6?c="spherevelocity":m.distance(r.position)<=r.geometry.r?c="sphere2":m.distance(r.position.clone().add(r.velocity))<=6&&(c="sphere2velocity")),c==="sphere")e.position.copy(m);else if(c==="spherevelocity"){const a=m.clone().subtract(e.position);e.velocity.copy(a)}else if(c==="sphere2")r.position.copy(m);else if(c==="sphere2velocity"){const a=m.clone().subtract(r.position);r.velocity.copy(a)}}const{intersection:f,bouncedVelocity:d}=o.apply(e,r);for(let m=0;m<10;m++){const{positionCorrection:a}=o.apply(e,r);a&&(e.position.add(a.multiplyScalar(.5)),r.position.subtract(a.multiplyScalar(.5)))}n.stroke(255),n.noFill();const g=ue(e.position,_e);n.circle(g.x,n.height-g.y,2*e.geometry.r*_e),n.stroke(255);const v=ue(e.velocity,_e);n.line(g.x,n.height-g.y,g.x+v.x,n.height-(g.y+v.y)),n.stroke(255),n.noFill();const w=ue(r.position,_e);n.circle(w.x,n.height-w.y,2*r.geometry.r*_e),n.stroke(255);const b=ue(r.velocity,_e);if(n.line(w.x,n.height-w.y,w.x+b.x,n.height-(w.y+b.y)),f){n.stroke("#54d7ff"),n.fill("#54d7ff");const m=ue(f,_e);n.circle(m.x,n.height-m.y,5)}if(d){n.stroke("green"),n.fill("green");const m=ue(d,_e);n.line(g.x,n.height-g.y,g.x+m.x,n.height-(g.y+m.y))}}};return ke(()=>{t==null||t.remove()}),[s]}class rn extends me{constructor(t){super(),he(this,t,sn,on,fe,{})}}function ln(i){let t,e="<span>This page is a list of engine tests. They use the actual engine and allow me to setup different situations and check manually for regressions and bugs.</span> <br/> <span>Use the selection menu to see the different pages</span>",r,o,s,n,h;return n=new bt({props:{tabs:i[0]}}),{c(){t=_("div"),t.innerHTML=e,r=E(),o=_("br"),s=E(),oe(n.$$.fragment)},l(l){t=$(l,"DIV",{"data-svelte-h":!0}),H(t)!=="svelte-11mzr87"&&(t.innerHTML=e),r=j(l),o=$(l,"BR",{}),s=j(l),se(n.$$.fragment,l)},m(l,c){C(l,t,c),C(l,r,c),C(l,o,c),C(l,s,c),re(n,l,c),h=!0},p:$e,i(l){h||(le(n.$$.fragment,l),h=!0)},o(l){ie(n.$$.fragment,l),h=!1},d(l){l&&(y(t),y(r),y(o),y(s)),ce(n,l)}}}function cn(i){return[[{label:"Fireworks",value:Tt},{label:"Ball pool",value:Bt},{label:"Sphere Sphere Collider",value:rn},{label:"Line Sphere Collider",value:nn},{label:"Perfs - Multiple balls",value:Zt},{label:"Playground - Engine settings",value:qt},{label:"Dynamics + collisions - 1",value:Xt},{label:"Dynamics + collisions - 2",value:Wt},{label:"Sphere Line - pull apart",value:Mt},{label:"One ball bounce",value:It}]]}class vn extends me{constructor(t){super(),he(this,t,cn,ln,fe,{})}}export{vn as component};
