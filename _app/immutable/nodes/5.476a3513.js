import{s as X,f as L,a as C,g as P,h as O,d as b,c as E,u as U,j as J,i as w,y as K,L as Q,z as Y,M as Z,e as T,E as A,q as H,l as ee,m as te}from"../chunks/scheduler.e421d989.js";import{S as F,i as G,b as v,d as S,m as k,a as g,t as _,e as j,g as B,c as I}from"../chunks/index.52486247.js";import{e as R}from"../chunks/each.e59479a4.js";import{V as p,P as ne,a as N,T as oe,b as se,c as re,d as ie}from"../chunks/p5utils.fe4d08ff.js";import{c as y,W as ce}from"../chunks/PhysicObject.c3e4b7e0.js";const ae=(f,e)=>{const s=[],t=f.x,o=f.y,c=1,n=5,a=.3,i=4,l=.5,u=.2,r=Math.random()*(t-n),h=o-Math.random()*(o-i),m=Math.random()*n+c,d=Math.random()*i+a,x=Math.random()*l+u;ue({x:r,y:h,w:m,h:d,topRatio:x},e).forEach(W=>s.push(W)),fe(f).forEach(W=>s.push(W));const $=le(new p(Math.random()*t,Math.random()*o));for(;$.position.x>r&&$.position.x<r+m&&$.position.y<h&&$.position.y>h+d;)$.position.x=Math.random()*t,$.position.y=Math.random()*o;return s.push($),{objects:s,sphere:$}},le=f=>y({geometry:{type:"sphere",r:.1},position:f,velocity:new p(0,0)}),fe=f=>{const e=f.x,s=f.y,t=[],o=y({geometry:{type:"line",vector:new p(e,0)},position:new p(0,0),fixed:!0});t.push(o);const c=y({geometry:{type:"line",vector:new p(0,s*10)},position:new p(0,0),fixed:!0});t.push(c);const n=y({geometry:{type:"line",vector:new p(0,s*10)},position:new p(15,0),fixed:!0});return t.push(n),t},ue=(f,e)=>{const{x:s,y:t,h:o,w:c,topRatio:n}=f;if(n<0||n>1)throw new Error("topRatio must be between 0 and 1");const a=c*n/2,i=c*(1-n),l=.1,u=[],r=y({geometry:{type:"line",vector:new p(a,0)},position:new p(s,t+l),fixed:!0});u.push(r);const h=y({geometry:{type:"line",vector:new p(0,-o)},position:new p(s+a,t),fixed:!0});u.push(h);const m=y({geometry:{type:"line",vector:new p(i,0)},position:new p(s+a,t-o-l),fixed:!0});u.push(m);const d=y({geometry:{type:"line",vector:new p(i-2*l,0)},position:new p(s+a+l,t-o+l),fixed:!0,friction:1,restitution:0,collisionListener:e});u.push(d);const x=y({geometry:{type:"line",vector:new p(0,o)},position:new p(s+a+i,t-o),fixed:!0});u.push(x);const $=y({geometry:{type:"line",vector:new p(a,0)},position:new p(s+a+i,t+l),fixed:!0});return u.push($),u};function me(f){let e,s,t,o,c,n="Reset",a,i,l;return s=new ne({props:{sketch:f[1]}}),{c(){e=L("div"),v(s.$$.fragment),t=C(),o=L("div"),c=L("button"),c.textContent=n,this.h()},l(u){e=P(u,"DIV",{class:!0});var r=O(e);S(s.$$.fragment,r),r.forEach(b),t=E(u),o=P(u,"DIV",{});var h=O(o);c=P(h,"BUTTON",{"data-svelte-h":!0}),U(c)!=="svelte-tlxueg"&&(c.textContent=n),h.forEach(b),this.h()},h(){J(e,"class","d-flex justify-content-center")},m(u,r){w(u,e,r),k(s,e,null),w(u,t,r),w(u,o,r),K(o,c),a=!0,i||(l=Q(c,"click",f[0]),i=!0)},p:Y,i(u){a||(g(s.$$.fragment,u),a=!0)},o(u){_(s.$$.fragment,u),a=!1},d(u){u&&(b(e),b(t),b(o)),j(s),i=!1,l()}}}const M=60;function pe(f){console.clear();let e,s,t;const o=()=>{c()},c=()=>{e=new ce({dimensions:new p(15,15),reporter:()=>{},enableGravity:!0});const r=ae(e.dimensions,o);r.sphere.fixed=!0,s=r.sphere,t=s.position.clone();for(const h of r.objects)e.addObject(h)},n=r=>typeof r=="number"?r*M:r.clone().multiplyScalar(M),a=r=>typeof r=="number"?r/M:r.clone().divideScalar(M),i=(r,h)=>{for(const m of h.objects){r.stroke(m.data.isColliding?"red":"white");const d=r.map(m.position.x,0,h.dimensions.x,0,r.width),x=r.map(m.position.y,0,h.dimensions.y,r.height,0);if(m.geometry.type==="sphere"){const $=n(m.geometry.r*2);r.strokeWeight($),r.point(d,x)}if(m.geometry.type==="line"){const $=d+r.map(m.geometry.vector.x,0,h.dimensions.x,0,r.width),W=x-r.map(m.geometry.vector.y,0,h.dimensions.y,0,r.height);r.strokeWeight(2),r.line(d,x,$,W)}}};let l;const u=r=>{r.setup=()=>{l=r,c();const m=n(e.dimensions);r.createCanvas(m.x,m.y),r.background(0),r.fill(255),r.stroke(255),c()},r.draw=()=>{r.background(0),e.step(),i(r,e),h(r)},r.mousePressed=()=>{N(r)&&(s.position.copy(t),s.velocity.zero(),s.fixed=!0)},r.mouseReleased=()=>{if(!N(r))return;const m=a(new p(r.mouseX,r.height-r.mouseY)),d=t.clone().subtract(m).multiplyScalar(3);s.velocity.copy(d),s.fixed=!1};const h=m=>{if(!s.fixed)return;m.stroke("blue"),m.strokeWeight(2);const d=n(s.position);m.line(d.x,m.height-d.y,m.mouseX,m.mouseY)}};return Z(()=>{l==null||l.remove()}),[c,u]}class he extends F{constructor(e){super(),G(this,e,pe,me,X,{})}}function V(f,e,s){const t=f.slice();return t[1]=e[s],t}function q(f,e,s){const t=f.slice();return t[1]=e[s],t}function $e(f){let e=f[1].title+"",s;return{c(){s=ee(e)},l(t){s=te(t,e)},m(t,o){w(t,s,o)},p:Y,d(t){t&&b(s)}}}function z(f){let e,s;return e=new ie({props:{$$slots:{default:[$e]},$$scope:{ctx:f}}}),{c(){v(e.$$.fragment)},l(t){S(e.$$.fragment,t)},m(t,o){k(e,t,o),s=!0},p(t,o){const c={};o&64&&(c.$$scope={dirty:o,ctx:t}),e.$set(c)},i(t){s||(g(e.$$.fragment,t),s=!0)},o(t){_(e.$$.fragment,t),s=!1},d(t){j(e,t)}}}function de(f){let e,s,t=R(f[0]),o=[];for(let n=0;n<t.length;n+=1)o[n]=z(q(f,t,n));const c=n=>_(o[n],1,1,()=>{o[n]=null});return{c(){for(let n=0;n<o.length;n+=1)o[n].c();e=T()},l(n){for(let a=0;a<o.length;a+=1)o[a].l(n);e=T()},m(n,a){for(let i=0;i<o.length;i+=1)o[i]&&o[i].m(n,a);w(n,e,a),s=!0},p(n,a){if(a&1){t=R(n[0]);let i;for(i=0;i<t.length;i+=1){const l=q(n,t,i);o[i]?(o[i].p(l,a),g(o[i],1)):(o[i]=z(l),o[i].c(),g(o[i],1),o[i].m(e.parentNode,e))}for(B(),i=t.length;i<o.length;i+=1)c(i);I()}},i(n){if(!s){for(let a=0;a<t.length;a+=1)g(o[a]);s=!0}},o(n){o=o.filter(Boolean);for(let a=0;a<o.length;a+=1)_(o[a]);s=!1},d(n){n&&b(e),A(o,n)}}}function ge(f){let e,s,t;var o=f[1].component;function c(n,a){return{}}return o&&(e=H(o,c())),{c(){e&&v(e.$$.fragment),s=C()},l(n){e&&S(e.$$.fragment,n),s=E(n)},m(n,a){e&&k(e,n,a),w(n,s,a),t=!0},p(n,a){if(o!==(o=n[1].component)){if(e){B();const i=e;_(i.$$.fragment,1,0,()=>{j(i,1)}),I()}o?(e=H(o,c()),v(e.$$.fragment),g(e.$$.fragment,1),k(e,s.parentNode,s)):e=null}},i(n){t||(e&&g(e.$$.fragment,n),t=!0)},o(n){e&&_(e.$$.fragment,n),t=!1},d(n){n&&b(s),e&&j(e,n)}}}function D(f){let e,s;return e=new re({props:{$$slots:{default:[ge]},$$scope:{ctx:f}}}),{c(){v(e.$$.fragment)},l(t){S(e.$$.fragment,t)},m(t,o){k(e,t,o),s=!0},p(t,o){const c={};o&64&&(c.$$scope={dirty:o,ctx:t}),e.$set(c)},i(t){s||(g(e.$$.fragment,t),s=!0)},o(t){_(e.$$.fragment,t),s=!1},d(t){j(e,t)}}}function _e(f){let e,s,t,o;e=new se({props:{$$slots:{default:[de]},$$scope:{ctx:f}}});let c=R(f[0]),n=[];for(let i=0;i<c.length;i+=1)n[i]=D(V(f,c,i));const a=i=>_(n[i],1,1,()=>{n[i]=null});return{c(){v(e.$$.fragment),s=C();for(let i=0;i<n.length;i+=1)n[i].c();t=T()},l(i){S(e.$$.fragment,i),s=E(i);for(let l=0;l<n.length;l+=1)n[l].l(i);t=T()},m(i,l){k(e,i,l),w(i,s,l);for(let u=0;u<n.length;u+=1)n[u]&&n[u].m(i,l);w(i,t,l),o=!0},p(i,l){const u={};if(l&64&&(u.$$scope={dirty:l,ctx:i}),e.$set(u),l&1){c=R(i[0]);let r;for(r=0;r<c.length;r+=1){const h=V(i,c,r);n[r]?(n[r].p(h,l),g(n[r],1)):(n[r]=D(h),n[r].c(),g(n[r],1),n[r].m(t.parentNode,t))}for(B(),r=c.length;r<n.length;r+=1)a(r);I()}},i(i){if(!o){g(e.$$.fragment,i);for(let l=0;l<c.length;l+=1)g(n[l]);o=!0}},o(i){_(e.$$.fragment,i),n=n.filter(Boolean);for(let l=0;l<n.length;l+=1)_(n[l]);o=!1},d(i){i&&(b(s),b(t)),j(e,i),A(n,i)}}}function ye(f){let e,s;return e=new oe({props:{$$slots:{default:[_e]},$$scope:{ctx:f}}}),{c(){v(e.$$.fragment)},l(t){S(e.$$.fragment,t)},m(t,o){k(e,t,o),s=!0},p(t,[o]){const c={};o&64&&(c.$$scope={dirty:o,ctx:t}),e.$set(c)},i(t){s||(g(e.$$.fragment,t),s=!0)},o(t){_(e.$$.fragment,t),s=!1},d(t){j(e,t)}}}function be(f){return[[{title:"Bucket",component:he}]]}class Se extends F{constructor(e){super(),G(this,e,be,ye,X,{})}}export{Se as component};
