import{s as ae,f as w,a as j,l as X,g as _,h as C,d as p,c as P,m as H,u as G,j as F,i as S,y,L as q,n as Q,M as Te,z as we,e as ut,P as be,Q as Oe,O as He}from"../chunks/scheduler.32ebed32.js";import{S as ue,i as de,b as ne,d as oe,m as se,a as re,t as ie,e as le}from"../chunks/index.c25c2528.js";import{P as Ce,c as k,V as c,d as Ge,m as Ze,a as Xe,w as ke,s as mt,C as pt}from"../chunks/PhysicObject.d0894205.js";import{W as De,L as yt}from"../chunks/World.8d0b4312.js";function vt(l){let e,o,a,s,t=l[0][l[0].length-1]+"",n,m,r,i="New ball",f,u,x;return o=new Ce({props:{sketch:l[2]}}),{c(){e=w("div"),ne(o.$$.fragment),a=j(),s=w("p"),n=X(t),m=j(),r=w("button"),r.textContent=i,this.h()},l(h){e=_(h,"DIV",{class:!0});var b=C(e);oe(o.$$.fragment,b),b.forEach(p),a=P(h),s=_(h,"P",{});var v=C(s);n=H(v,t),v.forEach(p),m=P(h),r=_(h,"BUTTON",{"data-svelte-h":!0}),G(r)!=="svelte-1jwbm46"&&(r.textContent=i),this.h()},h(){F(e,"class","d-flex justify-content-center")},m(h,b){S(h,e,b),se(o,e,null),S(h,a,b),S(h,s,b),y(s,n),S(h,m,b),S(h,r,b),f=!0,u||(x=q(r,"click",l[1]),u=!0)},p(h,[b]){(!f||b&1)&&t!==(t=h[0][h[0].length-1]+"")&&Q(n,t)},i(h){f||(re(o.$$.fragment,h),f=!0)},o(h){ie(o.$$.fragment,h),f=!1},d(h){h&&(p(e),p(a),p(s),p(m),p(r)),le(o),u=!1,x()}}}function gt(l,e,o){console.clear();let a=[];const s=i=>{const f=i.objects[i.objects.length-1],u=f.position.clone().toFixed(2),x=f.velocity.clone().toFixed(2);a.push(`${i.t.toFixed(2)} - pos: ${u} - vel: ${x}`),a.length>50&&a.shift(),o(0,a)},t=new De({reporter:s,enableGravity:!0}),n=()=>{for(;t.objects.length;)t.objects.pop();const i=k({geometry:{type:"line",vector:new c(100,0)},position:new c(0,0),fixed:!0});t.addObject(i);for(let f=0;f<1;f++){const u=k({geometry:{type:"sphere",r:5},position:new c(20,50),velocity:new c(Math.random()*5-2.5,Math.random()*20)});t.addObject(u)}};let m;const r=i=>{i.setup=()=>{m=i,i.createCanvas(900,600),i.background(0),i.fill(255),i.stroke(255),n()},i.draw=()=>{i.background(0),t.step();for(const f of t.objects){const u=i.map(f.position.x,0,t.dimensions.x,0,i.width),x=i.map(f.position.y,0,t.dimensions.y,i.height,0);if(f.geometry.type==="sphere"&&(i.strokeWeight(f.geometry.r*2),i.point(u,x)),f.geometry.type==="line"){const h=u+i.map(f.geometry.vector.x,0,t.dimensions.x,0,i.width),b=x+i.map(f.geometry.vector.y,0,t.dimensions.y,0,i.height);i.strokeWeight(2),i.line(u,x,h,b)}}}};return Te(()=>{m==null||m.remove()}),[a,n,r]}class bt extends ue{constructor(e){super(),de(this,e,gt,vt,ae,{})}}function wt(l){let e,o,a,s,t=l[0][l[0].length-1]+"",n,m,r,i="New ball",f,u,x;return o=new Ce({props:{sketch:l[2]}}),{c(){e=w("div"),ne(o.$$.fragment),a=j(),s=w("p"),n=X(t),m=j(),r=w("button"),r.textContent=i,this.h()},l(h){e=_(h,"DIV",{class:!0});var b=C(e);oe(o.$$.fragment,b),b.forEach(p),a=P(h),s=_(h,"P",{});var v=C(s);n=H(v,t),v.forEach(p),m=P(h),r=_(h,"BUTTON",{"data-svelte-h":!0}),G(r)!=="svelte-1jwbm46"&&(r.textContent=i),this.h()},h(){F(e,"class","d-flex justify-content-center")},m(h,b){S(h,e,b),se(o,e,null),S(h,a,b),S(h,s,b),y(s,n),S(h,m,b),S(h,r,b),f=!0,u||(x=q(r,"click",l[1]),u=!0)},p(h,[b]){(!f||b&1)&&t!==(t=h[0][h[0].length-1]+"")&&Q(n,t)},i(h){f||(re(o.$$.fragment,h),f=!0)},o(h){ie(o.$$.fragment,h),f=!1},d(h){h&&(p(e),p(a),p(s),p(m),p(r)),le(o),u=!1,x()}}}const Ae=6;function _t(l,e,o){console.clear();let a=[];const s=u=>{const x=u.objects[u.objects.length-1],h=x.position.clone().toFixed(2),b=x.velocity.clone().toFixed(2);a.push(`${u.t.toFixed(2)} - pos: ${h} - vel: ${b}`),a.length>50&&a.shift(),o(0,a)},t=new De({reporter:s,enableGravity:!0});let n,m;const r=()=>{for(;t.objects.length;)t.objects.pop();m=k({geometry:{type:"line",vector:new c(40,40)},position:new c(30,30),fixed:!0}),t.addObject(m),n=k({geometry:{type:"sphere",r:10},position:new c(20,50),velocity:new c(2.5,2.5),fixed:!0}),t.addObject(n)};let i;const f=u=>{const x=v=>typeof v=="number"?v*Ae:v.clone().multiplyScalar(Ae),h=v=>typeof v=="number"?v/Ae:v.clone().divideScalar(Ae);u.setup=()=>{i=u;const v=x(t.dimensions);u.createCanvas(v.x,v.y),u.background(0),u.fill(255),u.stroke(255),r()};let b;u.draw=()=>{if(u.background(0),t.step(),u.mouseIsPressed){const v=h(new c(u.mouseX,u.height-u.mouseY));if(b||(v.distance(n.position)<2?b="sphere":v.distance(m.position)<2?b="wallstart":v.distance(m.geometry.vector.clone().add(m.position))<2&&(b="wallend")),b==="sphere"&&n.position.copy(v),b==="wallstart"&&m.position.copy(v),b==="wallend"){const d=v.clone().subtract(m.position);m.geometry.vector.copy(d)}}else b=void 0;for(const v of t.objects.sort((d,g)=>d.geometry.type<g.geometry.type?1:-1)){u.stroke(n.data.isColliding?"red":"white");const d=u.map(v.position.x,0,t.dimensions.x,0,u.width),g=u.map(v.position.y,0,t.dimensions.y,u.height,0);if(v.geometry.type==="sphere"){const $=x(v.geometry.r*2);u.strokeWeight($),u.point(d,g)}if(v.geometry.type==="line"){const $=d+u.map(v.geometry.vector.x,0,t.dimensions.x,0,u.width),T=g-u.map(v.geometry.vector.y,0,t.dimensions.y,0,u.height);u.stroke("blue"),u.strokeWeight(2),u.line(d,g,$,T)}}}};return Te(()=>{i==null||i.remove()}),[a,r,f]}class xt extends ue{constructor(e){super(),de(this,e,_t,wt,ae,{})}}function $t(l){let e,o,a;return o=new Ce({props:{sketch:l[0]}}),{c(){e=w("div"),ne(o.$$.fragment),this.h()},l(s){e=_(s,"DIV",{class:!0});var t=C(e);oe(o.$$.fragment,t),t.forEach(p),this.h()},h(){F(e,"class","d-flex justify-content-center")},m(s,t){S(s,e,t),se(o,e,null),a=!0},p:we,i(s){a||(re(o.$$.fragment,s),a=!0)},o(s){ie(o.$$.fragment,s),a=!1},d(s){s&&p(e),le(o)}}}const Ue=6;function kt(l){console.clear();const e=new De({reporter:()=>{},enableGravity:!0});let o;const a=()=>{for(;e.objects.length;)e.objects.pop();o=k({geometry:{type:"sphere",r:5},position:new c(20,50),velocity:new c(Math.random()*5-2.5,Math.random()*20)}),e.addObject(o);const r=k({geometry:{type:"line",vector:new c(100,0)},position:new c(0,2),fixed:!0});e.addObject(r);const i=k({geometry:{type:"line",vector:new c(100,0)},position:new c(0,98),fixed:!0});e.addObject(i);const f=k({geometry:{type:"line",vector:new c(0,100)},position:new c(2,0),fixed:!0});e.addObject(f);const u=k({geometry:{type:"line",vector:new c(0,100)},position:new c(98,0),fixed:!0});e.addObject(u);const x=k({geometry:{type:"line",vector:new c(50,50)},position:new c(20,10),fixed:!0});e.addObject(x)},s=r=>typeof r=="number"?r*Ue:r.clone().multiplyScalar(Ue),t=r=>typeof r=="number"?r/Ue:r.clone().divideScalar(Ue);let n;const m=r=>{r.setup=()=>{n=r;const f=s(e.dimensions);r.createCanvas(f.x,f.y),r.background(0),r.fill(255),r.stroke(255),a()},r.draw=()=>{if(r.background(0),r.mouseIsPressed){o.fixed=!0;const f=t(new c(r.mouseX,r.height-r.mouseY));o.position.copy(f)}else o.fixed=!1;e.step(),Ge(r,e)};let i;r.mousePressed=()=>{i=t(new c(r.mouseX,r.height-r.mouseY))},r.mouseReleased=()=>{const f=t(new c(r.mouseX,r.height-r.mouseY)),u=i.subtract(f);o.position.copy(f),o.velocity.copy(u)}};return Te(()=>{n==null||n.remove()}),[m]}class Tt extends ue{constructor(e){super(),de(this,e,kt,$t,ae,{})}}function Ct(l){let e,o,a,s,t,n,m,r="Gravity",i,f,u,x="Toggle",h,b,v;return o=new Ce({props:{sketch:l[1]}}),{c(){e=w("div"),ne(o.$$.fragment),a=j(),s=w("table"),t=w("tbody"),n=w("tr"),m=w("th"),m.textContent=r,i=j(),f=w("td"),u=w("button"),u.textContent=x,this.h()},l(d){e=_(d,"DIV",{class:!0});var g=C(e);oe(o.$$.fragment,g),g.forEach(p),a=P(d),s=_(d,"TABLE",{});var $=C(s);t=_($,"TBODY",{});var T=C(t);n=_(T,"TR",{});var L=C(n);m=_(L,"TH",{"data-svelte-h":!0}),G(m)!=="svelte-vy75us"&&(m.textContent=r),i=P(L),f=_(L,"TD",{});var I=C(f);u=_(I,"BUTTON",{"data-svelte-h":!0}),G(u)!=="svelte-18lc94l"&&(u.textContent=x),I.forEach(p),L.forEach(p),T.forEach(p),$.forEach(p),this.h()},h(){F(e,"class","d-flex justify-content-center")},m(d,g){S(d,e,g),se(o,e,null),S(d,a,g),S(d,s,g),y(s,t),y(t,n),y(n,m),y(n,i),y(n,f),y(f,u),h=!0,b||(v=q(u,"click",l[2]),b=!0)},p:we,i(d){h||(re(o.$$.fragment,d),h=!0)},o(d){ie(o.$$.fragment,d),h=!1},d(d){d&&(p(e),p(a),p(s)),le(o),b=!1,v()}}}const Re=6;function St(l){console.clear();const e=new De({reporter:()=>{},enableGravity:!0});let o;const a=()=>{for(;e.objects.length;)e.objects.pop();const i=k({geometry:{type:"line",vector:new c(100,0)},position:new c(0,0),fixed:!0});e.addObject(i);const f=k({geometry:{type:"line",vector:new c(100,0)},position:new c(0,100),fixed:!0});e.addObject(f);const u=k({geometry:{type:"line",vector:new c(0,100)},position:new c(0,0),fixed:!0});e.addObject(u);const x=k({geometry:{type:"line",vector:new c(0,100)},position:new c(100,0),fixed:!0});e.addObject(x);const h=k({geometry:{type:"line",vector:new c(50,50)},position:new c(20,10),fixed:!0});e.addObject(h),o=k({geometry:{type:"sphere",r:2},position:new c(20,50),velocity:new c(Math.random()*5-2.5,Math.random()*20)}),e.addObject(o)},s=i=>typeof i=="number"?i*Re:i.clone().multiplyScalar(Re),t=i=>typeof i=="number"?i/Re:i.clone().divideScalar(Re);let n;const m=i=>{i.setup=()=>{n=i;const u=s(e.dimensions);i.createCanvas(u.x,u.y),i.background(0),i.fill(255),i.stroke(255),a()},i.draw=()=>{if(i.background(0),Ze(i)){o.fixed=!0;const u=t(new c(i.mouseX,i.height-i.mouseY));o.position.copy(u)}else o.fixed=!1;e.step(),Ge(i,e)};let f;i.mousePressed=()=>{Xe(i)&&(f=t(new c(i.mouseX,i.height-i.mouseY)))},i.mouseReleased=()=>{if(!Xe(i))return;const u=t(new c(i.mouseX,i.height-i.mouseY)),x=f.subtract(u);o.position.copy(u),o.velocity.copy(x)}};return Te(()=>{n==null||n.remove()}),[e,m,()=>e.toggleGravity()]}class Et extends ue{constructor(e){super(),de(this,e,St,Ct,ae,{})}}function dt(l){let e,o,a,s,t="dt",n,m,r,i,f,u,x="drag",h,b,v,d,g,$,T="gravity enabled",L,I,V,N,z;return{c(){e=w("table"),o=w("tbody"),a=w("tr"),s=w("th"),s.textContent=t,n=j(),m=w("td"),r=w("input"),i=j(),f=w("tr"),u=w("th"),u.textContent=x,h=j(),b=w("td"),v=w("input"),d=j(),g=w("tr"),$=w("th"),$.textContent=T,L=j(),I=w("td"),V=w("input"),this.h()},l(W){e=_(W,"TABLE",{});var U=C(e);o=_(U,"TBODY",{});var E=C(o);a=_(E,"TR",{});var B=C(a);s=_(B,"TH",{"data-svelte-h":!0}),G(s)!=="svelte-16dheti"&&(s.textContent=t),n=P(B),m=_(B,"TD",{});var R=C(m);r=_(R,"INPUT",{type:!0,min:!0,max:!0,step:!0}),R.forEach(p),B.forEach(p),i=P(E),f=_(E,"TR",{});var J=C(f);u=_(J,"TH",{"data-svelte-h":!0}),G(u)!=="svelte-2hq5g"&&(u.textContent=x),h=P(J),b=_(J,"TD",{});var K=C(b);v=_(K,"INPUT",{type:!0,min:!0,max:!0,step:!0}),K.forEach(p),J.forEach(p),d=P(E),g=_(E,"TR",{});var Y=C(g);$=_(Y,"TH",{"data-svelte-h":!0}),G($)!=="svelte-ic0r87"&&($.textContent=T),L=P(Y),I=_(Y,"TD",{});var te=C(I);V=_(te,"INPUT",{type:!0}),te.forEach(p),Y.forEach(p),E.forEach(p),U.forEach(p),this.h()},h(){F(r,"type","number"),F(r,"min","0"),F(r,"max","0.5"),F(r,"step","0.001"),F(v,"type","number"),F(v,"min","0"),F(v,"max","0.01"),F(v,"step","0.001"),F(V,"type","checkbox")},m(W,U){S(W,e,U),y(e,o),y(o,a),y(a,s),y(a,n),y(a,m),y(m,r),be(r,l[0].dt),y(o,i),y(o,f),y(f,u),y(f,h),y(f,b),y(b,v),be(v,l[0].drag),y(o,d),y(o,g),y(g,$),y(g,L),y(g,I),y(I,V),V.checked=l[0].gravityEnabled,N||(z=[q(r,"input",l[1]),q(v,"input",l[2]),q(V,"change",l[3])],N=!0)},p(W,U){U&1&&Oe(r.value)!==W[0].dt&&be(r,W[0].dt),U&1&&Oe(v.value)!==W[0].drag&&be(v,W[0].drag),U&1&&(V.checked=W[0].gravityEnabled)},d(W){W&&p(e),N=!1,He(z)}}}function jt(l){let e,o="Engine settings",a,s,t=l[0]&&dt(l);return{c(){e=w("p"),e.textContent=o,a=j(),t&&t.c(),s=ut(),this.h()},l(n){e=_(n,"P",{class:!0,"data-svelte-h":!0}),G(e)!=="svelte-gf3gek"&&(e.textContent=o),a=P(n),t&&t.l(n),s=ut(),this.h()},h(){F(e,"class","title svelte-g74uk9")},m(n,m){S(n,e,m),S(n,a,m),t&&t.m(n,m),S(n,s,m)},p(n,[m]){n[0]?t?t.p(n,m):(t=dt(n),t.c(),t.m(s.parentNode,s)):t&&(t.d(1),t=null)},i:we,o:we,d(n){n&&(p(e),p(a),p(s)),t&&t.d(n)}}}function Pt(l,e,o){let{world:a}=e;function s(){a.dt=Oe(this.value),o(0,a)}function t(){a.drag=Oe(this.value),o(0,a)}function n(){a.gravityEnabled=this.checked,o(0,a)}return l.$$set=m=>{"world"in m&&o(0,a=m.world)},[a,s,t,n]}class ht extends ue{constructor(e){super(),de(this,e,Pt,jt,ae,{world:0})}}function Ot(l){let e,o="Shooter",a,s,t,n="Angle",m,r,i,f,u,x,h,b,v="Magnitude",d,g,$,T,L,I,V,N,z="Shoot",W,U;return{c(){e=w("p"),e.textContent=o,a=j(),s=w("span"),t=w("label"),t.textContent=n,m=j(),r=w("input"),i=j(),f=X(l[0]),u=X(" deg"),x=j(),h=w("span"),b=w("label"),b.textContent=v,d=j(),g=w("input"),$=j(),T=X(l[1]),L=j(),I=w("br"),V=j(),N=w("button"),N.textContent=z,this.h()},l(E){e=_(E,"P",{class:!0,"data-svelte-h":!0}),G(e)!=="svelte-198ugk3"&&(e.textContent=o),a=P(E),s=_(E,"SPAN",{});var B=C(s);t=_(B,"LABEL",{for:!0,"data-svelte-h":!0}),G(t)!=="svelte-lab87n"&&(t.textContent=n),m=P(B),r=_(B,"INPUT",{id:!0,type:!0,min:!0,max:!0}),i=P(B),f=H(B,l[0]),u=H(B," deg"),B.forEach(p),x=P(E),h=_(E,"SPAN",{});var R=C(h);b=_(R,"LABEL",{for:!0,"data-svelte-h":!0}),G(b)!=="svelte-1vc5oxa"&&(b.textContent=v),d=P(R),g=_(R,"INPUT",{id:!0,type:!0,min:!0,max:!0,step:!0}),$=P(R),T=H(R,l[1]),R.forEach(p),L=P(E),I=_(E,"BR",{}),V=P(E),N=_(E,"BUTTON",{"data-svelte-h":!0}),G(N)!=="svelte-8jpwxr"&&(N.textContent=z),this.h()},h(){F(e,"class","title svelte-g74uk9"),F(t,"for","angleSlider"),F(r,"id","angleSlider"),F(r,"type","range"),F(r,"min","0"),F(r,"max","360"),F(b,"for","magSlider"),F(g,"id","magSlider"),F(g,"type","range"),F(g,"min","0"),F(g,"max","1"),F(g,"step","0.01")},m(E,B){S(E,e,B),S(E,a,B),S(E,s,B),y(s,t),y(s,m),y(s,r),be(r,l[0]),y(s,i),y(s,f),y(s,u),S(E,x,B),S(E,h,B),y(h,b),y(h,d),y(h,g),be(g,l[1]),y(h,$),y(h,T),S(E,L,B),S(E,I,B),S(E,V,B),S(E,N,B),W||(U=[q(r,"change",l[4]),q(r,"input",l[4]),q(g,"change",l[5]),q(g,"input",l[5]),q(N,"click",l[6])],W=!0)},p(E,[B]){B&1&&be(r,E[0]),B&1&&Q(f,E[0]),B&2&&be(g,E[1]),B&2&&Q(T,E[1])},i:we,o:we,d(E){E&&(p(e),p(a),p(s),p(x),p(h),p(L),p(I),p(V),p(N)),W=!1,He(U)}}}function Dt(l,e,o){let{onShoot:a}=e,s=0,t=.5;const n=()=>{const f=new c(1,0);f.rotateDeg(s),f.multiplyScalar(t),a(f)};function m(){s=Oe(this.value),o(0,s)}function r(){t=Oe(this.value),o(1,t)}const i=()=>n();return l.$$set=f=>{"onShoot"in f&&o(3,a=f.onShoot)},[s,t,n,a,m,r,i]}class Bt extends ue{constructor(e){super(),de(this,e,Dt,Ot,ae,{onShoot:3})}}const It=()=>{const l=[],e=k({geometry:{type:"line",vector:new c(15,0)},position:new c(0,0),fixed:!0});l.push(e);const o=k({geometry:{type:"line",vector:new c(0,100)},position:new c(0,0),fixed:!0});l.push(o);const a=k({geometry:{type:"line",vector:new c(0,100)},position:new c(15,0),fixed:!0});l.push(a);const s=k({geometry:{type:"line",vector:new c(3,-3)},position:new c(3.5,8),fixed:!0});l.push(s);const t=k({geometry:{type:"line",vector:new c(3,3)},position:new c(3.5,5),fixed:!0});l.push(t);const n=k({geometry:{type:"line",vector:new c(6,0)},position:new c(2,2),fixed:!0});l.push(n);const m=k({geometry:{type:"line",vector:new c(4,0)},position:new c(3,2.5),fixed:!0});l.push(m);const r=k({geometry:{type:"line",vector:new c(2,0)},position:new c(4,3),fixed:!0});l.push(r);const i=k({geometry:{type:"line",vector:new c(.6,0)},position:new c(4.7,3.5),fixed:!0});l.push(i);const f=k({geometry:{type:"line",vector:new c(1,0)},position:new c(10,10.1),fixed:!0});l.push(f);const u=k({geometry:{type:"line",vector:new c(0,-4)},position:new c(11,10),fixed:!0});l.push(u);const x=k({geometry:{type:"line",vector:new c(0,-4)},position:new c(11.5,10),fixed:!0});l.push(x);const h=k({geometry:{type:"line",vector:new c(0,-4)},position:new c(12,10),fixed:!0});l.push(h);const b=k({geometry:{type:"line",vector:new c(1,0)},position:new c(12,10.1),fixed:!0});l.push(b);for(let d=.2;d<.5;d+=.1)for(let g=0;g<10;g++){const $=k({geometry:{type:"line",vector:new c(0,3)},position:new c(9+g*d,1),fixed:!0});l.push($)}const v=k({geometry:{type:"sphere",r:.1},position:new c(5,10),velocity:new c(0,0)});return l.push(v),{objects:l,sphere:v}};function Lt(l){let e,o,a,s,t,n=l[0]?"Disable":"Enable",m,r,i,f,u=l[1]?"Play":"Pause",x,h,b,v="Reset",d,g,$,T,L,I,V,N,z,W="Simulation time/Frame duration",U,E,B=l[2].t+"",R,J,K,Y=l[2].frameTime+"",te,Se,O,M,Z="Sphere position",_e,pe,ye=l[2].spherePos.x.toFixed(2)+"",xe,ce,ve,ge=l[2].spherePos.y.toFixed(2)+"",Ne,qe,fe,Ee,et="Sphere velocity",ze,Be,Ie=l[2].sphereVel.x.toFixed(2)+"",We,Qe,Le,Fe=l[2].sphereVel.y.toFixed(2)+"",Me,ee,Je,tt;return o=new Ce({props:{sketch:l[5]}}),g=new Bt({props:{onShoot:l[6]}}),T=new ht({props:{world:l[3]}}),{c(){e=w("div"),ne(o.$$.fragment),a=j(),s=w("div"),t=w("button"),m=X(n),r=X(" pause on collision"),i=j(),f=w("button"),x=X(u),h=j(),b=w("button"),b.textContent=v,d=j(),ne(g.$$.fragment),$=j(),ne(T.$$.fragment),L=j(),I=w("table"),V=w("tbody"),N=w("tr"),z=w("th"),z.textContent=W,U=j(),E=w("td"),R=X(B),J=j(),K=w("td"),te=X(Y),Se=j(),O=w("tr"),M=w("th"),M.textContent=Z,_e=j(),pe=w("td"),xe=X(ye),ce=j(),ve=w("td"),Ne=X(ge),qe=j(),fe=w("tr"),Ee=w("th"),Ee.textContent=et,ze=j(),Be=w("td"),We=X(Ie),Qe=j(),Le=w("td"),Me=X(Fe),this.h()},l(D){e=_(D,"DIV",{class:!0});var A=C(e);oe(o.$$.fragment,A),A.forEach(p),a=P(D),s=_(D,"DIV",{});var he=C(s);t=_(he,"BUTTON",{});var Ke=C(t);m=H(Ke,n),r=H(Ke," pause on collision"),Ke.forEach(p),i=P(he),f=_(he,"BUTTON",{});var nt=C(f);x=H(nt,u),nt.forEach(p),h=P(he),b=_(he,"BUTTON",{"data-svelte-h":!0}),G(b)!=="svelte-tlxueg"&&(b.textContent=v),he.forEach(p),d=P(D),oe(g.$$.fragment,D),$=P(D),oe(T.$$.fragment,D),L=P(D),I=_(D,"TABLE",{});var ot=C(I);V=_(ot,"TBODY",{});var Ve=C(V);N=_(Ve,"TR",{});var je=C(N);z=_(je,"TH",{"data-svelte-h":!0}),G(z)!=="svelte-rirgm4"&&(z.textContent=W),U=P(je),E=_(je,"TD",{});var st=C(E);R=H(st,B),st.forEach(p),J=P(je),K=_(je,"TD",{});var rt=C(K);te=H(rt,Y),rt.forEach(p),je.forEach(p),Se=P(Ve),O=_(Ve,"TR",{});var $e=C(O);M=_($e,"TH",{"data-svelte-h":!0}),G(M)!=="svelte-1y1nif6"&&(M.textContent=Z),_e=P($e),pe=_($e,"TD",{});var it=C(pe);xe=H(it,ye),it.forEach(p),ce=P($e),ve=_($e,"TD",{});var lt=C(ve);Ne=H(lt,ge),lt.forEach(p),qe=P($e),$e.forEach(p),fe=_(Ve,"TR",{});var Pe=C(fe);Ee=_(Pe,"TH",{"data-svelte-h":!0}),G(Ee)!=="svelte-1uw1fs2"&&(Ee.textContent=et),ze=P(Pe),Be=_(Pe,"TD",{});var ct=C(Be);We=H(ct,Ie),ct.forEach(p),Qe=P(Pe),Le=_(Pe,"TD",{});var at=C(Le);Me=H(at,Fe),at.forEach(p),Pe.forEach(p),Ve.forEach(p),ot.forEach(p),this.h()},h(){F(e,"class","d-flex justify-content-center")},m(D,A){S(D,e,A),se(o,e,null),S(D,a,A),S(D,s,A),y(s,t),y(t,m),y(t,r),y(s,i),y(s,f),y(f,x),y(s,h),y(s,b),S(D,d,A),se(g,D,A),S(D,$,A),se(T,D,A),S(D,L,A),S(D,I,A),y(I,V),y(V,N),y(N,z),y(N,U),y(N,E),y(E,R),y(N,J),y(N,K),y(K,te),y(V,Se),y(V,O),y(O,M),y(O,_e),y(O,pe),y(pe,xe),y(O,ce),y(O,ve),y(ve,Ne),y(O,qe),y(V,fe),y(fe,Ee),y(fe,ze),y(fe,Be),y(Be,We),y(fe,Qe),y(fe,Le),y(Le,Me),ee=!0,Je||(tt=[q(t,"click",l[7]),q(f,"click",l[8]),q(b,"click",l[4])],Je=!0)},p(D,[A]){(!ee||A&1)&&n!==(n=D[0]?"Disable":"Enable")&&Q(m,n),(!ee||A&2)&&u!==(u=D[1]?"Play":"Pause")&&Q(x,u);const he={};A&8&&(he.world=D[3]),T.$set(he),(!ee||A&4)&&B!==(B=D[2].t+"")&&Q(R,B),(!ee||A&4)&&Y!==(Y=D[2].frameTime+"")&&Q(te,Y),(!ee||A&4)&&ye!==(ye=D[2].spherePos.x.toFixed(2)+"")&&Q(xe,ye),(!ee||A&4)&&ge!==(ge=D[2].spherePos.y.toFixed(2)+"")&&Q(Ne,ge),(!ee||A&4)&&Ie!==(Ie=D[2].sphereVel.x.toFixed(2)+"")&&Q(We,Ie),(!ee||A&4)&&Fe!==(Fe=D[2].sphereVel.y.toFixed(2)+"")&&Q(Me,Fe)},i(D){ee||(re(o.$$.fragment,D),re(g.$$.fragment,D),re(T.$$.fragment,D),ee=!0)},o(D){ie(o.$$.fragment,D),ie(g.$$.fragment,D),ie(T.$$.fragment,D),ee=!1},d(D){D&&(p(e),p(a),p(s),p(d),p($),p(L),p(I)),le(o),le(g,D),le(T,D),Je=!1,He(tt)}}}const Ye=60;function Ft(l,e,o){console.clear();let a=!1,s=!1,t={t:"0",frameTime:"0",spherePos:new c(0,0),sphereVel:new c(0,0),ballIsColliding:!1},n,m;const r=()=>{o(3,n=new De({dimensions:new c(15,15),reporter:g=>{var $;o(2,t.t=($=g==null?void 0:g.t)==null?void 0:$.toFixed(1),t),t.spherePos.copy(m.position).unfloat(),t.sphereVel.copy(m.velocity).unfloat(),o(2,t.frameTime=g.frameTime.toFixed(2),t),o(2,t),o(2,t.ballIsColliding=m.data.isColliding,t),a&&m.data.isColliding&&!s&&o(1,s=!0)},enableGravity:!0}));const d=It();m=d.sphere;for(const g of d.objects)n.addObject(g)},i=d=>typeof d=="number"?d*Ye:d.clone().multiplyScalar(Ye),f=d=>typeof d=="number"?d/Ye:d.clone().divideScalar(Ye);let u;const x=d=>{d.setup=()=>{u=d,r();const T=i(n.dimensions);d.createCanvas(T.x,T.y),d.background(0),d.fill(255),d.stroke(255),r()},d.draw=()=>{d.background(0),Ze(d)?m.fixed=!0:m.fixed=!1,s||n.step(),Ge(d,n),$(d)};let g;d.mousePressed=()=>{Xe(d)&&(g=f(new c(d.mouseX,d.height-d.mouseY)),m.position.copy(g))},d.mouseReleased=()=>{if(!Xe(d)||!g)return;const T=f(new c(d.mouseX,d.height-d.mouseY)),L=g.subtract(T).multiplyScalar(3);g=void 0,m.velocity.copy(L)};const $=T=>{if(!g)return;T.stroke("blue"),T.strokeWeight(2);const L=i(g);T.line(L.x,T.height-L.y,T.mouseX,T.mouseY)}},h=d=>{d.multiplyScalar(1e4),n.applyForce(m,d)};return Te(()=>{u==null||u.remove()}),[a,s,t,n,r,x,h,()=>o(0,a=!a),()=>o(1,s=!s)]}let Vt=class extends ue{constructor(e){super(),de(this,e,Ft,Lt,ae,{})}};const Nt=()=>{const l=[],e=k({geometry:{type:"line",vector:new c(15,0)},position:new c(0,0),fixed:!0});l.push(e);const o=k({geometry:{type:"line",vector:new c(0,100)},position:new c(0,0),fixed:!0});l.push(o);const a=k({geometry:{type:"line",vector:new c(0,100)},position:new c(15,0),fixed:!0});l.push(a);const s=k({geometry:{type:"line",vector:new c(3,-3)},position:new c(3.5,8),fixed:!0});l.push(s);const t=k({geometry:{type:"line",vector:new c(3,3)},position:new c(3.5,5),fixed:!0});l.push(t);const n=k({geometry:{type:"line",vector:new c(6,0)},position:new c(2,2),fixed:!0});l.push(n);const m=k({geometry:{type:"line",vector:new c(4,0)},position:new c(3,2.5),fixed:!0});l.push(m);const r=k({geometry:{type:"line",vector:new c(2,0)},position:new c(4,3),fixed:!0});l.push(r);const i=k({geometry:{type:"line",vector:new c(.6,0)},position:new c(4.7,3.5),fixed:!0});l.push(i);const f=k({geometry:{type:"line",vector:new c(1,0)},position:new c(10,10.1),fixed:!0});l.push(f);const u=k({geometry:{type:"line",vector:new c(0,-4)},position:new c(11,10),fixed:!0});l.push(u);const x=k({geometry:{type:"line",vector:new c(0,-4)},position:new c(11.5,10),fixed:!0});l.push(x);const h=k({geometry:{type:"line",vector:new c(0,-4)},position:new c(12,10),fixed:!0});l.push(h);const b=k({geometry:{type:"line",vector:new c(1,0)},position:new c(12,10.1),fixed:!0});l.push(b);for(let v=.2;v<.5;v+=.1)for(let d=0;d<10;d++){const g=k({geometry:{type:"line",vector:new c(0,3)},position:new c(9+d*v,1),fixed:!0});l.push(g)}return{objects:l}};function Wt(l){let e,o,a,s,t,n=l[0]?"Disable":"Enable",m,r,i,f,u=l[1]?"Play":"Pause",x,h,b,v="Reset",d,g,$,T,L,I,V,N="Simulation time/Frame duration",z,W,U=l[2].t+"",E,B,R,J=l[2].frameTime+"",K,Y,te,Se;return o=new Ce({props:{sketch:l[5]}}),g=new ht({props:{world:l[3]}}),{c(){e=w("div"),ne(o.$$.fragment),a=j(),s=w("div"),t=w("button"),m=X(n),r=X(" pause on collision"),i=j(),f=w("button"),x=X(u),h=j(),b=w("button"),b.textContent=v,d=j(),ne(g.$$.fragment),$=j(),T=w("table"),L=w("tbody"),I=w("tr"),V=w("th"),V.textContent=N,z=j(),W=w("td"),E=X(U),B=j(),R=w("td"),K=X(J),this.h()},l(O){e=_(O,"DIV",{class:!0});var M=C(e);oe(o.$$.fragment,M),M.forEach(p),a=P(O),s=_(O,"DIV",{});var Z=C(s);t=_(Z,"BUTTON",{});var _e=C(t);m=H(_e,n),r=H(_e," pause on collision"),_e.forEach(p),i=P(Z),f=_(Z,"BUTTON",{});var pe=C(f);x=H(pe,u),pe.forEach(p),h=P(Z),b=_(Z,"BUTTON",{"data-svelte-h":!0}),G(b)!=="svelte-tlxueg"&&(b.textContent=v),Z.forEach(p),d=P(O),oe(g.$$.fragment,O),$=P(O),T=_(O,"TABLE",{});var ye=C(T);L=_(ye,"TBODY",{});var xe=C(L);I=_(xe,"TR",{});var ce=C(I);V=_(ce,"TH",{"data-svelte-h":!0}),G(V)!=="svelte-rirgm4"&&(V.textContent=N),z=P(ce),W=_(ce,"TD",{});var ve=C(W);E=H(ve,U),ve.forEach(p),B=P(ce),R=_(ce,"TD",{});var ge=C(R);K=H(ge,J),ge.forEach(p),ce.forEach(p),xe.forEach(p),ye.forEach(p),this.h()},h(){F(e,"class","d-flex justify-content-center")},m(O,M){S(O,e,M),se(o,e,null),S(O,a,M),S(O,s,M),y(s,t),y(t,m),y(t,r),y(s,i),y(s,f),y(f,x),y(s,h),y(s,b),S(O,d,M),se(g,O,M),S(O,$,M),S(O,T,M),y(T,L),y(L,I),y(I,V),y(I,z),y(I,W),y(W,E),y(I,B),y(I,R),y(R,K),Y=!0,te||(Se=[q(t,"click",l[6]),q(f,"click",l[7]),q(b,"click",l[4])],te=!0)},p(O,[M]){(!Y||M&1)&&n!==(n=O[0]?"Disable":"Enable")&&Q(m,n),(!Y||M&2)&&u!==(u=O[1]?"Play":"Pause")&&Q(x,u);const Z={};M&8&&(Z.world=O[3]),g.$set(Z),(!Y||M&4)&&U!==(U=O[2].t+"")&&Q(E,U),(!Y||M&4)&&J!==(J=O[2].frameTime+"")&&Q(K,J)},i(O){Y||(re(o.$$.fragment,O),re(g.$$.fragment,O),Y=!0)},o(O){ie(o.$$.fragment,O),ie(g.$$.fragment,O),Y=!1},d(O){O&&(p(e),p(a),p(s),p(d),p($),p(T)),le(o),le(g,O),te=!1,He(Se)}}}const ft=60;function Mt(l,e,o){console.clear();let a=!1,s=!1,t={t:"0",frameTime:"0"},n;const m=()=>{clearInterval(u),u=setInterval(r,100),o(3,n=new De({dimensions:new c(15,15),reporter:d=>{var g;o(2,t.t=(g=d==null?void 0:d.t)==null?void 0:g.toFixed(1),t),o(2,t.frameTime=d.frameTime.toFixed(2),t),o(2,t)},enableGravity:!0}));const v=Nt();for(const d of v.objects)n.addObject(d)},r=()=>{console.log("add ball");const v=Math.random()*n.dimensions.x,d=Math.random()*n.dimensions.y,g=-5+Math.random()*10,$=-5+Math.random()*10,T=k({geometry:{type:"sphere",r:.1},position:new c(v,d),velocity:new c(g,$)});n.addObject(T)},i=v=>typeof v=="number"?v*ft:v.clone().multiplyScalar(ft);let f,u;const x=v=>{v.setup=()=>{f=v,m();const d=i(n.dimensions);v.createCanvas(d.x,d.y),v.background(0),v.fill(255),v.stroke(255),m()},v.draw=()=>{v.background(0),s||n.step(),Ge(v,n)}};return Te(()=>{f==null||f.remove(),clearInterval(u)}),[a,s,t,n,m,x,()=>o(0,a=!a),()=>o(1,s=!s)]}class At extends ue{constructor(e){super(),de(this,e,Mt,Wt,ae,{})}}function Ut(l){let e,o,a;return o=new Ce({props:{sketch:l[0]}}),{c(){e=w("div"),ne(o.$$.fragment),this.h()},l(s){e=_(s,"DIV",{class:!0});var t=C(e);oe(o.$$.fragment,t),t.forEach(p),this.h()},h(){F(e,"class","d-flex justify-content-center")},m(s,t){S(s,e,t),se(o,e,null),a=!0},p:we,i(s){a||(re(o.$$.fragment,s),a=!0)},o(s){ie(o.$$.fragment,s),a=!1},d(s){s&&p(e),le(o)}}}const me=6;function Rt(l){console.clear();let e;const o=k({geometry:{type:"sphere",r:10},position:new c(30,50),velocity:new c(15,15)}),a=k({geometry:{type:"line",vector:new c(80,0)},position:new c(10,70)}),s=new yt,t=n=>{const m=new c(100,100),r=ke(m,me);n.setup=()=>{e=n,n.createCanvas(r.x,r.y),n.noFill()};let i;n.draw=()=>{if(n.background(0),!Ze(n))i=void 0;else{const $=mt(new c(n.mouseX,n.height-n.mouseY),me);if(i||($.distance(o.position)<=o.geometry.r?i="sphere":$.distance(o.position.clone().add(o.velocity))<=6?i="spherevelocity":$.distance(a.position)<=6?i="linestart":$.distance(a.geometry.vector.clone().add(a.position))<=6&&(i="lineend")),i==="sphere")o.position.copy($);else if(i==="spherevelocity"){const T=$.clone().subtract(o.position);o.velocity.copy(T)}else if(i==="linestart")a.position.copy($);else if(i==="lineend"){const T=$.clone().subtract(a.position);a.geometry.vector.copy(T)}}const{intersection:f,positionCorrection:u,bouncedVelocity:x}=s.apply(a,o);u&&o.position.add(u),n.stroke(255),n.noFill();const h=ke(o.position,me);n.circle(h.x,n.height-h.y,2*o.geometry.r*me),n.stroke(255);const b=ke(o.velocity,me);n.line(h.x,n.height-h.y,h.x+b.x,n.height-(h.y+b.y)),n.stroke(255);const{x:v,y:d}=ke(a.position,me),g=ke(a.geometry.vector,me);if(n.line(v,n.height-d,v+g.x,n.height-(d+g.y)),f){n.stroke("blue"),n.fill("blue");const $=ke(f,me);n.circle($.x,n.height-$.y,5)}if(x){n.stroke("green"),n.fill("green");const $=ke(x,me);n.line(h.x,n.height-h.y,h.x+$.x,n.height-(h.y+$.y))}}};return Te(()=>{e==null||e.remove()}),[t]}class Yt extends ue{constructor(e){super(),de(this,e,Rt,Ut,ae,{})}}function Xt(l){let e,o="<span>This page is a list of engine tests. They use the actual engine and allow me to setup different situations and check manually for regressions and bugs.</span> <br/> <span>Use the selection menu to see the different pages</span>",a,s,t,n,m;return n=new pt({props:{tabs:l[0]}}),{c(){e=w("div"),e.innerHTML=o,a=j(),s=w("br"),t=j(),ne(n.$$.fragment)},l(r){e=_(r,"DIV",{"data-svelte-h":!0}),G(e)!=="svelte-11mzr87"&&(e.innerHTML=o),a=P(r),s=_(r,"BR",{}),t=P(r),oe(n.$$.fragment,r)},m(r,i){S(r,e,i),S(r,a,i),S(r,s,i),S(r,t,i),se(n,r,i),m=!0},p:we,i(r){m||(re(n.$$.fragment,r),m=!0)},o(r){ie(n.$$.fragment,r),m=!1},d(r){r&&(p(e),p(a),p(s),p(t)),le(n,r)}}}function Ht(l){return[[{label:"Line Sphere Collider",value:Yt},{label:"Perfs - Multiple balls",value:At},{label:"Playground - Engine settings",value:Vt},{label:"Dynamics + collisions - 1",value:Et},{label:"Dynamics + collisions - 2",value:Tt},{label:"Sphere Line - pull apart",value:xt},{label:"One ball bounce",value:bt}]]}class Kt extends ue{constructor(e){super(),de(this,e,Ht,Xt,ae,{})}}export{Kt as component};
