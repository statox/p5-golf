import{s as fe,f as x,g as $,h as S,d as p,j as Y,i as E,z as $e,A as wt,o as xt,L as ke,a as P,e as yt,u as z,c as O,y as g,P as ge,M as H,Q as _e,O as Xe,l as Q,m as K,n as ne}from"../chunks/scheduler.9df2d863.js";import{S as me,i as he,b as se,d as re,m as ie,a as le,t as ce,e as ae}from"../chunks/index.aac48f8b.js";import{c as T,V as c,P as Ce,w as oe,W as Te,m as Ie,s as ot,e as Ue,b as Ne,a as $t,S as _t,C as kt}from"../chunks/p5utils.e3f588f2.js";import{_ as Ct}from"../chunks/preload-helper.a4192956.js";import{b as Tt}from"../chunks/paths.036ff934.js";import{p as St}from"../chunks/stores.7ad1732c.js";const Et={world:{ttl:45,gravity:!0,collisions:!1,maxNbObjects:300,particleSize:3},cannon:{angle:270,minYVelocity:50,maxYVelocityVariation:1,maxXVelocity:30,creationDelay:1},render:{colors:!0,blurPx:19}},jt={world:{ttl:1e4,gravity:!1,collisions:!0,maxNbObjects:300,particleSize:3},cannon:{angle:270,minYVelocity:1,maxYVelocityVariation:1,maxXVelocity:1,creationDelay:30},render:{colors:!0,blurPx:0}},Pt={world:{ttl:155.09219369291745,gravity:!1,collisions:!1,maxNbObjects:300,particleSize:13},cannon:{angle:270,minYVelocity:36.843012235050836,maxYVelocityVariation:1,maxXVelocity:14.785455798724797,creationDelay:1},render:{colors:!1,blurPx:0}},Ot={world:{ttl:2471.1356195071517,gravity:!0,collisions:!0,maxNbObjects:300,particleSize:1},cannon:{angle:270,minYVelocity:21.40272272962261,maxYVelocityVariation:1.0236084783732553,maxXVelocity:15.8883336205411,creationDelay:23},render:{colors:!0,blurPx:0}},Vt={world:{ttl:2581.4234016887817,gravity:!1,collisions:!1,maxNbObjects:2064.794072031708,particleSize:8},cannon:{angle:84.99052214371876,minYVelocity:36.843012235050836,maxYVelocityVariation:1,maxXVelocity:14.785455798724797,creationDelay:1},render:{colors:!1,blurPx:0}},nt={torch:Et,pullApart:jt,blob:Pt,fireworks:Ot,smoke:Vt},Dt=l=>{const e=[],n=T({geometry:{type:"line",vector:new c(l.x,0)},position:new c(0,l.y),fixed:!0});e.push(n);const a=T({geometry:{type:"line",vector:new c(l.x,0)},position:new c(0,0),fixed:!0});e.push(a);const o=T({geometry:{type:"line",vector:new c(0,l.y)},position:new c(0,0),fixed:!0});e.push(o);const t=T({geometry:{type:"line",vector:new c(0,l.y)},position:new c(l.x,0),fixed:!0});return e.push(t),e},Bt=(l,e)=>{const n=[],a=l.x,o=l.y,t=e*l.x,i=e*l.y,m=a/2,s=o/2,u=T({geometry:{type:"line",vector:new c(t,0)},position:new c(m-t/2,s+i/2),fixed:!0});n.push(u);const f=T({geometry:{type:"line",vector:new c(t,0)},position:new c(m-t/2,s-i/2),fixed:!0});n.push(f);const d=T({geometry:{type:"line",vector:new c(0,i)},position:new c(m-t/2,s-i/2),fixed:!0});n.push(d);const C=T({geometry:{type:"line",vector:new c(0,i)},position:new c(m+t/2,s-i/2),fixed:!0});return n.push(C),n};function Ft(l){const e=document.createElement("textarea");e.value=l,e.style.top="0",e.style.left="0",e.style.position="fixed",document.body.appendChild(e),e.focus(),e.select();try{const a=document.execCommand("copy")?"successful":"unsuccessful";console.log("Fallback: Copying text command was "+a)}catch(n){console.error("Fallback: Oops, unable to copy",n)}document.body.removeChild(e)}function Nt(l){if(!navigator.clipboard){Ft(l);return}navigator.clipboard.writeText(l).then(function(){console.log("Async: Copying to clipboard was successful!")},function(e){console.error("Async: Could not copy text: ",e)})}function It(l){let e,n,a;return n=new Ce({props:{sketch:l[0]}}),{c(){e=x("div"),se(n.$$.fragment),this.h()},l(o){e=$(o,"DIV",{class:!0});var t=S(e);re(n.$$.fragment,t),t.forEach(p),this.h()},h(){Y(e,"class","d-flex justify-content-center")},m(o,t){E(o,e,t),ie(n,e,null),a=!0},p:$e,i(o){a||(le(n.$$.fragment,o),a=!0)},o(o){ce(n.$$.fragment,o),a=!1},d(o){o&&p(e),ae(n)}}}const pt=8;function Yt(l,e,n){let a;wt(l,St,r=>n(8,a=r)),console.clear();let o,t=nt.torch,i="torch";xt(()=>{i=a.url.searchParams.get("config")||"torch",i&&(t=nt[i],u.configName=i)});let m;const s=async()=>{const r=await Ct(()=>import("../chunks/dat.gui.module.ff711f94.js"),[],import.meta.url);m=new r.GUI,m.domElement.setAttribute("style","background-color: black");const w=m.addFolder("World");w.open(),w.add(y==null?void 0:y.objects,"length").name("Nb objects").listen(),w.add(t.world,"gravity").name("Enable gravity").onFinishChange(()=>y.gravityEnabled=t.world.gravity),w.add(t.world,"collisions").name("Enable collisions").onFinishChange(()=>y.collisionEnabled=t.world.collisions),w.add(t.world,"ttl",0,1e4).name("Particles TTL"),w.add(t.world,"maxNbObjects",0,3e3).name("Max nb particles"),w.add(t.world,"particleSize",1,20,1).name("Particles size");const _=m.addFolder("Cannon");_.open(),_.add(t.cannon,"angle",0,360).name("Angle"),_.add(t.cannon,"minYVelocity",0,100).name("min. Y velocity"),_.add(t.cannon,"maxYVelocityVariation",0,2).name("Y vel. variation"),_.add(t.cannon,"maxXVelocity",0,100).name("max. X velocity "),_.add(t.cannon,"creationDelay",1,30,1).name("Fire rate");const k=m.addFolder("Render");k.open(),k.add(t.render,"colors").name("Use colors"),k.add(t.render,"blurPx",0,50).name("Blur (px)");const j=m.addFolder("Config");j.open(),j.add(u,"copyCurrentConfig").name("Copy current"),j.add(u,"configName",Object.keys(nt)).name("Change preset").onFinishChange(N=>{window.location.href=window.location.origin+`${Tt}/engineTests?config=${N}`})},u={copyCurrentConfig:()=>{const r=JSON.stringify(t);Nt(r)},configName:i},f=()=>{const{minYVelocity:r,maxYVelocityVariation:w,maxXVelocity:_}=t.cannon,k=Math.random()*_-_/2,j=r+(w-Math.random())*r;return new c(k,j).rotateByDeg(t.cannon.angle)},d=r=>{const w={...T({geometry:{type:"sphere",r:t.world.particleSize},position:C,velocity:f()}),age:0};r.addObject(w)},C=new c(0,0);let y;const b=r=>{const w=new c(100,100),_=oe(w,pt);C.x=w.x/2,C.y=w.y/3,r.setup=()=>{o=r,r.createCanvas(_.x,_.y),r.noFill(),y=new Te({dimensions:w,enableGravity:t.world.gravity,enableCollisions:t.world.collisions}),d(y),Dt(w).forEach(k=>y.addObject(k)),Bt(w,.5).forEach(k=>y.addObject(k)),s()},r.draw=()=>{if(r.background(0),Ie(r)){const k=ot(new c(r.mouseX,r.height-r.mouseY),pt);C.copy(k)}r.frameCount%t.cannon.creationDelay===0&&y.objects.length<t.world.maxNbObjects&&d(y),y.step(),y.objects.forEach(k=>{k.data.age>t.world.ttl&&y.removeObject(k)}),h(r,y)}},v=[[239,113,81],[229,144,25],[211,202,156],[153,47,15],[234,93,180]],h=(r,w)=>{const _=r.width/w.dimensions.x;for(const k of w.objects){if(k.geometry.type!=="sphere")continue;if(t.render.colors){const G=k.data.id%v.length,W=v[G];r.stroke([...W])}const j=r.map(k.position.x,0,w.dimensions.x,0,r.width),N=r.map(k.position.y,0,w.dimensions.y,r.height,0),A=oe(k.geometry.r*2,_);r.strokeWeight(A),r.point(j,N)}for(const k of w.objects){if(k.geometry.type!=="line")continue;r.stroke("white");const j=r.map(k.position.x,0,w.dimensions.x,0,r.width),N=r.map(k.position.y,0,w.dimensions.y,r.height,0),A=r.map(k.position.x+k.geometry.vector.x,0,w.dimensions.x,0,r.width),G=r.map(k.position.y+k.geometry.vector.y,0,w.dimensions.y,r.height,0);r.strokeWeight(3),r.line(j,N,A,G)}r.drawingContext.filter=`blur(${t.render.blurPx}px)`};return ke(()=>{m==null||m.destroy(),o==null||o.remove()}),[b]}let At=class extends me{constructor(e){super(),he(this,e,Yt,It,fe,{})}};function gt(l){let e,n,a,o,t="dt",i,m,s,u,f,d,C="drag",y,b,v,h,r,w,_="gravity enabled",k,j,N,A,G;return{c(){e=x("table"),n=x("tbody"),a=x("tr"),o=x("th"),o.textContent=t,i=P(),m=x("td"),s=x("input"),u=P(),f=x("tr"),d=x("th"),d.textContent=C,y=P(),b=x("td"),v=x("input"),h=P(),r=x("tr"),w=x("th"),w.textContent=_,k=P(),j=x("td"),N=x("input"),this.h()},l(W){e=$(W,"TABLE",{});var M=S(e);n=$(M,"TBODY",{});var D=S(n);a=$(D,"TR",{});var B=S(a);o=$(B,"TH",{"data-svelte-h":!0}),z(o)!=="svelte-16dheti"&&(o.textContent=t),i=O(B),m=$(B,"TD",{});var L=S(m);s=$(L,"INPUT",{type:!0,min:!0,max:!0,step:!0}),L.forEach(p),B.forEach(p),u=O(D),f=$(D,"TR",{});var ee=S(f);d=$(ee,"TH",{"data-svelte-h":!0}),z(d)!=="svelte-2hq5g"&&(d.textContent=C),y=O(ee),b=$(ee,"TD",{});var te=S(b);v=$(te,"INPUT",{type:!0,min:!0,max:!0,step:!0}),te.forEach(p),ee.forEach(p),h=O(D),r=$(D,"TR",{});var U=S(r);w=$(U,"TH",{"data-svelte-h":!0}),z(w)!=="svelte-ic0r87"&&(w.textContent=_),k=O(U),j=$(U,"TD",{});var q=S(j);N=$(q,"INPUT",{type:!0}),q.forEach(p),U.forEach(p),D.forEach(p),M.forEach(p),this.h()},h(){Y(s,"type","number"),Y(s,"min","0"),Y(s,"max","0.5"),Y(s,"step","0.001"),Y(v,"type","number"),Y(v,"min","0"),Y(v,"max","0.01"),Y(v,"step","0.001"),Y(N,"type","checkbox")},m(W,M){E(W,e,M),g(e,n),g(n,a),g(a,o),g(a,i),g(a,m),g(m,s),ge(s,l[0].dt),g(n,u),g(n,f),g(f,d),g(f,y),g(f,b),g(b,v),ge(v,l[0].drag),g(n,h),g(n,r),g(r,w),g(r,k),g(r,j),g(j,N),N.checked=l[0].gravityEnabled,A||(G=[H(s,"input",l[1]),H(v,"input",l[2]),H(N,"change",l[3])],A=!0)},p(W,M){M&1&&_e(s.value)!==W[0].dt&&ge(s,W[0].dt),M&1&&_e(v.value)!==W[0].drag&&ge(v,W[0].drag),M&1&&(N.checked=W[0].gravityEnabled)},d(W){W&&p(e),A=!1,Xe(G)}}}function Wt(l){let e,n="Engine settings",a,o,t=l[0]&&gt(l);return{c(){e=x("p"),e.textContent=n,a=P(),t&&t.c(),o=yt(),this.h()},l(i){e=$(i,"P",{class:!0,"data-svelte-h":!0}),z(e)!=="svelte-gf3gek"&&(e.textContent=n),a=O(i),t&&t.l(i),o=yt(),this.h()},h(){Y(e,"class","title svelte-g74uk9")},m(i,m){E(i,e,m),E(i,a,m),t&&t.m(i,m),E(i,o,m)},p(i,[m]){i[0]?t?t.p(i,m):(t=gt(i),t.c(),t.m(o.parentNode,o)):t&&(t.d(1),t=null)},i:$e,o:$e,d(i){i&&(p(e),p(a),p(o)),t&&t.d(i)}}}function Mt(l,e,n){let{world:a}=e;function o(){a.dt=_e(this.value),n(0,a)}function t(){a.drag=_e(this.value),n(0,a)}function i(){a.gravityEnabled=this.checked,n(0,a)}return l.$$set=m=>{"world"in m&&n(0,a=m.world)},[a,o,t,i]}class st extends me{constructor(e){super(),he(this,e,Mt,Wt,fe,{world:0})}}function Lt(l){let e,n="Shooter",a,o,t,i="Angle",m,s,u,f,d,C,y,b,v="Magnitude",h,r,w,_,k,j,N,A,G="Shoot",W,M;return{c(){e=x("p"),e.textContent=n,a=P(),o=x("span"),t=x("label"),t.textContent=i,m=P(),s=x("input"),u=P(),f=Q(l[0]),d=Q(" deg"),C=P(),y=x("span"),b=x("label"),b.textContent=v,h=P(),r=x("input"),w=P(),_=Q(l[1]),k=P(),j=x("br"),N=P(),A=x("button"),A.textContent=G,this.h()},l(D){e=$(D,"P",{class:!0,"data-svelte-h":!0}),z(e)!=="svelte-198ugk3"&&(e.textContent=n),a=O(D),o=$(D,"SPAN",{});var B=S(o);t=$(B,"LABEL",{for:!0,"data-svelte-h":!0}),z(t)!=="svelte-lab87n"&&(t.textContent=i),m=O(B),s=$(B,"INPUT",{id:!0,type:!0,min:!0,max:!0}),u=O(B),f=K(B,l[0]),d=K(B," deg"),B.forEach(p),C=O(D),y=$(D,"SPAN",{});var L=S(y);b=$(L,"LABEL",{for:!0,"data-svelte-h":!0}),z(b)!=="svelte-1vc5oxa"&&(b.textContent=v),h=O(L),r=$(L,"INPUT",{id:!0,type:!0,min:!0,max:!0,step:!0}),w=O(L),_=K(L,l[1]),L.forEach(p),k=O(D),j=$(D,"BR",{}),N=O(D),A=$(D,"BUTTON",{"data-svelte-h":!0}),z(A)!=="svelte-8jpwxr"&&(A.textContent=G),this.h()},h(){Y(e,"class","title svelte-g74uk9"),Y(t,"for","angleSlider"),Y(s,"id","angleSlider"),Y(s,"type","range"),Y(s,"min","0"),Y(s,"max","360"),Y(b,"for","magSlider"),Y(r,"id","magSlider"),Y(r,"type","range"),Y(r,"min","0"),Y(r,"max","1"),Y(r,"step","0.01")},m(D,B){E(D,e,B),E(D,a,B),E(D,o,B),g(o,t),g(o,m),g(o,s),ge(s,l[0]),g(o,u),g(o,f),g(o,d),E(D,C,B),E(D,y,B),g(y,b),g(y,h),g(y,r),ge(r,l[1]),g(y,w),g(y,_),E(D,k,B),E(D,j,B),E(D,N,B),E(D,A,B),W||(M=[H(s,"change",l[4]),H(s,"input",l[4]),H(r,"change",l[5]),H(r,"input",l[5]),H(A,"click",l[6])],W=!0)},p(D,[B]){B&1&&ge(s,D[0]),B&1&&ne(f,D[0]),B&2&&ge(r,D[1]),B&2&&ne(_,D[1])},i:$e,o:$e,d(D){D&&(p(e),p(a),p(o),p(C),p(y),p(k),p(j),p(N),p(A)),W=!1,Xe(M)}}}function Xt(l,e,n){let{onShoot:a}=e,o=0,t=.5;const i=()=>{const f=new c(1,0);f.rotateDeg(o),f.multiplyScalar(t),a(f)};function m(){o=_e(this.value),n(0,o)}function s(){t=_e(this.value),n(1,t)}const u=()=>i();return l.$$set=f=>{"onShoot"in f&&n(3,a=f.onShoot)},[o,t,i,a,m,s,u]}class bt extends me{constructor(e){super(),he(this,e,Xt,Lt,fe,{onShoot:3})}}const Ut=l=>{const e=[],n=T({geometry:{type:"line",vector:new c(15,0)},position:new c(0,15),fixed:!0});e.push(n);const a=T({geometry:{type:"line",vector:new c(15,0)},position:new c(0,0),fixed:!0});e.push(a);const o=T({geometry:{type:"line",vector:new c(0,100)},position:new c(0,0),fixed:!0});e.push(o);const t=T({geometry:{type:"line",vector:new c(0,100)},position:new c(15,0),fixed:!0});e.push(t);for(let m=0;m<l.nbBalls;m++){const s=T({geometry:{type:"sphere",r:l.rBalls},position:new c(Math.random()*15,Math.random()*15),velocity:new c(Math.random()*15,Math.random()*15)});e.push(s)}const i=e[e.length-1];return{objects:e,sphere:i}};function Rt(l){let e,n,a,o,t,i=l[0]?"Play":"Pause",m,s,u,f="Reset",d,C,y="Add ball",b,v,h,r,w,_,k,j,N,A="Number of balls",G,W,M,D,B,L,ee="Balls radius",te,U,q,ye,F,X;return n=new Ce({props:{sketch:l[5]}}),v=new bt({props:{onShoot:l[6]}}),r=new st({props:{world:l[2]}}),{c(){e=x("div"),se(n.$$.fragment),a=P(),o=x("div"),t=x("button"),m=Q(i),s=P(),u=x("button"),u.textContent=f,d=P(),C=x("button"),C.textContent=y,b=P(),se(v.$$.fragment),h=P(),se(r.$$.fragment),w=P(),_=x("table"),k=x("tbody"),j=x("tr"),N=x("th"),N.textContent=A,G=P(),W=x("td"),M=x("input"),D=P(),B=x("tr"),L=x("th"),L.textContent=ee,te=P(),U=x("td"),q=x("input"),this.h()},l(V){e=$(V,"DIV",{class:!0});var R=S(e);re(n.$$.fragment,R),R.forEach(p),a=O(V),o=$(V,"DIV",{});var Z=S(o);t=$(Z,"BUTTON",{});var ve=S(t);m=K(ve,i),ve.forEach(p),s=O(Z),u=$(Z,"BUTTON",{"data-svelte-h":!0}),z(u)!=="svelte-tlxueg"&&(u.textContent=f),d=O(Z),C=$(Z,"BUTTON",{"data-svelte-h":!0}),z(C)!=="svelte-1xau3n8"&&(C.textContent=y),Z.forEach(p),b=O(V),re(v.$$.fragment,V),h=O(V),re(r.$$.fragment,V),w=O(V),_=$(V,"TABLE",{});var we=S(_);k=$(we,"TBODY",{});var ue=S(k);j=$(ue,"TR",{});var de=S(j);N=$(de,"TH",{"data-svelte-h":!0}),z(N)!=="svelte-eg4byi"&&(N.textContent=A),G=O(de),W=$(de,"TD",{});var be=S(W);M=$(be,"INPUT",{type:!0,min:!0}),be.forEach(p),de.forEach(p),D=O(ue),B=$(ue,"TR",{});var Se=S(B);L=$(Se,"TH",{"data-svelte-h":!0}),z(L)!=="svelte-10gtk36"&&(L.textContent=ee),te=O(Se),U=$(Se,"TD",{});var Ve=S(U);q=$(Ve,"INPUT",{type:!0,min:!0}),Ve.forEach(p),Se.forEach(p),ue.forEach(p),we.forEach(p),this.h()},h(){Y(e,"class","d-flex justify-content-center"),Y(M,"type","number"),Y(M,"min","1"),Y(q,"type","number"),Y(q,"min","1")},m(V,R){E(V,e,R),ie(n,e,null),E(V,a,R),E(V,o,R),g(o,t),g(t,m),g(o,s),g(o,u),g(o,d),g(o,C),E(V,b,R),ie(v,V,R),E(V,h,R),ie(r,V,R),E(V,w,R),E(V,_,R),g(_,k),g(k,j),g(j,N),g(j,G),g(j,W),g(W,M),ge(M,l[1].nbBalls),g(k,D),g(k,B),g(B,L),g(B,te),g(B,U),g(U,q),ge(q,l[1].rBalls),ye=!0,F||(X=[H(t,"click",l[7]),H(u,"click",l[3]),H(C,"click",l[4]),H(M,"change",l[3]),H(M,"input",l[8]),H(q,"change",l[3]),H(q,"input",l[9])],F=!0)},p(V,[R]){(!ye||R&1)&&i!==(i=V[0]?"Play":"Pause")&&ne(m,i);const Z={};R&4&&(Z.world=V[2]),r.$set(Z),R&2&&_e(M.value)!==V[1].nbBalls&&ge(M,V[1].nbBalls),R&2&&_e(q.value)!==V[1].rBalls&&ge(q,V[1].rBalls)},i(V){ye||(le(n.$$.fragment,V),le(v.$$.fragment,V),le(r.$$.fragment,V),ye=!0)},o(V){ce(n.$$.fragment,V),ce(v.$$.fragment,V),ce(r.$$.fragment,V),ye=!1},d(V){V&&(p(e),p(a),p(o),p(b),p(h),p(w),p(_)),ae(n),ae(v,V),ae(r,V),F=!1,Xe(X)}}}const He=60;function Gt(l,e,n){console.clear();let a=!1,o={nbBalls:5,rBalls:.2},t,i;const m=()=>{const r=(t==null?void 0:t.gravityEnabled)??!0;n(2,t=new Te({dimensions:new c(15,15),reporter:()=>{},enableGravity:r}));const w=Ut(o);i=w.sphere;for(const _ of w.objects)t.addObject(_)},s=()=>{const r=T({geometry:{type:"sphere",r:o.rBalls},position:new c(7,7),velocity:new c(0,0)});t.addObject(r)},u=r=>typeof r=="number"?r*He:r.clone().multiplyScalar(He),f=r=>typeof r=="number"?r/He:r.clone().divideScalar(He);let d;const C=r=>{r.setup=()=>{d=r,m();const k=u(t.dimensions);r.createCanvas(k.x,k.y),r.background(0),r.fill(255),r.stroke(255),m()},r.draw=()=>{r.background(0),Ie(r)?i.fixed=!0:i.fixed=!1,a||t.step(),Ue(r,t),_(r)};let w;r.mousePressed=()=>{Ne(r)&&(w=f(new c(r.mouseX,r.height-r.mouseY)),i.position.copy(w))},r.mouseReleased=()=>{if(!Ne(r)||!w)return;const k=f(new c(r.mouseX,r.height-r.mouseY)),j=w.subtract(k).multiplyScalar(3);w=void 0,i.velocity.copy(j)};const _=k=>{if(!w)return;k.stroke("blue"),k.strokeWeight(2);const j=u(w);k.line(j.x,k.height-j.y,k.mouseX,k.mouseY)}},y=r=>{r.multiplyScalar(1e4),t.applyForce(i,r)};ke(()=>{d==null||d.remove()});const b=()=>n(0,a=!a);function v(){o.nbBalls=_e(this.value),n(1,o)}function h(){o.rBalls=_e(this.value),n(1,o)}return[a,o,t,m,s,C,y,b,v,h]}let Ht=class extends me{constructor(e){super(),he(this,e,Gt,Rt,fe,{})}};function zt(l){let e,n,a,o,t=l[0][l[0].length-1]+"",i,m,s,u="New ball",f,d,C;return n=new Ce({props:{sketch:l[2]}}),{c(){e=x("div"),se(n.$$.fragment),a=P(),o=x("p"),i=Q(t),m=P(),s=x("button"),s.textContent=u,this.h()},l(y){e=$(y,"DIV",{class:!0});var b=S(e);re(n.$$.fragment,b),b.forEach(p),a=O(y),o=$(y,"P",{});var v=S(o);i=K(v,t),v.forEach(p),m=O(y),s=$(y,"BUTTON",{"data-svelte-h":!0}),z(s)!=="svelte-1jwbm46"&&(s.textContent=u),this.h()},h(){Y(e,"class","d-flex justify-content-center")},m(y,b){E(y,e,b),ie(n,e,null),E(y,a,b),E(y,o,b),g(o,i),E(y,m,b),E(y,s,b),f=!0,d||(C=H(s,"click",l[1]),d=!0)},p(y,[b]){(!f||b&1)&&t!==(t=y[0][y[0].length-1]+"")&&ne(i,t)},i(y){f||(le(n.$$.fragment,y),f=!0)},o(y){ce(n.$$.fragment,y),f=!1},d(y){y&&(p(e),p(a),p(o),p(m),p(s)),ae(n),d=!1,C()}}}function qt(l,e,n){console.clear();let a=[];const o=u=>{const f=u.objects[u.objects.length-1],d=f.position.clone().toFixed(2),C=f.velocity.clone().toFixed(2);a.push(`${u.t.toFixed(2)} - pos: ${d} - vel: ${C}`),a.length>50&&a.shift(),n(0,a)},t=new Te({reporter:o,enableGravity:!0}),i=()=>{for(;t.objects.length;)t.objects.pop();const u=T({geometry:{type:"line",vector:new c(100,0)},position:new c(0,0),fixed:!0});t.addObject(u);for(let f=0;f<1;f++){const d=T({geometry:{type:"sphere",r:5},position:new c(20,50),velocity:new c(Math.random()*5-2.5,Math.random()*20)});t.addObject(d)}};let m;const s=u=>{u.setup=()=>{m=u,u.createCanvas(900,600),u.background(0),u.fill(255),u.stroke(255),i()},u.draw=()=>{u.background(0),t.step();for(const f of t.objects){const d=u.map(f.position.x,0,t.dimensions.x,0,u.width),C=u.map(f.position.y,0,t.dimensions.y,u.height,0);if(f.geometry.type==="sphere"&&(u.strokeWeight(f.geometry.r*2),u.point(d,C)),f.geometry.type==="line"){const y=d+u.map(f.geometry.vector.x,0,t.dimensions.x,0,u.width),b=C+u.map(f.geometry.vector.y,0,t.dimensions.y,0,u.height);u.strokeWeight(2),u.line(d,C,y,b)}}}};return ke(()=>{m==null||m.remove()}),[a,i,s]}class Jt extends me{constructor(e){super(),he(this,e,qt,zt,fe,{})}}function Qt(l){let e,n,a,o,t=l[0][l[0].length-1]+"",i,m,s,u="New ball",f,d,C;return n=new Ce({props:{sketch:l[2]}}),{c(){e=x("div"),se(n.$$.fragment),a=P(),o=x("p"),i=Q(t),m=P(),s=x("button"),s.textContent=u,this.h()},l(y){e=$(y,"DIV",{class:!0});var b=S(e);re(n.$$.fragment,b),b.forEach(p),a=O(y),o=$(y,"P",{});var v=S(o);i=K(v,t),v.forEach(p),m=O(y),s=$(y,"BUTTON",{"data-svelte-h":!0}),z(s)!=="svelte-1jwbm46"&&(s.textContent=u),this.h()},h(){Y(e,"class","d-flex justify-content-center")},m(y,b){E(y,e,b),ie(n,e,null),E(y,a,b),E(y,o,b),g(o,i),E(y,m,b),E(y,s,b),f=!0,d||(C=H(s,"click",l[1]),d=!0)},p(y,[b]){(!f||b&1)&&t!==(t=y[0][y[0].length-1]+"")&&ne(i,t)},i(y){f||(le(n.$$.fragment,y),f=!0)},o(y){ce(n.$$.fragment,y),f=!1},d(y){y&&(p(e),p(a),p(o),p(m),p(s)),ae(n),d=!1,C()}}}const ze=6;function Kt(l,e,n){console.clear();let a=[];const o=d=>{const C=d.objects[d.objects.length-1],y=C.position.clone().toFixed(2),b=C.velocity.clone().toFixed(2);a.push(`${d.t.toFixed(2)} - pos: ${y} - vel: ${b}`),a.length>50&&a.shift(),n(0,a)},t=new Te({reporter:o,enableGravity:!0});let i,m;const s=()=>{for(;t.objects.length;)t.objects.pop();m=T({geometry:{type:"line",vector:new c(40,40)},position:new c(30,30),fixed:!0}),t.addObject(m),i=T({geometry:{type:"sphere",r:10},position:new c(20,50),velocity:new c(2.5,2.5),fixed:!0}),t.addObject(i)};let u;const f=d=>{const C=v=>typeof v=="number"?v*ze:v.clone().multiplyScalar(ze),y=v=>typeof v=="number"?v/ze:v.clone().divideScalar(ze);d.setup=()=>{u=d;const v=C(t.dimensions);d.createCanvas(v.x,v.y),d.background(0),d.fill(255),d.stroke(255),s()};let b;d.draw=()=>{if(d.background(0),t.step(),d.mouseIsPressed){const v=y(new c(d.mouseX,d.height-d.mouseY));if(b||(v.distance(i.position)<2?b="sphere":v.distance(m.position)<2?b="wallstart":v.distance(m.geometry.vector.clone().add(m.position))<2&&(b="wallend")),b==="sphere"&&i.position.copy(v),b==="wallstart"&&m.position.copy(v),b==="wallend"){const h=v.clone().subtract(m.position);m.geometry.vector.copy(h)}}else b=void 0;for(const v of t.objects.sort((h,r)=>h.geometry.type<r.geometry.type?1:-1)){d.stroke(i.data.isColliding?"red":"white");const h=d.map(v.position.x,0,t.dimensions.x,0,d.width),r=d.map(v.position.y,0,t.dimensions.y,d.height,0);if(v.geometry.type==="sphere"){const w=C(v.geometry.r*2);d.strokeWeight(w),d.point(h,r)}if(v.geometry.type==="line"){const w=h+d.map(v.geometry.vector.x,0,t.dimensions.x,0,d.width),_=r-d.map(v.geometry.vector.y,0,t.dimensions.y,0,d.height);d.stroke("blue"),d.strokeWeight(2),d.line(h,r,w,_)}}}};return ke(()=>{u==null||u.remove()}),[a,s,f]}class Zt extends me{constructor(e){super(),he(this,e,Kt,Qt,fe,{})}}function en(l){let e,n,a;return n=new Ce({props:{sketch:l[0]}}),{c(){e=x("div"),se(n.$$.fragment),this.h()},l(o){e=$(o,"DIV",{class:!0});var t=S(e);re(n.$$.fragment,t),t.forEach(p),this.h()},h(){Y(e,"class","d-flex justify-content-center")},m(o,t){E(o,e,t),ie(n,e,null),a=!0},p:$e,i(o){a||(le(n.$$.fragment,o),a=!0)},o(o){ce(n.$$.fragment,o),a=!1},d(o){o&&p(e),ae(n)}}}const qe=6;function tn(l){console.clear();const e=new Te({reporter:()=>{},enableGravity:!0});let n;const a=()=>{for(;e.objects.length;)e.objects.pop();n=T({geometry:{type:"sphere",r:5},position:new c(20,50),velocity:new c(Math.random()*5-2.5,Math.random()*20)}),e.addObject(n);const s=T({geometry:{type:"line",vector:new c(100,0)},position:new c(0,2),fixed:!0});e.addObject(s);const u=T({geometry:{type:"line",vector:new c(100,0)},position:new c(0,98),fixed:!0});e.addObject(u);const f=T({geometry:{type:"line",vector:new c(0,100)},position:new c(2,0),fixed:!0});e.addObject(f);const d=T({geometry:{type:"line",vector:new c(0,100)},position:new c(98,0),fixed:!0});e.addObject(d);const C=T({geometry:{type:"line",vector:new c(50,50)},position:new c(20,10),fixed:!0});e.addObject(C)},o=s=>typeof s=="number"?s*qe:s.clone().multiplyScalar(qe),t=s=>typeof s=="number"?s/qe:s.clone().divideScalar(qe);let i;const m=s=>{s.setup=()=>{i=s;const f=o(e.dimensions);s.createCanvas(f.x,f.y),s.background(0),s.fill(255),s.stroke(255),a()},s.draw=()=>{if(s.background(0),s.mouseIsPressed){n.fixed=!0;const f=t(new c(s.mouseX,s.height-s.mouseY));n.position.copy(f)}else n.fixed=!1;e.step(),Ue(s,e)};let u;s.mousePressed=()=>{u=t(new c(s.mouseX,s.height-s.mouseY))},s.mouseReleased=()=>{const f=t(new c(s.mouseX,s.height-s.mouseY)),d=u.subtract(f);n.position.copy(f),n.velocity.copy(d)}};return ke(()=>{i==null||i.remove()}),[m]}class nn extends me{constructor(e){super(),he(this,e,tn,en,fe,{})}}function on(l){let e,n,a,o,t,i,m,s="Gravity",u,f,d,C="Toggle",y,b,v;return n=new Ce({props:{sketch:l[1]}}),{c(){e=x("div"),se(n.$$.fragment),a=P(),o=x("table"),t=x("tbody"),i=x("tr"),m=x("th"),m.textContent=s,u=P(),f=x("td"),d=x("button"),d.textContent=C,this.h()},l(h){e=$(h,"DIV",{class:!0});var r=S(e);re(n.$$.fragment,r),r.forEach(p),a=O(h),o=$(h,"TABLE",{});var w=S(o);t=$(w,"TBODY",{});var _=S(t);i=$(_,"TR",{});var k=S(i);m=$(k,"TH",{"data-svelte-h":!0}),z(m)!=="svelte-vy75us"&&(m.textContent=s),u=O(k),f=$(k,"TD",{});var j=S(f);d=$(j,"BUTTON",{"data-svelte-h":!0}),z(d)!=="svelte-18lc94l"&&(d.textContent=C),j.forEach(p),k.forEach(p),_.forEach(p),w.forEach(p),this.h()},h(){Y(e,"class","d-flex justify-content-center")},m(h,r){E(h,e,r),ie(n,e,null),E(h,a,r),E(h,o,r),g(o,t),g(t,i),g(i,m),g(i,u),g(i,f),g(f,d),y=!0,b||(v=H(d,"click",l[2]),b=!0)},p:$e,i(h){y||(le(n.$$.fragment,h),y=!0)},o(h){ce(n.$$.fragment,h),y=!1},d(h){h&&(p(e),p(a),p(o)),ae(n),b=!1,v()}}}const Je=6;function sn(l){console.clear();const e=new Te({reporter:()=>{},enableGravity:!0});let n;const a=()=>{for(;e.objects.length;)e.objects.pop();const u=T({geometry:{type:"line",vector:new c(100,0)},position:new c(0,0),fixed:!0});e.addObject(u);const f=T({geometry:{type:"line",vector:new c(100,0)},position:new c(0,100),fixed:!0});e.addObject(f);const d=T({geometry:{type:"line",vector:new c(0,100)},position:new c(0,0),fixed:!0});e.addObject(d);const C=T({geometry:{type:"line",vector:new c(0,100)},position:new c(100,0),fixed:!0});e.addObject(C);const y=T({geometry:{type:"line",vector:new c(50,50)},position:new c(20,10),fixed:!0});e.addObject(y),n=T({geometry:{type:"sphere",r:2},position:new c(20,50),velocity:new c(Math.random()*5-2.5,Math.random()*20)}),e.addObject(n)},o=u=>typeof u=="number"?u*Je:u.clone().multiplyScalar(Je),t=u=>typeof u=="number"?u/Je:u.clone().divideScalar(Je);let i;const m=u=>{u.setup=()=>{i=u;const d=o(e.dimensions);u.createCanvas(d.x,d.y),u.background(0),u.fill(255),u.stroke(255),a()},u.draw=()=>{if(u.background(0),Ie(u)){n.fixed=!0;const d=t(new c(u.mouseX,u.height-u.mouseY));n.position.copy(d)}else n.fixed=!1;e.step(),Ue(u,e)};let f;u.mousePressed=()=>{Ne(u)&&(f=t(new c(u.mouseX,u.height-u.mouseY)))},u.mouseReleased=()=>{if(!Ne(u))return;const d=t(new c(u.mouseX,u.height-u.mouseY)),C=f.subtract(d);n.position.copy(d),n.velocity.copy(C)}};return ke(()=>{i==null||i.remove()}),[e,m,()=>e.toggleGravity()]}class rn extends me{constructor(e){super(),he(this,e,sn,on,fe,{})}}const ln=()=>{const l=[],e=T({geometry:{type:"line",vector:new c(15,0)},position:new c(0,0),fixed:!0});l.push(e);const n=T({geometry:{type:"line",vector:new c(0,100)},position:new c(0,0),fixed:!0});l.push(n);const a=T({geometry:{type:"line",vector:new c(0,100)},position:new c(15,0),fixed:!0});l.push(a);const o=T({geometry:{type:"line",vector:new c(3,-3)},position:new c(3.5,8),fixed:!0});l.push(o);const t=T({geometry:{type:"line",vector:new c(3,3)},position:new c(3.5,5),fixed:!0});l.push(t);const i=T({geometry:{type:"line",vector:new c(6,0)},position:new c(2,2),fixed:!0});l.push(i);const m=T({geometry:{type:"line",vector:new c(4,0)},position:new c(3,2.5),fixed:!0});l.push(m);const s=T({geometry:{type:"line",vector:new c(2,0)},position:new c(4,3),fixed:!0});l.push(s);const u=T({geometry:{type:"line",vector:new c(.6,0)},position:new c(4.7,3.5),fixed:!0});l.push(u);const f=T({geometry:{type:"line",vector:new c(1,0)},position:new c(10,10.1),fixed:!0});l.push(f);const d=T({geometry:{type:"line",vector:new c(0,-4)},position:new c(11,10),fixed:!0});l.push(d);const C=T({geometry:{type:"line",vector:new c(0,-4)},position:new c(11.5,10),fixed:!0});l.push(C);const y=T({geometry:{type:"line",vector:new c(0,-4)},position:new c(12,10),fixed:!0});l.push(y);const b=T({geometry:{type:"line",vector:new c(1,0)},position:new c(12,10.1),fixed:!0});l.push(b);for(let h=.2;h<.5;h+=.1)for(let r=0;r<10;r++){const w=T({geometry:{type:"line",vector:new c(0,3)},position:new c(9+r*h,1),fixed:!0});l.push(w)}const v=T({geometry:{type:"sphere",r:.1},position:new c(5,10),velocity:new c(0,0)});return l.push(v),{objects:l,sphere:v}};function cn(l){let e,n,a,o,t,i=l[0]?"Disable":"Enable",m,s,u,f,d=l[1]?"Play":"Pause",C,y,b,v="Reset",h,r,w,_,k,j,N,A,G,W="Simulation time/Frame duration",M,D,B=l[2].t+"",L,ee,te,U=l[2].frameTime+"",q,ye,F,X,V="Sphere position",R,Z,ve=l[2].spherePos.x.toFixed(2)+"",we,ue,de,be=l[2].spherePos.y.toFixed(2)+"",Se,Ve,Ee,De,rt="Sphere velocity",Ke,Ye,Ae=l[2].sphereVel.x.toFixed(2)+"",Re,Ze,We,Me=l[2].sphereVel.y.toFixed(2)+"",Ge,pe,et,it;return n=new Ce({props:{sketch:l[5]}}),r=new bt({props:{onShoot:l[6]}}),_=new st({props:{world:l[3]}}),{c(){e=x("div"),se(n.$$.fragment),a=P(),o=x("div"),t=x("button"),m=Q(i),s=Q(" pause on collision"),u=P(),f=x("button"),C=Q(d),y=P(),b=x("button"),b.textContent=v,h=P(),se(r.$$.fragment),w=P(),se(_.$$.fragment),k=P(),j=x("table"),N=x("tbody"),A=x("tr"),G=x("th"),G.textContent=W,M=P(),D=x("td"),L=Q(B),ee=P(),te=x("td"),q=Q(U),ye=P(),F=x("tr"),X=x("th"),X.textContent=V,R=P(),Z=x("td"),we=Q(ve),ue=P(),de=x("td"),Se=Q(be),Ve=P(),Ee=x("tr"),De=x("th"),De.textContent=rt,Ke=P(),Ye=x("td"),Re=Q(Ae),Ze=P(),We=x("td"),Ge=Q(Me),this.h()},l(I){e=$(I,"DIV",{class:!0});var J=S(e);re(n.$$.fragment,J),J.forEach(p),a=O(I),o=$(I,"DIV",{});var je=S(o);t=$(je,"BUTTON",{});var tt=S(t);m=K(tt,i),s=K(tt," pause on collision"),tt.forEach(p),u=O(je),f=$(je,"BUTTON",{});var lt=S(f);C=K(lt,d),lt.forEach(p),y=O(je),b=$(je,"BUTTON",{"data-svelte-h":!0}),z(b)!=="svelte-tlxueg"&&(b.textContent=v),je.forEach(p),h=O(I),re(r.$$.fragment,I),w=O(I),re(_.$$.fragment,I),k=O(I),j=$(I,"TABLE",{});var ct=S(j);N=$(ct,"TBODY",{});var Le=S(N);A=$(Le,"TR",{});var Be=S(A);G=$(Be,"TH",{"data-svelte-h":!0}),z(G)!=="svelte-rirgm4"&&(G.textContent=W),M=O(Be),D=$(Be,"TD",{});var at=S(D);L=K(at,B),at.forEach(p),ee=O(Be),te=$(Be,"TD",{});var ut=S(te);q=K(ut,U),ut.forEach(p),Be.forEach(p),ye=O(Le),F=$(Le,"TR",{});var Oe=S(F);X=$(Oe,"TH",{"data-svelte-h":!0}),z(X)!=="svelte-1y1nif6"&&(X.textContent=V),R=O(Oe),Z=$(Oe,"TD",{});var dt=S(Z);we=K(dt,ve),dt.forEach(p),ue=O(Oe),de=$(Oe,"TD",{});var ft=S(de);Se=K(ft,be),ft.forEach(p),Ve=O(Oe),Oe.forEach(p),Ee=$(Le,"TR",{});var Fe=S(Ee);De=$(Fe,"TH",{"data-svelte-h":!0}),z(De)!=="svelte-1uw1fs2"&&(De.textContent=rt),Ke=O(Fe),Ye=$(Fe,"TD",{});var mt=S(Ye);Re=K(mt,Ae),mt.forEach(p),Ze=O(Fe),We=$(Fe,"TD",{});var ht=S(We);Ge=K(ht,Me),ht.forEach(p),Fe.forEach(p),Le.forEach(p),ct.forEach(p),this.h()},h(){Y(e,"class","d-flex justify-content-center")},m(I,J){E(I,e,J),ie(n,e,null),E(I,a,J),E(I,o,J),g(o,t),g(t,m),g(t,s),g(o,u),g(o,f),g(f,C),g(o,y),g(o,b),E(I,h,J),ie(r,I,J),E(I,w,J),ie(_,I,J),E(I,k,J),E(I,j,J),g(j,N),g(N,A),g(A,G),g(A,M),g(A,D),g(D,L),g(A,ee),g(A,te),g(te,q),g(N,ye),g(N,F),g(F,X),g(F,R),g(F,Z),g(Z,we),g(F,ue),g(F,de),g(de,Se),g(F,Ve),g(N,Ee),g(Ee,De),g(Ee,Ke),g(Ee,Ye),g(Ye,Re),g(Ee,Ze),g(Ee,We),g(We,Ge),pe=!0,et||(it=[H(t,"click",l[7]),H(f,"click",l[8]),H(b,"click",l[4])],et=!0)},p(I,[J]){(!pe||J&1)&&i!==(i=I[0]?"Disable":"Enable")&&ne(m,i),(!pe||J&2)&&d!==(d=I[1]?"Play":"Pause")&&ne(C,d);const je={};J&8&&(je.world=I[3]),_.$set(je),(!pe||J&4)&&B!==(B=I[2].t+"")&&ne(L,B),(!pe||J&4)&&U!==(U=I[2].frameTime+"")&&ne(q,U),(!pe||J&4)&&ve!==(ve=I[2].spherePos.x.toFixed(2)+"")&&ne(we,ve),(!pe||J&4)&&be!==(be=I[2].spherePos.y.toFixed(2)+"")&&ne(Se,be),(!pe||J&4)&&Ae!==(Ae=I[2].sphereVel.x.toFixed(2)+"")&&ne(Re,Ae),(!pe||J&4)&&Me!==(Me=I[2].sphereVel.y.toFixed(2)+"")&&ne(Ge,Me)},i(I){pe||(le(n.$$.fragment,I),le(r.$$.fragment,I),le(_.$$.fragment,I),pe=!0)},o(I){ce(n.$$.fragment,I),ce(r.$$.fragment,I),ce(_.$$.fragment,I),pe=!1},d(I){I&&(p(e),p(a),p(o),p(h),p(w),p(k),p(j)),ae(n),ae(r,I),ae(_,I),et=!1,Xe(it)}}}const Qe=60;function an(l,e,n){console.clear();let a=!1,o=!1,t={t:"0",frameTime:"0",spherePos:new c(0,0),sphereVel:new c(0,0),ballIsColliding:!1},i,m;const s=()=>{n(3,i=new Te({dimensions:new c(15,15),reporter:r=>{var w;n(2,t.t=(w=r==null?void 0:r.t)==null?void 0:w.toFixed(1),t),t.spherePos.copy(m.position).unfloat(),t.sphereVel.copy(m.velocity).unfloat(),n(2,t.frameTime=r.frameTime.toFixed(2),t),n(2,t),n(2,t.ballIsColliding=m.data.isColliding,t),a&&m.data.isColliding&&!o&&n(1,o=!0)},enableGravity:!0}));const h=ln();m=h.sphere;for(const r of h.objects)i.addObject(r)},u=h=>typeof h=="number"?h*Qe:h.clone().multiplyScalar(Qe),f=h=>typeof h=="number"?h/Qe:h.clone().divideScalar(Qe);let d;const C=h=>{h.setup=()=>{d=h,s();const _=u(i.dimensions);h.createCanvas(_.x,_.y),h.background(0),h.fill(255),h.stroke(255),s()},h.draw=()=>{h.background(0),Ie(h)?m.fixed=!0:m.fixed=!1,o||i.step(),Ue(h,i),w(h)};let r;h.mousePressed=()=>{Ne(h)&&(r=f(new c(h.mouseX,h.height-h.mouseY)),m.position.copy(r))},h.mouseReleased=()=>{if(!Ne(h)||!r)return;const _=f(new c(h.mouseX,h.height-h.mouseY)),k=r.subtract(_).multiplyScalar(3);r=void 0,m.velocity.copy(k)};const w=_=>{if(!r)return;_.stroke("blue"),_.strokeWeight(2);const k=u(r);_.line(k.x,_.height-k.y,_.mouseX,_.mouseY)}},y=h=>{h.multiplyScalar(1e4),i.applyForce(m,h)};return ke(()=>{d==null||d.remove()}),[a,o,t,i,s,C,y,()=>n(0,a=!a),()=>n(1,o=!o)]}let un=class extends me{constructor(e){super(),he(this,e,an,cn,fe,{})}};const dn=()=>{const l=[],e=T({geometry:{type:"line",vector:new c(15,0)},position:new c(0,0),fixed:!0});l.push(e);const n=T({geometry:{type:"line",vector:new c(0,100)},position:new c(0,0),fixed:!0});l.push(n);const a=T({geometry:{type:"line",vector:new c(0,100)},position:new c(15,0),fixed:!0});l.push(a);const o=T({geometry:{type:"line",vector:new c(3,-3)},position:new c(3.5,8),fixed:!0});l.push(o);const t=T({geometry:{type:"line",vector:new c(3,3)},position:new c(3.5,5),fixed:!0});l.push(t);const i=T({geometry:{type:"line",vector:new c(6,0)},position:new c(2,2),fixed:!0});l.push(i);const m=T({geometry:{type:"line",vector:new c(4,0)},position:new c(3,2.5),fixed:!0});l.push(m);const s=T({geometry:{type:"line",vector:new c(2,0)},position:new c(4,3),fixed:!0});l.push(s);const u=T({geometry:{type:"line",vector:new c(.6,0)},position:new c(4.7,3.5),fixed:!0});l.push(u);const f=T({geometry:{type:"line",vector:new c(1,0)},position:new c(10,10.1),fixed:!0});l.push(f);const d=T({geometry:{type:"line",vector:new c(0,-4)},position:new c(11,10),fixed:!0});l.push(d);const C=T({geometry:{type:"line",vector:new c(0,-4)},position:new c(11.5,10),fixed:!0});l.push(C);const y=T({geometry:{type:"line",vector:new c(0,-4)},position:new c(12,10),fixed:!0});l.push(y);const b=T({geometry:{type:"line",vector:new c(1,0)},position:new c(12,10.1),fixed:!0});l.push(b);for(let v=.2;v<.5;v+=.1)for(let h=0;h<10;h++){const r=T({geometry:{type:"line",vector:new c(0,3)},position:new c(9+h*v,1),fixed:!0});l.push(r)}return{objects:l}};function fn(l){let e,n,a,o,t,i=l[0]?"Disable":"Enable",m,s,u,f,d=l[1]?"Play":"Pause",C,y,b,v="Reset",h,r,w,_,k,j,N,A="Simulation time/Frame duration",G,W,M=l[2].t+"",D,B,L,ee=l[2].frameTime+"",te,U,q,ye;return n=new Ce({props:{sketch:l[5]}}),r=new st({props:{world:l[3]}}),{c(){e=x("div"),se(n.$$.fragment),a=P(),o=x("div"),t=x("button"),m=Q(i),s=Q(" pause on collision"),u=P(),f=x("button"),C=Q(d),y=P(),b=x("button"),b.textContent=v,h=P(),se(r.$$.fragment),w=P(),_=x("table"),k=x("tbody"),j=x("tr"),N=x("th"),N.textContent=A,G=P(),W=x("td"),D=Q(M),B=P(),L=x("td"),te=Q(ee),this.h()},l(F){e=$(F,"DIV",{class:!0});var X=S(e);re(n.$$.fragment,X),X.forEach(p),a=O(F),o=$(F,"DIV",{});var V=S(o);t=$(V,"BUTTON",{});var R=S(t);m=K(R,i),s=K(R," pause on collision"),R.forEach(p),u=O(V),f=$(V,"BUTTON",{});var Z=S(f);C=K(Z,d),Z.forEach(p),y=O(V),b=$(V,"BUTTON",{"data-svelte-h":!0}),z(b)!=="svelte-tlxueg"&&(b.textContent=v),V.forEach(p),h=O(F),re(r.$$.fragment,F),w=O(F),_=$(F,"TABLE",{});var ve=S(_);k=$(ve,"TBODY",{});var we=S(k);j=$(we,"TR",{});var ue=S(j);N=$(ue,"TH",{"data-svelte-h":!0}),z(N)!=="svelte-rirgm4"&&(N.textContent=A),G=O(ue),W=$(ue,"TD",{});var de=S(W);D=K(de,M),de.forEach(p),B=O(ue),L=$(ue,"TD",{});var be=S(L);te=K(be,ee),be.forEach(p),ue.forEach(p),we.forEach(p),ve.forEach(p),this.h()},h(){Y(e,"class","d-flex justify-content-center")},m(F,X){E(F,e,X),ie(n,e,null),E(F,a,X),E(F,o,X),g(o,t),g(t,m),g(t,s),g(o,u),g(o,f),g(f,C),g(o,y),g(o,b),E(F,h,X),ie(r,F,X),E(F,w,X),E(F,_,X),g(_,k),g(k,j),g(j,N),g(j,G),g(j,W),g(W,D),g(j,B),g(j,L),g(L,te),U=!0,q||(ye=[H(t,"click",l[6]),H(f,"click",l[7]),H(b,"click",l[4])],q=!0)},p(F,[X]){(!U||X&1)&&i!==(i=F[0]?"Disable":"Enable")&&ne(m,i),(!U||X&2)&&d!==(d=F[1]?"Play":"Pause")&&ne(C,d);const V={};X&8&&(V.world=F[3]),r.$set(V),(!U||X&4)&&M!==(M=F[2].t+"")&&ne(D,M),(!U||X&4)&&ee!==(ee=F[2].frameTime+"")&&ne(te,ee)},i(F){U||(le(n.$$.fragment,F),le(r.$$.fragment,F),U=!0)},o(F){ce(n.$$.fragment,F),ce(r.$$.fragment,F),U=!1},d(F){F&&(p(e),p(a),p(o),p(h),p(w),p(_)),ae(n),ae(r,F),q=!1,Xe(ye)}}}const vt=60;function mn(l,e,n){console.clear();let a=!1,o=!1,t={t:"0",frameTime:"0"},i;const m=()=>{clearInterval(d),d=setInterval(s,100),n(3,i=new Te({dimensions:new c(15,15),reporter:h=>{var r;n(2,t.t=(r=h==null?void 0:h.t)==null?void 0:r.toFixed(1),t),n(2,t.frameTime=h.frameTime.toFixed(2),t),n(2,t)},enableGravity:!0}));const v=dn();for(const h of v.objects)i.addObject(h)},s=()=>{console.log("add ball");const v=Math.random()*i.dimensions.x,h=Math.random()*i.dimensions.y,r=-5+Math.random()*10,w=-5+Math.random()*10,_=T({geometry:{type:"sphere",r:.1},position:new c(v,h),velocity:new c(r,w)});i.addObject(_)},u=v=>typeof v=="number"?v*vt:v.clone().multiplyScalar(vt);let f,d;const C=v=>{v.setup=()=>{f=v,m();const h=u(i.dimensions);v.createCanvas(h.x,h.y),v.background(0),v.fill(255),v.stroke(255),m()},v.draw=()=>{v.background(0),o||i.step(),Ue(v,i)}};return ke(()=>{f==null||f.remove(),clearInterval(d)}),[a,o,t,i,m,C,()=>n(0,a=!a),()=>n(1,o=!o)]}class hn extends me{constructor(e){super(),he(this,e,mn,fn,fe,{})}}function yn(l){let e,n,a;return n=new Ce({props:{sketch:l[0]}}),{c(){e=x("div"),se(n.$$.fragment),this.h()},l(o){e=$(o,"DIV",{class:!0});var t=S(e);re(n.$$.fragment,t),t.forEach(p),this.h()},h(){Y(e,"class","d-flex justify-content-center")},m(o,t){E(o,e,t),ie(n,e,null),a=!0},p:$e,i(o){a||(le(n.$$.fragment,o),a=!0)},o(o){ce(n.$$.fragment,o),a=!1},d(o){o&&p(e),ae(n)}}}const Pe=6;function pn(l){console.clear();let e;const n=T({geometry:{type:"sphere",r:10},position:new c(30,50),velocity:new c(0,0)}),a=T({geometry:{type:"line",vector:new c(80,0)},position:new c(10,70),fixed:!0}),o=T({geometry:{type:"line",vector:new c(80,0)},position:new c(10,30),fixed:!0}),t=i=>{const m=new c(100,100),s=oe(m,Pe);let u;i.setup=()=>{e=i,i.createCanvas(s.x,s.y),i.noFill(),u=new Te({dimensions:m,enableGravity:!1,enableCollisions:!0}),u.addObject(a),u.addObject(o),u.addObject(n)};let f;i.draw=()=>{if(i.background(0),!Ie(i))f=void 0;else{const _=ot(new c(i.mouseX,i.height-i.mouseY),Pe);if(f||(_.distance(n.position)<=n.geometry.r?f="sphere":_.distance(n.position.clone().add(n.velocity))<=6?f="spherevelocity":_.distance(a.position)<=6?f="line1start":_.distance(a.geometry.vector.clone().add(a.position))<=6?f="line1end":_.distance(o.position)<=6?f="line2start":_.distance(o.geometry.vector.clone().add(o.position))<=6&&(f="line2end")),f==="sphere")n.position.copy(_);else if(f==="spherevelocity"){const k=_.clone().subtract(n.position);n.velocity.copy(k)}else if(f==="line1start")a.position.copy(_);else if(f==="line1end"){const k=_.clone().subtract(a.position);a.geometry.vector.copy(k)}else if(f==="line2start")o.position.copy(_);else if(f==="line2end"){const k=_.clone().subtract(o.position);o.geometry.vector.copy(k)}}u.step(),i.stroke(255),i.noFill();const d=oe(n.position,Pe);i.circle(d.x,i.height-d.y,2*n.geometry.r*Pe),i.stroke(255);const C=oe(n.velocity,Pe);i.line(d.x,i.height-d.y,d.x+C.x,i.height-(d.y+C.y)),i.stroke(255);let{x:y,y:b}=oe(a.position,Pe);const v=oe(a.geometry.vector,Pe);i.line(y,i.height-b,y+v.x,i.height-(b+v.y)),i.stroke(255);let{x:h,y:r}=oe(o.position,Pe);const w=oe(o.geometry.vector,Pe);i.line(h,i.height-r,h+w.x,i.height-(r+w.y))}};return ke(()=>{e==null||e.remove()}),[t]}class gn extends me{constructor(e){super(),he(this,e,pn,yn,fe,{})}}function vn(l){let e,n,a;return n=new Ce({props:{sketch:l[0]}}),{c(){e=x("div"),se(n.$$.fragment),this.h()},l(o){e=$(o,"DIV",{class:!0});var t=S(e);re(n.$$.fragment,t),t.forEach(p),this.h()},h(){Y(e,"class","d-flex justify-content-center")},m(o,t){E(o,e,t),ie(n,e,null),a=!0},p:$e,i(o){a||(le(n.$$.fragment,o),a=!0)},o(o){ce(n.$$.fragment,o),a=!1},d(o){o&&p(e),ae(n)}}}const xe=6;function bn(l){console.clear();let e;const n=T({geometry:{type:"sphere",r:10},position:new c(30,50),velocity:new c(15,-15)}),a=T({geometry:{type:"sphere",r:10},position:new c(70,50),velocity:new c(0,45)}),o=new _t,t=s=>{const u=new c(100,100),f=oe(u,xe);let d;s.setup=()=>{e=s,s.createCanvas(f.x,f.y),s.noFill(),d=new Te({dimensions:u,enableGravity:!1}),d.addObject(n),d.addObject(a)},s.draw=()=>{s.background(0),m(s),$t(s,d);const{intersection:C,bouncedVelocity:y}=o.apply(n,a);for(let w=0;w<10;w++){const{positionCorrection:_}=o.apply(n,a);_&&(n.position.add(_.multiplyScalar(.5)),a.position.subtract(_.multiplyScalar(.5)))}s.stroke(255),s.noFill();const b=oe(n.position,xe);s.circle(b.x,s.height-b.y,2*n.geometry.r*xe),s.stroke(255);const v=oe(n.velocity,xe);s.line(b.x,s.height-b.y,b.x+v.x,s.height-(b.y+v.y)),s.stroke(255),s.noFill();const h=oe(a.position,xe);s.circle(h.x,s.height-h.y,2*a.geometry.r*xe),s.stroke(255);const r=oe(a.velocity,xe);if(s.line(h.x,s.height-h.y,h.x+r.x,s.height-(h.y+r.y)),C){s.stroke("#54d7ff"),s.fill("#54d7ff");const w=oe(C,xe);s.circle(w.x,s.height-w.y,5)}if(y){s.stroke("green"),s.fill("green");const w=oe(y,xe);s.line(b.x,s.height-b.y,b.x+w.x,s.height-(b.y+w.y))}}};let i;const m=s=>{if(!Ie(s))i=void 0;else{const u=ot(new c(s.mouseX,s.height-s.mouseY),xe);if(i||(u.distance(n.position)<=n.geometry.r?i="sphere":u.distance(n.position.clone().add(n.velocity))<=6?i="spherevelocity":u.distance(a.position)<=a.geometry.r?i="sphere2":u.distance(a.position.clone().add(a.velocity))<=6&&(i="sphere2velocity")),i==="sphere")n.position.copy(u);else if(i==="spherevelocity"){const f=u.clone().subtract(n.position);n.velocity.copy(f)}else if(i==="sphere2")a.position.copy(u);else if(i==="sphere2velocity"){const f=u.clone().subtract(a.position);a.velocity.copy(f)}}};return ke(()=>{e==null||e.remove()}),[t]}class wn extends me{constructor(e){super(),he(this,e,bn,vn,fe,{})}}function xn(l){let e,n="<span>This page is a list of engine tests. They use the actual engine and allow me to setup different situations and check manually for regressions and bugs.</span> <br/> <span>Use the selection menu to see the different pages</span>",a,o,t,i,m;return i=new kt({props:{tabs:l[0]}}),{c(){e=x("div"),e.innerHTML=n,a=P(),o=x("br"),t=P(),se(i.$$.fragment)},l(s){e=$(s,"DIV",{"data-svelte-h":!0}),z(e)!=="svelte-11mzr87"&&(e.innerHTML=n),a=O(s),o=$(s,"BR",{}),t=O(s),re(i.$$.fragment,s)},m(s,u){E(s,e,u),E(s,a,u),E(s,o,u),E(s,t,u),ie(i,s,u),m=!0},p:$e,i(s){m||(le(i.$$.fragment,s),m=!0)},o(s){ce(i.$$.fragment,s),m=!1},d(s){s&&(p(e),p(a),p(o),p(t)),ae(i,s)}}}function $n(l){return[[{label:"Fireworks",value:At},{label:"Ball pool",value:Ht},{label:"Sphere Sphere Collider",value:wn},{label:"Line Sphere Collider",value:gn},{label:"Perfs - Multiple balls",value:hn},{label:"Playground - Engine settings",value:un},{label:"Dynamics + collisions - 1",value:rn},{label:"Dynamics + collisions - 2",value:nn},{label:"Sphere Line - pull apart",value:Zt},{label:"One ball bounce",value:Jt}]]}class Vn extends me{constructor(e){super(),he(this,e,$n,xn,fe,{})}}export{Vn as component};
