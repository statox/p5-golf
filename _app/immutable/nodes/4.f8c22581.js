var ht=Object.defineProperty;var yt=(f,e,t)=>e in f?ht(f,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):f[e]=t;var U=(f,e,t)=>(yt(f,typeof e!="symbol"?e+"":e,t),t);import{s as oe,f as w,a as E,l as N,g as _,h as C,d as p,c as O,m as B,u as q,j as $e,i as j,y as v,L as te,n as A,M as we,z as qe,O as gt,e as Fe,E as ut,q as lt}from"../chunks/scheduler.e421d989.js";import{S as ne,i as se,b as Y,d as M,m as G,a as W,t as F,e as L,g as He,c as ze}from"../chunks/index.52486247.js";import{e as Ve}from"../chunks/each.e59479a4.js";import{V as y,P as _e,m as mt,a as Ne,T as pt,b as bt,c as vt,d as $t}from"../chunks/p5utils.fe4d08ff.js";const wt=(f,e)=>{if(e.geometry.type!=="sphere"||f.geometry.type!=="line")throw new Error("invalid geometry");const t=_t(f,e);if(!t){e.data.isColliding=!1;return}e.data.isColliding=!0;const n=.8,r=.2,c=f.position.x,s=f.position.y,d=f.position.x+f.geometry.vector.x,a=f.position.y+f.geometry.vector.y,o=d-c,i=a-s,l=new y(-i,o),h=new y(i,-o),u=t.clone().add(l),g=t.clone().add(h);let b;e.position.distanceSq(u)<e.position.distanceSq(g)?b=l:b=h;const m=b.clone().normalize(),x=e.velocity.clone(),$=m.multiplyScalar(x.dot(m)),T=x.subtract($),S=n,I=r;return T.multiplyScalar(1-I).subtract($.multiplyScalar(S))},_t=(f,e)=>{if(e.geometry.type!=="sphere"||f.geometry.type!=="line")throw new Error("invalid geometry");const t=f.position.clone(),n=f.position.clone().add(f.geometry.vector),r=e.position.clone(),c=e.geometry.r,s=n.clone().subtract(t),d=t.clone().subtract(r),a=s.dot(s),o=d.dot(s)*2,i=d.dot(d)-c*c;let l=o*o-4*a*i;if(l<0)return;l=Math.sqrt(l);const h=(-o-l)/(2*a),u=(-o+l)/(2*a);if(h>=0&&h<=1)return t.add(s.multiplyScalar(h));if(u>=0&&u<=1)return t.add(s.multiplyScalar(u))};class xe{constructor(e){U(this,"gravityEnabled");U(this,"dimensions");U(this,"t");U(this,"objects");U(this,"gravity",new y(0,-9.8));U(this,"drag",0);U(this,"reporter");this.gravityEnabled=e.enableGravity??!0,this.dimensions=e.dimensions||new y(100,100),this.objects=[],this.t=0,this.reporter=e.reporter||console.log}toggleGravity(){this.gravityEnabled=!this.gravityEnabled}addObject(e){this.objects.push(e)}applyGravity(e){e.acceleration.push(this.gravity)}applyDynamics(e,t){this.gravityEnabled&&this.applyGravity(t);const n=new y(0,0);for(;t.acceleration.length;){const c=t.acceleration.pop();c&&n.add(c)}n.divideScalar(t.m);const r=1-this.drag;t.velocity.add(n.multiplyScalar(e)).multiplyScalar(r),t.position.add(t.velocity.clone().multiplyScalar(e))}applyCollisions(e){const t=this.objects.find(s=>s.geometry.type==="sphere"),n=this.objects.filter(s=>s.geometry.type==="line");if(!t)throw new Error("No sphere in world");const r=new y(0,0);let c=0;for(const s of n){const d=wt(s,t);d&&(c++,r.add(d))}c>0&&(r.divideScalar(c),t.velocity.copy(r),t.position.add(t.velocity.clone().multiplyScalar(e)))}_step(e){for(const t of this.objects)t.fixed||this.applyDynamics(e,t);this.applyCollisions(e)}stepFixedDt(){const t=Date.now()/1e3;ve=t-be,be=t,this._step(.01),this.t+=.01,this.reporter&&this.reporter({...this,frameTime:ve})}stepAccumulator(){const t=Date.now()/1e3;be===0&&(be=t),ve=t-be,Ue+=ve;let n=0;for(;Ue>=.01&&n<5;)n++,this._step(.01),Ue-=.01,this.t+=.01,this.reporter&&this.reporter({...this,frameTime:ve})}step(){this.stepAccumulator()}}let be=0,ve=0,Ue=0;const P=f=>{var e,t;return{geometry:f.geometry,m:f.mass??1,position:((e=f.position)==null?void 0:e.clone())??new y(0,0),velocity:((t=f.velocity)==null?void 0:t.clone())??new y(0,0),acceleration:[],fixed:f.fixed??!1,data:{isColliding:!1}}};function xt(f){let e,t,n,r,c=f[0][f[0].length-1]+"",s,d,a,o="New ball",i,l,h;return t=new _e({props:{sketch:f[2]}}),{c(){e=w("div"),Y(t.$$.fragment),n=E(),r=w("p"),s=N(c),d=E(),a=w("button"),a.textContent=o,this.h()},l(u){e=_(u,"DIV",{class:!0});var g=C(e);M(t.$$.fragment,g),g.forEach(p),n=O(u),r=_(u,"P",{});var b=C(r);s=B(b,c),b.forEach(p),d=O(u),a=_(u,"BUTTON",{"data-svelte-h":!0}),q(a)!=="svelte-1jwbm46"&&(a.textContent=o),this.h()},h(){$e(e,"class","d-flex justify-content-center")},m(u,g){j(u,e,g),G(t,e,null),j(u,n,g),j(u,r,g),v(r,s),j(u,d,g),j(u,a,g),i=!0,l||(h=te(a,"click",f[1]),l=!0)},p(u,[g]){(!i||g&1)&&c!==(c=u[0][u[0].length-1]+"")&&A(s,c)},i(u){i||(W(t.$$.fragment,u),i=!0)},o(u){F(t.$$.fragment,u),i=!1},d(u){u&&(p(e),p(n),p(r),p(d),p(a)),L(t),l=!1,h()}}}function Tt(f,e,t){console.clear();let n=[];const r=o=>{const i=o.objects[o.objects.length-1],l=i.position.clone().toFixed(2),h=i.velocity.clone().toFixed(2);n.push(`${o.t.toFixed(2)} - pos: ${l} - vel: ${h}`),n.length>50&&n.shift(),t(0,n)},c=new xe({reporter:r,enableGravity:!0}),s=()=>{for(;c.objects.length;)c.objects.pop();const o=P({geometry:{type:"line",vector:new y(100,0)},position:new y(0,0),fixed:!0});c.addObject(o);for(let i=0;i<1;i++){const l=P({geometry:{type:"sphere",r:5},position:new y(20,50),velocity:new y(Math.random()*5-2.5,Math.random()*20)});c.addObject(l)}};let d;const a=o=>{o.setup=()=>{d=o,o.createCanvas(900,600),o.background(0),o.fill(255),o.stroke(255),s()},o.draw=()=>{o.background(0),c.step();for(const i of c.objects){const l=o.map(i.position.x,0,c.dimensions.x,0,o.width),h=o.map(i.position.y,0,c.dimensions.y,o.height,0);if(i.geometry.type==="sphere"&&(o.strokeWeight(i.geometry.r*2),o.point(l,h)),i.geometry.type==="line"){const u=l+o.map(i.geometry.vector.x,0,c.dimensions.x,0,o.width),g=h+o.map(i.geometry.vector.y,0,c.dimensions.y,0,o.height);o.strokeWeight(2),o.line(l,h,u,g)}}}};return we(()=>{d==null||d.remove()}),[n,s,a]}class kt extends ne{constructor(e){super(),se(this,e,Tt,xt,oe,{})}}function Ct(f){let e,t,n,r,c=f[0][f[0].length-1]+"",s,d,a,o="New ball",i,l,h;return t=new _e({props:{sketch:f[2]}}),{c(){e=w("div"),Y(t.$$.fragment),n=E(),r=w("p"),s=N(c),d=E(),a=w("button"),a.textContent=o,this.h()},l(u){e=_(u,"DIV",{class:!0});var g=C(e);M(t.$$.fragment,g),g.forEach(p),n=O(u),r=_(u,"P",{});var b=C(r);s=B(b,c),b.forEach(p),d=O(u),a=_(u,"BUTTON",{"data-svelte-h":!0}),q(a)!=="svelte-1jwbm46"&&(a.textContent=o),this.h()},h(){$e(e,"class","d-flex justify-content-center")},m(u,g){j(u,e,g),G(t,e,null),j(u,n,g),j(u,r,g),v(r,s),j(u,d,g),j(u,a,g),i=!0,l||(h=te(a,"click",f[1]),l=!0)},p(u,[g]){(!i||g&1)&&c!==(c=u[0][u[0].length-1]+"")&&A(s,c)},i(u){i||(W(t.$$.fragment,u),i=!0)},o(u){F(t.$$.fragment,u),i=!1},d(u){u&&(p(e),p(n),p(r),p(d),p(a)),L(t),l=!1,h()}}}const Oe=6;function jt(f,e,t){console.clear();let n=[];const r=l=>{const h=l.objects[l.objects.length-1],u=h.position.clone().toFixed(2),g=h.velocity.clone().toFixed(2);n.push(`${l.t.toFixed(2)} - pos: ${u} - vel: ${g}`),n.length>50&&n.shift(),t(0,n)},c=new xe({reporter:r,enableGravity:!0});let s,d;const a=()=>{for(;c.objects.length;)c.objects.pop();d=P({geometry:{type:"line",vector:new y(80,20)},position:new y(10,20),fixed:!0}),c.addObject(d),s=P({geometry:{type:"sphere",r:10},position:new y(20,50),velocity:new y(2.5,2.5),fixed:!0}),c.addObject(s)};let o;const i=l=>{const h=b=>typeof b=="number"?b*Oe:b.clone().multiplyScalar(Oe),u=b=>typeof b=="number"?b/Oe:b.clone().divideScalar(Oe);l.setup=()=>{o=l;const b=h(c.dimensions);l.createCanvas(b.x,b.y),l.background(0),l.fill(255),l.stroke(255),a()};let g;l.draw=()=>{if(l.background(0),c.step(),l.mouseIsPressed){const b=u(new y(l.mouseX,l.height-l.mouseY));if(g||(b.distance(s.position)<2?g="sphere":b.distance(d.position)<2?g="wallstart":b.distance(d.geometry.vector.clone().add(d.position))<2&&(g="wallend")),g==="sphere"&&s.position.copy(b),g==="wallstart"&&d.position.copy(b),g==="wallend"){const m=b.clone().subtract(d.position);d.geometry.vector.copy(m)}}else g=void 0;for(const b of c.objects){l.stroke(s.data.isColliding?"red":"white");const m=l.map(b.position.x,0,c.dimensions.x,0,l.width),x=l.map(b.position.y,0,c.dimensions.y,l.height,0);if(b.geometry.type==="sphere"){const $=h(b.geometry.r*2);l.strokeWeight($),l.point(m,x)}if(b.geometry.type==="line"){const $=m+l.map(b.geometry.vector.x,0,c.dimensions.x,0,l.width),T=x-l.map(b.geometry.vector.y,0,c.dimensions.y,0,l.height);l.strokeWeight(2),l.line(m,x,$,T)}}}};return we(()=>{o==null||o.remove()}),[n,a,i]}class St extends ne{constructor(e){super(),se(this,e,jt,Ct,oe,{})}}function Et(f){let e,t,n;return t=new _e({props:{sketch:f[0]}}),{c(){e=w("div"),Y(t.$$.fragment),this.h()},l(r){e=_(r,"DIV",{class:!0});var c=C(e);M(t.$$.fragment,c),c.forEach(p),this.h()},h(){$e(e,"class","d-flex justify-content-center")},m(r,c){j(r,e,c),G(t,e,null),n=!0},p:qe,i(r){n||(W(t.$$.fragment,r),n=!0)},o(r){F(t.$$.fragment,r),n=!1},d(r){r&&p(e),L(t)}}}const Pe=6;function Ot(f){console.clear();const e=new xe({reporter:()=>{},enableGravity:!0});let t;const n=()=>{for(;e.objects.length;)e.objects.pop();const o=P({geometry:{type:"line",vector:new y(100,0)},position:new y(0,2),fixed:!0});e.addObject(o);const i=P({geometry:{type:"line",vector:new y(100,0)},position:new y(0,98),fixed:!0});e.addObject(i);const l=P({geometry:{type:"line",vector:new y(0,100)},position:new y(2,0),fixed:!0});e.addObject(l);const h=P({geometry:{type:"line",vector:new y(0,100)},position:new y(98,0),fixed:!0});e.addObject(h);const u=P({geometry:{type:"line",vector:new y(50,50)},position:new y(20,10),fixed:!0});e.addObject(u),t=P({geometry:{type:"sphere",r:5},position:new y(20,50),velocity:new y(Math.random()*5-2.5,Math.random()*20)}),e.addObject(t)},r=o=>typeof o=="number"?o*Pe:o.clone().multiplyScalar(Pe),c=o=>typeof o=="number"?o/Pe:o.clone().divideScalar(Pe),s=(o,i)=>{for(const l of i.objects){o.stroke(l.data.isColliding?"red":"white");const h=o.map(l.position.x,0,i.dimensions.x,0,o.width),u=o.map(l.position.y,0,i.dimensions.y,o.height,0);if(l.geometry.type==="sphere"){const g=r(l.geometry.r*2);o.strokeWeight(g),o.point(h,u)}if(l.geometry.type==="line"){const g=h+o.map(l.geometry.vector.x,0,i.dimensions.x,0,o.width),b=u-o.map(l.geometry.vector.y,0,i.dimensions.y,0,o.height);o.strokeWeight(2),o.line(h,u,g,b)}}};let d;const a=o=>{o.setup=()=>{d=o;const l=r(e.dimensions);o.createCanvas(l.x,l.y),o.background(0),o.fill(255),o.stroke(255),n()},o.draw=()=>{if(o.background(0),o.mouseIsPressed){t.fixed=!0;const l=c(new y(o.mouseX,o.height-o.mouseY));t.position.copy(l)}else t.fixed=!1;e.step(),s(o,e)};let i;o.mousePressed=()=>{i=c(new y(o.mouseX,o.height-o.mouseY))},o.mouseReleased=()=>{const l=c(new y(o.mouseX,o.height-o.mouseY)),h=i.subtract(l);t.position.copy(l),t.velocity.copy(h)}};return we(()=>{d==null||d.remove()}),[a]}class Pt extends ne{constructor(e){super(),se(this,e,Ot,Et,oe,{})}}function Dt(f){let e,t,n,r,c,s,d,a="Gravity",o,i,l,h="Toggle",u,g,b;return t=new _e({props:{sketch:f[1]}}),{c(){e=w("div"),Y(t.$$.fragment),n=E(),r=w("table"),c=w("tbody"),s=w("tr"),d=w("th"),d.textContent=a,o=E(),i=w("td"),l=w("button"),l.textContent=h,this.h()},l(m){e=_(m,"DIV",{class:!0});var x=C(e);M(t.$$.fragment,x),x.forEach(p),n=O(m),r=_(m,"TABLE",{});var $=C(r);c=_($,"TBODY",{});var T=C(c);s=_(T,"TR",{});var S=C(s);d=_(S,"TH",{"data-svelte-h":!0}),q(d)!=="svelte-vy75us"&&(d.textContent=a),o=O(S),i=_(S,"TD",{});var I=C(i);l=_(I,"BUTTON",{"data-svelte-h":!0}),q(l)!=="svelte-18lc94l"&&(l.textContent=h),I.forEach(p),S.forEach(p),T.forEach(p),$.forEach(p),this.h()},h(){$e(e,"class","d-flex justify-content-center")},m(m,x){j(m,e,x),G(t,e,null),j(m,n,x),j(m,r,x),v(r,c),v(c,s),v(s,d),v(s,o),v(s,i),v(i,l),u=!0,g||(b=te(l,"click",f[2]),g=!0)},p:qe,i(m){u||(W(t.$$.fragment,m),u=!0)},o(m){F(t.$$.fragment,m),u=!1},d(m){m&&(p(e),p(n),p(r)),L(t),g=!1,b()}}}const De=6;function Wt(f){console.clear();const e=new xe({reporter:()=>{},enableGravity:!0});let t;const n=()=>{for(;e.objects.length;)e.objects.pop();const i=P({geometry:{type:"line",vector:new y(100,0)},position:new y(0,0),fixed:!0});e.addObject(i);const l=P({geometry:{type:"line",vector:new y(100,0)},position:new y(0,100),fixed:!0});e.addObject(l);const h=P({geometry:{type:"line",vector:new y(0,100)},position:new y(0,0),fixed:!0});e.addObject(h);const u=P({geometry:{type:"line",vector:new y(0,100)},position:new y(100,0),fixed:!0});e.addObject(u);const g=P({geometry:{type:"line",vector:new y(50,50)},position:new y(20,10),fixed:!0});e.addObject(g),t=P({geometry:{type:"sphere",r:2},position:new y(20,50),velocity:new y(Math.random()*5-2.5,Math.random()*20)}),e.addObject(t)},r=i=>typeof i=="number"?i*De:i.clone().multiplyScalar(De),c=i=>typeof i=="number"?i/De:i.clone().divideScalar(De),s=(i,l)=>{for(const h of l.objects){i.stroke(h.data.isColliding?"red":"white");const u=i.map(h.position.x,0,l.dimensions.x,0,i.width),g=i.map(h.position.y,0,l.dimensions.y,i.height,0);if(h.geometry.type==="sphere"){const b=r(h.geometry.r*2);i.strokeWeight(b),i.point(u,g)}if(h.geometry.type==="line"){const b=u+i.map(h.geometry.vector.x,0,l.dimensions.x,0,i.width),m=g-i.map(h.geometry.vector.y,0,l.dimensions.y,0,i.height);i.strokeWeight(2),i.line(u,g,b,m)}}};let d;const a=i=>{i.setup=()=>{d=i;const h=r(e.dimensions);i.createCanvas(h.x,h.y),i.background(0),i.fill(255),i.stroke(255),n()},i.draw=()=>{if(i.background(0),mt(i)){t.fixed=!0;const h=c(new y(i.mouseX,i.height-i.mouseY));t.position.copy(h)}else t.fixed=!1;e.step(),s(i,e)};let l;i.mousePressed=()=>{Ne(i)&&(l=c(new y(i.mouseX,i.height-i.mouseY)))},i.mouseReleased=()=>{if(!Ne(i))return;const h=c(new y(i.mouseX,i.height-i.mouseY)),u=l.subtract(h);t.position.copy(h),t.velocity.copy(u)}};return we(()=>{d==null||d.remove()}),[e,a,()=>e.toggleGravity()]}class Ft extends ne{constructor(e){super(),se(this,e,Wt,Dt,oe,{})}}function Vt(f){let e,t,n,r,c,s=f[0]?"Disable":"Enable",d,a,o,i,l=f[1]?"Play":"Pause",h,u,g,b="Reset",m,x,$,T,S,I="Simulation time/Frame duration",z,re,ie=f[2].t+"",Te,Be,le,ce=f[2].frameTime+"",ke,Ie,X,J,Je="Sphere position",Ye,ae,de=f[2].spherePos.x.toFixed(2)+"",Ce,Ge,fe,ue=f[2].spherePos.y.toFixed(2)+"",je,Le,R,K,Ke="Sphere velocity",Xe,me,he=f[2].sphereVel.x.toFixed(2)+"",Se,Ae,ye,ge=f[2].sphereVel.y.toFixed(2)+"",Ee,V,Me,Qe;return t=new _e({props:{sketch:f[4]}}),{c(){e=w("div"),Y(t.$$.fragment),n=E(),r=w("div"),c=w("button"),d=N(s),a=N(" pause on collision"),o=E(),i=w("button"),h=N(l),u=E(),g=w("button"),g.textContent=b,m=E(),x=w("table"),$=w("tbody"),T=w("tr"),S=w("th"),S.textContent=I,z=E(),re=w("td"),Te=N(ie),Be=E(),le=w("td"),ke=N(ce),Ie=E(),X=w("tr"),J=w("th"),J.textContent=Je,Ye=E(),ae=w("td"),Ce=N(de),Ge=E(),fe=w("td"),je=N(ue),Le=E(),R=w("tr"),K=w("th"),K.textContent=Ke,Xe=E(),me=w("td"),Se=N(he),Ae=E(),ye=w("td"),Ee=N(ge),this.h()},l(k){e=_(k,"DIV",{class:!0});var D=C(e);M(t.$$.fragment,D),D.forEach(p),n=O(k),r=_(k,"DIV",{});var Q=C(r);c=_(Q,"BUTTON",{});var Re=C(c);d=B(Re,s),a=B(Re," pause on collision"),Re.forEach(p),o=O(Q),i=_(Q,"BUTTON",{});var Ze=C(i);h=B(Ze,l),Ze.forEach(p),u=O(Q),g=_(Q,"BUTTON",{"data-svelte-h":!0}),q(g)!=="svelte-tlxueg"&&(g.textContent=b),Q.forEach(p),m=O(k),x=_(k,"TABLE",{});var et=C(x);$=_(et,"TBODY",{});var pe=C($);T=_(pe,"TR",{});var Z=C(T);S=_(Z,"TH",{"data-svelte-h":!0}),q(S)!=="svelte-rirgm4"&&(S.textContent=I),z=O(Z),re=_(Z,"TD",{});var tt=C(re);Te=B(tt,ie),tt.forEach(p),Be=O(Z),le=_(Z,"TD",{});var ot=C(le);ke=B(ot,ce),ot.forEach(p),Z.forEach(p),Ie=O(pe),X=_(pe,"TR",{});var H=C(X);J=_(H,"TH",{"data-svelte-h":!0}),q(J)!=="svelte-1y1nif6"&&(J.textContent=Je),Ye=O(H),ae=_(H,"TD",{});var nt=C(ae);Ce=B(nt,de),nt.forEach(p),Ge=O(H),fe=_(H,"TD",{});var st=C(fe);je=B(st,ue),st.forEach(p),Le=O(H),H.forEach(p),R=_(pe,"TR",{});var ee=C(R);K=_(ee,"TH",{"data-svelte-h":!0}),q(K)!=="svelte-1uw1fs2"&&(K.textContent=Ke),Xe=O(ee),me=_(ee,"TD",{});var rt=C(me);Se=B(rt,he),rt.forEach(p),Ae=O(ee),ye=_(ee,"TD",{});var it=C(ye);Ee=B(it,ge),it.forEach(p),ee.forEach(p),pe.forEach(p),et.forEach(p),this.h()},h(){$e(e,"class","d-flex justify-content-center")},m(k,D){j(k,e,D),G(t,e,null),j(k,n,D),j(k,r,D),v(r,c),v(c,d),v(c,a),v(r,o),v(r,i),v(i,h),v(r,u),v(r,g),j(k,m,D),j(k,x,D),v(x,$),v($,T),v(T,S),v(T,z),v(T,re),v(re,Te),v(T,Be),v(T,le),v(le,ke),v($,Ie),v($,X),v(X,J),v(X,Ye),v(X,ae),v(ae,Ce),v(X,Ge),v(X,fe),v(fe,je),v(X,Le),v($,R),v(R,K),v(R,Xe),v(R,me),v(me,Se),v(R,Ae),v(R,ye),v(ye,Ee),V=!0,Me||(Qe=[te(c,"click",f[5]),te(i,"click",f[6]),te(g,"click",f[3])],Me=!0)},p(k,[D]){(!V||D&1)&&s!==(s=k[0]?"Disable":"Enable")&&A(d,s),(!V||D&2)&&l!==(l=k[1]?"Play":"Pause")&&A(h,l),(!V||D&4)&&ie!==(ie=k[2].t+"")&&A(Te,ie),(!V||D&4)&&ce!==(ce=k[2].frameTime+"")&&A(ke,ce),(!V||D&4)&&de!==(de=k[2].spherePos.x.toFixed(2)+"")&&A(Ce,de),(!V||D&4)&&ue!==(ue=k[2].spherePos.y.toFixed(2)+"")&&A(je,ue),(!V||D&4)&&he!==(he=k[2].sphereVel.x.toFixed(2)+"")&&A(Se,he),(!V||D&4)&&ge!==(ge=k[2].sphereVel.y.toFixed(2)+"")&&A(Ee,ge)},i(k){V||(W(t.$$.fragment,k),V=!0)},o(k){F(t.$$.fragment,k),V=!1},d(k){k&&(p(e),p(n),p(r),p(m),p(x)),L(t),Me=!1,gt(Qe)}}}const We=60;function Nt(f,e,t){console.clear();let n=!0,r=!0,c={t:"0",frameTime:"0",spherePos:new y(0,0),sphereVel:new y(0,0),ballIsColliding:!1},s,d;const a=()=>{s=new xe({dimensions:new y(10,10),reporter:T=>{var S;t(2,c.t=(S=T==null?void 0:T.t)==null?void 0:S.toFixed(2),c),c.spherePos.copy(d.position),c.sphereVel.copy(d.velocity),t(2,c.frameTime=T.frameTime.toFixed(3),c),t(2,c),t(2,c.ballIsColliding=d.data.isColliding,c),n&&d.data.isColliding&&!r&&t(1,r=!0)},enableGravity:!0});const m=P({geometry:{type:"line",vector:new y(10,0)},position:new y(0,0),fixed:!0});s.addObject(m);const x=P({geometry:{type:"line",vector:new y(0,100)},position:new y(0,0),fixed:!0});s.addObject(x);const $=P({geometry:{type:"line",vector:new y(0,100)},position:new y(10,0),fixed:!0});s.addObject($),d=P({geometry:{type:"sphere",r:.1},position:new y(5,10),velocity:new y(0,0)}),s.addObject(d)},o=m=>typeof m=="number"?m*We:m.clone().multiplyScalar(We),i=m=>typeof m=="number"?m/We:m.clone().divideScalar(We),l=(m,x)=>{for(const $ of x.objects){m.stroke(c.ballIsColliding?"red":"white");const T=m.map($.position.x,0,x.dimensions.x,0,m.width),S=m.map($.position.y,0,x.dimensions.y,m.height,0);if($.geometry.type==="sphere"){const I=o($.geometry.r*2);m.strokeWeight(I),m.point(T,S)}if($.geometry.type==="line"){const I=T+m.map($.geometry.vector.x,0,x.dimensions.x,0,m.width),z=S-m.map($.geometry.vector.y,0,x.dimensions.y,0,m.height);m.strokeWeight(2),m.line(T,S,I,z)}}};let h;const u=m=>{m.setup=()=>{h=m,a();const $=o(s.dimensions);m.createCanvas($.x,$.y),m.background(0),m.fill(255),m.stroke(255),a()},m.draw=()=>{if(m.background(0),mt(m)){d.fixed=!0;const $=i(new y(m.mouseX,m.height-m.mouseY));d.position.copy($)}else d.fixed=!1;r||s.step(),l(m,s)};let x;m.mousePressed=()=>{Ne(m)&&(x=i(new y(m.mouseX,m.height-m.mouseY)))},m.mouseReleased=()=>{if(!Ne(m))return;const $=i(new y(m.mouseX,m.height-m.mouseY)),T=x.subtract($);d.position.copy($),d.velocity.copy(T)}};return we(()=>{h==null||h.remove()}),[n,r,c,a,u,()=>t(0,n=!n),()=>t(1,r=!r)]}class Bt extends ne{constructor(e){super(),se(this,e,Nt,Vt,oe,{})}}function ct(f,e,t){const n=f.slice();return n[1]=e[t],n}function at(f,e,t){const n=f.slice();return n[1]=e[t],n}function It(f){let e=f[1].title+"",t;return{c(){t=N(e)},l(n){t=B(n,e)},m(n,r){j(n,t,r)},p:qe,d(n){n&&p(t)}}}function dt(f){let e,t;return e=new $t({props:{$$slots:{default:[It]},$$scope:{ctx:f}}}),{c(){Y(e.$$.fragment)},l(n){M(e.$$.fragment,n)},m(n,r){G(e,n,r),t=!0},p(n,r){const c={};r&64&&(c.$$scope={dirty:r,ctx:n}),e.$set(c)},i(n){t||(W(e.$$.fragment,n),t=!0)},o(n){F(e.$$.fragment,n),t=!1},d(n){L(e,n)}}}function Yt(f){let e,t,n=Ve(f[0]),r=[];for(let s=0;s<n.length;s+=1)r[s]=dt(at(f,n,s));const c=s=>F(r[s],1,1,()=>{r[s]=null});return{c(){for(let s=0;s<r.length;s+=1)r[s].c();e=Fe()},l(s){for(let d=0;d<r.length;d+=1)r[d].l(s);e=Fe()},m(s,d){for(let a=0;a<r.length;a+=1)r[a]&&r[a].m(s,d);j(s,e,d),t=!0},p(s,d){if(d&1){n=Ve(s[0]);let a;for(a=0;a<n.length;a+=1){const o=at(s,n,a);r[a]?(r[a].p(o,d),W(r[a],1)):(r[a]=dt(o),r[a].c(),W(r[a],1),r[a].m(e.parentNode,e))}for(He(),a=n.length;a<r.length;a+=1)c(a);ze()}},i(s){if(!t){for(let d=0;d<n.length;d+=1)W(r[d]);t=!0}},o(s){r=r.filter(Boolean);for(let d=0;d<r.length;d+=1)F(r[d]);t=!1},d(s){s&&p(e),ut(r,s)}}}function Gt(f){let e,t,n;var r=f[1].component;function c(s,d){return{}}return r&&(e=lt(r,c())),{c(){e&&Y(e.$$.fragment),t=E()},l(s){e&&M(e.$$.fragment,s),t=O(s)},m(s,d){e&&G(e,s,d),j(s,t,d),n=!0},p(s,d){if(r!==(r=s[1].component)){if(e){He();const a=e;F(a.$$.fragment,1,0,()=>{L(a,1)}),ze()}r?(e=lt(r,c()),Y(e.$$.fragment),W(e.$$.fragment,1),G(e,t.parentNode,t)):e=null}},i(s){n||(e&&W(e.$$.fragment,s),n=!0)},o(s){e&&F(e.$$.fragment,s),n=!1},d(s){s&&p(t),e&&L(e,s)}}}function ft(f){let e,t;return e=new vt({props:{$$slots:{default:[Gt]},$$scope:{ctx:f}}}),{c(){Y(e.$$.fragment)},l(n){M(e.$$.fragment,n)},m(n,r){G(e,n,r),t=!0},p(n,r){const c={};r&64&&(c.$$scope={dirty:r,ctx:n}),e.$set(c)},i(n){t||(W(e.$$.fragment,n),t=!0)},o(n){F(e.$$.fragment,n),t=!1},d(n){L(e,n)}}}function Lt(f){let e,t,n,r;e=new bt({props:{$$slots:{default:[Yt]},$$scope:{ctx:f}}});let c=Ve(f[0]),s=[];for(let a=0;a<c.length;a+=1)s[a]=ft(ct(f,c,a));const d=a=>F(s[a],1,1,()=>{s[a]=null});return{c(){Y(e.$$.fragment),t=E();for(let a=0;a<s.length;a+=1)s[a].c();n=Fe()},l(a){M(e.$$.fragment,a),t=O(a);for(let o=0;o<s.length;o+=1)s[o].l(a);n=Fe()},m(a,o){G(e,a,o),j(a,t,o);for(let i=0;i<s.length;i+=1)s[i]&&s[i].m(a,o);j(a,n,o),r=!0},p(a,o){const i={};if(o&64&&(i.$$scope={dirty:o,ctx:a}),e.$set(i),o&1){c=Ve(a[0]);let l;for(l=0;l<c.length;l+=1){const h=ct(a,c,l);s[l]?(s[l].p(h,o),W(s[l],1)):(s[l]=ft(h),s[l].c(),W(s[l],1),s[l].m(n.parentNode,n))}for(He(),l=c.length;l<s.length;l+=1)d(l);ze()}},i(a){if(!r){W(e.$$.fragment,a);for(let o=0;o<c.length;o+=1)W(s[o]);r=!0}},o(a){F(e.$$.fragment,a),s=s.filter(Boolean);for(let o=0;o<s.length;o+=1)F(s[o]);r=!1},d(a){a&&(p(t),p(n)),L(e,a),ut(s,a)}}}function Xt(f){let e,t;return e=new pt({props:{$$slots:{default:[Lt]},$$scope:{ctx:f}}}),{c(){Y(e.$$.fragment)},l(n){M(e.$$.fragment,n)},m(n,r){G(e,n,r),t=!0},p(n,[r]){const c={};r&64&&(c.$$scope={dirty:r,ctx:n}),e.$set(c)},i(n){t||(W(e.$$.fragment,n),t=!0)},o(n){F(e.$$.fragment,n),t=!1},d(n){L(e,n)}}}function At(f){return[[{title:"Free fall",component:Bt},{title:"Test collisions 3",component:Ft},{title:"Test collisions 2",component:Pt},{title:"Test collisions",component:St},{title:"Test engine",component:kt}]]}class zt extends ne{constructor(e){super(),se(this,e,At,Xt,oe,{})}}export{zt as component};
