import{s as X,f as L,a as E,g as C,h as H,d as b,c as B,u as Q,j as Z,i as v,y as ee,L as te,z as A,M as ne,e as R,E as G,q as N,l as oe,m as se}from"../chunks/scheduler.e421d989.js";import{S as U,i as J,b as M,d as S,m as j,a as $,t as y,e as W,g as I,c as O}from"../chunks/index.52486247.js";import{e as T}from"../chunks/each.e59479a4.js";import{V as h,P as re,a as V,T as ie,b as ce,c as ae,d as le}from"../chunks/p5utils.fe4d08ff.js";import{c as x,W as fe}from"../chunks/PhysicObject.04c1abc6.js";const ue=(f,e)=>{const s=[],t=f.x,o=f.y,a=3,n=5,l=.3,r=4,u=.5,i=.1,c=3,p=Math.random()*(t-n),m=o-c-Math.random()*(o-r-c),d=Math.random()*n+a,g=Math.random()*r+l,_=Math.random()*u+i;pe({x:p,y:m,w:d,h:g,topRatio:_},e).forEach(P=>s.push(P)),he(f).forEach(P=>s.push(P));const k=Math.floor(1+Math.random()*2),K=k*.1,w=me(new h(Math.random()*t,Math.random()*o),{m:k,r:K});for(;w.position.x>p&&w.position.x<p+d&&w.position.y<m&&w.position.y>m+g;)w.position.x=Math.random()*t,w.position.y=Math.random()*o;return s.push(w),{objects:s,sphere:w}},me=(f,e)=>x({geometry:{type:"sphere",r:(e==null?void 0:e.r)||.1},mass:e==null?void 0:e.m,position:f,velocity:new h(0,0)}),he=f=>{const e=f.x,s=f.y,t=[],o=x({geometry:{type:"line",vector:new h(e,0)},position:new h(0,0),fixed:!0});t.push(o);const a=x({geometry:{type:"line",vector:new h(0,s*10)},position:new h(0,0),fixed:!0});t.push(a);const n=x({geometry:{type:"line",vector:new h(0,s*10)},position:new h(15,0),fixed:!0});return t.push(n),t},pe=(f,e)=>{const{x:s,y:t,h:o,w:a,topRatio:n}=f;if(n<0||n>1)throw new Error("topRatio must be between 0 and 1");const l=a*n/2,r=a*(1-n),u=.1,i=[],c=x({geometry:{type:"line",vector:new h(l,0)},position:new h(s,t+u),fixed:!0});i.push(c);const p=x({geometry:{type:"line",vector:new h(0,-o)},position:new h(s+l,t),fixed:!0});i.push(p);const m=x({geometry:{type:"line",vector:new h(r,0)},position:new h(s+l,t-o-u),fixed:!0});i.push(m);const d=x({geometry:{type:"line",vector:new h(r-2*u,0)},position:new h(s+l+u,t-o+u),fixed:!0,friction:1,restitution:0,collisionListener:e});i.push(d);const g=x({geometry:{type:"line",vector:new h(0,o)},position:new h(s+l+r,t-o),fixed:!0});i.push(g);const _=x({geometry:{type:"line",vector:new h(l,0)},position:new h(s+l+r,t+u),fixed:!0});return i.push(_),i};function de(f){let e,s,t,o,a,n="Reset",l,r,u;return s=new re({props:{sketch:f[1]}}),{c(){e=L("div"),M(s.$$.fragment),t=E(),o=L("div"),a=L("button"),a.textContent=n,this.h()},l(i){e=C(i,"DIV",{class:!0});var c=H(e);S(s.$$.fragment,c),c.forEach(b),t=B(i),o=C(i,"DIV",{});var p=H(o);a=C(p,"BUTTON",{"data-svelte-h":!0}),Q(a)!=="svelte-tlxueg"&&(a.textContent=n),p.forEach(b),this.h()},h(){Z(e,"class","d-flex justify-content-center")},m(i,c){v(i,e,c),j(s,e,null),v(i,t,c),v(i,o,c),ee(o,a),l=!0,r||(u=te(a,"click",f[0]),r=!0)},p:A,i(i){l||($(s.$$.fragment,i),l=!0)},o(i){y(s.$$.fragment,i),l=!1},d(i){i&&(b(e),b(t),b(o)),W(s),r=!1,u()}}}const F=60;function $e(f){console.clear();let e,s,t;const o=()=>{setTimeout(a,1e3)},a=()=>{e=new fe({dimensions:new h(15,15),reporter:()=>{},enableGravity:!0});const i=ue(e.dimensions,o);i.sphere.fixed=!0,s=i.sphere,t=s.position.clone();for(const c of i.objects)e.addObject(c)},n=i=>typeof i=="number"?i*F:i.clone().multiplyScalar(F),l=(i,c)=>{for(const p of c.objects){i.stroke(p.data.isColliding?"red":"white");const m=i.map(p.position.x,0,c.dimensions.x,0,i.width),d=i.map(p.position.y,0,c.dimensions.y,i.height,0);if(p.geometry.type==="sphere"){const g=n(p.geometry.r*2);i.strokeWeight(g),i.point(m,d)}if(p.geometry.type==="line"){const g=m+i.map(p.geometry.vector.x,0,c.dimensions.x,0,i.width),_=d-i.map(p.geometry.vector.y,0,c.dimensions.y,0,i.height);i.strokeWeight(2),i.line(m,d,g,_)}}};let r;const u=i=>{i.setup=()=>{r=i,a();const m=n(e.dimensions);i.createCanvas(m.x,m.y),i.background(0),i.fill(255),i.stroke(255),a()},i.draw=()=>{i.background(0),e.step(),l(i,e),p(i)};let c;i.mousePressed=()=>{V(i)&&(c=new h(i.width,i.height).divideScalar(2),s.position.copy(t),s.velocity.zero(),s.fixed=!0)},i.mouseReleased=()=>{if(!V(i)||!c)return;const m=c,g=new h(i.mouseX,i.mouseY).clone().subtract(m).multiplyScalar(20);g.x*=-1,e.applyForce(s,g),s.fixed=!1,c=void 0};const p=m=>{if(!s.fixed||!c)return;m.stroke("red"),m.strokeWeight(1),m.noFill(),m.circle(c.x,c.y,15),m.stroke("blue"),m.strokeWeight(2);const d=c,_=new h(m.mouseX,m.mouseY).clone().subtract(d);m.line(d.x,d.y,d.x+_.x,d.y+_.y);const k=n(s.position);_.x*=-1,_.y*=-1,m.line(k.x,m.height-k.y,k.x+_.x,m.height-k.y+_.y)}};return ne(()=>{r==null||r.remove()}),[a,u]}class ge extends U{constructor(e){super(),J(this,e,$e,de,X,{})}}function Y(f,e,s){const t=f.slice();return t[1]=e[s],t}function q(f,e,s){const t=f.slice();return t[1]=e[s],t}function _e(f){let e=f[1].title+"",s;return{c(){s=oe(e)},l(t){s=se(t,e)},m(t,o){v(t,s,o)},p:A,d(t){t&&b(s)}}}function z(f){let e,s;return e=new le({props:{$$slots:{default:[_e]},$$scope:{ctx:f}}}),{c(){M(e.$$.fragment)},l(t){S(e.$$.fragment,t)},m(t,o){j(e,t,o),s=!0},p(t,o){const a={};o&64&&(a.$$scope={dirty:o,ctx:t}),e.$set(a)},i(t){s||($(e.$$.fragment,t),s=!0)},o(t){y(e.$$.fragment,t),s=!1},d(t){W(e,t)}}}function ye(f){let e,s,t=T(f[0]),o=[];for(let n=0;n<t.length;n+=1)o[n]=z(q(f,t,n));const a=n=>y(o[n],1,1,()=>{o[n]=null});return{c(){for(let n=0;n<o.length;n+=1)o[n].c();e=R()},l(n){for(let l=0;l<o.length;l+=1)o[l].l(n);e=R()},m(n,l){for(let r=0;r<o.length;r+=1)o[r]&&o[r].m(n,l);v(n,e,l),s=!0},p(n,l){if(l&1){t=T(n[0]);let r;for(r=0;r<t.length;r+=1){const u=q(n,t,r);o[r]?(o[r].p(u,l),$(o[r],1)):(o[r]=z(u),o[r].c(),$(o[r],1),o[r].m(e.parentNode,e))}for(I(),r=t.length;r<o.length;r+=1)a(r);O()}},i(n){if(!s){for(let l=0;l<t.length;l+=1)$(o[l]);s=!0}},o(n){o=o.filter(Boolean);for(let l=0;l<o.length;l+=1)y(o[l]);s=!1},d(n){n&&b(e),G(o,n)}}}function xe(f){let e,s,t;var o=f[1].component;function a(n,l){return{}}return o&&(e=N(o,a())),{c(){e&&M(e.$$.fragment),s=E()},l(n){e&&S(e.$$.fragment,n),s=B(n)},m(n,l){e&&j(e,n,l),v(n,s,l),t=!0},p(n,l){if(o!==(o=n[1].component)){if(e){I();const r=e;y(r.$$.fragment,1,0,()=>{W(r,1)}),O()}o?(e=N(o,a()),M(e.$$.fragment),$(e.$$.fragment,1),j(e,s.parentNode,s)):e=null}},i(n){t||(e&&$(e.$$.fragment,n),t=!0)},o(n){e&&y(e.$$.fragment,n),t=!1},d(n){n&&b(s),e&&W(e,n)}}}function D(f){let e,s;return e=new ae({props:{$$slots:{default:[xe]},$$scope:{ctx:f}}}),{c(){M(e.$$.fragment)},l(t){S(e.$$.fragment,t)},m(t,o){j(e,t,o),s=!0},p(t,o){const a={};o&64&&(a.$$scope={dirty:o,ctx:t}),e.$set(a)},i(t){s||($(e.$$.fragment,t),s=!0)},o(t){y(e.$$.fragment,t),s=!1},d(t){W(e,t)}}}function be(f){let e,s,t,o;e=new ce({props:{$$slots:{default:[ye]},$$scope:{ctx:f}}});let a=T(f[0]),n=[];for(let r=0;r<a.length;r+=1)n[r]=D(Y(f,a,r));const l=r=>y(n[r],1,1,()=>{n[r]=null});return{c(){M(e.$$.fragment),s=E();for(let r=0;r<n.length;r+=1)n[r].c();t=R()},l(r){S(e.$$.fragment,r),s=B(r);for(let u=0;u<n.length;u+=1)n[u].l(r);t=R()},m(r,u){j(e,r,u),v(r,s,u);for(let i=0;i<n.length;i+=1)n[i]&&n[i].m(r,u);v(r,t,u),o=!0},p(r,u){const i={};if(u&64&&(i.$$scope={dirty:u,ctx:r}),e.$set(i),u&1){a=T(r[0]);let c;for(c=0;c<a.length;c+=1){const p=Y(r,a,c);n[c]?(n[c].p(p,u),$(n[c],1)):(n[c]=D(p),n[c].c(),$(n[c],1),n[c].m(t.parentNode,t))}for(I(),c=a.length;c<n.length;c+=1)l(c);O()}},i(r){if(!o){$(e.$$.fragment,r);for(let u=0;u<a.length;u+=1)$(n[u]);o=!0}},o(r){y(e.$$.fragment,r),n=n.filter(Boolean);for(let u=0;u<n.length;u+=1)y(n[u]);o=!1},d(r){r&&(b(s),b(t)),W(e,r),G(n,r)}}}function we(f){let e,s;return e=new ie({props:{$$slots:{default:[be]},$$scope:{ctx:f}}}),{c(){M(e.$$.fragment)},l(t){S(e.$$.fragment,t)},m(t,o){j(e,t,o),s=!0},p(t,[o]){const a={};o&64&&(a.$$scope={dirty:o,ctx:t}),e.$set(a)},i(t){s||($(e.$$.fragment,t),s=!0)},o(t){y(e.$$.fragment,t),s=!1},d(t){W(e,t)}}}function ve(f){return[[{title:"Bucket",component:ge}]]}class Re extends U{constructor(e){super(),J(this,e,ve,we,X,{})}}export{Re as component};
