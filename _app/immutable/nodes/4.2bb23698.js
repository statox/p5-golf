import{s as ae,f as w,a as E,l as X,g as _,h as k,d as p,c as j,m as H,u as G,j as F,i as T,y,L as q,n as Q,M as Te,z as we,e as ut,P as be,Q as Oe,O as He}from"../chunks/scheduler.32ebed32.js";import{S as ue,i as de,b as ne,d as oe,m as se,a as re,t as le,e as ie}from"../chunks/index.c25c2528.js";import{P as Ce,c as $,V as c,d as Ge,m as Ze,a as Xe,w as ke,s as mt,C as pt}from"../chunks/PhysicObject.d0894205.js";import{W as De,L as yt}from"../chunks/World.b696ca13.js";function vt(i){let e,o,a,s,t=i[0][i[0].length-1]+"",n,m,r,l="New ball",f,u,x;return o=new Ce({props:{sketch:i[2]}}),{c(){e=w("div"),ne(o.$$.fragment),a=E(),s=w("p"),n=X(t),m=E(),r=w("button"),r.textContent=l,this.h()},l(v){e=_(v,"DIV",{class:!0});var b=k(e);oe(o.$$.fragment,b),b.forEach(p),a=j(v),s=_(v,"P",{});var g=k(s);n=H(g,t),g.forEach(p),m=j(v),r=_(v,"BUTTON",{"data-svelte-h":!0}),G(r)!=="svelte-1jwbm46"&&(r.textContent=l),this.h()},h(){F(e,"class","d-flex justify-content-center")},m(v,b){T(v,e,b),se(o,e,null),T(v,a,b),T(v,s,b),y(s,n),T(v,m,b),T(v,r,b),f=!0,u||(x=q(r,"click",i[1]),u=!0)},p(v,[b]){(!f||b&1)&&t!==(t=v[0][v[0].length-1]+"")&&Q(n,t)},i(v){f||(re(o.$$.fragment,v),f=!0)},o(v){le(o.$$.fragment,v),f=!1},d(v){v&&(p(e),p(a),p(s),p(m),p(r)),ie(o),u=!1,x()}}}function gt(i,e,o){console.clear();let a=[];const s=l=>{const f=l.objects[l.objects.length-1],u=f.position.clone().toFixed(2),x=f.velocity.clone().toFixed(2);a.push(`${l.t.toFixed(2)} - pos: ${u} - vel: ${x}`),a.length>50&&a.shift(),o(0,a)},t=new De({reporter:s,enableGravity:!0}),n=()=>{for(;t.objects.length;)t.objects.pop();const l=$({geometry:{type:"line",vector:new c(100,0)},position:new c(0,0),fixed:!0});t.addObject(l);for(let f=0;f<1;f++){const u=$({geometry:{type:"sphere",r:5},position:new c(20,50),velocity:new c(Math.random()*5-2.5,Math.random()*20)});t.addObject(u)}};let m;const r=l=>{l.setup=()=>{m=l,l.createCanvas(900,600),l.background(0),l.fill(255),l.stroke(255),n()},l.draw=()=>{l.background(0),t.step();for(const f of t.objects){const u=l.map(f.position.x,0,t.dimensions.x,0,l.width),x=l.map(f.position.y,0,t.dimensions.y,l.height,0);if(f.geometry.type==="sphere"&&(l.strokeWeight(f.geometry.r*2),l.point(u,x)),f.geometry.type==="line"){const v=u+l.map(f.geometry.vector.x,0,t.dimensions.x,0,l.width),b=x+l.map(f.geometry.vector.y,0,t.dimensions.y,0,l.height);l.strokeWeight(2),l.line(u,x,v,b)}}}};return Te(()=>{m==null||m.remove()}),[a,n,r]}class bt extends ue{constructor(e){super(),de(this,e,gt,vt,ae,{})}}function wt(i){let e,o,a,s,t=i[0][i[0].length-1]+"",n,m,r,l="New ball",f,u,x;return o=new Ce({props:{sketch:i[2]}}),{c(){e=w("div"),ne(o.$$.fragment),a=E(),s=w("p"),n=X(t),m=E(),r=w("button"),r.textContent=l,this.h()},l(v){e=_(v,"DIV",{class:!0});var b=k(e);oe(o.$$.fragment,b),b.forEach(p),a=j(v),s=_(v,"P",{});var g=k(s);n=H(g,t),g.forEach(p),m=j(v),r=_(v,"BUTTON",{"data-svelte-h":!0}),G(r)!=="svelte-1jwbm46"&&(r.textContent=l),this.h()},h(){F(e,"class","d-flex justify-content-center")},m(v,b){T(v,e,b),se(o,e,null),T(v,a,b),T(v,s,b),y(s,n),T(v,m,b),T(v,r,b),f=!0,u||(x=q(r,"click",i[1]),u=!0)},p(v,[b]){(!f||b&1)&&t!==(t=v[0][v[0].length-1]+"")&&Q(n,t)},i(v){f||(re(o.$$.fragment,v),f=!0)},o(v){le(o.$$.fragment,v),f=!1},d(v){v&&(p(e),p(a),p(s),p(m),p(r)),ie(o),u=!1,x()}}}const Ae=6;function _t(i,e,o){console.clear();let a=[];const s=u=>{const x=u.objects[u.objects.length-1],v=x.position.clone().toFixed(2),b=x.velocity.clone().toFixed(2);a.push(`${u.t.toFixed(2)} - pos: ${v} - vel: ${b}`),a.length>50&&a.shift(),o(0,a)},t=new De({reporter:s,enableGravity:!0});let n,m;const r=()=>{for(;t.objects.length;)t.objects.pop();m=$({geometry:{type:"line",vector:new c(40,40)},position:new c(30,30),fixed:!0}),t.addObject(m),n=$({geometry:{type:"sphere",r:10},position:new c(20,50),velocity:new c(2.5,2.5),fixed:!0}),t.addObject(n)};let l;const f=u=>{const x=g=>typeof g=="number"?g*Ae:g.clone().multiplyScalar(Ae),v=g=>typeof g=="number"?g/Ae:g.clone().divideScalar(Ae);u.setup=()=>{l=u;const g=x(t.dimensions);u.createCanvas(g.x,g.y),u.background(0),u.fill(255),u.stroke(255),r()};let b;u.draw=()=>{if(u.background(0),t.step(),u.mouseIsPressed){const g=v(new c(u.mouseX,u.height-u.mouseY));if(b||(g.distance(n.position)<2?b="sphere":g.distance(m.position)<2?b="wallstart":g.distance(m.geometry.vector.clone().add(m.position))<2&&(b="wallend")),b==="sphere"&&n.position.copy(g),b==="wallstart"&&m.position.copy(g),b==="wallend"){const d=g.clone().subtract(m.position);m.geometry.vector.copy(d)}}else b=void 0;for(const g of t.objects.sort((d,h)=>d.geometry.type<h.geometry.type?1:-1)){u.stroke(n.data.isColliding?"red":"white");const d=u.map(g.position.x,0,t.dimensions.x,0,u.width),h=u.map(g.position.y,0,t.dimensions.y,u.height,0);if(g.geometry.type==="sphere"){const S=x(g.geometry.r*2);u.strokeWeight(S),u.point(d,h)}if(g.geometry.type==="line"){const S=d+u.map(g.geometry.vector.x,0,t.dimensions.x,0,u.width),P=h-u.map(g.geometry.vector.y,0,t.dimensions.y,0,u.height);u.stroke("blue"),u.strokeWeight(2),u.line(d,h,S,P)}}}};return Te(()=>{l==null||l.remove()}),[a,r,f]}class xt extends ue{constructor(e){super(),de(this,e,_t,wt,ae,{})}}function $t(i){let e,o,a;return o=new Ce({props:{sketch:i[0]}}),{c(){e=w("div"),ne(o.$$.fragment),this.h()},l(s){e=_(s,"DIV",{class:!0});var t=k(e);oe(o.$$.fragment,t),t.forEach(p),this.h()},h(){F(e,"class","d-flex justify-content-center")},m(s,t){T(s,e,t),se(o,e,null),a=!0},p:we,i(s){a||(re(o.$$.fragment,s),a=!0)},o(s){le(o.$$.fragment,s),a=!1},d(s){s&&p(e),ie(o)}}}const Ue=6;function kt(i){console.clear();const e=new De({reporter:()=>{},enableGravity:!0});let o;const a=()=>{for(;e.objects.length;)e.objects.pop();o=$({geometry:{type:"sphere",r:5},position:new c(20,50),velocity:new c(Math.random()*5-2.5,Math.random()*20)}),e.addObject(o);const r=$({geometry:{type:"line",vector:new c(100,0)},position:new c(0,2),fixed:!0});e.addObject(r);const l=$({geometry:{type:"line",vector:new c(100,0)},position:new c(0,98),fixed:!0});e.addObject(l);const f=$({geometry:{type:"line",vector:new c(0,100)},position:new c(2,0),fixed:!0});e.addObject(f);const u=$({geometry:{type:"line",vector:new c(0,100)},position:new c(98,0),fixed:!0});e.addObject(u);const x=$({geometry:{type:"line",vector:new c(50,50)},position:new c(20,10),fixed:!0});e.addObject(x)},s=r=>typeof r=="number"?r*Ue:r.clone().multiplyScalar(Ue),t=r=>typeof r=="number"?r/Ue:r.clone().divideScalar(Ue);let n;const m=r=>{r.setup=()=>{n=r;const f=s(e.dimensions);r.createCanvas(f.x,f.y),r.background(0),r.fill(255),r.stroke(255),a()},r.draw=()=>{if(r.background(0),r.mouseIsPressed){o.fixed=!0;const f=t(new c(r.mouseX,r.height-r.mouseY));o.position.copy(f)}else o.fixed=!1;e.step(),Ge(r,e)};let l;r.mousePressed=()=>{l=t(new c(r.mouseX,r.height-r.mouseY))},r.mouseReleased=()=>{const f=t(new c(r.mouseX,r.height-r.mouseY)),u=l.subtract(f);o.position.copy(f),o.velocity.copy(u)}};return Te(()=>{n==null||n.remove()}),[m]}class Tt extends ue{constructor(e){super(),de(this,e,kt,$t,ae,{})}}function Ct(i){let e,o,a,s,t,n,m,r="Gravity",l,f,u,x="Toggle",v,b,g;return o=new Ce({props:{sketch:i[1]}}),{c(){e=w("div"),ne(o.$$.fragment),a=E(),s=w("table"),t=w("tbody"),n=w("tr"),m=w("th"),m.textContent=r,l=E(),f=w("td"),u=w("button"),u.textContent=x,this.h()},l(d){e=_(d,"DIV",{class:!0});var h=k(e);oe(o.$$.fragment,h),h.forEach(p),a=j(d),s=_(d,"TABLE",{});var S=k(s);t=_(S,"TBODY",{});var P=k(t);n=_(P,"TR",{});var L=k(n);m=_(L,"TH",{"data-svelte-h":!0}),G(m)!=="svelte-vy75us"&&(m.textContent=r),l=j(L),f=_(L,"TD",{});var I=k(f);u=_(I,"BUTTON",{"data-svelte-h":!0}),G(u)!=="svelte-18lc94l"&&(u.textContent=x),I.forEach(p),L.forEach(p),P.forEach(p),S.forEach(p),this.h()},h(){F(e,"class","d-flex justify-content-center")},m(d,h){T(d,e,h),se(o,e,null),T(d,a,h),T(d,s,h),y(s,t),y(t,n),y(n,m),y(n,l),y(n,f),y(f,u),v=!0,b||(g=q(u,"click",i[2]),b=!0)},p:we,i(d){v||(re(o.$$.fragment,d),v=!0)},o(d){le(o.$$.fragment,d),v=!1},d(d){d&&(p(e),p(a),p(s)),ie(o),b=!1,g()}}}const Re=6;function St(i){console.clear();const e=new De({reporter:()=>{},enableGravity:!0});let o;const a=()=>{for(;e.objects.length;)e.objects.pop();const l=$({geometry:{type:"line",vector:new c(100,0)},position:new c(0,0),fixed:!0});e.addObject(l);const f=$({geometry:{type:"line",vector:new c(100,0)},position:new c(0,100),fixed:!0});e.addObject(f);const u=$({geometry:{type:"line",vector:new c(0,100)},position:new c(0,0),fixed:!0});e.addObject(u);const x=$({geometry:{type:"line",vector:new c(0,100)},position:new c(100,0),fixed:!0});e.addObject(x);const v=$({geometry:{type:"line",vector:new c(50,50)},position:new c(20,10),fixed:!0});e.addObject(v),o=$({geometry:{type:"sphere",r:2},position:new c(20,50),velocity:new c(Math.random()*5-2.5,Math.random()*20)}),e.addObject(o)},s=l=>typeof l=="number"?l*Re:l.clone().multiplyScalar(Re),t=l=>typeof l=="number"?l/Re:l.clone().divideScalar(Re);let n;const m=l=>{l.setup=()=>{n=l;const u=s(e.dimensions);l.createCanvas(u.x,u.y),l.background(0),l.fill(255),l.stroke(255),a()},l.draw=()=>{if(l.background(0),Ze(l)){o.fixed=!0;const u=t(new c(l.mouseX,l.height-l.mouseY));o.position.copy(u)}else o.fixed=!1;e.step(),Ge(l,e)};let f;l.mousePressed=()=>{Xe(l)&&(f=t(new c(l.mouseX,l.height-l.mouseY)))},l.mouseReleased=()=>{if(!Xe(l))return;const u=t(new c(l.mouseX,l.height-l.mouseY)),x=f.subtract(u);o.position.copy(u),o.velocity.copy(x)}};return Te(()=>{n==null||n.remove()}),[e,m,()=>e.toggleGravity()]}class Et extends ue{constructor(e){super(),de(this,e,St,Ct,ae,{})}}function dt(i){let e,o,a,s,t="dt",n,m,r,l,f,u,x="drag",v,b,g,d,h,S,P="gravity enabled",L,I,V,N,z;return{c(){e=w("table"),o=w("tbody"),a=w("tr"),s=w("th"),s.textContent=t,n=E(),m=w("td"),r=w("input"),l=E(),f=w("tr"),u=w("th"),u.textContent=x,v=E(),b=w("td"),g=w("input"),d=E(),h=w("tr"),S=w("th"),S.textContent=P,L=E(),I=w("td"),V=w("input"),this.h()},l(W){e=_(W,"TABLE",{});var U=k(e);o=_(U,"TBODY",{});var C=k(o);a=_(C,"TR",{});var B=k(a);s=_(B,"TH",{"data-svelte-h":!0}),G(s)!=="svelte-16dheti"&&(s.textContent=t),n=j(B),m=_(B,"TD",{});var R=k(m);r=_(R,"INPUT",{type:!0,min:!0,max:!0,step:!0}),R.forEach(p),B.forEach(p),l=j(C),f=_(C,"TR",{});var J=k(f);u=_(J,"TH",{"data-svelte-h":!0}),G(u)!=="svelte-2hq5g"&&(u.textContent=x),v=j(J),b=_(J,"TD",{});var K=k(b);g=_(K,"INPUT",{type:!0,min:!0,max:!0,step:!0}),K.forEach(p),J.forEach(p),d=j(C),h=_(C,"TR",{});var Y=k(h);S=_(Y,"TH",{"data-svelte-h":!0}),G(S)!=="svelte-ic0r87"&&(S.textContent=P),L=j(Y),I=_(Y,"TD",{});var te=k(I);V=_(te,"INPUT",{type:!0}),te.forEach(p),Y.forEach(p),C.forEach(p),U.forEach(p),this.h()},h(){F(r,"type","number"),F(r,"min","0"),F(r,"max","0.5"),F(r,"step","0.001"),F(g,"type","number"),F(g,"min","0"),F(g,"max","0.01"),F(g,"step","0.001"),F(V,"type","checkbox")},m(W,U){T(W,e,U),y(e,o),y(o,a),y(a,s),y(a,n),y(a,m),y(m,r),be(r,i[0].dt),y(o,l),y(o,f),y(f,u),y(f,v),y(f,b),y(b,g),be(g,i[0].drag),y(o,d),y(o,h),y(h,S),y(h,L),y(h,I),y(I,V),V.checked=i[0].gravityEnabled,N||(z=[q(r,"input",i[1]),q(g,"input",i[2]),q(V,"change",i[3])],N=!0)},p(W,U){U&1&&Oe(r.value)!==W[0].dt&&be(r,W[0].dt),U&1&&Oe(g.value)!==W[0].drag&&be(g,W[0].drag),U&1&&(V.checked=W[0].gravityEnabled)},d(W){W&&p(e),N=!1,He(z)}}}function jt(i){let e,o="Engine settings",a,s,t=i[0]&&dt(i);return{c(){e=w("p"),e.textContent=o,a=E(),t&&t.c(),s=ut(),this.h()},l(n){e=_(n,"P",{class:!0,"data-svelte-h":!0}),G(e)!=="svelte-gf3gek"&&(e.textContent=o),a=j(n),t&&t.l(n),s=ut(),this.h()},h(){F(e,"class","title svelte-g74uk9")},m(n,m){T(n,e,m),T(n,a,m),t&&t.m(n,m),T(n,s,m)},p(n,[m]){n[0]?t?t.p(n,m):(t=dt(n),t.c(),t.m(s.parentNode,s)):t&&(t.d(1),t=null)},i:we,o:we,d(n){n&&(p(e),p(a),p(s)),t&&t.d(n)}}}function Pt(i,e,o){let{world:a}=e;function s(){a.dt=Oe(this.value),o(0,a)}function t(){a.drag=Oe(this.value),o(0,a)}function n(){a.gravityEnabled=this.checked,o(0,a)}return i.$$set=m=>{"world"in m&&o(0,a=m.world)},[a,s,t,n]}class ht extends ue{constructor(e){super(),de(this,e,Pt,jt,ae,{world:0})}}function Ot(i){let e,o="Shooter",a,s,t,n="Angle",m,r,l,f,u,x,v,b,g="Magnitude",d,h,S,P,L,I,V,N,z="Shoot",W,U;return{c(){e=w("p"),e.textContent=o,a=E(),s=w("span"),t=w("label"),t.textContent=n,m=E(),r=w("input"),l=E(),f=X(i[0]),u=X(" deg"),x=E(),v=w("span"),b=w("label"),b.textContent=g,d=E(),h=w("input"),S=E(),P=X(i[1]),L=E(),I=w("br"),V=E(),N=w("button"),N.textContent=z,this.h()},l(C){e=_(C,"P",{class:!0,"data-svelte-h":!0}),G(e)!=="svelte-198ugk3"&&(e.textContent=o),a=j(C),s=_(C,"SPAN",{});var B=k(s);t=_(B,"LABEL",{for:!0,"data-svelte-h":!0}),G(t)!=="svelte-lab87n"&&(t.textContent=n),m=j(B),r=_(B,"INPUT",{id:!0,type:!0,min:!0,max:!0}),l=j(B),f=H(B,i[0]),u=H(B," deg"),B.forEach(p),x=j(C),v=_(C,"SPAN",{});var R=k(v);b=_(R,"LABEL",{for:!0,"data-svelte-h":!0}),G(b)!=="svelte-1vc5oxa"&&(b.textContent=g),d=j(R),h=_(R,"INPUT",{id:!0,type:!0,min:!0,max:!0,step:!0}),S=j(R),P=H(R,i[1]),R.forEach(p),L=j(C),I=_(C,"BR",{}),V=j(C),N=_(C,"BUTTON",{"data-svelte-h":!0}),G(N)!=="svelte-8jpwxr"&&(N.textContent=z),this.h()},h(){F(e,"class","title svelte-g74uk9"),F(t,"for","angleSlider"),F(r,"id","angleSlider"),F(r,"type","range"),F(r,"min","0"),F(r,"max","360"),F(b,"for","magSlider"),F(h,"id","magSlider"),F(h,"type","range"),F(h,"min","0"),F(h,"max","1"),F(h,"step","0.01")},m(C,B){T(C,e,B),T(C,a,B),T(C,s,B),y(s,t),y(s,m),y(s,r),be(r,i[0]),y(s,l),y(s,f),y(s,u),T(C,x,B),T(C,v,B),y(v,b),y(v,d),y(v,h),be(h,i[1]),y(v,S),y(v,P),T(C,L,B),T(C,I,B),T(C,V,B),T(C,N,B),W||(U=[q(r,"change",i[4]),q(r,"input",i[4]),q(h,"change",i[5]),q(h,"input",i[5]),q(N,"click",i[6])],W=!0)},p(C,[B]){B&1&&be(r,C[0]),B&1&&Q(f,C[0]),B&2&&be(h,C[1]),B&2&&Q(P,C[1])},i:we,o:we,d(C){C&&(p(e),p(a),p(s),p(x),p(v),p(L),p(I),p(V),p(N)),W=!1,He(U)}}}function Dt(i,e,o){let{onShoot:a}=e,s=0,t=.5;const n=()=>{const f=new c(1,0);f.rotateDeg(s),f.multiplyScalar(t),a(f)};function m(){s=Oe(this.value),o(0,s)}function r(){t=Oe(this.value),o(1,t)}const l=()=>n();return i.$$set=f=>{"onShoot"in f&&o(3,a=f.onShoot)},[s,t,n,a,m,r,l]}class Bt extends ue{constructor(e){super(),de(this,e,Dt,Ot,ae,{onShoot:3})}}const It=()=>{const i=[],e=$({geometry:{type:"line",vector:new c(15,0)},position:new c(0,0),fixed:!0});i.push(e);const o=$({geometry:{type:"line",vector:new c(0,100)},position:new c(0,0),fixed:!0});i.push(o);const a=$({geometry:{type:"line",vector:new c(0,100)},position:new c(15,0),fixed:!0});i.push(a);const s=$({geometry:{type:"line",vector:new c(3,-3)},position:new c(3.5,8),fixed:!0});i.push(s);const t=$({geometry:{type:"line",vector:new c(3,3)},position:new c(3.5,5),fixed:!0});i.push(t);const n=$({geometry:{type:"line",vector:new c(6,0)},position:new c(2,2),fixed:!0});i.push(n);const m=$({geometry:{type:"line",vector:new c(4,0)},position:new c(3,2.5),fixed:!0});i.push(m);const r=$({geometry:{type:"line",vector:new c(2,0)},position:new c(4,3),fixed:!0});i.push(r);const l=$({geometry:{type:"line",vector:new c(.6,0)},position:new c(4.7,3.5),fixed:!0});i.push(l);const f=$({geometry:{type:"line",vector:new c(1,0)},position:new c(10,10.1),fixed:!0});i.push(f);const u=$({geometry:{type:"line",vector:new c(0,-4)},position:new c(11,10),fixed:!0});i.push(u);const x=$({geometry:{type:"line",vector:new c(0,-4)},position:new c(11.5,10),fixed:!0});i.push(x);const v=$({geometry:{type:"line",vector:new c(0,-4)},position:new c(12,10),fixed:!0});i.push(v);const b=$({geometry:{type:"line",vector:new c(1,0)},position:new c(12,10.1),fixed:!0});i.push(b);for(let d=.2;d<.5;d+=.1)for(let h=0;h<10;h++){const S=$({geometry:{type:"line",vector:new c(0,3)},position:new c(9+h*d,1),fixed:!0});i.push(S)}const g=$({geometry:{type:"sphere",r:.1},position:new c(5,10),velocity:new c(0,0)});return i.push(g),{objects:i,sphere:g}};function Lt(i){let e,o,a,s,t,n=i[0]?"Disable":"Enable",m,r,l,f,u=i[1]?"Play":"Pause",x,v,b,g="Reset",d,h,S,P,L,I,V,N,z,W="Simulation time/Frame duration",U,C,B=i[2].t+"",R,J,K,Y=i[2].frameTime+"",te,Se,O,M,Z="Sphere position",_e,pe,ye=i[2].spherePos.x.toFixed(2)+"",xe,ce,ve,ge=i[2].spherePos.y.toFixed(2)+"",Ne,qe,fe,Ee,et="Sphere velocity",ze,Be,Ie=i[2].sphereVel.x.toFixed(2)+"",We,Qe,Le,Fe=i[2].sphereVel.y.toFixed(2)+"",Me,ee,Je,tt;return o=new Ce({props:{sketch:i[5]}}),h=new Bt({props:{onShoot:i[6]}}),P=new ht({props:{world:i[3]}}),{c(){e=w("div"),ne(o.$$.fragment),a=E(),s=w("div"),t=w("button"),m=X(n),r=X(" pause on collision"),l=E(),f=w("button"),x=X(u),v=E(),b=w("button"),b.textContent=g,d=E(),ne(h.$$.fragment),S=E(),ne(P.$$.fragment),L=E(),I=w("table"),V=w("tbody"),N=w("tr"),z=w("th"),z.textContent=W,U=E(),C=w("td"),R=X(B),J=E(),K=w("td"),te=X(Y),Se=E(),O=w("tr"),M=w("th"),M.textContent=Z,_e=E(),pe=w("td"),xe=X(ye),ce=E(),ve=w("td"),Ne=X(ge),qe=E(),fe=w("tr"),Ee=w("th"),Ee.textContent=et,ze=E(),Be=w("td"),We=X(Ie),Qe=E(),Le=w("td"),Me=X(Fe),this.h()},l(D){e=_(D,"DIV",{class:!0});var A=k(e);oe(o.$$.fragment,A),A.forEach(p),a=j(D),s=_(D,"DIV",{});var he=k(s);t=_(he,"BUTTON",{});var Ke=k(t);m=H(Ke,n),r=H(Ke," pause on collision"),Ke.forEach(p),l=j(he),f=_(he,"BUTTON",{});var nt=k(f);x=H(nt,u),nt.forEach(p),v=j(he),b=_(he,"BUTTON",{"data-svelte-h":!0}),G(b)!=="svelte-tlxueg"&&(b.textContent=g),he.forEach(p),d=j(D),oe(h.$$.fragment,D),S=j(D),oe(P.$$.fragment,D),L=j(D),I=_(D,"TABLE",{});var ot=k(I);V=_(ot,"TBODY",{});var Ve=k(V);N=_(Ve,"TR",{});var je=k(N);z=_(je,"TH",{"data-svelte-h":!0}),G(z)!=="svelte-rirgm4"&&(z.textContent=W),U=j(je),C=_(je,"TD",{});var st=k(C);R=H(st,B),st.forEach(p),J=j(je),K=_(je,"TD",{});var rt=k(K);te=H(rt,Y),rt.forEach(p),je.forEach(p),Se=j(Ve),O=_(Ve,"TR",{});var $e=k(O);M=_($e,"TH",{"data-svelte-h":!0}),G(M)!=="svelte-1y1nif6"&&(M.textContent=Z),_e=j($e),pe=_($e,"TD",{});var lt=k(pe);xe=H(lt,ye),lt.forEach(p),ce=j($e),ve=_($e,"TD",{});var it=k(ve);Ne=H(it,ge),it.forEach(p),qe=j($e),$e.forEach(p),fe=_(Ve,"TR",{});var Pe=k(fe);Ee=_(Pe,"TH",{"data-svelte-h":!0}),G(Ee)!=="svelte-1uw1fs2"&&(Ee.textContent=et),ze=j(Pe),Be=_(Pe,"TD",{});var ct=k(Be);We=H(ct,Ie),ct.forEach(p),Qe=j(Pe),Le=_(Pe,"TD",{});var at=k(Le);Me=H(at,Fe),at.forEach(p),Pe.forEach(p),Ve.forEach(p),ot.forEach(p),this.h()},h(){F(e,"class","d-flex justify-content-center")},m(D,A){T(D,e,A),se(o,e,null),T(D,a,A),T(D,s,A),y(s,t),y(t,m),y(t,r),y(s,l),y(s,f),y(f,x),y(s,v),y(s,b),T(D,d,A),se(h,D,A),T(D,S,A),se(P,D,A),T(D,L,A),T(D,I,A),y(I,V),y(V,N),y(N,z),y(N,U),y(N,C),y(C,R),y(N,J),y(N,K),y(K,te),y(V,Se),y(V,O),y(O,M),y(O,_e),y(O,pe),y(pe,xe),y(O,ce),y(O,ve),y(ve,Ne),y(O,qe),y(V,fe),y(fe,Ee),y(fe,ze),y(fe,Be),y(Be,We),y(fe,Qe),y(fe,Le),y(Le,Me),ee=!0,Je||(tt=[q(t,"click",i[7]),q(f,"click",i[8]),q(b,"click",i[4])],Je=!0)},p(D,[A]){(!ee||A&1)&&n!==(n=D[0]?"Disable":"Enable")&&Q(m,n),(!ee||A&2)&&u!==(u=D[1]?"Play":"Pause")&&Q(x,u);const he={};A&8&&(he.world=D[3]),P.$set(he),(!ee||A&4)&&B!==(B=D[2].t+"")&&Q(R,B),(!ee||A&4)&&Y!==(Y=D[2].frameTime+"")&&Q(te,Y),(!ee||A&4)&&ye!==(ye=D[2].spherePos.x.toFixed(2)+"")&&Q(xe,ye),(!ee||A&4)&&ge!==(ge=D[2].spherePos.y.toFixed(2)+"")&&Q(Ne,ge),(!ee||A&4)&&Ie!==(Ie=D[2].sphereVel.x.toFixed(2)+"")&&Q(We,Ie),(!ee||A&4)&&Fe!==(Fe=D[2].sphereVel.y.toFixed(2)+"")&&Q(Me,Fe)},i(D){ee||(re(o.$$.fragment,D),re(h.$$.fragment,D),re(P.$$.fragment,D),ee=!0)},o(D){le(o.$$.fragment,D),le(h.$$.fragment,D),le(P.$$.fragment,D),ee=!1},d(D){D&&(p(e),p(a),p(s),p(d),p(S),p(L),p(I)),ie(o),ie(h,D),ie(P,D),Je=!1,He(tt)}}}const Ye=60;function Ft(i,e,o){console.clear();let a=!1,s=!1,t={t:"0",frameTime:"0",spherePos:new c(0,0),sphereVel:new c(0,0),ballIsColliding:!1},n,m;const r=()=>{o(3,n=new De({dimensions:new c(15,15),reporter:h=>{var S;o(2,t.t=(S=h==null?void 0:h.t)==null?void 0:S.toFixed(1),t),t.spherePos.copy(m.position).unfloat(),t.sphereVel.copy(m.velocity).unfloat(),o(2,t.frameTime=h.frameTime.toFixed(2),t),o(2,t),o(2,t.ballIsColliding=m.data.isColliding,t),a&&m.data.isColliding&&!s&&o(1,s=!0)},enableGravity:!0}));const d=It();m=d.sphere;for(const h of d.objects)n.addObject(h)},l=d=>typeof d=="number"?d*Ye:d.clone().multiplyScalar(Ye),f=d=>typeof d=="number"?d/Ye:d.clone().divideScalar(Ye);let u;const x=d=>{d.setup=()=>{u=d,r();const P=l(n.dimensions);d.createCanvas(P.x,P.y),d.background(0),d.fill(255),d.stroke(255),r()},d.draw=()=>{d.background(0),Ze(d)?m.fixed=!0:m.fixed=!1,s||n.step(),Ge(d,n),S(d)};let h;d.mousePressed=()=>{Xe(d)&&(h=f(new c(d.mouseX,d.height-d.mouseY)),m.position.copy(h))},d.mouseReleased=()=>{if(!Xe(d)||!h)return;const P=f(new c(d.mouseX,d.height-d.mouseY)),L=h.subtract(P).multiplyScalar(3);h=void 0,m.velocity.copy(L)};const S=P=>{if(!h)return;P.stroke("blue"),P.strokeWeight(2);const L=l(h);P.line(L.x,P.height-L.y,P.mouseX,P.mouseY)}},v=d=>{d.multiplyScalar(1e4),n.applyForce(m,d)};return Te(()=>{u==null||u.remove()}),[a,s,t,n,r,x,v,()=>o(0,a=!a),()=>o(1,s=!s)]}let Vt=class extends ue{constructor(e){super(),de(this,e,Ft,Lt,ae,{})}};const Nt=()=>{const i=[],e=$({geometry:{type:"line",vector:new c(15,0)},position:new c(0,0),fixed:!0});i.push(e);const o=$({geometry:{type:"line",vector:new c(0,100)},position:new c(0,0),fixed:!0});i.push(o);const a=$({geometry:{type:"line",vector:new c(0,100)},position:new c(15,0),fixed:!0});i.push(a);const s=$({geometry:{type:"line",vector:new c(3,-3)},position:new c(3.5,8),fixed:!0});i.push(s);const t=$({geometry:{type:"line",vector:new c(3,3)},position:new c(3.5,5),fixed:!0});i.push(t);const n=$({geometry:{type:"line",vector:new c(6,0)},position:new c(2,2),fixed:!0});i.push(n);const m=$({geometry:{type:"line",vector:new c(4,0)},position:new c(3,2.5),fixed:!0});i.push(m);const r=$({geometry:{type:"line",vector:new c(2,0)},position:new c(4,3),fixed:!0});i.push(r);const l=$({geometry:{type:"line",vector:new c(.6,0)},position:new c(4.7,3.5),fixed:!0});i.push(l);const f=$({geometry:{type:"line",vector:new c(1,0)},position:new c(10,10.1),fixed:!0});i.push(f);const u=$({geometry:{type:"line",vector:new c(0,-4)},position:new c(11,10),fixed:!0});i.push(u);const x=$({geometry:{type:"line",vector:new c(0,-4)},position:new c(11.5,10),fixed:!0});i.push(x);const v=$({geometry:{type:"line",vector:new c(0,-4)},position:new c(12,10),fixed:!0});i.push(v);const b=$({geometry:{type:"line",vector:new c(1,0)},position:new c(12,10.1),fixed:!0});i.push(b);for(let g=.2;g<.5;g+=.1)for(let d=0;d<10;d++){const h=$({geometry:{type:"line",vector:new c(0,3)},position:new c(9+d*g,1),fixed:!0});i.push(h)}return{objects:i}};function Wt(i){let e,o,a,s,t,n=i[0]?"Disable":"Enable",m,r,l,f,u=i[1]?"Play":"Pause",x,v,b,g="Reset",d,h,S,P,L,I,V,N="Simulation time/Frame duration",z,W,U=i[2].t+"",C,B,R,J=i[2].frameTime+"",K,Y,te,Se;return o=new Ce({props:{sketch:i[5]}}),h=new ht({props:{world:i[3]}}),{c(){e=w("div"),ne(o.$$.fragment),a=E(),s=w("div"),t=w("button"),m=X(n),r=X(" pause on collision"),l=E(),f=w("button"),x=X(u),v=E(),b=w("button"),b.textContent=g,d=E(),ne(h.$$.fragment),S=E(),P=w("table"),L=w("tbody"),I=w("tr"),V=w("th"),V.textContent=N,z=E(),W=w("td"),C=X(U),B=E(),R=w("td"),K=X(J),this.h()},l(O){e=_(O,"DIV",{class:!0});var M=k(e);oe(o.$$.fragment,M),M.forEach(p),a=j(O),s=_(O,"DIV",{});var Z=k(s);t=_(Z,"BUTTON",{});var _e=k(t);m=H(_e,n),r=H(_e," pause on collision"),_e.forEach(p),l=j(Z),f=_(Z,"BUTTON",{});var pe=k(f);x=H(pe,u),pe.forEach(p),v=j(Z),b=_(Z,"BUTTON",{"data-svelte-h":!0}),G(b)!=="svelte-tlxueg"&&(b.textContent=g),Z.forEach(p),d=j(O),oe(h.$$.fragment,O),S=j(O),P=_(O,"TABLE",{});var ye=k(P);L=_(ye,"TBODY",{});var xe=k(L);I=_(xe,"TR",{});var ce=k(I);V=_(ce,"TH",{"data-svelte-h":!0}),G(V)!=="svelte-rirgm4"&&(V.textContent=N),z=j(ce),W=_(ce,"TD",{});var ve=k(W);C=H(ve,U),ve.forEach(p),B=j(ce),R=_(ce,"TD",{});var ge=k(R);K=H(ge,J),ge.forEach(p),ce.forEach(p),xe.forEach(p),ye.forEach(p),this.h()},h(){F(e,"class","d-flex justify-content-center")},m(O,M){T(O,e,M),se(o,e,null),T(O,a,M),T(O,s,M),y(s,t),y(t,m),y(t,r),y(s,l),y(s,f),y(f,x),y(s,v),y(s,b),T(O,d,M),se(h,O,M),T(O,S,M),T(O,P,M),y(P,L),y(L,I),y(I,V),y(I,z),y(I,W),y(W,C),y(I,B),y(I,R),y(R,K),Y=!0,te||(Se=[q(t,"click",i[6]),q(f,"click",i[7]),q(b,"click",i[4])],te=!0)},p(O,[M]){(!Y||M&1)&&n!==(n=O[0]?"Disable":"Enable")&&Q(m,n),(!Y||M&2)&&u!==(u=O[1]?"Play":"Pause")&&Q(x,u);const Z={};M&8&&(Z.world=O[3]),h.$set(Z),(!Y||M&4)&&U!==(U=O[2].t+"")&&Q(C,U),(!Y||M&4)&&J!==(J=O[2].frameTime+"")&&Q(K,J)},i(O){Y||(re(o.$$.fragment,O),re(h.$$.fragment,O),Y=!0)},o(O){le(o.$$.fragment,O),le(h.$$.fragment,O),Y=!1},d(O){O&&(p(e),p(a),p(s),p(d),p(S),p(P)),ie(o),ie(h,O),te=!1,He(Se)}}}const ft=60;function Mt(i,e,o){console.clear();let a=!1,s=!1,t={t:"0",frameTime:"0"},n;const m=()=>{clearInterval(u),u=setInterval(r,100),o(3,n=new De({dimensions:new c(15,15),reporter:d=>{var h;o(2,t.t=(h=d==null?void 0:d.t)==null?void 0:h.toFixed(1),t),o(2,t.frameTime=d.frameTime.toFixed(2),t),o(2,t)},enableGravity:!0}));const g=Nt();for(const d of g.objects)n.addObject(d)},r=()=>{console.log("add ball");const g=Math.random()*n.dimensions.x,d=Math.random()*n.dimensions.y,h=-5+Math.random()*10,S=-5+Math.random()*10,P=$({geometry:{type:"sphere",r:.1},position:new c(g,d),velocity:new c(h,S)});n.addObject(P)},l=g=>typeof g=="number"?g*ft:g.clone().multiplyScalar(ft);let f,u;const x=g=>{g.setup=()=>{f=g,m();const d=l(n.dimensions);g.createCanvas(d.x,d.y),g.background(0),g.fill(255),g.stroke(255),m()},g.draw=()=>{g.background(0),s||n.step(),Ge(g,n)}};return Te(()=>{f==null||f.remove(),clearInterval(u)}),[a,s,t,n,m,x,()=>o(0,a=!a),()=>o(1,s=!s)]}class At extends ue{constructor(e){super(),de(this,e,Mt,Wt,ae,{})}}function Ut(i){let e,o,a;return o=new Ce({props:{sketch:i[0]}}),{c(){e=w("div"),ne(o.$$.fragment),this.h()},l(s){e=_(s,"DIV",{class:!0});var t=k(e);oe(o.$$.fragment,t),t.forEach(p),this.h()},h(){F(e,"class","d-flex justify-content-center")},m(s,t){T(s,e,t),se(o,e,null),a=!0},p:we,i(s){a||(re(o.$$.fragment,s),a=!0)},o(s){le(o.$$.fragment,s),a=!1},d(s){s&&p(e),ie(o)}}}const me=6;function Rt(i){console.clear();let e;const o=$({geometry:{type:"sphere",r:10},position:new c(30,50),velocity:new c(15,15)}),a=$({geometry:{type:"line",vector:new c(80,0)},position:new c(10,70)}),s=new yt,t=n=>{const m=new c(100,100),r=ke(m,me);n.setup=()=>{e=n,n.createCanvas(r.x,r.y),n.noFill()};let l;n.draw=()=>{if(n.background(0),!Ze(n))l=void 0;else{const h=mt(new c(n.mouseX,n.height-n.mouseY),me);if(l||(h.distance(o.position)<=o.geometry.r?l="sphere":h.distance(o.position.clone().add(o.velocity))<=6?l="spherevelocity":h.distance(a.position)<=6?l="linestart":h.distance(a.geometry.vector.clone().add(a.position))<=6&&(l="lineend")),l==="sphere")o.position.copy(h);else if(l==="spherevelocity"){const S=h.clone().subtract(o.position);o.velocity.copy(S)}else if(l==="linestart")a.position.copy(h);else if(l==="lineend"){const S=h.clone().subtract(a.position);a.geometry.vector.copy(S)}}const{intersection:f,bouncedVelocity:u}=s.apply(a,o);for(let h=0;h<10;h++){const{positionCorrection:S}=s.apply(a,o);S&&o.position.add(S)}n.stroke(255),n.noFill();const x=ke(o.position,me);n.circle(x.x,n.height-x.y,2*o.geometry.r*me),n.stroke(255);const v=ke(o.velocity,me);n.line(x.x,n.height-x.y,x.x+v.x,n.height-(x.y+v.y)),n.stroke(255);const{x:b,y:g}=ke(a.position,me),d=ke(a.geometry.vector,me);if(n.line(b,n.height-g,b+d.x,n.height-(g+d.y)),f){n.stroke("blue"),n.fill("blue");const h=ke(f,me);n.circle(h.x,n.height-h.y,5)}if(u){n.stroke("green"),n.fill("green");const h=ke(u,me);n.line(x.x,n.height-x.y,x.x+h.x,n.height-(x.y+h.y))}}};return Te(()=>{e==null||e.remove()}),[t]}class Yt extends ue{constructor(e){super(),de(this,e,Rt,Ut,ae,{})}}function Xt(i){let e,o="<span>This page is a list of engine tests. They use the actual engine and allow me to setup different situations and check manually for regressions and bugs.</span> <br/> <span>Use the selection menu to see the different pages</span>",a,s,t,n,m;return n=new pt({props:{tabs:i[0]}}),{c(){e=w("div"),e.innerHTML=o,a=E(),s=w("br"),t=E(),ne(n.$$.fragment)},l(r){e=_(r,"DIV",{"data-svelte-h":!0}),G(e)!=="svelte-11mzr87"&&(e.innerHTML=o),a=j(r),s=_(r,"BR",{}),t=j(r),oe(n.$$.fragment,r)},m(r,l){T(r,e,l),T(r,a,l),T(r,s,l),T(r,t,l),se(n,r,l),m=!0},p:we,i(r){m||(re(n.$$.fragment,r),m=!0)},o(r){le(n.$$.fragment,r),m=!1},d(r){r&&(p(e),p(a),p(s),p(t)),ie(n,r)}}}function Ht(i){return[[{label:"Line Sphere Collider",value:Yt},{label:"Perfs - Multiple balls",value:At},{label:"Playground - Engine settings",value:Vt},{label:"Dynamics + collisions - 1",value:Et},{label:"Dynamics + collisions - 2",value:Tt},{label:"Sphere Line - pull apart",value:xt},{label:"One ball bounce",value:bt}]]}class Kt extends ue{constructor(e){super(),de(this,e,Ht,Xt,ae,{})}}export{Kt as component};
