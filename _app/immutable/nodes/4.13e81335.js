var _t=Object.defineProperty;var wt=(f,e,t)=>e in f?_t(f,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):f[e]=t;var te=(f,e,t)=>(wt(f,typeof e!="symbol"?e+"":e,t),t);import{s as ue,f as _,a as S,l as X,g as w,h as k,d as g,c as O,m as A,u as H,j as G,i as j,y as v,L as ie,n as Z,M as Pe,z as Oe,e as be,P as Be,Q as Xe,O as gt,E as vt,q as ft}from"../chunks/scheduler.e421d989.js";import{S as me,i as he,b as q,d as ee,m as z,a as V,t as Y,e as J,g as Ze,c as et}from"../chunks/index.52486247.js";import{e as Ae}from"../chunks/each.e59479a4.js";import{V as h,P as De,m as bt,a as Me,T as $t,b as xt,c as Tt,d as Ct}from"../chunks/p5utils.fe4d08ff.js";const kt=(f,e)=>{if(e.geometry.type!=="sphere"||f.geometry.type!=="line")throw new Error("invalid geometry");const t=jt(f,e);if(!t)return;const n=.8,s=.2,r=f.position.x,o=f.position.y,d=f.position.x+f.geometry.vector.x,a=f.position.y+f.geometry.vector.y,i=d-r,l=a-o,c=new h(-l,i),y=new h(l,-i),u=t.clone().add(c),p=t.clone().add(y);let b;e.position.distanceSq(u)<e.position.distanceSq(p)?b=c:b=y;const m=b.clone().normalize(),$=e.velocity.clone(),T=m.multiplyScalar($.dot(m)),x=$.subtract(T),E=n,P=s;return x.multiplyScalar(1-P).subtract(T.multiplyScalar(E))},jt=(f,e)=>{if(e.geometry.type!=="sphere"||f.geometry.type!=="line")throw new Error("invalid geometry");const t=f.position.clone(),n=f.position.clone().add(f.geometry.vector),s=e.position.clone(),r=e.geometry.r,o=n.clone().subtract(t),d=t.clone().subtract(s),a=o.dot(o),i=d.dot(o)*2,l=d.dot(d)-r*r;let c=i*i-4*a*l;if(c<0)return;c=Math.sqrt(c);const y=(-i-c)/(2*a),u=(-i+c)/(2*a);if(y>=0&&y<=1)return t.add(o.multiplyScalar(y));if(u>=0&&u<=1)return t.add(o.multiplyScalar(u))};class We{constructor(e){te(this,"gravityEnabled");te(this,"dimensions");te(this,"t");te(this,"objects");te(this,"gravity",new h(0,-9.8));te(this,"antiGravity",new h(0,9.8));te(this,"drag",.001);te(this,"dt",.005);te(this,"reporter");this.gravityEnabled=e.enableGravity??!0,this.dimensions=e.dimensions||new h(100,100),this.objects=[],this.t=0,this.reporter=e.reporter||console.log}toggleGravity(){this.gravityEnabled=!this.gravityEnabled}addObject(e){this.objects.push(e)}applyGravity(e){e.acceleration.push(this.gravity)}applyDynamics(e,t){this.gravityEnabled&&this.applyGravity(t);const n=new h(0,0);for(;t.acceleration.length;){const r=t.acceleration.pop();r&&n.add(r)}n.divideScalar(t.m);const s=1-this.drag;t.velocity.add(n.multiplyScalar(e)).multiplyScalar(s),t.position.add(t.velocity.clone().multiplyScalar(e))}applyCollisions(e){const t=this.objects.find(o=>o.geometry.type==="sphere"),n=this.objects.filter(o=>o.geometry.type==="line");if(!t)throw new Error("No sphere in world");t.data.isColliding=!1;const s=new h(0,0);let r=0;for(const o of n){o.data.isColliding=!1;const d=kt(o,t);d&&(r++,s.add(d),o.data.isColliding=!0)}r>0&&(s.divideScalar(r),t.velocity.copy(s),t.position.add(t.velocity.clone().multiplyScalar(e)),t.data.isColliding=!0,t.acceleration.push(this.gravity.clone().multiplyScalar(-1)))}_step(e){this.applyCollisions(e);for(const t of this.objects)t.fixed||this.applyDynamics(e,t)}stepFixedDt(){const t=Date.now()/1e3;Se=t-Ee,Ee=t,this._step(.01),this.t+=.01,this.reporter&&this.reporter({...this,frameTime:Se})}stepAccumulator(){const e=this.dt,t=Date.now()/1e3;Ee===0&&(Ee=t),Se=t-Ee,Ke+=Se;let n=0;for(;Ke>=e&&n<5;)n++,this._step(e),Ke-=e,this.t+=e,this.reporter&&this.reporter({...this,frameTime:Se})}step(){this.stepAccumulator()}}let Ee=0,Se=0,Ke=0;const D=f=>{var e,t;return{geometry:f.geometry,m:f.mass??1,position:((e=f.position)==null?void 0:e.clone())??new h(0,0),velocity:((t=f.velocity)==null?void 0:t.clone())??new h(0,0),acceleration:[],fixed:f.fixed??!1,data:{isColliding:!1}}};function Et(f){let e,t,n,s,r=f[0][f[0].length-1]+"",o,d,a,i="New ball",l,c,y;return t=new De({props:{sketch:f[2]}}),{c(){e=_("div"),q(t.$$.fragment),n=S(),s=_("p"),o=X(r),d=S(),a=_("button"),a.textContent=i,this.h()},l(u){e=w(u,"DIV",{class:!0});var p=k(e);ee(t.$$.fragment,p),p.forEach(g),n=O(u),s=w(u,"P",{});var b=k(s);o=A(b,r),b.forEach(g),d=O(u),a=w(u,"BUTTON",{"data-svelte-h":!0}),H(a)!=="svelte-1jwbm46"&&(a.textContent=i),this.h()},h(){G(e,"class","d-flex justify-content-center")},m(u,p){j(u,e,p),z(t,e,null),j(u,n,p),j(u,s,p),v(s,o),j(u,d,p),j(u,a,p),l=!0,c||(y=ie(a,"click",f[1]),c=!0)},p(u,[p]){(!l||p&1)&&r!==(r=u[0][u[0].length-1]+"")&&Z(o,r)},i(u){l||(V(t.$$.fragment,u),l=!0)},o(u){Y(t.$$.fragment,u),l=!1},d(u){u&&(g(e),g(n),g(s),g(d),g(a)),J(t),c=!1,y()}}}function St(f,e,t){console.clear();let n=[];const s=i=>{const l=i.objects[i.objects.length-1],c=l.position.clone().toFixed(2),y=l.velocity.clone().toFixed(2);n.push(`${i.t.toFixed(2)} - pos: ${c} - vel: ${y}`),n.length>50&&n.shift(),t(0,n)},r=new We({reporter:s,enableGravity:!0}),o=()=>{for(;r.objects.length;)r.objects.pop();const i=D({geometry:{type:"line",vector:new h(100,0)},position:new h(0,0),fixed:!0});r.addObject(i);for(let l=0;l<1;l++){const c=D({geometry:{type:"sphere",r:5},position:new h(20,50),velocity:new h(Math.random()*5-2.5,Math.random()*20)});r.addObject(c)}};let d;const a=i=>{i.setup=()=>{d=i,i.createCanvas(900,600),i.background(0),i.fill(255),i.stroke(255),o()},i.draw=()=>{i.background(0),r.step();for(const l of r.objects){const c=i.map(l.position.x,0,r.dimensions.x,0,i.width),y=i.map(l.position.y,0,r.dimensions.y,i.height,0);if(l.geometry.type==="sphere"&&(i.strokeWeight(l.geometry.r*2),i.point(c,y)),l.geometry.type==="line"){const u=c+i.map(l.geometry.vector.x,0,r.dimensions.x,0,i.width),p=y+i.map(l.geometry.vector.y,0,r.dimensions.y,0,i.height);i.strokeWeight(2),i.line(c,y,u,p)}}}};return Pe(()=>{d==null||d.remove()}),[n,o,a]}class Ot extends me{constructor(e){super(),he(this,e,St,Et,ue,{})}}function Pt(f){let e,t,n,s,r=f[0][f[0].length-1]+"",o,d,a,i="New ball",l,c,y;return t=new De({props:{sketch:f[2]}}),{c(){e=_("div"),q(t.$$.fragment),n=S(),s=_("p"),o=X(r),d=S(),a=_("button"),a.textContent=i,this.h()},l(u){e=w(u,"DIV",{class:!0});var p=k(e);ee(t.$$.fragment,p),p.forEach(g),n=O(u),s=w(u,"P",{});var b=k(s);o=A(b,r),b.forEach(g),d=O(u),a=w(u,"BUTTON",{"data-svelte-h":!0}),H(a)!=="svelte-1jwbm46"&&(a.textContent=i),this.h()},h(){G(e,"class","d-flex justify-content-center")},m(u,p){j(u,e,p),z(t,e,null),j(u,n,p),j(u,s,p),v(s,o),j(u,d,p),j(u,a,p),l=!0,c||(y=ie(a,"click",f[1]),c=!0)},p(u,[p]){(!l||p&1)&&r!==(r=u[0][u[0].length-1]+"")&&Z(o,r)},i(u){l||(V(t.$$.fragment,u),l=!0)},o(u){Y(t.$$.fragment,u),l=!1},d(u){u&&(g(e),g(n),g(s),g(d),g(a)),J(t),c=!1,y()}}}const Ye=6;function Dt(f,e,t){console.clear();let n=[];const s=c=>{const y=c.objects[c.objects.length-1],u=y.position.clone().toFixed(2),p=y.velocity.clone().toFixed(2);n.push(`${c.t.toFixed(2)} - pos: ${u} - vel: ${p}`),n.length>50&&n.shift(),t(0,n)},r=new We({reporter:s,enableGravity:!0});let o,d;const a=()=>{for(;r.objects.length;)r.objects.pop();d=D({geometry:{type:"line",vector:new h(80,20)},position:new h(10,20),fixed:!0}),r.addObject(d),o=D({geometry:{type:"sphere",r:10},position:new h(20,50),velocity:new h(2.5,2.5),fixed:!0}),r.addObject(o)};let i;const l=c=>{const y=b=>typeof b=="number"?b*Ye:b.clone().multiplyScalar(Ye),u=b=>typeof b=="number"?b/Ye:b.clone().divideScalar(Ye);c.setup=()=>{i=c;const b=y(r.dimensions);c.createCanvas(b.x,b.y),c.background(0),c.fill(255),c.stroke(255),a()};let p;c.draw=()=>{if(c.background(0),r.step(),c.mouseIsPressed){const b=u(new h(c.mouseX,c.height-c.mouseY));if(p||(b.distance(o.position)<2?p="sphere":b.distance(d.position)<2?p="wallstart":b.distance(d.geometry.vector.clone().add(d.position))<2&&(p="wallend")),p==="sphere"&&o.position.copy(b),p==="wallstart"&&d.position.copy(b),p==="wallend"){const m=b.clone().subtract(d.position);d.geometry.vector.copy(m)}}else p=void 0;for(const b of r.objects){c.stroke(o.data.isColliding?"red":"white");const m=c.map(b.position.x,0,r.dimensions.x,0,c.width),$=c.map(b.position.y,0,r.dimensions.y,c.height,0);if(b.geometry.type==="sphere"){const T=y(b.geometry.r*2);c.strokeWeight(T),c.point(m,$)}if(b.geometry.type==="line"){const T=m+c.map(b.geometry.vector.x,0,r.dimensions.x,0,c.width),x=$-c.map(b.geometry.vector.y,0,r.dimensions.y,0,c.height);c.strokeWeight(2),c.line(m,$,T,x)}}}};return Pe(()=>{i==null||i.remove()}),[n,a,l]}class Wt extends me{constructor(e){super(),he(this,e,Dt,Pt,ue,{})}}function Nt(f){let e,t,n;return t=new De({props:{sketch:f[0]}}),{c(){e=_("div"),q(t.$$.fragment),this.h()},l(s){e=w(s,"DIV",{class:!0});var r=k(e);ee(t.$$.fragment,r),r.forEach(g),this.h()},h(){G(e,"class","d-flex justify-content-center")},m(s,r){j(s,e,r),z(t,e,null),n=!0},p:Oe,i(s){n||(V(t.$$.fragment,s),n=!0)},o(s){Y(t.$$.fragment,s),n=!1},d(s){s&&g(e),J(t)}}}const Ge=6;function Ft(f){console.clear();const e=new We({reporter:()=>{},enableGravity:!0});let t;const n=()=>{for(;e.objects.length;)e.objects.pop();const i=D({geometry:{type:"line",vector:new h(100,0)},position:new h(0,2),fixed:!0});e.addObject(i);const l=D({geometry:{type:"line",vector:new h(100,0)},position:new h(0,98),fixed:!0});e.addObject(l);const c=D({geometry:{type:"line",vector:new h(0,100)},position:new h(2,0),fixed:!0});e.addObject(c);const y=D({geometry:{type:"line",vector:new h(0,100)},position:new h(98,0),fixed:!0});e.addObject(y);const u=D({geometry:{type:"line",vector:new h(50,50)},position:new h(20,10),fixed:!0});e.addObject(u),t=D({geometry:{type:"sphere",r:5},position:new h(20,50),velocity:new h(Math.random()*5-2.5,Math.random()*20)}),e.addObject(t)},s=i=>typeof i=="number"?i*Ge:i.clone().multiplyScalar(Ge),r=i=>typeof i=="number"?i/Ge:i.clone().divideScalar(Ge),o=(i,l)=>{for(const c of l.objects){i.stroke(c.data.isColliding?"red":"white");const y=i.map(c.position.x,0,l.dimensions.x,0,i.width),u=i.map(c.position.y,0,l.dimensions.y,i.height,0);if(c.geometry.type==="sphere"){const p=s(c.geometry.r*2);i.strokeWeight(p),i.point(y,u)}if(c.geometry.type==="line"){const p=y+i.map(c.geometry.vector.x,0,l.dimensions.x,0,i.width),b=u-i.map(c.geometry.vector.y,0,l.dimensions.y,0,i.height);i.strokeWeight(2),i.line(y,u,p,b)}}};let d;const a=i=>{i.setup=()=>{d=i;const c=s(e.dimensions);i.createCanvas(c.x,c.y),i.background(0),i.fill(255),i.stroke(255),n()},i.draw=()=>{if(i.background(0),i.mouseIsPressed){t.fixed=!0;const c=r(new h(i.mouseX,i.height-i.mouseY));t.position.copy(c)}else t.fixed=!1;e.step(),o(i,e)};let l;i.mousePressed=()=>{l=r(new h(i.mouseX,i.height-i.mouseY))},i.mouseReleased=()=>{const c=r(new h(i.mouseX,i.height-i.mouseY)),y=l.subtract(c);t.position.copy(c),t.velocity.copy(y)}};return Pe(()=>{d==null||d.remove()}),[a]}class Vt extends me{constructor(e){super(),he(this,e,Ft,Nt,ue,{})}}function It(f){let e,t,n,s,r,o,d,a="Gravity",i,l,c,y="Toggle",u,p,b;return t=new De({props:{sketch:f[1]}}),{c(){e=_("div"),q(t.$$.fragment),n=S(),s=_("table"),r=_("tbody"),o=_("tr"),d=_("th"),d.textContent=a,i=S(),l=_("td"),c=_("button"),c.textContent=y,this.h()},l(m){e=w(m,"DIV",{class:!0});var $=k(e);ee(t.$$.fragment,$),$.forEach(g),n=O(m),s=w(m,"TABLE",{});var T=k(s);r=w(T,"TBODY",{});var x=k(r);o=w(x,"TR",{});var E=k(o);d=w(E,"TH",{"data-svelte-h":!0}),H(d)!=="svelte-vy75us"&&(d.textContent=a),i=O(E),l=w(E,"TD",{});var P=k(l);c=w(P,"BUTTON",{"data-svelte-h":!0}),H(c)!=="svelte-18lc94l"&&(c.textContent=y),P.forEach(g),E.forEach(g),x.forEach(g),T.forEach(g),this.h()},h(){G(e,"class","d-flex justify-content-center")},m(m,$){j(m,e,$),z(t,e,null),j(m,n,$),j(m,s,$),v(s,r),v(r,o),v(o,d),v(o,i),v(o,l),v(l,c),u=!0,p||(b=ie(c,"click",f[2]),p=!0)},p:Oe,i(m){u||(V(t.$$.fragment,m),u=!0)},o(m){Y(t.$$.fragment,m),u=!1},d(m){m&&(g(e),g(n),g(s)),J(t),p=!1,b()}}}const Le=6;function Bt(f){console.clear();const e=new We({reporter:()=>{},enableGravity:!0});let t;const n=()=>{for(;e.objects.length;)e.objects.pop();const l=D({geometry:{type:"line",vector:new h(100,0)},position:new h(0,0),fixed:!0});e.addObject(l);const c=D({geometry:{type:"line",vector:new h(100,0)},position:new h(0,100),fixed:!0});e.addObject(c);const y=D({geometry:{type:"line",vector:new h(0,100)},position:new h(0,0),fixed:!0});e.addObject(y);const u=D({geometry:{type:"line",vector:new h(0,100)},position:new h(100,0),fixed:!0});e.addObject(u);const p=D({geometry:{type:"line",vector:new h(50,50)},position:new h(20,10),fixed:!0});e.addObject(p),t=D({geometry:{type:"sphere",r:2},position:new h(20,50),velocity:new h(Math.random()*5-2.5,Math.random()*20)}),e.addObject(t)},s=l=>typeof l=="number"?l*Le:l.clone().multiplyScalar(Le),r=l=>typeof l=="number"?l/Le:l.clone().divideScalar(Le),o=(l,c)=>{for(const y of c.objects){l.stroke(y.data.isColliding?"red":"white");const u=l.map(y.position.x,0,c.dimensions.x,0,l.width),p=l.map(y.position.y,0,c.dimensions.y,l.height,0);if(y.geometry.type==="sphere"){const b=s(y.geometry.r*2);l.strokeWeight(b),l.point(u,p)}if(y.geometry.type==="line"){const b=u+l.map(y.geometry.vector.x,0,c.dimensions.x,0,l.width),m=p-l.map(y.geometry.vector.y,0,c.dimensions.y,0,l.height);l.strokeWeight(2),l.line(u,p,b,m)}}};let d;const a=l=>{l.setup=()=>{d=l;const y=s(e.dimensions);l.createCanvas(y.x,y.y),l.background(0),l.fill(255),l.stroke(255),n()},l.draw=()=>{if(l.background(0),bt(l)){t.fixed=!0;const y=r(new h(l.mouseX,l.height-l.mouseY));t.position.copy(y)}else t.fixed=!1;e.step(),o(l,e)};let c;l.mousePressed=()=>{Me(l)&&(c=r(new h(l.mouseX,l.height-l.mouseY)))},l.mouseReleased=()=>{if(!Me(l))return;const y=r(new h(l.mouseX,l.height-l.mouseY)),u=c.subtract(y);t.position.copy(y),t.velocity.copy(u)}};return Pe(()=>{d==null||d.remove()}),[e,a,()=>e.toggleGravity()]}class Yt extends me{constructor(e){super(),he(this,e,Bt,It,ue,{})}}function ut(f){let e,t,n,s,r="dt",o,d,a,i,l,c,y="drag",u,p,b,m,$,T,x="gravity enabled",E,P,F,oe,M,B=JSON.stringify(f[0])+"",L,re,ye;return{c(){e=_("table"),t=_("tbody"),n=_("tr"),s=_("th"),s.textContent=r,o=S(),d=_("td"),a=_("input"),i=S(),l=_("tr"),c=_("th"),c.textContent=y,u=S(),p=_("td"),b=_("input"),m=S(),$=_("tr"),T=_("th"),T.textContent=x,E=S(),P=_("td"),F=_("input"),oe=S(),M=_("p"),L=X(B),this.h()},l(W){e=w(W,"TABLE",{});var I=k(e);t=w(I,"TBODY",{});var Q=k(t);n=w(Q,"TR",{});var le=k(n);s=w(le,"TH",{"data-svelte-h":!0}),H(s)!=="svelte-16dheti"&&(s.textContent=r),o=O(le),d=w(le,"TD",{});var R=k(d);a=w(R,"INPUT",{type:!0,min:!0,max:!0,step:!0}),R.forEach(g),le.forEach(g),i=O(Q),l=w(Q,"TR",{});var K=k(l);c=w(K,"TH",{"data-svelte-h":!0}),H(c)!=="svelte-2hq5g"&&(c.textContent=y),u=O(K),p=w(K,"TD",{});var _e=k(p);b=w(_e,"INPUT",{type:!0,min:!0,max:!0,step:!0}),_e.forEach(g),K.forEach(g),m=O(Q),$=w(Q,"TR",{});var ce=k($);T=w(ce,"TH",{"data-svelte-h":!0}),H(T)!=="svelte-ic0r87"&&(T.textContent=x),E=O(ce),P=w(ce,"TD",{});var ae=k(P);F=w(ae,"INPUT",{type:!0}),ae.forEach(g),ce.forEach(g),Q.forEach(g),I.forEach(g),oe=O(W),M=w(W,"P",{});var de=k(M);L=A(de,B),de.forEach(g),this.h()},h(){G(a,"type","number"),G(a,"min","0"),G(a,"max","0.5"),G(a,"step","0.001"),G(b,"type","number"),G(b,"min","0"),G(b,"max","0.01"),G(b,"step","0.001"),G(F,"type","checkbox")},m(W,I){j(W,e,I),v(e,t),v(t,n),v(n,s),v(n,o),v(n,d),v(d,a),Be(a,f[0].dt),v(t,i),v(t,l),v(l,c),v(l,u),v(l,p),v(p,b),Be(b,f[0].drag),v(t,m),v(t,$),v($,T),v($,E),v($,P),v(P,F),F.checked=f[0].gravityEnabled,j(W,oe,I),j(W,M,I),v(M,L),re||(ye=[ie(a,"input",f[1]),ie(b,"input",f[2]),ie(F,"change",f[3])],re=!0)},p(W,I){I&1&&Xe(a.value)!==W[0].dt&&Be(a,W[0].dt),I&1&&Xe(b.value)!==W[0].drag&&Be(b,W[0].drag),I&1&&(F.checked=W[0].gravityEnabled),I&1&&B!==(B=JSON.stringify(W[0])+"")&&Z(L,B)},d(W){W&&(g(e),g(oe),g(M)),re=!1,gt(ye)}}}function Gt(f){let e,t="Engine settings",n,s,r=f[0]&&ut(f);return{c(){e=_("p"),e.textContent=t,n=S(),r&&r.c(),s=be(),this.h()},l(o){e=w(o,"P",{class:!0,"data-svelte-h":!0}),H(e)!=="svelte-gf3gek"&&(e.textContent=t),n=O(o),r&&r.l(o),s=be(),this.h()},h(){G(e,"class","title svelte-g74uk9")},m(o,d){j(o,e,d),j(o,n,d),r&&r.m(o,d),j(o,s,d)},p(o,[d]){o[0]?r?r.p(o,d):(r=ut(o),r.c(),r.m(s.parentNode,s)):r&&(r.d(1),r=null)},i:Oe,o:Oe,d(o){o&&(g(e),g(n),g(s)),r&&r.d(o)}}}function Lt(f,e,t){let{world:n}=e;function s(){n.dt=Xe(this.value),t(0,n)}function r(){n.drag=Xe(this.value),t(0,n)}function o(){n.gravityEnabled=this.checked,t(0,n)}return f.$$set=d=>{"world"in d&&t(0,n=d.world)},[n,s,r,o]}class Rt extends me{constructor(e){super(),he(this,e,Lt,Gt,ue,{world:0})}}function Xt(f){let e,t,n,s,r,o=f[0]?"Disable":"Enable",d,a,i,l,c=f[1]?"Play":"Pause",y,u,p,b="Reset",m,$,T,x,E,P,F,oe="Simulation time/Frame duration",M,B,L=f[2].t+"",re,ye,W,I=f[2].frameTime+"",Q,le,R,K,_e="Sphere position",ce,ae,de=f[2].spherePos.x.toFixed(2)+"",Ne,Ue,we,$e=f[2].spherePos.y.toFixed(2)+"",Fe,He,ne,pe,tt="Sphere velocity",qe,xe,Te=f[2].sphereVel.x.toFixed(2)+"",Ve,ze,Ce,ke=f[2].sphereVel.y.toFixed(2)+"",Ie,U,Je,ot;return t=new De({props:{sketch:f[5]}}),$=new Rt({props:{world:f[3]}}),{c(){e=_("div"),q(t.$$.fragment),n=S(),s=_("div"),r=_("button"),d=X(o),a=X(" pause on collision"),i=S(),l=_("button"),y=X(c),u=S(),p=_("button"),p.textContent=b,m=S(),q($.$$.fragment),T=S(),x=_("table"),E=_("tbody"),P=_("tr"),F=_("th"),F.textContent=oe,M=S(),B=_("td"),re=X(L),ye=S(),W=_("td"),Q=X(I),le=S(),R=_("tr"),K=_("th"),K.textContent=_e,ce=S(),ae=_("td"),Ne=X(de),Ue=S(),we=_("td"),Fe=X($e),He=S(),ne=_("tr"),pe=_("th"),pe.textContent=tt,qe=S(),xe=_("td"),Ve=X(Te),ze=S(),Ce=_("td"),Ie=X(ke),this.h()},l(C){e=w(C,"DIV",{class:!0});var N=k(e);ee(t.$$.fragment,N),N.forEach(g),n=O(C),s=w(C,"DIV",{});var se=k(s);r=w(se,"BUTTON",{});var Qe=k(r);d=A(Qe,o),a=A(Qe," pause on collision"),Qe.forEach(g),i=O(se),l=w(se,"BUTTON",{});var nt=k(l);y=A(nt,c),nt.forEach(g),u=O(se),p=w(se,"BUTTON",{"data-svelte-h":!0}),H(p)!=="svelte-tlxueg"&&(p.textContent=b),se.forEach(g),m=O(C),ee($.$$.fragment,C),T=O(C),x=w(C,"TABLE",{});var st=k(x);E=w(st,"TBODY",{});var je=k(E);P=w(je,"TR",{});var ge=k(P);F=w(ge,"TH",{"data-svelte-h":!0}),H(F)!=="svelte-rirgm4"&&(F.textContent=oe),M=O(ge),B=w(ge,"TD",{});var it=k(B);re=A(it,L),it.forEach(g),ye=O(ge),W=w(ge,"TD",{});var rt=k(W);Q=A(rt,I),rt.forEach(g),ge.forEach(g),le=O(je),R=w(je,"TR",{});var fe=k(R);K=w(fe,"TH",{"data-svelte-h":!0}),H(K)!=="svelte-1y1nif6"&&(K.textContent=_e),ce=O(fe),ae=w(fe,"TD",{});var lt=k(ae);Ne=A(lt,de),lt.forEach(g),Ue=O(fe),we=w(fe,"TD",{});var ct=k(we);Fe=A(ct,$e),ct.forEach(g),He=O(fe),fe.forEach(g),ne=w(je,"TR",{});var ve=k(ne);pe=w(ve,"TH",{"data-svelte-h":!0}),H(pe)!=="svelte-1uw1fs2"&&(pe.textContent=tt),qe=O(ve),xe=w(ve,"TD",{});var at=k(xe);Ve=A(at,Te),at.forEach(g),ze=O(ve),Ce=w(ve,"TD",{});var dt=k(Ce);Ie=A(dt,ke),dt.forEach(g),ve.forEach(g),je.forEach(g),st.forEach(g),this.h()},h(){G(e,"class","d-flex justify-content-center")},m(C,N){j(C,e,N),z(t,e,null),j(C,n,N),j(C,s,N),v(s,r),v(r,d),v(r,a),v(s,i),v(s,l),v(l,y),v(s,u),v(s,p),j(C,m,N),z($,C,N),j(C,T,N),j(C,x,N),v(x,E),v(E,P),v(P,F),v(P,M),v(P,B),v(B,re),v(P,ye),v(P,W),v(W,Q),v(E,le),v(E,R),v(R,K),v(R,ce),v(R,ae),v(ae,Ne),v(R,Ue),v(R,we),v(we,Fe),v(R,He),v(E,ne),v(ne,pe),v(ne,qe),v(ne,xe),v(xe,Ve),v(ne,ze),v(ne,Ce),v(Ce,Ie),U=!0,Je||(ot=[ie(r,"click",f[6]),ie(l,"click",f[7]),ie(p,"click",f[4])],Je=!0)},p(C,[N]){(!U||N&1)&&o!==(o=C[0]?"Disable":"Enable")&&Z(d,o),(!U||N&2)&&c!==(c=C[1]?"Play":"Pause")&&Z(y,c);const se={};N&8&&(se.world=C[3]),$.$set(se),(!U||N&4)&&L!==(L=C[2].t+"")&&Z(re,L),(!U||N&4)&&I!==(I=C[2].frameTime+"")&&Z(Q,I),(!U||N&4)&&de!==(de=C[2].spherePos.x.toFixed(2)+"")&&Z(Ne,de),(!U||N&4)&&$e!==($e=C[2].spherePos.y.toFixed(2)+"")&&Z(Fe,$e),(!U||N&4)&&Te!==(Te=C[2].sphereVel.x.toFixed(2)+"")&&Z(Ve,Te),(!U||N&4)&&ke!==(ke=C[2].sphereVel.y.toFixed(2)+"")&&Z(Ie,ke)},i(C){U||(V(t.$$.fragment,C),V($.$$.fragment,C),U=!0)},o(C){Y(t.$$.fragment,C),Y($.$$.fragment,C),U=!1},d(C){C&&(g(e),g(n),g(s),g(m),g(T),g(x)),J(t),J($,C),Je=!1,gt(ot)}}}const Re=60;function At(f,e,t){console.clear();let n=!1,s=!1,r={t:"0",frameTime:"0",spherePos:new h(0,0),sphereVel:new h(0,0),ballIsColliding:!1},o,d;const a=()=>{t(3,o=new We({dimensions:new h(15,15),reporter:B=>{var L;t(2,r.t=(L=B==null?void 0:B.t)==null?void 0:L.toFixed(2),r),r.spherePos.copy(d.position),r.sphereVel.copy(d.velocity),t(2,r.frameTime=B.frameTime.toFixed(3),r),t(2,r),t(2,r.ballIsColliding=d.data.isColliding,r),n&&d.data.isColliding&&!s&&t(1,s=!0)},enableGravity:!0}));const m=D({geometry:{type:"line",vector:new h(15,0)},position:new h(0,0),fixed:!0});o.addObject(m);const $=D({geometry:{type:"line",vector:new h(0,100)},position:new h(0,0),fixed:!0});o.addObject($);const T=D({geometry:{type:"line",vector:new h(0,100)},position:new h(15,0),fixed:!0});o.addObject(T);const x=D({geometry:{type:"line",vector:new h(3,-3)},position:new h(3.5,8),fixed:!0});o.addObject(x);const E=D({geometry:{type:"line",vector:new h(3,3)},position:new h(3.5,5),fixed:!0});o.addObject(E);const P=D({geometry:{type:"line",vector:new h(6,0)},position:new h(2,2),fixed:!0});o.addObject(P);const F=D({geometry:{type:"line",vector:new h(4,0)},position:new h(3,2.5),fixed:!0});o.addObject(F);const oe=D({geometry:{type:"line",vector:new h(2,0)},position:new h(4,3),fixed:!0});o.addObject(oe);const M=D({geometry:{type:"line",vector:new h(.6,0)},position:new h(4.7,3.5),fixed:!0});o.addObject(M),d=D({geometry:{type:"sphere",r:.1},position:new h(5,10),velocity:new h(0,0)}),o.addObject(d)},i=m=>typeof m=="number"?m*Re:m.clone().multiplyScalar(Re),l=m=>typeof m=="number"?m/Re:m.clone().divideScalar(Re),c=(m,$)=>{for(const T of $.objects){m.stroke(T.data.isColliding?"red":"white");const x=m.map(T.position.x,0,$.dimensions.x,0,m.width),E=m.map(T.position.y,0,$.dimensions.y,m.height,0);if(T.geometry.type==="sphere"){const P=i(T.geometry.r*2);m.strokeWeight(P),m.point(x,E)}if(T.geometry.type==="line"){const P=x+m.map(T.geometry.vector.x,0,$.dimensions.x,0,m.width),F=E-m.map(T.geometry.vector.y,0,$.dimensions.y,0,m.height);m.strokeWeight(2),m.line(x,E,P,F)}}};let y;const u=m=>{m.setup=()=>{y=m,a();const x=i(o.dimensions);m.createCanvas(x.x,x.y),m.background(0),m.fill(255),m.stroke(255),a()},m.draw=()=>{if(m.background(0),bt(m)){d.fixed=!0;const x=l(new h(m.mouseX,m.height-m.mouseY));d.position.copy(x)}else d.fixed=!1;s||o.step(),c(m,o),T(m)};let $;m.mousePressed=()=>{Me(m)&&($=l(new h(m.mouseX,m.height-m.mouseY)))},m.mouseReleased=()=>{if(!Me(m)||!$)return;const x=l(new h(m.mouseX,m.height-m.mouseY)),E=$.subtract(x).multiplyScalar(3);$=void 0,d.position.copy(x),d.velocity.copy(E)};const T=x=>{if(!$)return;x.stroke("blue"),x.strokeWeight(2);const E=i($);x.line(E.x,x.height-E.y,x.mouseX,x.mouseY)}};return Pe(()=>{y==null||y.remove()}),[n,s,r,o,a,u,()=>t(0,n=!n),()=>t(1,s=!s)]}class Mt extends me{constructor(e){super(),he(this,e,At,Xt,ue,{})}}function mt(f,e,t){const n=f.slice();return n[1]=e[t],n}function ht(f,e,t){const n=f.slice();return n[1]=e[t],n}function Ut(f){let e=f[1].title+"",t;return{c(){t=X(e)},l(n){t=A(n,e)},m(n,s){j(n,t,s)},p:Oe,d(n){n&&g(t)}}}function yt(f){let e,t;return e=new Ct({props:{$$slots:{default:[Ut]},$$scope:{ctx:f}}}),{c(){q(e.$$.fragment)},l(n){ee(e.$$.fragment,n)},m(n,s){z(e,n,s),t=!0},p(n,s){const r={};s&64&&(r.$$scope={dirty:s,ctx:n}),e.$set(r)},i(n){t||(V(e.$$.fragment,n),t=!0)},o(n){Y(e.$$.fragment,n),t=!1},d(n){J(e,n)}}}function Ht(f){let e,t,n=Ae(f[0]),s=[];for(let o=0;o<n.length;o+=1)s[o]=yt(ht(f,n,o));const r=o=>Y(s[o],1,1,()=>{s[o]=null});return{c(){for(let o=0;o<s.length;o+=1)s[o].c();e=be()},l(o){for(let d=0;d<s.length;d+=1)s[d].l(o);e=be()},m(o,d){for(let a=0;a<s.length;a+=1)s[a]&&s[a].m(o,d);j(o,e,d),t=!0},p(o,d){if(d&1){n=Ae(o[0]);let a;for(a=0;a<n.length;a+=1){const i=ht(o,n,a);s[a]?(s[a].p(i,d),V(s[a],1)):(s[a]=yt(i),s[a].c(),V(s[a],1),s[a].m(e.parentNode,e))}for(Ze(),a=n.length;a<s.length;a+=1)r(a);et()}},i(o){if(!t){for(let d=0;d<n.length;d+=1)V(s[d]);t=!0}},o(o){s=s.filter(Boolean);for(let d=0;d<s.length;d+=1)Y(s[d]);t=!1},d(o){o&&g(e),vt(s,o)}}}function qt(f){let e,t,n;var s=f[1].component;function r(o,d){return{}}return s&&(e=ft(s,r())),{c(){e&&q(e.$$.fragment),t=S()},l(o){e&&ee(e.$$.fragment,o),t=O(o)},m(o,d){e&&z(e,o,d),j(o,t,d),n=!0},p(o,d){if(s!==(s=o[1].component)){if(e){Ze();const a=e;Y(a.$$.fragment,1,0,()=>{J(a,1)}),et()}s?(e=ft(s,r()),q(e.$$.fragment),V(e.$$.fragment,1),z(e,t.parentNode,t)):e=null}},i(o){n||(e&&V(e.$$.fragment,o),n=!0)},o(o){e&&Y(e.$$.fragment,o),n=!1},d(o){o&&g(t),e&&J(e,o)}}}function pt(f){let e,t;return e=new Tt({props:{$$slots:{default:[qt]},$$scope:{ctx:f}}}),{c(){q(e.$$.fragment)},l(n){ee(e.$$.fragment,n)},m(n,s){z(e,n,s),t=!0},p(n,s){const r={};s&64&&(r.$$scope={dirty:s,ctx:n}),e.$set(r)},i(n){t||(V(e.$$.fragment,n),t=!0)},o(n){Y(e.$$.fragment,n),t=!1},d(n){J(e,n)}}}function zt(f){let e,t,n,s;e=new xt({props:{$$slots:{default:[Ht]},$$scope:{ctx:f}}});let r=Ae(f[0]),o=[];for(let a=0;a<r.length;a+=1)o[a]=pt(mt(f,r,a));const d=a=>Y(o[a],1,1,()=>{o[a]=null});return{c(){q(e.$$.fragment),t=S();for(let a=0;a<o.length;a+=1)o[a].c();n=be()},l(a){ee(e.$$.fragment,a),t=O(a);for(let i=0;i<o.length;i+=1)o[i].l(a);n=be()},m(a,i){z(e,a,i),j(a,t,i);for(let l=0;l<o.length;l+=1)o[l]&&o[l].m(a,i);j(a,n,i),s=!0},p(a,i){const l={};if(i&64&&(l.$$scope={dirty:i,ctx:a}),e.$set(l),i&1){r=Ae(a[0]);let c;for(c=0;c<r.length;c+=1){const y=mt(a,r,c);o[c]?(o[c].p(y,i),V(o[c],1)):(o[c]=pt(y),o[c].c(),V(o[c],1),o[c].m(n.parentNode,n))}for(Ze(),c=r.length;c<o.length;c+=1)d(c);et()}},i(a){if(!s){V(e.$$.fragment,a);for(let i=0;i<r.length;i+=1)V(o[i]);s=!0}},o(a){Y(e.$$.fragment,a),o=o.filter(Boolean);for(let i=0;i<o.length;i+=1)Y(o[i]);s=!1},d(a){a&&(g(t),g(n)),J(e,a),vt(o,a)}}}function Jt(f){let e,t;return e=new $t({props:{$$slots:{default:[zt]},$$scope:{ctx:f}}}),{c(){q(e.$$.fragment)},l(n){ee(e.$$.fragment,n)},m(n,s){z(e,n,s),t=!0},p(n,[s]){const r={};s&64&&(r.$$scope={dirty:s,ctx:n}),e.$set(r)},i(n){t||(V(e.$$.fragment,n),t=!0)},o(n){Y(e.$$.fragment,n),t=!1},d(n){J(e,n)}}}function Qt(f){return[[{title:"Obstacles",component:Mt},{title:"Test collisions 3",component:Yt},{title:"Test collisions 2",component:Vt},{title:"Test collisions",component:Wt},{title:"Test engine",component:Ot}]]}class no extends me{constructor(e){super(),he(this,e,Qt,Jt,ue,{})}}export{no as component};
