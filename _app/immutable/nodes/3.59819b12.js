import{s as I,f as j,a as H,g as k,h as V,d as w,c as B,u as Z,j as Y,i as $,y as re,L as ie,z as O,M as z,o as ee}from"../chunks/scheduler.32ebed32.js";import{S as C,i as G,b as W,d as E,m as L,a as D,t as T,e as A}from"../chunks/index.c25c2528.js";import{V as m,c as b,P as X,d as q,m as K,w as _,a as te,b as oe,C as ce}from"../chunks/p5utils.9a0390ea.js";import{W as N}from"../chunks/World.e5a3fcd7.js";import{_ as se}from"../chunks/preload-helper.a4192956.js";const ae=(a,t)=>{const e=[],r=a.x,o=a.y,c=3,h=5,d=.3,i=4,n=.5,s=.1,p=3,l=Math.random()*(r-h),u=o-p-Math.random()*(o-i-p),y=Math.random()*h+c,f=Math.random()*i+d,g=Math.random()*n+s;ue({x:l,y:u,w:y,h:f,topRatio:g},t).forEach(U=>e.push(U)),de(a).forEach(U=>e.push(U));const J=Math.floor(1+Math.random()*2),ne=J*.1,F=le(new m(Math.random()*r,Math.random()*o),{m:J,r:ne});for(;F.position.x>l&&F.position.x<l+y&&F.position.y<u&&F.position.y>u+f;)F.position.x=Math.random()*r,F.position.y=Math.random()*o;return e.push(F),{objects:e,sphere:F}},le=(a,t)=>b({geometry:{type:"sphere",r:(t==null?void 0:t.r)||.1},mass:t==null?void 0:t.m,position:a,velocity:new m(0,0)}),de=a=>{const t=a.x,e=a.y,r=[],o=b({geometry:{type:"line",vector:new m(t,0)},position:new m(0,0),fixed:!0});r.push(o);const c=b({geometry:{type:"line",vector:new m(0,e*10)},position:new m(0,0),fixed:!0});r.push(c);const h=b({geometry:{type:"line",vector:new m(0,e*10)},position:new m(15,0),fixed:!0});return r.push(h),r},ue=(a,t)=>{const{x:e,y:r,h:o,w:c,topRatio:h}=a;if(h<0||h>1)throw new Error("topRatio must be between 0 and 1");const d=c*h/2,i=c*(1-h),n=.1,s=[],p=b({geometry:{type:"line",vector:new m(d,0)},position:new m(e,r+n),fixed:!0});s.push(p);const l=b({geometry:{type:"line",vector:new m(0,-o)},position:new m(e+d,r),fixed:!0});s.push(l);const u=b({geometry:{type:"line",vector:new m(i,0)},position:new m(e+d,r-o-n),fixed:!0});s.push(u);const y=b({geometry:{type:"line",vector:new m(i-2*n,0)},position:new m(e+d+n,r-o+n),fixed:!0,friction:1,restitution:0,collisionListener:t});s.push(y);const f=b({geometry:{type:"line",vector:new m(0,o)},position:new m(e+d+i,r-o),fixed:!0});s.push(f);const g=b({geometry:{type:"line",vector:new m(d,0)},position:new m(e+d+i,r+n),fixed:!0});return s.push(g),s};function pe(a){let t,e,r,o,c,h="Reset",d,i,n;return e=new X({props:{sketch:a[1]}}),{c(){t=j("div"),W(e.$$.fragment),r=H(),o=j("div"),c=j("button"),c.textContent=h,this.h()},l(s){t=k(s,"DIV",{class:!0});var p=V(t);E(e.$$.fragment,p),p.forEach(w),r=B(s),o=k(s,"DIV",{});var l=V(o);c=k(l,"BUTTON",{"data-svelte-h":!0}),Z(c)!=="svelte-tlxueg"&&(c.textContent=h),l.forEach(w),this.h()},h(){Y(t,"class","d-flex justify-content-center")},m(s,p){$(s,t,p),L(e,t,null),$(s,r,p),$(s,o,p),re(o,c),d=!0,i||(n=ie(c,"click",a[0]),i=!0)},p:O,i(s){d||(D(e.$$.fragment,s),d=!0)},o(s){T(e.$$.fragment,s),d=!1},d(s){s&&(w(t),w(r),w(o)),A(e),i=!1,n()}}}const Q=60;function he(a){console.clear();let t,e,r;const o=()=>{setTimeout(c,1e3)},c=()=>{t=new N({dimensions:new m(15,15),reporter:()=>{},enableGravity:!0});const n=ae(t.dimensions,o);n.sphere.fixed=!0,e=n.sphere,r=e.position.clone();for(const s of n.objects)t.addObject(s)},h=n=>typeof n=="number"?n*Q:n.clone().multiplyScalar(Q);let d;const i=n=>{n.setup=()=>{d=n,c();const l=h(t.dimensions);n.createCanvas(l.x,l.y),n.background(0),n.fill(255),n.stroke(255),c()},n.draw=()=>{n.background(0),t.step(),q(n,t),p(n)};let s;n.mousePressed=()=>{K(n)&&(s=new m(n.width,n.height).divideScalar(2),e.position.copy(r),e.velocity.zero(),e.fixed=!0)},n.mouseReleased=()=>{if(!K(n)||!s)return;const l=s,y=new m(n.mouseX,n.mouseY).clone().subtract(l).multiplyScalar(20);y.x*=-1,t.applyForce(e,y),e.fixed=!1,s=void 0};const p=l=>{if(!e.fixed||!s)return;l.stroke("red"),l.strokeWeight(1),l.noFill(),l.circle(s.x,s.y,15),l.stroke("blue"),l.strokeWeight(2);const u=s,f=new m(l.mouseX,l.mouseY).clone().subtract(u);l.line(u.x,u.y,u.x+f.x,u.y+f.y);const g=h(e.position);f.x*=-1,f.y*=-1,l.line(g.x,l.height-g.y,g.x+f.x,l.height-g.y+f.y)}};return z(()=>{d==null||d.remove()}),[c,i]}let me=class extends C{constructor(t){super(),G(this,t,he,pe,I,{})}},R;const v={physics:{attraction:1580,attractionRadius:90,repulsion:2e3,repulsionRadius:20},world:{nbParticles:2e3,allowOverlaps:!0},render:{showPerception:!1,showVelocity:!1,uniformVelocities:!0}},fe=async a=>{const t=await se(()=>import("../chunks/dat.gui.module.ff711f94.js"),[],import.meta.url);R=new t.GUI({width:200}),R.domElement.setAttribute("style","background-color: black");const e=R.addFolder("Physics");e.open(),e.add(v.physics,"attraction"),e.add(v.physics,"attractionRadius",0,150),e.add(v.physics,"repulsion"),e.add(v.physics,"repulsionRadius",0,150);const r=R.addFolder("World");r.open(),r.add(v.world,"nbParticles",0,5e3),r.add(v.world,"allowOverlaps").onChange(a),r.add({resetWorld:a},"resetWorld");const o=R.addFolder("Render");return o.open(),o.add(v.render,"showPerception"),o.add(v.render,"showVelocity"),o.add(v.render,"uniformVelocities"),v},ye=()=>{R==null||R.destroy()};function we(a){let t,e,r;return e=new X({props:{sketch:a[0]}}),{c(){t=j("div"),W(e.$$.fragment),this.h()},l(o){t=k(o,"DIV",{class:!0});var c=V(t);E(e.$$.fragment,c),c.forEach(w),this.h()},h(){Y(t,"class","d-flex justify-content-center")},m(o,c){$(o,t,c),L(e,t,null),r=!0},p:O,i(o){r||(D(e.$$.fragment,o),r=!0)},o(o){T(e.$$.fragment,o),r=!1},d(o){o&&w(t),A(e)}}}const M=1;function be(a){console.clear();let t,e;const r=new m(800,800),o=s=>{e=new N({enableGravity:!1,enableCollisions:!1,enableOverlaps:n.world.allowOverlaps,dimensions:s,drag:.01});const p=[];for(let l=0;l<n.world.nbParticles;l++)p.push(b({geometry:{type:"sphere",r:.5},position:new m(Math.random()*s.x,Math.random()*s.y)}));e.addObjects(p)},c=s=>{const p=_(r,M);s.setup=()=>{t=s,s.createCanvas(p.x,p.y),s.noFill()};const l={selectedId:void 0,selectedPart:void 0};s.draw=()=>{s.background(0);for(const u of e.objects);for(let u=0;u<e.objects.length;u++)for(let y=0;y<e.objects.length;y++){if(u===y)continue;const f=e.objects[u],g=e.objects[y];i(f,g),d(f,g)}e.step(),te(s,e,l),!n.render.showPerception&&!n.render.showVelocity?q(s,e):(oe(s,e,n.render),h(s,e))}},h=(s,p)=>{if(n.render.showPerception){const l=_(n.physics.attractionRadius,M),u=_(n.physics.repulsionRadius,M);s.noFill();for(const y of p.objects){const f=_(y.position,M);s.stroke(0,255,0,50),s.circle(f.x,s.height-f.y,l),s.stroke(255,0,0,50),s.circle(f.x,s.height-f.y,u)}}},d=(s,p)=>{const l=p.position.distance(s.position);if(l>n.physics.attractionRadius)return;const u=p.position.clone().subtract(s.position),f=n.physics.attraction/(l*l);u.norm().multiplyScalar(f),e.applyForce(s,u),e.applyForce(p,u.clone().multiplyScalar(-1))},i=(s,p)=>{const l=p.position.distance(s.position);if(l>n.physics.repulsionRadius)return;const u=s.position.clone().subtract(p.position),f=n.physics.repulsion/(l*l);u.norm().multiplyScalar(f),e.applyForce(s,u),e.applyForce(p,u.clone().multiplyScalar(-1))};let n;return ee(async()=>{n=await fe(()=>o(e.dimensions)),o(r)}),z(()=>{ye(),t==null||t.remove()}),[c]}let ge=class extends C{constructor(t){super(),G(this,t,be,we,I,{})}},P;const x={physics:{attraction:1580,attractionRadius:90,repulsion:2e3,repulsionRadius:20},world:{nbParticles:2e3,allowOverlaps:!0},render:{showPerception:!1,showVelocity:!1,uniformVelocities:!0}},ve=async a=>{const t=await se(()=>import("../chunks/dat.gui.module.ff711f94.js"),[],import.meta.url);P=new t.GUI({width:200}),P.domElement.setAttribute("style","background-color: black");const e=P.addFolder("Physics");e.open(),e.add(x.physics,"attraction"),e.add(x.physics,"attractionRadius",0,150),e.add(x.physics,"repulsion"),e.add(x.physics,"repulsionRadius",0,150);const r=P.addFolder("World");r.open(),r.add(x.world,"nbParticles",0,5e3),r.add(x.world,"allowOverlaps").onChange(a),r.add({resetWorld:a},"resetWorld");const o=P.addFolder("Render");return o.open(),o.add(x.render,"showPerception"),o.add(x.render,"showVelocity"),o.add(x.render,"uniformVelocities"),x},xe=()=>{P==null||P.destroy()},$e=(a,t)=>{for(let e=0;e<a.objects.length;e++)for(let r=0;r<a.objects.length;r++){if(e===r)continue;const o=a.objects[e],c=a.objects[r];Re(a,o,c,t),Fe(a,o,c,t)}},Fe=(a,t,e,r)=>{const o=e.position.distance(t.position);if(o>r.physics.attractionRadius)return;const c=e.position.clone().subtract(t.position),d=r.physics.attraction/(o*o);c.norm().multiplyScalar(d),a.applyForce(t,c),a.applyForce(e,c.clone().multiplyScalar(-1))},Re=(a,t,e,r)=>{const o=e.position.distance(t.position);if(o>r.physics.repulsionRadius)return;const c=t.position.clone().subtract(e.position),d=r.physics.repulsion/(o*o);c.norm().multiplyScalar(d),a.applyForce(t,c),a.applyForce(e,c.clone().multiplyScalar(-1))};function Pe(a){let t,e,r;return e=new X({props:{sketch:a[0]}}),{c(){t=j("div"),W(e.$$.fragment),this.h()},l(o){t=k(o,"DIV",{class:!0});var c=V(t);E(e.$$.fragment,c),c.forEach(w),this.h()},h(){Y(t,"class","d-flex justify-content-center")},m(o,c){$(o,t,c),L(e,t,null),r=!0},p:O,i(o){r||(D(e.$$.fragment,o),r=!0)},o(o){T(e.$$.fragment,o),r=!1},d(o){o&&w(t),A(e)}}}const S=1;function _e(a){console.clear();let t,e;const r=new m(800,800),o=i=>{e=new N({enableGravity:!1,enableCollisions:!1,enableOverlaps:d.world.allowOverlaps,dimensions:i,drag:.01,bordersMode:"wrap"});const n=[];for(let s=0;s<d.world.nbParticles;s++)n.push(b({geometry:{type:"sphere",r:.5},position:new m(Math.random()*i.x,Math.random()*i.y)}));e.addObjects(n)},c=i=>{const n=_(r,S);i.setup=()=>{t=i,i.createCanvas(n.x,n.y),i.noFill()};const s={selectedId:void 0,selectedPart:void 0};i.draw=()=>{i.background(0),$e(e,d),e.step(),te(i,e,s),!d.render.showPerception&&!d.render.showVelocity?q(i,e):(oe(i,e,d.render),h(i,e))}},h=(i,n)=>{if(d.render.showPerception){const s=_(d.physics.attractionRadius,S),p=_(d.physics.repulsionRadius,S);i.noFill();for(const l of n.objects){const u=_(l.position,S);i.stroke(0,255,0,50),i.circle(u.x,i.height-u.y,s),i.stroke(255,0,0,50),i.circle(u.x,i.height-u.y,p)}}};let d;return ee(async()=>{d=await ve(()=>o(e.dimensions)),o(r)}),z(()=>{xe(),t==null||t.remove()}),[c]}class je extends C{constructor(t){super(),G(this,t,_e,Pe,I,{})}}function ke(a){let t,e="<span>A list of games implemented using the engine.</span>",r,o,c,h,d;return h=new ce({props:{tabs:a[0]}}),{c(){t=j("div"),t.innerHTML=e,r=H(),o=j("br"),c=H(),W(h.$$.fragment)},l(i){t=k(i,"DIV",{"data-svelte-h":!0}),Z(t)!=="svelte-1is62ld"&&(t.innerHTML=e),r=B(i),o=k(i,"BR",{}),c=B(i),E(h.$$.fragment,i)},m(i,n){$(i,t,n),$(i,r,n),$(i,o,n),$(i,c,n),L(h,i,n),d=!0},p:O,i(i){d||(D(h.$$.fragment,i),d=!0)},o(i){T(h.$$.fragment,i),d=!1},d(i){i&&(w(t),w(r),w(o),w(c)),A(h,i)}}}function Me(a){return[[{label:"Particles Life",value:je},{label:"Particles",value:ge},{label:"Bucket",value:me}]]}class Ee extends C{constructor(t){super(),G(this,t,Me,ke,I,{})}}export{Ee as component};
