import{s as de,f as w,a as E,l as H,g as _,h as k,d as p,c as S,m as X,u as G,j as N,i as C,y as h,L as q,n as Q,M as Se,z as xe,e as it,P as be,Q as Ee,O as Ye}from"../chunks/scheduler.32ebed32.js";import{S as fe,i as me,b as oe,d as se,m as re,a as le,t as ie,e as ae}from"../chunks/index.c25c2528.js";import{P as je,c as $,V as i,d as He,m as ut,a as Re,C as ft}from"../chunks/PhysicObject.d0894205.js";import{W as Oe}from"../chunks/World.a043ec57.js";function mt(o){let e,s,d,r,t=o[0][o[0].length-1]+"",a,m,n,l="New ball",f,c,x;return s=new je({props:{sketch:o[2]}}),{c(){e=w("div"),oe(s.$$.fragment),d=E(),r=w("p"),a=H(t),m=E(),n=w("button"),n.textContent=l,this.h()},l(y){e=_(y,"DIV",{class:!0});var g=k(e);se(s.$$.fragment,g),g.forEach(p),d=S(y),r=_(y,"P",{});var v=k(r);a=X(v,t),v.forEach(p),m=S(y),n=_(y,"BUTTON",{"data-svelte-h":!0}),G(n)!=="svelte-1jwbm46"&&(n.textContent=l),this.h()},h(){N(e,"class","d-flex justify-content-center")},m(y,g){C(y,e,g),re(s,e,null),C(y,d,g),C(y,r,g),h(r,a),C(y,m,g),C(y,n,g),f=!0,c||(x=q(n,"click",o[1]),c=!0)},p(y,[g]){(!f||g&1)&&t!==(t=y[0][y[0].length-1]+"")&&Q(a,t)},i(y){f||(le(s.$$.fragment,y),f=!0)},o(y){ie(s.$$.fragment,y),f=!1},d(y){y&&(p(e),p(d),p(r),p(m),p(n)),ae(s),c=!1,x()}}}function ht(o,e,s){console.clear();let d=[];const r=l=>{const f=l.objects[l.objects.length-1],c=f.position.clone().toFixed(2),x=f.velocity.clone().toFixed(2);d.push(`${l.t.toFixed(2)} - pos: ${c} - vel: ${x}`),d.length>50&&d.shift(),s(0,d)},t=new Oe({reporter:r,enableGravity:!0}),a=()=>{for(;t.objects.length;)t.objects.pop();const l=$({geometry:{type:"line",vector:new i(100,0)},position:new i(0,0),fixed:!0});t.addObject(l);for(let f=0;f<1;f++){const c=$({geometry:{type:"sphere",r:5},position:new i(20,50),velocity:new i(Math.random()*5-2.5,Math.random()*20)});t.addObject(c)}};let m;const n=l=>{l.setup=()=>{m=l,l.createCanvas(900,600),l.background(0),l.fill(255),l.stroke(255),a()},l.draw=()=>{l.background(0),t.step();for(const f of t.objects){const c=l.map(f.position.x,0,t.dimensions.x,0,l.width),x=l.map(f.position.y,0,t.dimensions.y,l.height,0);if(f.geometry.type==="sphere"&&(l.strokeWeight(f.geometry.r*2),l.point(c,x)),f.geometry.type==="line"){const y=c+l.map(f.geometry.vector.x,0,t.dimensions.x,0,l.width),g=x+l.map(f.geometry.vector.y,0,t.dimensions.y,0,l.height);l.strokeWeight(2),l.line(c,x,y,g)}}}};return Se(()=>{m==null||m.remove()}),[d,a,n]}class pt extends fe{constructor(e){super(),me(this,e,ht,mt,de,{})}}function yt(o){let e,s,d,r,t=o[0][o[0].length-1]+"",a,m,n,l="New ball",f,c,x;return s=new je({props:{sketch:o[2]}}),{c(){e=w("div"),oe(s.$$.fragment),d=E(),r=w("p"),a=H(t),m=E(),n=w("button"),n.textContent=l,this.h()},l(y){e=_(y,"DIV",{class:!0});var g=k(e);se(s.$$.fragment,g),g.forEach(p),d=S(y),r=_(y,"P",{});var v=k(r);a=X(v,t),v.forEach(p),m=S(y),n=_(y,"BUTTON",{"data-svelte-h":!0}),G(n)!=="svelte-1jwbm46"&&(n.textContent=l),this.h()},h(){N(e,"class","d-flex justify-content-center")},m(y,g){C(y,e,g),re(s,e,null),C(y,d,g),C(y,r,g),h(r,a),C(y,m,g),C(y,n,g),f=!0,c||(x=q(n,"click",o[1]),c=!0)},p(y,[g]){(!f||g&1)&&t!==(t=y[0][y[0].length-1]+"")&&Q(a,t)},i(y){f||(le(s.$$.fragment,y),f=!0)},o(y){ie(s.$$.fragment,y),f=!1},d(y){y&&(p(e),p(d),p(r),p(m),p(n)),ae(s),c=!1,x()}}}const We=6;function vt(o,e,s){console.clear();let d=[];const r=c=>{const x=c.objects[c.objects.length-1],y=x.position.clone().toFixed(2),g=x.velocity.clone().toFixed(2);d.push(`${c.t.toFixed(2)} - pos: ${y} - vel: ${g}`),d.length>50&&d.shift(),s(0,d)},t=new Oe({reporter:r,enableGravity:!0});let a,m;const n=()=>{for(;t.objects.length;)t.objects.pop();m=$({geometry:{type:"line",vector:new i(40,40)},position:new i(30,30),fixed:!0}),t.addObject(m),a=$({geometry:{type:"sphere",r:10},position:new i(20,50),velocity:new i(2.5,2.5),fixed:!0}),t.addObject(a)};let l;const f=c=>{const x=v=>typeof v=="number"?v*We:v.clone().multiplyScalar(We),y=v=>typeof v=="number"?v/We:v.clone().divideScalar(We);c.setup=()=>{l=c;const v=x(t.dimensions);c.createCanvas(v.x,v.y),c.background(0),c.fill(255),c.stroke(255),n()};let g;c.draw=()=>{if(c.background(0),t.step(),c.mouseIsPressed){const v=y(new i(c.mouseX,c.height-c.mouseY));if(g||(v.distance(a.position)<2?g="sphere":v.distance(m.position)<2?g="wallstart":v.distance(m.geometry.vector.clone().add(m.position))<2&&(g="wallend")),g==="sphere"&&a.position.copy(v),g==="wallstart"&&m.position.copy(v),g==="wallend"){const u=v.clone().subtract(m.position);m.geometry.vector.copy(u)}}else g=void 0;for(const v of t.objects.sort((u,b)=>u.geometry.type<b.geometry.type?1:-1)){c.stroke(a.data.isColliding?"red":"white");const u=c.map(v.position.x,0,t.dimensions.x,0,c.width),b=c.map(v.position.y,0,t.dimensions.y,c.height,0);if(v.geometry.type==="sphere"){const B=x(v.geometry.r*2);c.strokeWeight(B),c.point(u,b)}if(v.geometry.type==="line"){const B=u+c.map(v.geometry.vector.x,0,t.dimensions.x,0,c.width),j=b-c.map(v.geometry.vector.y,0,t.dimensions.y,0,c.height);c.stroke("blue"),c.strokeWeight(2),c.line(u,b,B,j)}}}};return Se(()=>{l==null||l.remove()}),[d,n,f]}class bt extends fe{constructor(e){super(),me(this,e,vt,yt,de,{})}}function gt(o){let e,s,d;return s=new je({props:{sketch:o[0]}}),{c(){e=w("div"),oe(s.$$.fragment),this.h()},l(r){e=_(r,"DIV",{class:!0});var t=k(e);se(s.$$.fragment,t),t.forEach(p),this.h()},h(){N(e,"class","d-flex justify-content-center")},m(r,t){C(r,e,t),re(s,e,null),d=!0},p:xe,i(r){d||(le(s.$$.fragment,r),d=!0)},o(r){ie(s.$$.fragment,r),d=!1},d(r){r&&p(e),ae(s)}}}const Ve=6;function wt(o){console.clear();const e=new Oe({reporter:()=>{},enableGravity:!0});let s;const d=()=>{for(;e.objects.length;)e.objects.pop();s=$({geometry:{type:"sphere",r:5},position:new i(20,50),velocity:new i(Math.random()*5-2.5,Math.random()*20)}),e.addObject(s);const n=$({geometry:{type:"line",vector:new i(100,0)},position:new i(0,2),fixed:!0});e.addObject(n);const l=$({geometry:{type:"line",vector:new i(100,0)},position:new i(0,98),fixed:!0});e.addObject(l);const f=$({geometry:{type:"line",vector:new i(0,100)},position:new i(2,0),fixed:!0});e.addObject(f);const c=$({geometry:{type:"line",vector:new i(0,100)},position:new i(98,0),fixed:!0});e.addObject(c);const x=$({geometry:{type:"line",vector:new i(50,50)},position:new i(20,10),fixed:!0});e.addObject(x)},r=n=>typeof n=="number"?n*Ve:n.clone().multiplyScalar(Ve),t=n=>typeof n=="number"?n/Ve:n.clone().divideScalar(Ve);let a;const m=n=>{n.setup=()=>{a=n;const f=r(e.dimensions);n.createCanvas(f.x,f.y),n.background(0),n.fill(255),n.stroke(255),d()},n.draw=()=>{if(n.background(0),n.mouseIsPressed){s.fixed=!0;const f=t(new i(n.mouseX,n.height-n.mouseY));s.position.copy(f)}else s.fixed=!1;e.step(),He(n,e)};let l;n.mousePressed=()=>{l=t(new i(n.mouseX,n.height-n.mouseY))},n.mouseReleased=()=>{const f=t(new i(n.mouseX,n.height-n.mouseY)),c=l.subtract(f);s.position.copy(f),s.velocity.copy(c)}};return Se(()=>{a==null||a.remove()}),[m]}class _t extends fe{constructor(e){super(),me(this,e,wt,gt,de,{})}}function xt(o){let e,s,d,r,t,a,m,n="Gravity",l,f,c,x="Toggle",y,g,v;return s=new je({props:{sketch:o[1]}}),{c(){e=w("div"),oe(s.$$.fragment),d=E(),r=w("table"),t=w("tbody"),a=w("tr"),m=w("th"),m.textContent=n,l=E(),f=w("td"),c=w("button"),c.textContent=x,this.h()},l(u){e=_(u,"DIV",{class:!0});var b=k(e);se(s.$$.fragment,b),b.forEach(p),d=S(u),r=_(u,"TABLE",{});var B=k(r);t=_(B,"TBODY",{});var j=k(t);a=_(j,"TR",{});var F=k(a);m=_(F,"TH",{"data-svelte-h":!0}),G(m)!=="svelte-vy75us"&&(m.textContent=n),l=S(F),f=_(F,"TD",{});var I=k(f);c=_(I,"BUTTON",{"data-svelte-h":!0}),G(c)!=="svelte-18lc94l"&&(c.textContent=x),I.forEach(p),F.forEach(p),j.forEach(p),B.forEach(p),this.h()},h(){N(e,"class","d-flex justify-content-center")},m(u,b){C(u,e,b),re(s,e,null),C(u,d,b),C(u,r,b),h(r,t),h(t,a),h(a,m),h(a,l),h(a,f),h(f,c),y=!0,g||(v=q(c,"click",o[2]),g=!0)},p:xe,i(u){y||(le(s.$$.fragment,u),y=!0)},o(u){ie(s.$$.fragment,u),y=!1},d(u){u&&(p(e),p(d),p(r)),ae(s),g=!1,v()}}}const Ae=6;function $t(o){console.clear();const e=new Oe({reporter:()=>{},enableGravity:!0});let s;const d=()=>{for(;e.objects.length;)e.objects.pop();const l=$({geometry:{type:"line",vector:new i(100,0)},position:new i(0,0),fixed:!0});e.addObject(l);const f=$({geometry:{type:"line",vector:new i(100,0)},position:new i(0,100),fixed:!0});e.addObject(f);const c=$({geometry:{type:"line",vector:new i(0,100)},position:new i(0,0),fixed:!0});e.addObject(c);const x=$({geometry:{type:"line",vector:new i(0,100)},position:new i(100,0),fixed:!0});e.addObject(x);const y=$({geometry:{type:"line",vector:new i(50,50)},position:new i(20,10),fixed:!0});e.addObject(y),s=$({geometry:{type:"sphere",r:2},position:new i(20,50),velocity:new i(Math.random()*5-2.5,Math.random()*20)}),e.addObject(s)},r=l=>typeof l=="number"?l*Ae:l.clone().multiplyScalar(Ae),t=l=>typeof l=="number"?l/Ae:l.clone().divideScalar(Ae);let a;const m=l=>{l.setup=()=>{a=l;const c=r(e.dimensions);l.createCanvas(c.x,c.y),l.background(0),l.fill(255),l.stroke(255),d()},l.draw=()=>{if(l.background(0),ut(l)){s.fixed=!0;const c=t(new i(l.mouseX,l.height-l.mouseY));s.position.copy(c)}else s.fixed=!1;e.step(),He(l,e)};let f;l.mousePressed=()=>{Re(l)&&(f=t(new i(l.mouseX,l.height-l.mouseY)))},l.mouseReleased=()=>{if(!Re(l))return;const c=t(new i(l.mouseX,l.height-l.mouseY)),x=f.subtract(c);s.position.copy(c),s.velocity.copy(x)}};return Se(()=>{a==null||a.remove()}),[e,m,()=>e.toggleGravity()]}class Tt extends fe{constructor(e){super(),me(this,e,$t,xt,de,{})}}function at(o){let e,s,d,r,t="dt",a,m,n,l,f,c,x="drag",y,g,v,u,b,B,j="gravity enabled",F,I,L,M,z;return{c(){e=w("table"),s=w("tbody"),d=w("tr"),r=w("th"),r.textContent=t,a=E(),m=w("td"),n=w("input"),l=E(),f=w("tr"),c=w("th"),c.textContent=x,y=E(),g=w("td"),v=w("input"),u=E(),b=w("tr"),B=w("th"),B.textContent=j,F=E(),I=w("td"),L=w("input"),this.h()},l(W){e=_(W,"TABLE",{});var U=k(e);s=_(U,"TBODY",{});var T=k(s);d=_(T,"TR",{});var D=k(d);r=_(D,"TH",{"data-svelte-h":!0}),G(r)!=="svelte-16dheti"&&(r.textContent=t),a=S(D),m=_(D,"TD",{});var R=k(m);n=_(R,"INPUT",{type:!0,min:!0,max:!0,step:!0}),R.forEach(p),D.forEach(p),l=S(T),f=_(T,"TR",{});var J=k(f);c=_(J,"TH",{"data-svelte-h":!0}),G(c)!=="svelte-2hq5g"&&(c.textContent=x),y=S(J),g=_(J,"TD",{});var K=k(g);v=_(K,"INPUT",{type:!0,min:!0,max:!0,step:!0}),K.forEach(p),J.forEach(p),u=S(T),b=_(T,"TR",{});var Y=k(b);B=_(Y,"TH",{"data-svelte-h":!0}),G(B)!=="svelte-ic0r87"&&(B.textContent=j),F=S(Y),I=_(Y,"TD",{});var te=k(I);L=_(te,"INPUT",{type:!0}),te.forEach(p),Y.forEach(p),T.forEach(p),U.forEach(p),this.h()},h(){N(n,"type","number"),N(n,"min","0"),N(n,"max","0.5"),N(n,"step","0.001"),N(v,"type","number"),N(v,"min","0"),N(v,"max","0.01"),N(v,"step","0.001"),N(L,"type","checkbox")},m(W,U){C(W,e,U),h(e,s),h(s,d),h(d,r),h(d,a),h(d,m),h(m,n),be(n,o[0].dt),h(s,l),h(s,f),h(f,c),h(f,y),h(f,g),h(g,v),be(v,o[0].drag),h(s,u),h(s,b),h(b,B),h(b,F),h(b,I),h(I,L),L.checked=o[0].gravityEnabled,M||(z=[q(n,"input",o[1]),q(v,"input",o[2]),q(L,"change",o[3])],M=!0)},p(W,U){U&1&&Ee(n.value)!==W[0].dt&&be(n,W[0].dt),U&1&&Ee(v.value)!==W[0].drag&&be(v,W[0].drag),U&1&&(L.checked=W[0].gravityEnabled)},d(W){W&&p(e),M=!1,Ye(z)}}}function kt(o){let e,s="Engine settings",d,r,t=o[0]&&at(o);return{c(){e=w("p"),e.textContent=s,d=E(),t&&t.c(),r=it(),this.h()},l(a){e=_(a,"P",{class:!0,"data-svelte-h":!0}),G(e)!=="svelte-gf3gek"&&(e.textContent=s),d=S(a),t&&t.l(a),r=it(),this.h()},h(){N(e,"class","title svelte-g74uk9")},m(a,m){C(a,e,m),C(a,d,m),t&&t.m(a,m),C(a,r,m)},p(a,[m]){a[0]?t?t.p(a,m):(t=at(a),t.c(),t.m(r.parentNode,r)):t&&(t.d(1),t=null)},i:xe,o:xe,d(a){a&&(p(e),p(d),p(r)),t&&t.d(a)}}}function Ct(o,e,s){let{world:d}=e;function r(){d.dt=Ee(this.value),s(0,d)}function t(){d.drag=Ee(this.value),s(0,d)}function a(){d.gravityEnabled=this.checked,s(0,d)}return o.$$set=m=>{"world"in m&&s(0,d=m.world)},[d,r,t,a]}class dt extends fe{constructor(e){super(),me(this,e,Ct,kt,de,{world:0})}}function Et(o){let e,s="Shooter",d,r,t,a="Angle",m,n,l,f,c,x,y,g,v="Magnitude",u,b,B,j,F,I,L,M,z="Shoot",W,U;return{c(){e=w("p"),e.textContent=s,d=E(),r=w("span"),t=w("label"),t.textContent=a,m=E(),n=w("input"),l=E(),f=H(o[0]),c=H(" deg"),x=E(),y=w("span"),g=w("label"),g.textContent=v,u=E(),b=w("input"),B=E(),j=H(o[1]),F=E(),I=w("br"),L=E(),M=w("button"),M.textContent=z,this.h()},l(T){e=_(T,"P",{class:!0,"data-svelte-h":!0}),G(e)!=="svelte-198ugk3"&&(e.textContent=s),d=S(T),r=_(T,"SPAN",{});var D=k(r);t=_(D,"LABEL",{for:!0,"data-svelte-h":!0}),G(t)!=="svelte-lab87n"&&(t.textContent=a),m=S(D),n=_(D,"INPUT",{id:!0,type:!0,min:!0,max:!0}),l=S(D),f=X(D,o[0]),c=X(D," deg"),D.forEach(p),x=S(T),y=_(T,"SPAN",{});var R=k(y);g=_(R,"LABEL",{for:!0,"data-svelte-h":!0}),G(g)!=="svelte-1vc5oxa"&&(g.textContent=v),u=S(R),b=_(R,"INPUT",{id:!0,type:!0,min:!0,max:!0,step:!0}),B=S(R),j=X(R,o[1]),R.forEach(p),F=S(T),I=_(T,"BR",{}),L=S(T),M=_(T,"BUTTON",{"data-svelte-h":!0}),G(M)!=="svelte-8jpwxr"&&(M.textContent=z),this.h()},h(){N(e,"class","title svelte-g74uk9"),N(t,"for","angleSlider"),N(n,"id","angleSlider"),N(n,"type","range"),N(n,"min","0"),N(n,"max","360"),N(g,"for","magSlider"),N(b,"id","magSlider"),N(b,"type","range"),N(b,"min","0"),N(b,"max","1"),N(b,"step","0.01")},m(T,D){C(T,e,D),C(T,d,D),C(T,r,D),h(r,t),h(r,m),h(r,n),be(n,o[0]),h(r,l),h(r,f),h(r,c),C(T,x,D),C(T,y,D),h(y,g),h(y,u),h(y,b),be(b,o[1]),h(y,B),h(y,j),C(T,F,D),C(T,I,D),C(T,L,D),C(T,M,D),W||(U=[q(n,"change",o[4]),q(n,"input",o[4]),q(b,"change",o[5]),q(b,"input",o[5]),q(M,"click",o[6])],W=!0)},p(T,[D]){D&1&&be(n,T[0]),D&1&&Q(f,T[0]),D&2&&be(b,T[1]),D&2&&Q(j,T[1])},i:xe,o:xe,d(T){T&&(p(e),p(d),p(r),p(x),p(y),p(F),p(I),p(L),p(M)),W=!1,Ye(U)}}}function St(o,e,s){let{onShoot:d}=e,r=0,t=.5;const a=()=>{const f=new i(1,0);f.rotateDeg(r),f.multiplyScalar(t),d(f)};function m(){r=Ee(this.value),s(0,r)}function n(){t=Ee(this.value),s(1,t)}const l=()=>a();return o.$$set=f=>{"onShoot"in f&&s(3,d=f.onShoot)},[r,t,a,d,m,n,l]}class jt extends fe{constructor(e){super(),me(this,e,St,Et,de,{onShoot:3})}}const Ot=()=>{const o=[],e=$({geometry:{type:"line",vector:new i(15,0)},position:new i(0,0),fixed:!0});o.push(e);const s=$({geometry:{type:"line",vector:new i(0,100)},position:new i(0,0),fixed:!0});o.push(s);const d=$({geometry:{type:"line",vector:new i(0,100)},position:new i(15,0),fixed:!0});o.push(d);const r=$({geometry:{type:"line",vector:new i(3,-3)},position:new i(3.5,8),fixed:!0});o.push(r);const t=$({geometry:{type:"line",vector:new i(3,3)},position:new i(3.5,5),fixed:!0});o.push(t);const a=$({geometry:{type:"line",vector:new i(6,0)},position:new i(2,2),fixed:!0});o.push(a);const m=$({geometry:{type:"line",vector:new i(4,0)},position:new i(3,2.5),fixed:!0});o.push(m);const n=$({geometry:{type:"line",vector:new i(2,0)},position:new i(4,3),fixed:!0});o.push(n);const l=$({geometry:{type:"line",vector:new i(.6,0)},position:new i(4.7,3.5),fixed:!0});o.push(l);const f=$({geometry:{type:"line",vector:new i(1,0)},position:new i(10,10.1),fixed:!0});o.push(f);const c=$({geometry:{type:"line",vector:new i(0,-4)},position:new i(11,10),fixed:!0});o.push(c);const x=$({geometry:{type:"line",vector:new i(0,-4)},position:new i(11.5,10),fixed:!0});o.push(x);const y=$({geometry:{type:"line",vector:new i(0,-4)},position:new i(12,10),fixed:!0});o.push(y);const g=$({geometry:{type:"line",vector:new i(1,0)},position:new i(12,10.1),fixed:!0});o.push(g);for(let u=.2;u<.5;u+=.1)for(let b=0;b<10;b++){const B=$({geometry:{type:"line",vector:new i(0,3)},position:new i(9+b*u,1),fixed:!0});o.push(B)}const v=$({geometry:{type:"sphere",r:.1},position:new i(5,10),velocity:new i(0,0)});return o.push(v),{objects:o,sphere:v}};function Pt(o){let e,s,d,r,t,a=o[0]?"Disable":"Enable",m,n,l,f,c=o[1]?"Play":"Pause",x,y,g,v="Reset",u,b,B,j,F,I,L,M,z,W="Simulation time/Frame duration",U,T,D=o[2].t+"",R,J,K,Y=o[2].frameTime+"",te,$e,O,V,Z="Sphere position",ge,he,pe=o[2].spherePos.x.toFixed(2)+"",we,ne,ye,ve=o[2].spherePos.y.toFixed(2)+"",Le,Xe,ce,Te,Je="Sphere velocity",Ge,Pe,De=o[2].sphereVel.x.toFixed(2)+"",Ne,qe,Be,Ie=o[2].sphereVel.y.toFixed(2)+"",Me,ee,ze,Ke;return s=new je({props:{sketch:o[5]}}),b=new jt({props:{onShoot:o[6]}}),j=new dt({props:{world:o[3]}}),{c(){e=w("div"),oe(s.$$.fragment),d=E(),r=w("div"),t=w("button"),m=H(a),n=H(" pause on collision"),l=E(),f=w("button"),x=H(c),y=E(),g=w("button"),g.textContent=v,u=E(),oe(b.$$.fragment),B=E(),oe(j.$$.fragment),F=E(),I=w("table"),L=w("tbody"),M=w("tr"),z=w("th"),z.textContent=W,U=E(),T=w("td"),R=H(D),J=E(),K=w("td"),te=H(Y),$e=E(),O=w("tr"),V=w("th"),V.textContent=Z,ge=E(),he=w("td"),we=H(pe),ne=E(),ye=w("td"),Le=H(ve),Xe=E(),ce=w("tr"),Te=w("th"),Te.textContent=Je,Ge=E(),Pe=w("td"),Ne=H(De),qe=E(),Be=w("td"),Me=H(Ie),this.h()},l(P){e=_(P,"DIV",{class:!0});var A=k(e);se(s.$$.fragment,A),A.forEach(p),d=S(P),r=_(P,"DIV",{});var ue=k(r);t=_(ue,"BUTTON",{});var Qe=k(t);m=X(Qe,a),n=X(Qe," pause on collision"),Qe.forEach(p),l=S(ue),f=_(ue,"BUTTON",{});var Ze=k(f);x=X(Ze,c),Ze.forEach(p),y=S(ue),g=_(ue,"BUTTON",{"data-svelte-h":!0}),G(g)!=="svelte-tlxueg"&&(g.textContent=v),ue.forEach(p),u=S(P),se(b.$$.fragment,P),B=S(P),se(j.$$.fragment,P),F=S(P),I=_(P,"TABLE",{});var et=k(I);L=_(et,"TBODY",{});var Fe=k(L);M=_(Fe,"TR",{});var ke=k(M);z=_(ke,"TH",{"data-svelte-h":!0}),G(z)!=="svelte-rirgm4"&&(z.textContent=W),U=S(ke),T=_(ke,"TD",{});var tt=k(T);R=X(tt,D),tt.forEach(p),J=S(ke),K=_(ke,"TD",{});var nt=k(K);te=X(nt,Y),nt.forEach(p),ke.forEach(p),$e=S(Fe),O=_(Fe,"TR",{});var _e=k(O);V=_(_e,"TH",{"data-svelte-h":!0}),G(V)!=="svelte-1y1nif6"&&(V.textContent=Z),ge=S(_e),he=_(_e,"TD",{});var ot=k(he);we=X(ot,pe),ot.forEach(p),ne=S(_e),ye=_(_e,"TD",{});var st=k(ye);Le=X(st,ve),st.forEach(p),Xe=S(_e),_e.forEach(p),ce=_(Fe,"TR",{});var Ce=k(ce);Te=_(Ce,"TH",{"data-svelte-h":!0}),G(Te)!=="svelte-1uw1fs2"&&(Te.textContent=Je),Ge=S(Ce),Pe=_(Ce,"TD",{});var rt=k(Pe);Ne=X(rt,De),rt.forEach(p),qe=S(Ce),Be=_(Ce,"TD",{});var lt=k(Be);Me=X(lt,Ie),lt.forEach(p),Ce.forEach(p),Fe.forEach(p),et.forEach(p),this.h()},h(){N(e,"class","d-flex justify-content-center")},m(P,A){C(P,e,A),re(s,e,null),C(P,d,A),C(P,r,A),h(r,t),h(t,m),h(t,n),h(r,l),h(r,f),h(f,x),h(r,y),h(r,g),C(P,u,A),re(b,P,A),C(P,B,A),re(j,P,A),C(P,F,A),C(P,I,A),h(I,L),h(L,M),h(M,z),h(M,U),h(M,T),h(T,R),h(M,J),h(M,K),h(K,te),h(L,$e),h(L,O),h(O,V),h(O,ge),h(O,he),h(he,we),h(O,ne),h(O,ye),h(ye,Le),h(O,Xe),h(L,ce),h(ce,Te),h(ce,Ge),h(ce,Pe),h(Pe,Ne),h(ce,qe),h(ce,Be),h(Be,Me),ee=!0,ze||(Ke=[q(t,"click",o[7]),q(f,"click",o[8]),q(g,"click",o[4])],ze=!0)},p(P,[A]){(!ee||A&1)&&a!==(a=P[0]?"Disable":"Enable")&&Q(m,a),(!ee||A&2)&&c!==(c=P[1]?"Play":"Pause")&&Q(x,c);const ue={};A&8&&(ue.world=P[3]),j.$set(ue),(!ee||A&4)&&D!==(D=P[2].t+"")&&Q(R,D),(!ee||A&4)&&Y!==(Y=P[2].frameTime+"")&&Q(te,Y),(!ee||A&4)&&pe!==(pe=P[2].spherePos.x.toFixed(2)+"")&&Q(we,pe),(!ee||A&4)&&ve!==(ve=P[2].spherePos.y.toFixed(2)+"")&&Q(Le,ve),(!ee||A&4)&&De!==(De=P[2].sphereVel.x.toFixed(2)+"")&&Q(Ne,De),(!ee||A&4)&&Ie!==(Ie=P[2].sphereVel.y.toFixed(2)+"")&&Q(Me,Ie)},i(P){ee||(le(s.$$.fragment,P),le(b.$$.fragment,P),le(j.$$.fragment,P),ee=!0)},o(P){ie(s.$$.fragment,P),ie(b.$$.fragment,P),ie(j.$$.fragment,P),ee=!1},d(P){P&&(p(e),p(d),p(r),p(u),p(B),p(F),p(I)),ae(s),ae(b,P),ae(j,P),ze=!1,Ye(Ke)}}}const Ue=60;function Dt(o,e,s){console.clear();let d=!1,r=!1,t={t:"0",frameTime:"0",spherePos:new i(0,0),sphereVel:new i(0,0),ballIsColliding:!1},a,m;const n=()=>{s(3,a=new Oe({dimensions:new i(15,15),reporter:b=>{var B;s(2,t.t=(B=b==null?void 0:b.t)==null?void 0:B.toFixed(1),t),t.spherePos.copy(m.position).unfloat(),t.sphereVel.copy(m.velocity).unfloat(),s(2,t.frameTime=b.frameTime.toFixed(2),t),s(2,t),s(2,t.ballIsColliding=m.data.isColliding,t),d&&m.data.isColliding&&!r&&s(1,r=!0)},enableGravity:!0}));const u=Ot();m=u.sphere;for(const b of u.objects)a.addObject(b)},l=u=>typeof u=="number"?u*Ue:u.clone().multiplyScalar(Ue),f=u=>typeof u=="number"?u/Ue:u.clone().divideScalar(Ue);let c;const x=u=>{u.setup=()=>{c=u,n();const j=l(a.dimensions);u.createCanvas(j.x,j.y),u.background(0),u.fill(255),u.stroke(255),n()},u.draw=()=>{u.background(0),ut(u)?m.fixed=!0:m.fixed=!1,r||a.step(),He(u,a),B(u)};let b;u.mousePressed=()=>{Re(u)&&(b=f(new i(u.mouseX,u.height-u.mouseY)),m.position.copy(b))},u.mouseReleased=()=>{if(!Re(u)||!b)return;const j=f(new i(u.mouseX,u.height-u.mouseY)),F=b.subtract(j).multiplyScalar(3);b=void 0,m.velocity.copy(F)};const B=j=>{if(!b)return;j.stroke("blue"),j.strokeWeight(2);const F=l(b);j.line(F.x,j.height-F.y,j.mouseX,j.mouseY)}},y=u=>{u.multiplyScalar(1e4),a.applyForce(m,u)};return Se(()=>{c==null||c.remove()}),[d,r,t,a,n,x,y,()=>s(0,d=!d),()=>s(1,r=!r)]}let Bt=class extends fe{constructor(e){super(),me(this,e,Dt,Pt,de,{})}};const It=()=>{const o=[],e=$({geometry:{type:"line",vector:new i(15,0)},position:new i(0,0),fixed:!0});o.push(e);const s=$({geometry:{type:"line",vector:new i(0,100)},position:new i(0,0),fixed:!0});o.push(s);const d=$({geometry:{type:"line",vector:new i(0,100)},position:new i(15,0),fixed:!0});o.push(d);const r=$({geometry:{type:"line",vector:new i(3,-3)},position:new i(3.5,8),fixed:!0});o.push(r);const t=$({geometry:{type:"line",vector:new i(3,3)},position:new i(3.5,5),fixed:!0});o.push(t);const a=$({geometry:{type:"line",vector:new i(6,0)},position:new i(2,2),fixed:!0});o.push(a);const m=$({geometry:{type:"line",vector:new i(4,0)},position:new i(3,2.5),fixed:!0});o.push(m);const n=$({geometry:{type:"line",vector:new i(2,0)},position:new i(4,3),fixed:!0});o.push(n);const l=$({geometry:{type:"line",vector:new i(.6,0)},position:new i(4.7,3.5),fixed:!0});o.push(l);const f=$({geometry:{type:"line",vector:new i(1,0)},position:new i(10,10.1),fixed:!0});o.push(f);const c=$({geometry:{type:"line",vector:new i(0,-4)},position:new i(11,10),fixed:!0});o.push(c);const x=$({geometry:{type:"line",vector:new i(0,-4)},position:new i(11.5,10),fixed:!0});o.push(x);const y=$({geometry:{type:"line",vector:new i(0,-4)},position:new i(12,10),fixed:!0});o.push(y);const g=$({geometry:{type:"line",vector:new i(1,0)},position:new i(12,10.1),fixed:!0});o.push(g);for(let v=.2;v<.5;v+=.1)for(let u=0;u<10;u++){const b=$({geometry:{type:"line",vector:new i(0,3)},position:new i(9+u*v,1),fixed:!0});o.push(b)}return{objects:o}};function Ft(o){let e,s,d,r,t,a=o[0]?"Disable":"Enable",m,n,l,f,c=o[1]?"Play":"Pause",x,y,g,v="Reset",u,b,B,j,F,I,L,M="Simulation time/Frame duration",z,W,U=o[2].t+"",T,D,R,J=o[2].frameTime+"",K,Y,te,$e;return s=new je({props:{sketch:o[5]}}),b=new dt({props:{world:o[3]}}),{c(){e=w("div"),oe(s.$$.fragment),d=E(),r=w("div"),t=w("button"),m=H(a),n=H(" pause on collision"),l=E(),f=w("button"),x=H(c),y=E(),g=w("button"),g.textContent=v,u=E(),oe(b.$$.fragment),B=E(),j=w("table"),F=w("tbody"),I=w("tr"),L=w("th"),L.textContent=M,z=E(),W=w("td"),T=H(U),D=E(),R=w("td"),K=H(J),this.h()},l(O){e=_(O,"DIV",{class:!0});var V=k(e);se(s.$$.fragment,V),V.forEach(p),d=S(O),r=_(O,"DIV",{});var Z=k(r);t=_(Z,"BUTTON",{});var ge=k(t);m=X(ge,a),n=X(ge," pause on collision"),ge.forEach(p),l=S(Z),f=_(Z,"BUTTON",{});var he=k(f);x=X(he,c),he.forEach(p),y=S(Z),g=_(Z,"BUTTON",{"data-svelte-h":!0}),G(g)!=="svelte-tlxueg"&&(g.textContent=v),Z.forEach(p),u=S(O),se(b.$$.fragment,O),B=S(O),j=_(O,"TABLE",{});var pe=k(j);F=_(pe,"TBODY",{});var we=k(F);I=_(we,"TR",{});var ne=k(I);L=_(ne,"TH",{"data-svelte-h":!0}),G(L)!=="svelte-rirgm4"&&(L.textContent=M),z=S(ne),W=_(ne,"TD",{});var ye=k(W);T=X(ye,U),ye.forEach(p),D=S(ne),R=_(ne,"TD",{});var ve=k(R);K=X(ve,J),ve.forEach(p),ne.forEach(p),we.forEach(p),pe.forEach(p),this.h()},h(){N(e,"class","d-flex justify-content-center")},m(O,V){C(O,e,V),re(s,e,null),C(O,d,V),C(O,r,V),h(r,t),h(t,m),h(t,n),h(r,l),h(r,f),h(f,x),h(r,y),h(r,g),C(O,u,V),re(b,O,V),C(O,B,V),C(O,j,V),h(j,F),h(F,I),h(I,L),h(I,z),h(I,W),h(W,T),h(I,D),h(I,R),h(R,K),Y=!0,te||($e=[q(t,"click",o[6]),q(f,"click",o[7]),q(g,"click",o[4])],te=!0)},p(O,[V]){(!Y||V&1)&&a!==(a=O[0]?"Disable":"Enable")&&Q(m,a),(!Y||V&2)&&c!==(c=O[1]?"Play":"Pause")&&Q(x,c);const Z={};V&8&&(Z.world=O[3]),b.$set(Z),(!Y||V&4)&&U!==(U=O[2].t+"")&&Q(T,U),(!Y||V&4)&&J!==(J=O[2].frameTime+"")&&Q(K,J)},i(O){Y||(le(s.$$.fragment,O),le(b.$$.fragment,O),Y=!0)},o(O){ie(s.$$.fragment,O),ie(b.$$.fragment,O),Y=!1},d(O){O&&(p(e),p(d),p(r),p(u),p(B),p(j)),ae(s),ae(b,O),te=!1,Ye($e)}}}const ct=60;function Lt(o,e,s){console.clear();let d=!1,r=!1,t={t:"0",frameTime:"0"},a;const m=()=>{clearInterval(c),c=setInterval(n,100),s(3,a=new Oe({dimensions:new i(15,15),reporter:u=>{var b;s(2,t.t=(b=u==null?void 0:u.t)==null?void 0:b.toFixed(1),t),s(2,t.frameTime=u.frameTime.toFixed(2),t),s(2,t)},enableGravity:!0}));const v=It();for(const u of v.objects)a.addObject(u)},n=()=>{console.log("add ball");const v=Math.random()*a.dimensions.x,u=Math.random()*a.dimensions.y,b=-5+Math.random()*10,B=-5+Math.random()*10,j=$({geometry:{type:"sphere",r:.1},position:new i(v,u),velocity:new i(b,B)});a.addObject(j)},l=v=>typeof v=="number"?v*ct:v.clone().multiplyScalar(ct);let f,c;const x=v=>{v.setup=()=>{f=v,m();const u=l(a.dimensions);v.createCanvas(u.x,u.y),v.background(0),v.fill(255),v.stroke(255),m()},v.draw=()=>{v.background(0),r||a.step(),He(v,a)}};return Se(()=>{f==null||f.remove(),clearInterval(c)}),[d,r,t,a,m,x,()=>s(0,d=!d),()=>s(1,r=!r)]}class Nt extends fe{constructor(e){super(),me(this,e,Lt,Ft,de,{})}}function Mt(o){let e,s="<span>This page is a list of engine tests. They use the actual engine and allow me to setup different situations and check manually for regressions and bugs.</span> <br/> <span>Use the selection menu to see the different pages</span>",d,r,t,a,m;return a=new ft({props:{tabs:o[0]}}),{c(){e=w("div"),e.innerHTML=s,d=E(),r=w("br"),t=E(),oe(a.$$.fragment)},l(n){e=_(n,"DIV",{"data-svelte-h":!0}),G(e)!=="svelte-11mzr87"&&(e.innerHTML=s),d=S(n),r=_(n,"BR",{}),t=S(n),se(a.$$.fragment,n)},m(n,l){C(n,e,l),C(n,d,l),C(n,r,l),C(n,t,l),re(a,n,l),m=!0},p:xe,i(n){m||(le(a.$$.fragment,n),m=!0)},o(n){ie(a.$$.fragment,n),m=!1},d(n){n&&(p(e),p(d),p(r),p(t)),ae(a,n)}}}function Wt(o){return[[{label:"Perfs - Multiple balls",value:Nt},{label:"Playground - Engine settings",value:Bt},{label:"Dynamics + collisions - 1",value:Tt},{label:"Dynamics + collisions - 2",value:_t},{label:"Sphere Line - pull apart",value:bt},{label:"One ball bounce",value:pt}]]}class Ht extends fe{constructor(e){super(),me(this,e,Wt,Mt,de,{})}}export{Ht as component};
