import{s as D,f as R,a as L,g as T,h as I,d as b,c as C,u as U,j as J,i as v,y as K,L as Q,z as X,M as Z,e as S,E as Y,q as O,l as ee,m as te}from"../chunks/scheduler.e421d989.js";import{S as A,i as G,b as k,d as M,m as j,a as g,t as y,e as W,g as E,c as B}from"../chunks/index.52486247.js";import{e as P}from"../chunks/each.e59479a4.js";import{V as h,P as ne,a as H,T as oe,b as se,c as re,d as ie}from"../chunks/p5utils.fe4d08ff.js";import{c as x,W as ce}from"../chunks/PhysicObject.c3e4b7e0.js";const ae=(f,e)=>{const s=[],t=f.x,o=f.y,a=3,n=5,l=.3,r=4,u=.5,i=.1,c=Math.random()*(t-n),p=o-Math.random()*(o-r),m=Math.random()*n+a,$=Math.random()*r+l,_=Math.random()*u+i;ue({x:c,y:p,w:m,h:$,topRatio:_},e).forEach(w=>s.push(w)),fe(f).forEach(w=>s.push(w));const d=le(new h(Math.random()*t,Math.random()*o));for(;d.position.x>c&&d.position.x<c+m&&d.position.y<p&&d.position.y>p+$;)d.position.x=Math.random()*t,d.position.y=Math.random()*o;return s.push(d),{objects:s,sphere:d}},le=f=>x({geometry:{type:"sphere",r:.1},position:f,velocity:new h(0,0)}),fe=f=>{const e=f.x,s=f.y,t=[],o=x({geometry:{type:"line",vector:new h(e,0)},position:new h(0,0),fixed:!0});t.push(o);const a=x({geometry:{type:"line",vector:new h(0,s*10)},position:new h(0,0),fixed:!0});t.push(a);const n=x({geometry:{type:"line",vector:new h(0,s*10)},position:new h(15,0),fixed:!0});return t.push(n),t},ue=(f,e)=>{const{x:s,y:t,h:o,w:a,topRatio:n}=f;if(n<0||n>1)throw new Error("topRatio must be between 0 and 1");const l=a*n/2,r=a*(1-n),u=.1,i=[],c=x({geometry:{type:"line",vector:new h(l,0)},position:new h(s,t+u),fixed:!0});i.push(c);const p=x({geometry:{type:"line",vector:new h(0,-o)},position:new h(s+l,t),fixed:!0});i.push(p);const m=x({geometry:{type:"line",vector:new h(r,0)},position:new h(s+l,t-o-u),fixed:!0});i.push(m);const $=x({geometry:{type:"line",vector:new h(r-2*u,0)},position:new h(s+l+u,t-o+u),fixed:!0,friction:1,restitution:0,collisionListener:e});i.push($);const _=x({geometry:{type:"line",vector:new h(0,o)},position:new h(s+l+r,t-o),fixed:!0});i.push(_);const d=x({geometry:{type:"line",vector:new h(l,0)},position:new h(s+l+r,t+u),fixed:!0});return i.push(d),i};function me(f){let e,s,t,o,a,n="Reset",l,r,u;return s=new ne({props:{sketch:f[1]}}),{c(){e=R("div"),k(s.$$.fragment),t=L(),o=R("div"),a=R("button"),a.textContent=n,this.h()},l(i){e=T(i,"DIV",{class:!0});var c=I(e);M(s.$$.fragment,c),c.forEach(b),t=C(i),o=T(i,"DIV",{});var p=I(o);a=T(p,"BUTTON",{"data-svelte-h":!0}),U(a)!=="svelte-tlxueg"&&(a.textContent=n),p.forEach(b),this.h()},h(){J(e,"class","d-flex justify-content-center")},m(i,c){v(i,e,c),j(s,e,null),v(i,t,c),v(i,o,c),K(o,a),l=!0,r||(u=Q(a,"click",f[0]),r=!0)},p:X,i(i){l||(g(s.$$.fragment,i),l=!0)},o(i){y(s.$$.fragment,i),l=!1},d(i){i&&(b(e),b(t),b(o)),W(s),r=!1,u()}}}const N=60;function he(f){console.clear();let e,s,t;const o=()=>{a()},a=()=>{e=new ce({dimensions:new h(15,15),reporter:()=>{},enableGravity:!0});const i=ae(e.dimensions,o);i.sphere.fixed=!0,s=i.sphere,t=s.position.clone();for(const c of i.objects)e.addObject(c)},n=i=>typeof i=="number"?i*N:i.clone().multiplyScalar(N),l=(i,c)=>{for(const p of c.objects){i.stroke(p.data.isColliding?"red":"white");const m=i.map(p.position.x,0,c.dimensions.x,0,i.width),$=i.map(p.position.y,0,c.dimensions.y,i.height,0);if(p.geometry.type==="sphere"){const _=n(p.geometry.r*2);i.strokeWeight(_),i.point(m,$)}if(p.geometry.type==="line"){const _=m+i.map(p.geometry.vector.x,0,c.dimensions.x,0,i.width),d=$-i.map(p.geometry.vector.y,0,c.dimensions.y,0,i.height);i.strokeWeight(2),i.line(m,$,_,d)}}};let r;const u=i=>{i.setup=()=>{r=i,a();const m=n(e.dimensions);i.createCanvas(m.x,m.y),i.background(0),i.fill(255),i.stroke(255),a()},i.draw=()=>{i.background(0),e.step(),l(i,e),p(i)};let c;i.mousePressed=()=>{H(i)&&(c=new h(i.width,i.height).divideScalar(2),s.position.copy(t),s.velocity.zero(),s.fixed=!0)},i.mouseReleased=()=>{if(!H(i)||!c)return;const m=c,_=new h(i.mouseX,i.mouseY).clone().subtract(m).multiplyScalar(20);_.x*=-1,e.applyForce(s,_),s.fixed=!1,c=void 0};const p=m=>{if(!s.fixed||!c)return;m.stroke("red"),m.strokeWeight(1),m.noFill(),m.circle(c.x,c.y,15),m.stroke("blue"),m.strokeWeight(2);const $=c,d=new h(m.mouseX,m.mouseY).clone().subtract($);m.line($.x,$.y,$.x+d.x,$.y+d.y);const w=n(s.position);d.x*=-1,d.y*=-1,m.line(w.x,m.height-w.y,w.x+d.x,m.height-w.y+d.y)}};return Z(()=>{r==null||r.remove()}),[a,u]}class pe extends A{constructor(e){super(),G(this,e,he,me,D,{})}}function V(f,e,s){const t=f.slice();return t[1]=e[s],t}function F(f,e,s){const t=f.slice();return t[1]=e[s],t}function de(f){let e=f[1].title+"",s;return{c(){s=ee(e)},l(t){s=te(t,e)},m(t,o){v(t,s,o)},p:X,d(t){t&&b(s)}}}function q(f){let e,s;return e=new ie({props:{$$slots:{default:[de]},$$scope:{ctx:f}}}),{c(){k(e.$$.fragment)},l(t){M(e.$$.fragment,t)},m(t,o){j(e,t,o),s=!0},p(t,o){const a={};o&64&&(a.$$scope={dirty:o,ctx:t}),e.$set(a)},i(t){s||(g(e.$$.fragment,t),s=!0)},o(t){y(e.$$.fragment,t),s=!1},d(t){W(e,t)}}}function $e(f){let e,s,t=P(f[0]),o=[];for(let n=0;n<t.length;n+=1)o[n]=q(F(f,t,n));const a=n=>y(o[n],1,1,()=>{o[n]=null});return{c(){for(let n=0;n<o.length;n+=1)o[n].c();e=S()},l(n){for(let l=0;l<o.length;l+=1)o[l].l(n);e=S()},m(n,l){for(let r=0;r<o.length;r+=1)o[r]&&o[r].m(n,l);v(n,e,l),s=!0},p(n,l){if(l&1){t=P(n[0]);let r;for(r=0;r<t.length;r+=1){const u=F(n,t,r);o[r]?(o[r].p(u,l),g(o[r],1)):(o[r]=q(u),o[r].c(),g(o[r],1),o[r].m(e.parentNode,e))}for(E(),r=t.length;r<o.length;r+=1)a(r);B()}},i(n){if(!s){for(let l=0;l<t.length;l+=1)g(o[l]);s=!0}},o(n){o=o.filter(Boolean);for(let l=0;l<o.length;l+=1)y(o[l]);s=!1},d(n){n&&b(e),Y(o,n)}}}function ge(f){let e,s,t;var o=f[1].component;function a(n,l){return{}}return o&&(e=O(o,a())),{c(){e&&k(e.$$.fragment),s=L()},l(n){e&&M(e.$$.fragment,n),s=C(n)},m(n,l){e&&j(e,n,l),v(n,s,l),t=!0},p(n,l){if(o!==(o=n[1].component)){if(e){E();const r=e;y(r.$$.fragment,1,0,()=>{W(r,1)}),B()}o?(e=O(o,a()),k(e.$$.fragment),g(e.$$.fragment,1),j(e,s.parentNode,s)):e=null}},i(n){t||(e&&g(e.$$.fragment,n),t=!0)},o(n){e&&y(e.$$.fragment,n),t=!1},d(n){n&&b(s),e&&W(e,n)}}}function z(f){let e,s;return e=new re({props:{$$slots:{default:[ge]},$$scope:{ctx:f}}}),{c(){k(e.$$.fragment)},l(t){M(e.$$.fragment,t)},m(t,o){j(e,t,o),s=!0},p(t,o){const a={};o&64&&(a.$$scope={dirty:o,ctx:t}),e.$set(a)},i(t){s||(g(e.$$.fragment,t),s=!0)},o(t){y(e.$$.fragment,t),s=!1},d(t){W(e,t)}}}function _e(f){let e,s,t,o;e=new se({props:{$$slots:{default:[$e]},$$scope:{ctx:f}}});let a=P(f[0]),n=[];for(let r=0;r<a.length;r+=1)n[r]=z(V(f,a,r));const l=r=>y(n[r],1,1,()=>{n[r]=null});return{c(){k(e.$$.fragment),s=L();for(let r=0;r<n.length;r+=1)n[r].c();t=S()},l(r){M(e.$$.fragment,r),s=C(r);for(let u=0;u<n.length;u+=1)n[u].l(r);t=S()},m(r,u){j(e,r,u),v(r,s,u);for(let i=0;i<n.length;i+=1)n[i]&&n[i].m(r,u);v(r,t,u),o=!0},p(r,u){const i={};if(u&64&&(i.$$scope={dirty:u,ctx:r}),e.$set(i),u&1){a=P(r[0]);let c;for(c=0;c<a.length;c+=1){const p=V(r,a,c);n[c]?(n[c].p(p,u),g(n[c],1)):(n[c]=z(p),n[c].c(),g(n[c],1),n[c].m(t.parentNode,t))}for(E(),c=a.length;c<n.length;c+=1)l(c);B()}},i(r){if(!o){g(e.$$.fragment,r);for(let u=0;u<a.length;u+=1)g(n[u]);o=!0}},o(r){y(e.$$.fragment,r),n=n.filter(Boolean);for(let u=0;u<n.length;u+=1)y(n[u]);o=!1},d(r){r&&(b(s),b(t)),W(e,r),Y(n,r)}}}function ye(f){let e,s;return e=new oe({props:{$$slots:{default:[_e]},$$scope:{ctx:f}}}),{c(){k(e.$$.fragment)},l(t){M(e.$$.fragment,t)},m(t,o){j(e,t,o),s=!0},p(t,[o]){const a={};o&64&&(a.$$scope={dirty:o,ctx:t}),e.$set(a)},i(t){s||(g(e.$$.fragment,t),s=!0)},o(t){y(e.$$.fragment,t),s=!1},d(t){W(e,t)}}}function xe(f){return[[{title:"Bucket",component:pe}]]}class We extends A{constructor(e){super(),G(this,e,xe,ye,D,{})}}export{We as component};
