import{s as fe,f as w,g as x,h as S,d as p,j as Y,i as E,z as $e,A as wt,o as xt,M as ke,a as P,e as yt,u as z,c as O,y as g,P as ge,L as H,Q as _e,O as Xe,l as Q,m as K,n as ne}from"../chunks/scheduler.32ebed32.js";import{S as me,i as he,b as se,d as re,m as ie,a as le,t as ce,e as ae}from"../chunks/index.c25c2528.js";import{c as T,V as l,P as Ce,w as oe,m as Ne,s as ot,d as Ue,a as Ie,C as $t}from"../chunks/PhysicObject.edd17eee.js";import{_ as _t}from"../chunks/preload-helper.a4192956.js";import{p as kt}from"../chunks/stores.764b477b.js";import{W as Pe,S as Ct}from"../chunks/World.4289fb09.js";const Tt={world:{ttl:45,gravity:!0,collisions:!1,maxNbObjects:300,particleSize:3},cannon:{angle:270,minYVelocity:50,maxYVelocityVariation:1,maxXVelocity:30,creationDelay:1},render:{colors:!0,blurPx:19}},St={world:{ttl:1e4,gravity:!1,collisions:!0,maxNbObjects:300,particleSize:3},cannon:{angle:270,minYVelocity:1,maxYVelocityVariation:1,maxXVelocity:1,creationDelay:30},render:{colors:!0,blurPx:0}},Et={world:{ttl:155.09219369291745,gravity:!1,collisions:!1,maxNbObjects:300,particleSize:13},cannon:{angle:270,minYVelocity:36.843012235050836,maxYVelocityVariation:1,maxXVelocity:14.785455798724797,creationDelay:1},render:{colors:!1,blurPx:0}},jt={world:{ttl:2471.1356195071517,gravity:!0,collisions:!0,maxNbObjects:300,particleSize:1},cannon:{angle:270,minYVelocity:21.40272272962261,maxYVelocityVariation:1.0236084783732553,maxXVelocity:15.8883336205411,creationDelay:23},render:{colors:!0,blurPx:0}},Pt={world:{ttl:2581.4234016887817,gravity:!1,collisions:!1,maxNbObjects:2064.794072031708,particleSize:8},cannon:{angle:84.99052214371876,minYVelocity:36.843012235050836,maxYVelocityVariation:1,maxXVelocity:14.785455798724797,creationDelay:1},render:{colors:!1,blurPx:0}},nt={torch:Tt,pullApart:St,blob:Et,fireworks:jt,smoke:Pt},Ot=i=>{const e=[],o=T({geometry:{type:"line",vector:new l(i.x,0)},position:new l(0,i.y),fixed:!0});e.push(o);const c=T({geometry:{type:"line",vector:new l(i.x,0)},position:new l(0,0),fixed:!0});e.push(c);const s=T({geometry:{type:"line",vector:new l(0,i.y)},position:new l(0,0),fixed:!0});e.push(s);const t=T({geometry:{type:"line",vector:new l(0,i.y)},position:new l(i.x,0),fixed:!0});return e.push(t),e},Vt=(i,e)=>{const o=[],c=i.x,s=i.y,t=e*i.x,n=e*i.y,m=c/2,u=s/2,a=T({geometry:{type:"line",vector:new l(t,0)},position:new l(m-t/2,u+n/2),fixed:!0});o.push(a);const h=T({geometry:{type:"line",vector:new l(t,0)},position:new l(m-t/2,u-n/2),fixed:!0});o.push(h);const d=T({geometry:{type:"line",vector:new l(0,n)},position:new l(m-t/2,u-n/2),fixed:!0});o.push(d);const k=T({geometry:{type:"line",vector:new l(0,n)},position:new l(m+t/2,u-n/2),fixed:!0});return o.push(k),o};function Bt(i){const e=document.createElement("textarea");e.value=i,e.style.top="0",e.style.left="0",e.style.position="fixed",document.body.appendChild(e),e.focus(),e.select();try{const c=document.execCommand("copy")?"successful":"unsuccessful";console.log("Fallback: Copying text command was "+c)}catch(o){console.error("Fallback: Oops, unable to copy",o)}document.body.removeChild(e)}function Dt(i){if(!navigator.clipboard){Bt(i);return}navigator.clipboard.writeText(i).then(function(){console.log("Async: Copying to clipboard was successful!")},function(e){console.error("Async: Could not copy text: ",e)})}function Ft(i){let e,o,c;return o=new Ce({props:{sketch:i[0]}}),{c(){e=w("div"),se(o.$$.fragment),this.h()},l(s){e=x(s,"DIV",{class:!0});var t=S(e);re(o.$$.fragment,t),t.forEach(p),this.h()},h(){Y(e,"class","d-flex justify-content-center")},m(s,t){E(s,e,t),ie(o,e,null),c=!0},p:$e,i(s){c||(le(o.$$.fragment,s),c=!0)},o(s){ce(o.$$.fragment,s),c=!1},d(s){s&&p(e),ae(o)}}}const pt=8;function It(i,e,o){let c;wt(i,kt,r=>o(7,c=r)),console.clear();let s,t=nt.torch,n="torch";xt(()=>{n=c.url.searchParams.get("config")||"torch",n&&(t=nt[n])});let m;const u=async()=>{const r=await _t(()=>import("../chunks/dat.gui.module.ff711f94.js"),[],import.meta.url);m=new r.GUI,m.domElement.setAttribute("style","background-color: black");const $=m.addFolder("World");$.open(),$.add(y==null?void 0:y.objects,"length").name("Nb objects").listen(),$.add(t.world,"gravity").name("Enable gravity").onFinishChange(()=>y.gravityEnabled=t.world.gravity),$.add(t.world,"collisions").name("Enable collisions").onFinishChange(()=>y.collisionEnabled=t.world.collisions),$.add(t.world,"ttl",0,1e4).name("Particles TTL"),$.add(t.world,"maxNbObjects",0,3e3).name("Max nb particles"),$.add(t.world,"particleSize",1,20,1).name("Particles size");const C=m.addFolder("Cannon");C.open(),C.add(t.cannon,"angle",0,360).name("Angle"),C.add(t.cannon,"minYVelocity",0,100).name("min. Y velocity"),C.add(t.cannon,"maxYVelocityVariation",0,2).name("Y vel. variation"),C.add(t.cannon,"maxXVelocity",0,100).name("max. X velocity "),C.add(t.cannon,"creationDelay",1,30,1).name("Fire rate");const _=m.addFolder("Render");_.open(),_.add(t.render,"colors").name("Use colors"),_.add(t.render,"blurPx",0,50).name("Blur (px)");const j=m.addFolder("Config");j.open(),j.add(a,"copyCurrentConfig").name("Copy current"),j.add(a,"configName",Object.keys(nt)).name("Change preset").onFinishChange(I=>{window.location.href=window.location.origin+`/engineTests?config=${I}`})},a={copyCurrentConfig:()=>{const r=JSON.stringify(t);Dt(r)},configName:n||"torch"},h=()=>{const{minYVelocity:r,maxYVelocityVariation:$,maxXVelocity:C}=t.cannon,_=Math.random()*C-C/2,j=r+($-Math.random())*r;return new l(_,j).rotateByDeg(t.cannon.angle)},d=r=>{const $={...T({geometry:{type:"sphere",r:t.world.particleSize},position:k,velocity:h()}),age:0};r.addObject($)},k=new l(0,0);let y;const b=r=>{const $=new l(100,100),C=oe($,pt);k.x=$.x/2,k.y=$.y/3,r.setup=()=>{s=r,r.createCanvas(C.x,C.y),r.noFill(),y=new Pe({dimensions:$,enableGravity:t.world.gravity,enableCollisions:t.world.collisions}),d(y),Ot($).forEach(_=>y.addObject(_)),Vt($,.5).forEach(_=>y.addObject(_)),u()},r.draw=()=>{if(r.background(0),Ne(r)){const _=ot(new l(r.mouseX,r.height-r.mouseY),pt);k.copy(_)}r.frameCount%t.cannon.creationDelay===0&&y.objects.length<t.world.maxNbObjects&&d(y),y.step(),y.objects.forEach(_=>{_.data.age>t.world.ttl&&y.removeObject(_)}),f(r,y)}},v=[[239,113,81],[229,144,25],[211,202,156],[153,47,15],[234,93,180]],f=(r,$)=>{const C=r.width/$.dimensions.x;for(const _ of $.objects){if(_.geometry.type!=="sphere")continue;if(t.render.colors){const G=_.data.id%v.length,M=v[G];r.stroke([...M])}const j=r.map(_.position.x,0,$.dimensions.x,0,r.width),I=r.map(_.position.y,0,$.dimensions.y,r.height,0),A=oe(_.geometry.r*2,C);r.strokeWeight(A),r.point(j,I)}for(const _ of $.objects){if(_.geometry.type!=="line")continue;r.stroke("white");const j=r.map(_.position.x,0,$.dimensions.x,0,r.width),I=r.map(_.position.y,0,$.dimensions.y,r.height,0),A=r.map(_.position.x+_.geometry.vector.x,0,$.dimensions.x,0,r.width),G=r.map(_.position.y+_.geometry.vector.y,0,$.dimensions.y,r.height,0);r.strokeWeight(3),r.line(j,I,A,G)}r.drawingContext.filter=`blur(${t.render.blurPx}px)`};return ke(()=>{m==null||m.destroy(),s==null||s.remove()}),[b]}let Nt=class extends me{constructor(e){super(),he(this,e,It,Ft,fe,{})}};function gt(i){let e,o,c,s,t="dt",n,m,u,a,h,d,k="drag",y,b,v,f,r,$,C="gravity enabled",_,j,I,A,G;return{c(){e=w("table"),o=w("tbody"),c=w("tr"),s=w("th"),s.textContent=t,n=P(),m=w("td"),u=w("input"),a=P(),h=w("tr"),d=w("th"),d.textContent=k,y=P(),b=w("td"),v=w("input"),f=P(),r=w("tr"),$=w("th"),$.textContent=C,_=P(),j=w("td"),I=w("input"),this.h()},l(M){e=x(M,"TABLE",{});var W=S(e);o=x(W,"TBODY",{});var B=S(o);c=x(B,"TR",{});var D=S(c);s=x(D,"TH",{"data-svelte-h":!0}),z(s)!=="svelte-16dheti"&&(s.textContent=t),n=O(D),m=x(D,"TD",{});var L=S(m);u=x(L,"INPUT",{type:!0,min:!0,max:!0,step:!0}),L.forEach(p),D.forEach(p),a=O(B),h=x(B,"TR",{});var ee=S(h);d=x(ee,"TH",{"data-svelte-h":!0}),z(d)!=="svelte-2hq5g"&&(d.textContent=k),y=O(ee),b=x(ee,"TD",{});var te=S(b);v=x(te,"INPUT",{type:!0,min:!0,max:!0,step:!0}),te.forEach(p),ee.forEach(p),f=O(B),r=x(B,"TR",{});var U=S(r);$=x(U,"TH",{"data-svelte-h":!0}),z($)!=="svelte-ic0r87"&&($.textContent=C),_=O(U),j=x(U,"TD",{});var q=S(j);I=x(q,"INPUT",{type:!0}),q.forEach(p),U.forEach(p),B.forEach(p),W.forEach(p),this.h()},h(){Y(u,"type","number"),Y(u,"min","0"),Y(u,"max","0.5"),Y(u,"step","0.001"),Y(v,"type","number"),Y(v,"min","0"),Y(v,"max","0.01"),Y(v,"step","0.001"),Y(I,"type","checkbox")},m(M,W){E(M,e,W),g(e,o),g(o,c),g(c,s),g(c,n),g(c,m),g(m,u),ge(u,i[0].dt),g(o,a),g(o,h),g(h,d),g(h,y),g(h,b),g(b,v),ge(v,i[0].drag),g(o,f),g(o,r),g(r,$),g(r,_),g(r,j),g(j,I),I.checked=i[0].gravityEnabled,A||(G=[H(u,"input",i[1]),H(v,"input",i[2]),H(I,"change",i[3])],A=!0)},p(M,W){W&1&&_e(u.value)!==M[0].dt&&ge(u,M[0].dt),W&1&&_e(v.value)!==M[0].drag&&ge(v,M[0].drag),W&1&&(I.checked=M[0].gravityEnabled)},d(M){M&&p(e),A=!1,Xe(G)}}}function Yt(i){let e,o="Engine settings",c,s,t=i[0]&&gt(i);return{c(){e=w("p"),e.textContent=o,c=P(),t&&t.c(),s=yt(),this.h()},l(n){e=x(n,"P",{class:!0,"data-svelte-h":!0}),z(e)!=="svelte-gf3gek"&&(e.textContent=o),c=O(n),t&&t.l(n),s=yt(),this.h()},h(){Y(e,"class","title svelte-g74uk9")},m(n,m){E(n,e,m),E(n,c,m),t&&t.m(n,m),E(n,s,m)},p(n,[m]){n[0]?t?t.p(n,m):(t=gt(n),t.c(),t.m(s.parentNode,s)):t&&(t.d(1),t=null)},i:$e,o:$e,d(n){n&&(p(e),p(c),p(s)),t&&t.d(n)}}}function At(i,e,o){let{world:c}=e;function s(){c.dt=_e(this.value),o(0,c)}function t(){c.drag=_e(this.value),o(0,c)}function n(){c.gravityEnabled=this.checked,o(0,c)}return i.$$set=m=>{"world"in m&&o(0,c=m.world)},[c,s,t,n]}class st extends me{constructor(e){super(),he(this,e,At,Yt,fe,{world:0})}}function Mt(i){let e,o="Shooter",c,s,t,n="Angle",m,u,a,h,d,k,y,b,v="Magnitude",f,r,$,C,_,j,I,A,G="Shoot",M,W;return{c(){e=w("p"),e.textContent=o,c=P(),s=w("span"),t=w("label"),t.textContent=n,m=P(),u=w("input"),a=P(),h=Q(i[0]),d=Q(" deg"),k=P(),y=w("span"),b=w("label"),b.textContent=v,f=P(),r=w("input"),$=P(),C=Q(i[1]),_=P(),j=w("br"),I=P(),A=w("button"),A.textContent=G,this.h()},l(B){e=x(B,"P",{class:!0,"data-svelte-h":!0}),z(e)!=="svelte-198ugk3"&&(e.textContent=o),c=O(B),s=x(B,"SPAN",{});var D=S(s);t=x(D,"LABEL",{for:!0,"data-svelte-h":!0}),z(t)!=="svelte-lab87n"&&(t.textContent=n),m=O(D),u=x(D,"INPUT",{id:!0,type:!0,min:!0,max:!0}),a=O(D),h=K(D,i[0]),d=K(D," deg"),D.forEach(p),k=O(B),y=x(B,"SPAN",{});var L=S(y);b=x(L,"LABEL",{for:!0,"data-svelte-h":!0}),z(b)!=="svelte-1vc5oxa"&&(b.textContent=v),f=O(L),r=x(L,"INPUT",{id:!0,type:!0,min:!0,max:!0,step:!0}),$=O(L),C=K(L,i[1]),L.forEach(p),_=O(B),j=x(B,"BR",{}),I=O(B),A=x(B,"BUTTON",{"data-svelte-h":!0}),z(A)!=="svelte-8jpwxr"&&(A.textContent=G),this.h()},h(){Y(e,"class","title svelte-g74uk9"),Y(t,"for","angleSlider"),Y(u,"id","angleSlider"),Y(u,"type","range"),Y(u,"min","0"),Y(u,"max","360"),Y(b,"for","magSlider"),Y(r,"id","magSlider"),Y(r,"type","range"),Y(r,"min","0"),Y(r,"max","1"),Y(r,"step","0.01")},m(B,D){E(B,e,D),E(B,c,D),E(B,s,D),g(s,t),g(s,m),g(s,u),ge(u,i[0]),g(s,a),g(s,h),g(s,d),E(B,k,D),E(B,y,D),g(y,b),g(y,f),g(y,r),ge(r,i[1]),g(y,$),g(y,C),E(B,_,D),E(B,j,D),E(B,I,D),E(B,A,D),M||(W=[H(u,"change",i[4]),H(u,"input",i[4]),H(r,"change",i[5]),H(r,"input",i[5]),H(A,"click",i[6])],M=!0)},p(B,[D]){D&1&&ge(u,B[0]),D&1&&ne(h,B[0]),D&2&&ge(r,B[1]),D&2&&ne(C,B[1])},i:$e,o:$e,d(B){B&&(p(e),p(c),p(s),p(k),p(y),p(_),p(j),p(I),p(A)),M=!1,Xe(W)}}}function Wt(i,e,o){let{onShoot:c}=e,s=0,t=.5;const n=()=>{const h=new l(1,0);h.rotateDeg(s),h.multiplyScalar(t),c(h)};function m(){s=_e(this.value),o(0,s)}function u(){t=_e(this.value),o(1,t)}const a=()=>n();return i.$$set=h=>{"onShoot"in h&&o(3,c=h.onShoot)},[s,t,n,c,m,u,a]}class bt extends me{constructor(e){super(),he(this,e,Wt,Mt,fe,{onShoot:3})}}const Lt=i=>{const e=[],o=T({geometry:{type:"line",vector:new l(15,0)},position:new l(0,15),fixed:!0});e.push(o);const c=T({geometry:{type:"line",vector:new l(15,0)},position:new l(0,0),fixed:!0});e.push(c);const s=T({geometry:{type:"line",vector:new l(0,100)},position:new l(0,0),fixed:!0});e.push(s);const t=T({geometry:{type:"line",vector:new l(0,100)},position:new l(15,0),fixed:!0});e.push(t);for(let m=0;m<i.nbBalls;m++){const u=T({geometry:{type:"sphere",r:i.rBalls},position:new l(Math.random()*15,Math.random()*15),velocity:new l(Math.random()*15,Math.random()*15)});e.push(u)}const n=e[e.length-1];return{objects:e,sphere:n}};function Xt(i){let e,o,c,s,t,n=i[0]?"Play":"Pause",m,u,a,h="Reset",d,k,y="Add ball",b,v,f,r,$,C,_,j,I,A="Number of balls",G,M,W,B,D,L,ee="Balls radius",te,U,q,ye,F,X;return o=new Ce({props:{sketch:i[5]}}),v=new bt({props:{onShoot:i[6]}}),r=new st({props:{world:i[2]}}),{c(){e=w("div"),se(o.$$.fragment),c=P(),s=w("div"),t=w("button"),m=Q(n),u=P(),a=w("button"),a.textContent=h,d=P(),k=w("button"),k.textContent=y,b=P(),se(v.$$.fragment),f=P(),se(r.$$.fragment),$=P(),C=w("table"),_=w("tbody"),j=w("tr"),I=w("th"),I.textContent=A,G=P(),M=w("td"),W=w("input"),B=P(),D=w("tr"),L=w("th"),L.textContent=ee,te=P(),U=w("td"),q=w("input"),this.h()},l(V){e=x(V,"DIV",{class:!0});var R=S(e);re(o.$$.fragment,R),R.forEach(p),c=O(V),s=x(V,"DIV",{});var Z=S(s);t=x(Z,"BUTTON",{});var ve=S(t);m=K(ve,n),ve.forEach(p),u=O(Z),a=x(Z,"BUTTON",{"data-svelte-h":!0}),z(a)!=="svelte-tlxueg"&&(a.textContent=h),d=O(Z),k=x(Z,"BUTTON",{"data-svelte-h":!0}),z(k)!=="svelte-1xau3n8"&&(k.textContent=y),Z.forEach(p),b=O(V),re(v.$$.fragment,V),f=O(V),re(r.$$.fragment,V),$=O(V),C=x(V,"TABLE",{});var we=S(C);_=x(we,"TBODY",{});var ue=S(_);j=x(ue,"TR",{});var de=S(j);I=x(de,"TH",{"data-svelte-h":!0}),z(I)!=="svelte-eg4byi"&&(I.textContent=A),G=O(de),M=x(de,"TD",{});var be=S(M);W=x(be,"INPUT",{type:!0,min:!0}),be.forEach(p),de.forEach(p),B=O(ue),D=x(ue,"TR",{});var Te=S(D);L=x(Te,"TH",{"data-svelte-h":!0}),z(L)!=="svelte-10gtk36"&&(L.textContent=ee),te=O(Te),U=x(Te,"TD",{});var Ve=S(U);q=x(Ve,"INPUT",{type:!0,min:!0}),Ve.forEach(p),Te.forEach(p),ue.forEach(p),we.forEach(p),this.h()},h(){Y(e,"class","d-flex justify-content-center"),Y(W,"type","number"),Y(W,"min","1"),Y(q,"type","number"),Y(q,"min","1")},m(V,R){E(V,e,R),ie(o,e,null),E(V,c,R),E(V,s,R),g(s,t),g(t,m),g(s,u),g(s,a),g(s,d),g(s,k),E(V,b,R),ie(v,V,R),E(V,f,R),ie(r,V,R),E(V,$,R),E(V,C,R),g(C,_),g(_,j),g(j,I),g(j,G),g(j,M),g(M,W),ge(W,i[1].nbBalls),g(_,B),g(_,D),g(D,L),g(D,te),g(D,U),g(U,q),ge(q,i[1].rBalls),ye=!0,F||(X=[H(t,"click",i[7]),H(a,"click",i[3]),H(k,"click",i[4]),H(W,"change",i[3]),H(W,"input",i[8]),H(q,"change",i[3]),H(q,"input",i[9])],F=!0)},p(V,[R]){(!ye||R&1)&&n!==(n=V[0]?"Play":"Pause")&&ne(m,n);const Z={};R&4&&(Z.world=V[2]),r.$set(Z),R&2&&_e(W.value)!==V[1].nbBalls&&ge(W,V[1].nbBalls),R&2&&_e(q.value)!==V[1].rBalls&&ge(q,V[1].rBalls)},i(V){ye||(le(o.$$.fragment,V),le(v.$$.fragment,V),le(r.$$.fragment,V),ye=!0)},o(V){ce(o.$$.fragment,V),ce(v.$$.fragment,V),ce(r.$$.fragment,V),ye=!1},d(V){V&&(p(e),p(c),p(s),p(b),p(f),p($),p(C)),ae(o),ae(v,V),ae(r,V),F=!1,Xe(X)}}}const He=60;function Ut(i,e,o){console.clear();let c=!1,s={nbBalls:5,rBalls:.2},t,n;const m=()=>{const r=(t==null?void 0:t.gravityEnabled)??!0;o(2,t=new Pe({dimensions:new l(15,15),reporter:()=>{},enableGravity:r}));const $=Lt(s);n=$.sphere;for(const C of $.objects)t.addObject(C)},u=()=>{const r=T({geometry:{type:"sphere",r:s.rBalls},position:new l(7,7),velocity:new l(0,0)});t.addObject(r)},a=r=>typeof r=="number"?r*He:r.clone().multiplyScalar(He),h=r=>typeof r=="number"?r/He:r.clone().divideScalar(He);let d;const k=r=>{r.setup=()=>{d=r,m();const _=a(t.dimensions);r.createCanvas(_.x,_.y),r.background(0),r.fill(255),r.stroke(255),m()},r.draw=()=>{r.background(0),Ne(r)?n.fixed=!0:n.fixed=!1,c||t.step(),Ue(r,t),C(r)};let $;r.mousePressed=()=>{Ie(r)&&($=h(new l(r.mouseX,r.height-r.mouseY)),n.position.copy($))},r.mouseReleased=()=>{if(!Ie(r)||!$)return;const _=h(new l(r.mouseX,r.height-r.mouseY)),j=$.subtract(_).multiplyScalar(3);$=void 0,n.velocity.copy(j)};const C=_=>{if(!$)return;_.stroke("blue"),_.strokeWeight(2);const j=a($);_.line(j.x,_.height-j.y,_.mouseX,_.mouseY)}},y=r=>{r.multiplyScalar(1e4),t.applyForce(n,r)};ke(()=>{d==null||d.remove()});const b=()=>o(0,c=!c);function v(){s.nbBalls=_e(this.value),o(1,s)}function f(){s.rBalls=_e(this.value),o(1,s)}return[c,s,t,m,u,k,y,b,v,f]}let Rt=class extends me{constructor(e){super(),he(this,e,Ut,Xt,fe,{})}};function Gt(i){let e,o,c,s,t=i[0][i[0].length-1]+"",n,m,u,a="New ball",h,d,k;return o=new Ce({props:{sketch:i[2]}}),{c(){e=w("div"),se(o.$$.fragment),c=P(),s=w("p"),n=Q(t),m=P(),u=w("button"),u.textContent=a,this.h()},l(y){e=x(y,"DIV",{class:!0});var b=S(e);re(o.$$.fragment,b),b.forEach(p),c=O(y),s=x(y,"P",{});var v=S(s);n=K(v,t),v.forEach(p),m=O(y),u=x(y,"BUTTON",{"data-svelte-h":!0}),z(u)!=="svelte-1jwbm46"&&(u.textContent=a),this.h()},h(){Y(e,"class","d-flex justify-content-center")},m(y,b){E(y,e,b),ie(o,e,null),E(y,c,b),E(y,s,b),g(s,n),E(y,m,b),E(y,u,b),h=!0,d||(k=H(u,"click",i[1]),d=!0)},p(y,[b]){(!h||b&1)&&t!==(t=y[0][y[0].length-1]+"")&&ne(n,t)},i(y){h||(le(o.$$.fragment,y),h=!0)},o(y){ce(o.$$.fragment,y),h=!1},d(y){y&&(p(e),p(c),p(s),p(m),p(u)),ae(o),d=!1,k()}}}function Ht(i,e,o){console.clear();let c=[];const s=a=>{const h=a.objects[a.objects.length-1],d=h.position.clone().toFixed(2),k=h.velocity.clone().toFixed(2);c.push(`${a.t.toFixed(2)} - pos: ${d} - vel: ${k}`),c.length>50&&c.shift(),o(0,c)},t=new Pe({reporter:s,enableGravity:!0}),n=()=>{for(;t.objects.length;)t.objects.pop();const a=T({geometry:{type:"line",vector:new l(100,0)},position:new l(0,0),fixed:!0});t.addObject(a);for(let h=0;h<1;h++){const d=T({geometry:{type:"sphere",r:5},position:new l(20,50),velocity:new l(Math.random()*5-2.5,Math.random()*20)});t.addObject(d)}};let m;const u=a=>{a.setup=()=>{m=a,a.createCanvas(900,600),a.background(0),a.fill(255),a.stroke(255),n()},a.draw=()=>{a.background(0),t.step();for(const h of t.objects){const d=a.map(h.position.x,0,t.dimensions.x,0,a.width),k=a.map(h.position.y,0,t.dimensions.y,a.height,0);if(h.geometry.type==="sphere"&&(a.strokeWeight(h.geometry.r*2),a.point(d,k)),h.geometry.type==="line"){const y=d+a.map(h.geometry.vector.x,0,t.dimensions.x,0,a.width),b=k+a.map(h.geometry.vector.y,0,t.dimensions.y,0,a.height);a.strokeWeight(2),a.line(d,k,y,b)}}}};return ke(()=>{m==null||m.remove()}),[c,n,u]}class zt extends me{constructor(e){super(),he(this,e,Ht,Gt,fe,{})}}function qt(i){let e,o,c,s,t=i[0][i[0].length-1]+"",n,m,u,a="New ball",h,d,k;return o=new Ce({props:{sketch:i[2]}}),{c(){e=w("div"),se(o.$$.fragment),c=P(),s=w("p"),n=Q(t),m=P(),u=w("button"),u.textContent=a,this.h()},l(y){e=x(y,"DIV",{class:!0});var b=S(e);re(o.$$.fragment,b),b.forEach(p),c=O(y),s=x(y,"P",{});var v=S(s);n=K(v,t),v.forEach(p),m=O(y),u=x(y,"BUTTON",{"data-svelte-h":!0}),z(u)!=="svelte-1jwbm46"&&(u.textContent=a),this.h()},h(){Y(e,"class","d-flex justify-content-center")},m(y,b){E(y,e,b),ie(o,e,null),E(y,c,b),E(y,s,b),g(s,n),E(y,m,b),E(y,u,b),h=!0,d||(k=H(u,"click",i[1]),d=!0)},p(y,[b]){(!h||b&1)&&t!==(t=y[0][y[0].length-1]+"")&&ne(n,t)},i(y){h||(le(o.$$.fragment,y),h=!0)},o(y){ce(o.$$.fragment,y),h=!1},d(y){y&&(p(e),p(c),p(s),p(m),p(u)),ae(o),d=!1,k()}}}const ze=6;function Jt(i,e,o){console.clear();let c=[];const s=d=>{const k=d.objects[d.objects.length-1],y=k.position.clone().toFixed(2),b=k.velocity.clone().toFixed(2);c.push(`${d.t.toFixed(2)} - pos: ${y} - vel: ${b}`),c.length>50&&c.shift(),o(0,c)},t=new Pe({reporter:s,enableGravity:!0});let n,m;const u=()=>{for(;t.objects.length;)t.objects.pop();m=T({geometry:{type:"line",vector:new l(40,40)},position:new l(30,30),fixed:!0}),t.addObject(m),n=T({geometry:{type:"sphere",r:10},position:new l(20,50),velocity:new l(2.5,2.5),fixed:!0}),t.addObject(n)};let a;const h=d=>{const k=v=>typeof v=="number"?v*ze:v.clone().multiplyScalar(ze),y=v=>typeof v=="number"?v/ze:v.clone().divideScalar(ze);d.setup=()=>{a=d;const v=k(t.dimensions);d.createCanvas(v.x,v.y),d.background(0),d.fill(255),d.stroke(255),u()};let b;d.draw=()=>{if(d.background(0),t.step(),d.mouseIsPressed){const v=y(new l(d.mouseX,d.height-d.mouseY));if(b||(v.distance(n.position)<2?b="sphere":v.distance(m.position)<2?b="wallstart":v.distance(m.geometry.vector.clone().add(m.position))<2&&(b="wallend")),b==="sphere"&&n.position.copy(v),b==="wallstart"&&m.position.copy(v),b==="wallend"){const f=v.clone().subtract(m.position);m.geometry.vector.copy(f)}}else b=void 0;for(const v of t.objects.sort((f,r)=>f.geometry.type<r.geometry.type?1:-1)){d.stroke(n.data.isColliding?"red":"white");const f=d.map(v.position.x,0,t.dimensions.x,0,d.width),r=d.map(v.position.y,0,t.dimensions.y,d.height,0);if(v.geometry.type==="sphere"){const $=k(v.geometry.r*2);d.strokeWeight($),d.point(f,r)}if(v.geometry.type==="line"){const $=f+d.map(v.geometry.vector.x,0,t.dimensions.x,0,d.width),C=r-d.map(v.geometry.vector.y,0,t.dimensions.y,0,d.height);d.stroke("blue"),d.strokeWeight(2),d.line(f,r,$,C)}}}};return ke(()=>{a==null||a.remove()}),[c,u,h]}class Qt extends me{constructor(e){super(),he(this,e,Jt,qt,fe,{})}}function Kt(i){let e,o,c;return o=new Ce({props:{sketch:i[0]}}),{c(){e=w("div"),se(o.$$.fragment),this.h()},l(s){e=x(s,"DIV",{class:!0});var t=S(e);re(o.$$.fragment,t),t.forEach(p),this.h()},h(){Y(e,"class","d-flex justify-content-center")},m(s,t){E(s,e,t),ie(o,e,null),c=!0},p:$e,i(s){c||(le(o.$$.fragment,s),c=!0)},o(s){ce(o.$$.fragment,s),c=!1},d(s){s&&p(e),ae(o)}}}const qe=6;function Zt(i){console.clear();const e=new Pe({reporter:()=>{},enableGravity:!0});let o;const c=()=>{for(;e.objects.length;)e.objects.pop();o=T({geometry:{type:"sphere",r:5},position:new l(20,50),velocity:new l(Math.random()*5-2.5,Math.random()*20)}),e.addObject(o);const u=T({geometry:{type:"line",vector:new l(100,0)},position:new l(0,2),fixed:!0});e.addObject(u);const a=T({geometry:{type:"line",vector:new l(100,0)},position:new l(0,98),fixed:!0});e.addObject(a);const h=T({geometry:{type:"line",vector:new l(0,100)},position:new l(2,0),fixed:!0});e.addObject(h);const d=T({geometry:{type:"line",vector:new l(0,100)},position:new l(98,0),fixed:!0});e.addObject(d);const k=T({geometry:{type:"line",vector:new l(50,50)},position:new l(20,10),fixed:!0});e.addObject(k)},s=u=>typeof u=="number"?u*qe:u.clone().multiplyScalar(qe),t=u=>typeof u=="number"?u/qe:u.clone().divideScalar(qe);let n;const m=u=>{u.setup=()=>{n=u;const h=s(e.dimensions);u.createCanvas(h.x,h.y),u.background(0),u.fill(255),u.stroke(255),c()},u.draw=()=>{if(u.background(0),u.mouseIsPressed){o.fixed=!0;const h=t(new l(u.mouseX,u.height-u.mouseY));o.position.copy(h)}else o.fixed=!1;e.step(),Ue(u,e)};let a;u.mousePressed=()=>{a=t(new l(u.mouseX,u.height-u.mouseY))},u.mouseReleased=()=>{const h=t(new l(u.mouseX,u.height-u.mouseY)),d=a.subtract(h);o.position.copy(h),o.velocity.copy(d)}};return ke(()=>{n==null||n.remove()}),[m]}class en extends me{constructor(e){super(),he(this,e,Zt,Kt,fe,{})}}function tn(i){let e,o,c,s,t,n,m,u="Gravity",a,h,d,k="Toggle",y,b,v;return o=new Ce({props:{sketch:i[1]}}),{c(){e=w("div"),se(o.$$.fragment),c=P(),s=w("table"),t=w("tbody"),n=w("tr"),m=w("th"),m.textContent=u,a=P(),h=w("td"),d=w("button"),d.textContent=k,this.h()},l(f){e=x(f,"DIV",{class:!0});var r=S(e);re(o.$$.fragment,r),r.forEach(p),c=O(f),s=x(f,"TABLE",{});var $=S(s);t=x($,"TBODY",{});var C=S(t);n=x(C,"TR",{});var _=S(n);m=x(_,"TH",{"data-svelte-h":!0}),z(m)!=="svelte-vy75us"&&(m.textContent=u),a=O(_),h=x(_,"TD",{});var j=S(h);d=x(j,"BUTTON",{"data-svelte-h":!0}),z(d)!=="svelte-18lc94l"&&(d.textContent=k),j.forEach(p),_.forEach(p),C.forEach(p),$.forEach(p),this.h()},h(){Y(e,"class","d-flex justify-content-center")},m(f,r){E(f,e,r),ie(o,e,null),E(f,c,r),E(f,s,r),g(s,t),g(t,n),g(n,m),g(n,a),g(n,h),g(h,d),y=!0,b||(v=H(d,"click",i[2]),b=!0)},p:$e,i(f){y||(le(o.$$.fragment,f),y=!0)},o(f){ce(o.$$.fragment,f),y=!1},d(f){f&&(p(e),p(c),p(s)),ae(o),b=!1,v()}}}const Je=6;function nn(i){console.clear();const e=new Pe({reporter:()=>{},enableGravity:!0});let o;const c=()=>{for(;e.objects.length;)e.objects.pop();const a=T({geometry:{type:"line",vector:new l(100,0)},position:new l(0,0),fixed:!0});e.addObject(a);const h=T({geometry:{type:"line",vector:new l(100,0)},position:new l(0,100),fixed:!0});e.addObject(h);const d=T({geometry:{type:"line",vector:new l(0,100)},position:new l(0,0),fixed:!0});e.addObject(d);const k=T({geometry:{type:"line",vector:new l(0,100)},position:new l(100,0),fixed:!0});e.addObject(k);const y=T({geometry:{type:"line",vector:new l(50,50)},position:new l(20,10),fixed:!0});e.addObject(y),o=T({geometry:{type:"sphere",r:2},position:new l(20,50),velocity:new l(Math.random()*5-2.5,Math.random()*20)}),e.addObject(o)},s=a=>typeof a=="number"?a*Je:a.clone().multiplyScalar(Je),t=a=>typeof a=="number"?a/Je:a.clone().divideScalar(Je);let n;const m=a=>{a.setup=()=>{n=a;const d=s(e.dimensions);a.createCanvas(d.x,d.y),a.background(0),a.fill(255),a.stroke(255),c()},a.draw=()=>{if(a.background(0),Ne(a)){o.fixed=!0;const d=t(new l(a.mouseX,a.height-a.mouseY));o.position.copy(d)}else o.fixed=!1;e.step(),Ue(a,e)};let h;a.mousePressed=()=>{Ie(a)&&(h=t(new l(a.mouseX,a.height-a.mouseY)))},a.mouseReleased=()=>{if(!Ie(a))return;const d=t(new l(a.mouseX,a.height-a.mouseY)),k=h.subtract(d);o.position.copy(d),o.velocity.copy(k)}};return ke(()=>{n==null||n.remove()}),[e,m,()=>e.toggleGravity()]}class on extends me{constructor(e){super(),he(this,e,nn,tn,fe,{})}}const sn=()=>{const i=[],e=T({geometry:{type:"line",vector:new l(15,0)},position:new l(0,0),fixed:!0});i.push(e);const o=T({geometry:{type:"line",vector:new l(0,100)},position:new l(0,0),fixed:!0});i.push(o);const c=T({geometry:{type:"line",vector:new l(0,100)},position:new l(15,0),fixed:!0});i.push(c);const s=T({geometry:{type:"line",vector:new l(3,-3)},position:new l(3.5,8),fixed:!0});i.push(s);const t=T({geometry:{type:"line",vector:new l(3,3)},position:new l(3.5,5),fixed:!0});i.push(t);const n=T({geometry:{type:"line",vector:new l(6,0)},position:new l(2,2),fixed:!0});i.push(n);const m=T({geometry:{type:"line",vector:new l(4,0)},position:new l(3,2.5),fixed:!0});i.push(m);const u=T({geometry:{type:"line",vector:new l(2,0)},position:new l(4,3),fixed:!0});i.push(u);const a=T({geometry:{type:"line",vector:new l(.6,0)},position:new l(4.7,3.5),fixed:!0});i.push(a);const h=T({geometry:{type:"line",vector:new l(1,0)},position:new l(10,10.1),fixed:!0});i.push(h);const d=T({geometry:{type:"line",vector:new l(0,-4)},position:new l(11,10),fixed:!0});i.push(d);const k=T({geometry:{type:"line",vector:new l(0,-4)},position:new l(11.5,10),fixed:!0});i.push(k);const y=T({geometry:{type:"line",vector:new l(0,-4)},position:new l(12,10),fixed:!0});i.push(y);const b=T({geometry:{type:"line",vector:new l(1,0)},position:new l(12,10.1),fixed:!0});i.push(b);for(let f=.2;f<.5;f+=.1)for(let r=0;r<10;r++){const $=T({geometry:{type:"line",vector:new l(0,3)},position:new l(9+r*f,1),fixed:!0});i.push($)}const v=T({geometry:{type:"sphere",r:.1},position:new l(5,10),velocity:new l(0,0)});return i.push(v),{objects:i,sphere:v}};function rn(i){let e,o,c,s,t,n=i[0]?"Disable":"Enable",m,u,a,h,d=i[1]?"Play":"Pause",k,y,b,v="Reset",f,r,$,C,_,j,I,A,G,M="Simulation time/Frame duration",W,B,D=i[2].t+"",L,ee,te,U=i[2].frameTime+"",q,ye,F,X,V="Sphere position",R,Z,ve=i[2].spherePos.x.toFixed(2)+"",we,ue,de,be=i[2].spherePos.y.toFixed(2)+"",Te,Ve,Se,Be,rt="Sphere velocity",Ke,Ye,Ae=i[2].sphereVel.x.toFixed(2)+"",Re,Ze,Me,We=i[2].sphereVel.y.toFixed(2)+"",Ge,pe,et,it;return o=new Ce({props:{sketch:i[5]}}),r=new bt({props:{onShoot:i[6]}}),C=new st({props:{world:i[3]}}),{c(){e=w("div"),se(o.$$.fragment),c=P(),s=w("div"),t=w("button"),m=Q(n),u=Q(" pause on collision"),a=P(),h=w("button"),k=Q(d),y=P(),b=w("button"),b.textContent=v,f=P(),se(r.$$.fragment),$=P(),se(C.$$.fragment),_=P(),j=w("table"),I=w("tbody"),A=w("tr"),G=w("th"),G.textContent=M,W=P(),B=w("td"),L=Q(D),ee=P(),te=w("td"),q=Q(U),ye=P(),F=w("tr"),X=w("th"),X.textContent=V,R=P(),Z=w("td"),we=Q(ve),ue=P(),de=w("td"),Te=Q(be),Ve=P(),Se=w("tr"),Be=w("th"),Be.textContent=rt,Ke=P(),Ye=w("td"),Re=Q(Ae),Ze=P(),Me=w("td"),Ge=Q(We),this.h()},l(N){e=x(N,"DIV",{class:!0});var J=S(e);re(o.$$.fragment,J),J.forEach(p),c=O(N),s=x(N,"DIV",{});var Ee=S(s);t=x(Ee,"BUTTON",{});var tt=S(t);m=K(tt,n),u=K(tt," pause on collision"),tt.forEach(p),a=O(Ee),h=x(Ee,"BUTTON",{});var lt=S(h);k=K(lt,d),lt.forEach(p),y=O(Ee),b=x(Ee,"BUTTON",{"data-svelte-h":!0}),z(b)!=="svelte-tlxueg"&&(b.textContent=v),Ee.forEach(p),f=O(N),re(r.$$.fragment,N),$=O(N),re(C.$$.fragment,N),_=O(N),j=x(N,"TABLE",{});var ct=S(j);I=x(ct,"TBODY",{});var Le=S(I);A=x(Le,"TR",{});var De=S(A);G=x(De,"TH",{"data-svelte-h":!0}),z(G)!=="svelte-rirgm4"&&(G.textContent=M),W=O(De),B=x(De,"TD",{});var at=S(B);L=K(at,D),at.forEach(p),ee=O(De),te=x(De,"TD",{});var ut=S(te);q=K(ut,U),ut.forEach(p),De.forEach(p),ye=O(Le),F=x(Le,"TR",{});var Oe=S(F);X=x(Oe,"TH",{"data-svelte-h":!0}),z(X)!=="svelte-1y1nif6"&&(X.textContent=V),R=O(Oe),Z=x(Oe,"TD",{});var dt=S(Z);we=K(dt,ve),dt.forEach(p),ue=O(Oe),de=x(Oe,"TD",{});var ft=S(de);Te=K(ft,be),ft.forEach(p),Ve=O(Oe),Oe.forEach(p),Se=x(Le,"TR",{});var Fe=S(Se);Be=x(Fe,"TH",{"data-svelte-h":!0}),z(Be)!=="svelte-1uw1fs2"&&(Be.textContent=rt),Ke=O(Fe),Ye=x(Fe,"TD",{});var mt=S(Ye);Re=K(mt,Ae),mt.forEach(p),Ze=O(Fe),Me=x(Fe,"TD",{});var ht=S(Me);Ge=K(ht,We),ht.forEach(p),Fe.forEach(p),Le.forEach(p),ct.forEach(p),this.h()},h(){Y(e,"class","d-flex justify-content-center")},m(N,J){E(N,e,J),ie(o,e,null),E(N,c,J),E(N,s,J),g(s,t),g(t,m),g(t,u),g(s,a),g(s,h),g(h,k),g(s,y),g(s,b),E(N,f,J),ie(r,N,J),E(N,$,J),ie(C,N,J),E(N,_,J),E(N,j,J),g(j,I),g(I,A),g(A,G),g(A,W),g(A,B),g(B,L),g(A,ee),g(A,te),g(te,q),g(I,ye),g(I,F),g(F,X),g(F,R),g(F,Z),g(Z,we),g(F,ue),g(F,de),g(de,Te),g(F,Ve),g(I,Se),g(Se,Be),g(Se,Ke),g(Se,Ye),g(Ye,Re),g(Se,Ze),g(Se,Me),g(Me,Ge),pe=!0,et||(it=[H(t,"click",i[7]),H(h,"click",i[8]),H(b,"click",i[4])],et=!0)},p(N,[J]){(!pe||J&1)&&n!==(n=N[0]?"Disable":"Enable")&&ne(m,n),(!pe||J&2)&&d!==(d=N[1]?"Play":"Pause")&&ne(k,d);const Ee={};J&8&&(Ee.world=N[3]),C.$set(Ee),(!pe||J&4)&&D!==(D=N[2].t+"")&&ne(L,D),(!pe||J&4)&&U!==(U=N[2].frameTime+"")&&ne(q,U),(!pe||J&4)&&ve!==(ve=N[2].spherePos.x.toFixed(2)+"")&&ne(we,ve),(!pe||J&4)&&be!==(be=N[2].spherePos.y.toFixed(2)+"")&&ne(Te,be),(!pe||J&4)&&Ae!==(Ae=N[2].sphereVel.x.toFixed(2)+"")&&ne(Re,Ae),(!pe||J&4)&&We!==(We=N[2].sphereVel.y.toFixed(2)+"")&&ne(Ge,We)},i(N){pe||(le(o.$$.fragment,N),le(r.$$.fragment,N),le(C.$$.fragment,N),pe=!0)},o(N){ce(o.$$.fragment,N),ce(r.$$.fragment,N),ce(C.$$.fragment,N),pe=!1},d(N){N&&(p(e),p(c),p(s),p(f),p($),p(_),p(j)),ae(o),ae(r,N),ae(C,N),et=!1,Xe(it)}}}const Qe=60;function ln(i,e,o){console.clear();let c=!1,s=!1,t={t:"0",frameTime:"0",spherePos:new l(0,0),sphereVel:new l(0,0),ballIsColliding:!1},n,m;const u=()=>{o(3,n=new Pe({dimensions:new l(15,15),reporter:r=>{var $;o(2,t.t=($=r==null?void 0:r.t)==null?void 0:$.toFixed(1),t),t.spherePos.copy(m.position).unfloat(),t.sphereVel.copy(m.velocity).unfloat(),o(2,t.frameTime=r.frameTime.toFixed(2),t),o(2,t),o(2,t.ballIsColliding=m.data.isColliding,t),c&&m.data.isColliding&&!s&&o(1,s=!0)},enableGravity:!0}));const f=sn();m=f.sphere;for(const r of f.objects)n.addObject(r)},a=f=>typeof f=="number"?f*Qe:f.clone().multiplyScalar(Qe),h=f=>typeof f=="number"?f/Qe:f.clone().divideScalar(Qe);let d;const k=f=>{f.setup=()=>{d=f,u();const C=a(n.dimensions);f.createCanvas(C.x,C.y),f.background(0),f.fill(255),f.stroke(255),u()},f.draw=()=>{f.background(0),Ne(f)?m.fixed=!0:m.fixed=!1,s||n.step(),Ue(f,n),$(f)};let r;f.mousePressed=()=>{Ie(f)&&(r=h(new l(f.mouseX,f.height-f.mouseY)),m.position.copy(r))},f.mouseReleased=()=>{if(!Ie(f)||!r)return;const C=h(new l(f.mouseX,f.height-f.mouseY)),_=r.subtract(C).multiplyScalar(3);r=void 0,m.velocity.copy(_)};const $=C=>{if(!r)return;C.stroke("blue"),C.strokeWeight(2);const _=a(r);C.line(_.x,C.height-_.y,C.mouseX,C.mouseY)}},y=f=>{f.multiplyScalar(1e4),n.applyForce(m,f)};return ke(()=>{d==null||d.remove()}),[c,s,t,n,u,k,y,()=>o(0,c=!c),()=>o(1,s=!s)]}let cn=class extends me{constructor(e){super(),he(this,e,ln,rn,fe,{})}};const an=()=>{const i=[],e=T({geometry:{type:"line",vector:new l(15,0)},position:new l(0,0),fixed:!0});i.push(e);const o=T({geometry:{type:"line",vector:new l(0,100)},position:new l(0,0),fixed:!0});i.push(o);const c=T({geometry:{type:"line",vector:new l(0,100)},position:new l(15,0),fixed:!0});i.push(c);const s=T({geometry:{type:"line",vector:new l(3,-3)},position:new l(3.5,8),fixed:!0});i.push(s);const t=T({geometry:{type:"line",vector:new l(3,3)},position:new l(3.5,5),fixed:!0});i.push(t);const n=T({geometry:{type:"line",vector:new l(6,0)},position:new l(2,2),fixed:!0});i.push(n);const m=T({geometry:{type:"line",vector:new l(4,0)},position:new l(3,2.5),fixed:!0});i.push(m);const u=T({geometry:{type:"line",vector:new l(2,0)},position:new l(4,3),fixed:!0});i.push(u);const a=T({geometry:{type:"line",vector:new l(.6,0)},position:new l(4.7,3.5),fixed:!0});i.push(a);const h=T({geometry:{type:"line",vector:new l(1,0)},position:new l(10,10.1),fixed:!0});i.push(h);const d=T({geometry:{type:"line",vector:new l(0,-4)},position:new l(11,10),fixed:!0});i.push(d);const k=T({geometry:{type:"line",vector:new l(0,-4)},position:new l(11.5,10),fixed:!0});i.push(k);const y=T({geometry:{type:"line",vector:new l(0,-4)},position:new l(12,10),fixed:!0});i.push(y);const b=T({geometry:{type:"line",vector:new l(1,0)},position:new l(12,10.1),fixed:!0});i.push(b);for(let v=.2;v<.5;v+=.1)for(let f=0;f<10;f++){const r=T({geometry:{type:"line",vector:new l(0,3)},position:new l(9+f*v,1),fixed:!0});i.push(r)}return{objects:i}};function un(i){let e,o,c,s,t,n=i[0]?"Disable":"Enable",m,u,a,h,d=i[1]?"Play":"Pause",k,y,b,v="Reset",f,r,$,C,_,j,I,A="Simulation time/Frame duration",G,M,W=i[2].t+"",B,D,L,ee=i[2].frameTime+"",te,U,q,ye;return o=new Ce({props:{sketch:i[5]}}),r=new st({props:{world:i[3]}}),{c(){e=w("div"),se(o.$$.fragment),c=P(),s=w("div"),t=w("button"),m=Q(n),u=Q(" pause on collision"),a=P(),h=w("button"),k=Q(d),y=P(),b=w("button"),b.textContent=v,f=P(),se(r.$$.fragment),$=P(),C=w("table"),_=w("tbody"),j=w("tr"),I=w("th"),I.textContent=A,G=P(),M=w("td"),B=Q(W),D=P(),L=w("td"),te=Q(ee),this.h()},l(F){e=x(F,"DIV",{class:!0});var X=S(e);re(o.$$.fragment,X),X.forEach(p),c=O(F),s=x(F,"DIV",{});var V=S(s);t=x(V,"BUTTON",{});var R=S(t);m=K(R,n),u=K(R," pause on collision"),R.forEach(p),a=O(V),h=x(V,"BUTTON",{});var Z=S(h);k=K(Z,d),Z.forEach(p),y=O(V),b=x(V,"BUTTON",{"data-svelte-h":!0}),z(b)!=="svelte-tlxueg"&&(b.textContent=v),V.forEach(p),f=O(F),re(r.$$.fragment,F),$=O(F),C=x(F,"TABLE",{});var ve=S(C);_=x(ve,"TBODY",{});var we=S(_);j=x(we,"TR",{});var ue=S(j);I=x(ue,"TH",{"data-svelte-h":!0}),z(I)!=="svelte-rirgm4"&&(I.textContent=A),G=O(ue),M=x(ue,"TD",{});var de=S(M);B=K(de,W),de.forEach(p),D=O(ue),L=x(ue,"TD",{});var be=S(L);te=K(be,ee),be.forEach(p),ue.forEach(p),we.forEach(p),ve.forEach(p),this.h()},h(){Y(e,"class","d-flex justify-content-center")},m(F,X){E(F,e,X),ie(o,e,null),E(F,c,X),E(F,s,X),g(s,t),g(t,m),g(t,u),g(s,a),g(s,h),g(h,k),g(s,y),g(s,b),E(F,f,X),ie(r,F,X),E(F,$,X),E(F,C,X),g(C,_),g(_,j),g(j,I),g(j,G),g(j,M),g(M,B),g(j,D),g(j,L),g(L,te),U=!0,q||(ye=[H(t,"click",i[6]),H(h,"click",i[7]),H(b,"click",i[4])],q=!0)},p(F,[X]){(!U||X&1)&&n!==(n=F[0]?"Disable":"Enable")&&ne(m,n),(!U||X&2)&&d!==(d=F[1]?"Play":"Pause")&&ne(k,d);const V={};X&8&&(V.world=F[3]),r.$set(V),(!U||X&4)&&W!==(W=F[2].t+"")&&ne(B,W),(!U||X&4)&&ee!==(ee=F[2].frameTime+"")&&ne(te,ee)},i(F){U||(le(o.$$.fragment,F),le(r.$$.fragment,F),U=!0)},o(F){ce(o.$$.fragment,F),ce(r.$$.fragment,F),U=!1},d(F){F&&(p(e),p(c),p(s),p(f),p($),p(C)),ae(o),ae(r,F),q=!1,Xe(ye)}}}const vt=60;function dn(i,e,o){console.clear();let c=!1,s=!1,t={t:"0",frameTime:"0"},n;const m=()=>{clearInterval(d),d=setInterval(u,100),o(3,n=new Pe({dimensions:new l(15,15),reporter:f=>{var r;o(2,t.t=(r=f==null?void 0:f.t)==null?void 0:r.toFixed(1),t),o(2,t.frameTime=f.frameTime.toFixed(2),t),o(2,t)},enableGravity:!0}));const v=an();for(const f of v.objects)n.addObject(f)},u=()=>{console.log("add ball");const v=Math.random()*n.dimensions.x,f=Math.random()*n.dimensions.y,r=-5+Math.random()*10,$=-5+Math.random()*10,C=T({geometry:{type:"sphere",r:.1},position:new l(v,f),velocity:new l(r,$)});n.addObject(C)},a=v=>typeof v=="number"?v*vt:v.clone().multiplyScalar(vt);let h,d;const k=v=>{v.setup=()=>{h=v,m();const f=a(n.dimensions);v.createCanvas(f.x,f.y),v.background(0),v.fill(255),v.stroke(255),m()},v.draw=()=>{v.background(0),s||n.step(),Ue(v,n)}};return ke(()=>{h==null||h.remove(),clearInterval(d)}),[c,s,t,n,m,k,()=>o(0,c=!c),()=>o(1,s=!s)]}class fn extends me{constructor(e){super(),he(this,e,dn,un,fe,{})}}function mn(i){let e,o,c;return o=new Ce({props:{sketch:i[0]}}),{c(){e=w("div"),se(o.$$.fragment),this.h()},l(s){e=x(s,"DIV",{class:!0});var t=S(e);re(o.$$.fragment,t),t.forEach(p),this.h()},h(){Y(e,"class","d-flex justify-content-center")},m(s,t){E(s,e,t),ie(o,e,null),c=!0},p:$e,i(s){c||(le(o.$$.fragment,s),c=!0)},o(s){ce(o.$$.fragment,s),c=!1},d(s){s&&p(e),ae(o)}}}const je=6;function hn(i){console.clear();let e;const o=T({geometry:{type:"sphere",r:10},position:new l(30,50),velocity:new l(0,0)}),c=T({geometry:{type:"line",vector:new l(80,0)},position:new l(10,70),fixed:!0}),s=T({geometry:{type:"line",vector:new l(80,0)},position:new l(10,30),fixed:!0}),t=n=>{const m=new l(100,100),u=oe(m,je);let a;n.setup=()=>{e=n,n.createCanvas(u.x,u.y),n.noFill(),a=new Pe({dimensions:m,enableGravity:!1,enableCollisions:!0}),a.addObject(c),a.addObject(s),a.addObject(o)};let h;n.draw=()=>{if(n.background(0),!Ne(n))h=void 0;else{const C=ot(new l(n.mouseX,n.height-n.mouseY),je);if(h||(C.distance(o.position)<=o.geometry.r?h="sphere":C.distance(o.position.clone().add(o.velocity))<=6?h="spherevelocity":C.distance(c.position)<=6?h="line1start":C.distance(c.geometry.vector.clone().add(c.position))<=6?h="line1end":C.distance(s.position)<=6?h="line2start":C.distance(s.geometry.vector.clone().add(s.position))<=6&&(h="line2end")),h==="sphere")o.position.copy(C);else if(h==="spherevelocity"){const _=C.clone().subtract(o.position);o.velocity.copy(_)}else if(h==="line1start")c.position.copy(C);else if(h==="line1end"){const _=C.clone().subtract(c.position);c.geometry.vector.copy(_)}else if(h==="line2start")s.position.copy(C);else if(h==="line2end"){const _=C.clone().subtract(s.position);s.geometry.vector.copy(_)}}a.step(),n.stroke(255),n.noFill();const d=oe(o.position,je);n.circle(d.x,n.height-d.y,2*o.geometry.r*je),n.stroke(255);const k=oe(o.velocity,je);n.line(d.x,n.height-d.y,d.x+k.x,n.height-(d.y+k.y)),n.stroke(255);let{x:y,y:b}=oe(c.position,je);const v=oe(c.geometry.vector,je);n.line(y,n.height-b,y+v.x,n.height-(b+v.y)),n.stroke(255);let{x:f,y:r}=oe(s.position,je);const $=oe(s.geometry.vector,je);n.line(f,n.height-r,f+$.x,n.height-(r+$.y))}};return ke(()=>{e==null||e.remove()}),[t]}class yn extends me{constructor(e){super(),he(this,e,hn,mn,fe,{})}}function pn(i){let e,o,c;return o=new Ce({props:{sketch:i[0]}}),{c(){e=w("div"),se(o.$$.fragment),this.h()},l(s){e=x(s,"DIV",{class:!0});var t=S(e);re(o.$$.fragment,t),t.forEach(p),this.h()},h(){Y(e,"class","d-flex justify-content-center")},m(s,t){E(s,e,t),ie(o,e,null),c=!0},p:$e,i(s){c||(le(o.$$.fragment,s),c=!0)},o(s){ce(o.$$.fragment,s),c=!1},d(s){s&&p(e),ae(o)}}}const xe=6;function gn(i){console.clear();let e;const o=T({geometry:{type:"sphere",r:10},position:new l(30,50),velocity:new l(15,15)}),c=T({geometry:{type:"sphere",r:10},position:new l(70,50),velocity:new l(0,45)}),s=new Ct,t=n=>{const m=new l(100,100),u=oe(m,xe);n.setup=()=>{e=n,n.createCanvas(u.x,u.y),n.noFill()};let a;n.draw=()=>{if(n.background(0),!Ne(n))a=void 0;else{const f=ot(new l(n.mouseX,n.height-n.mouseY),xe);if(a||(f.distance(o.position)<=o.geometry.r?a="sphere":f.distance(o.position.clone().add(o.velocity))<=6?a="spherevelocity":f.distance(c.position)<=c.geometry.r?a="sphere2":f.distance(c.position.clone().add(c.velocity))<=6&&(a="sphere2velocity")),a==="sphere")o.position.copy(f);else if(a==="spherevelocity"){const r=f.clone().subtract(o.position);o.velocity.copy(r)}else if(a==="sphere2")c.position.copy(f);else if(a==="sphere2velocity"){const r=f.clone().subtract(c.position);c.velocity.copy(r)}}const{intersection:h,bouncedVelocity:d}=s.apply(o,c);for(let f=0;f<10;f++){const{positionCorrection:r}=s.apply(o,c);r&&(o.position.add(r.multiplyScalar(.5)),c.position.subtract(r.multiplyScalar(.5)))}n.stroke(255),n.noFill();const k=oe(o.position,xe);n.circle(k.x,n.height-k.y,2*o.geometry.r*xe),n.stroke(255);const y=oe(o.velocity,xe);n.line(k.x,n.height-k.y,k.x+y.x,n.height-(k.y+y.y)),n.stroke(255),n.noFill();const b=oe(c.position,xe);n.circle(b.x,n.height-b.y,2*c.geometry.r*xe),n.stroke(255);const v=oe(c.velocity,xe);if(n.line(b.x,n.height-b.y,b.x+v.x,n.height-(b.y+v.y)),h){n.stroke("#54d7ff"),n.fill("#54d7ff");const f=oe(h,xe);n.circle(f.x,n.height-f.y,5)}if(d){n.stroke("green"),n.fill("green");const f=oe(d,xe);n.line(k.x,n.height-k.y,k.x+f.x,n.height-(k.y+f.y))}}};return ke(()=>{e==null||e.remove()}),[t]}class vn extends me{constructor(e){super(),he(this,e,gn,pn,fe,{})}}function bn(i){let e,o="<span>This page is a list of engine tests. They use the actual engine and allow me to setup different situations and check manually for regressions and bugs.</span> <br/> <span>Use the selection menu to see the different pages</span>",c,s,t,n,m;return n=new $t({props:{tabs:i[0]}}),{c(){e=w("div"),e.innerHTML=o,c=P(),s=w("br"),t=P(),se(n.$$.fragment)},l(u){e=x(u,"DIV",{"data-svelte-h":!0}),z(e)!=="svelte-11mzr87"&&(e.innerHTML=o),c=O(u),s=x(u,"BR",{}),t=O(u),re(n.$$.fragment,u)},m(u,a){E(u,e,a),E(u,c,a),E(u,s,a),E(u,t,a),ie(n,u,a),m=!0},p:$e,i(u){m||(le(n.$$.fragment,u),m=!0)},o(u){ce(n.$$.fragment,u),m=!1},d(u){u&&(p(e),p(c),p(s),p(t)),ae(n,u)}}}function wn(i){return[[{label:"Fireworks",value:Nt},{label:"Ball pool",value:Rt},{label:"Sphere Sphere Collider",value:vn},{label:"Line Sphere Collider",value:yn},{label:"Perfs - Multiple balls",value:fn},{label:"Playground - Engine settings",value:cn},{label:"Dynamics + collisions - 1",value:on},{label:"Dynamics + collisions - 2",value:en},{label:"Sphere Line - pull apart",value:Qt},{label:"One ball bounce",value:zt}]]}class Pn extends me{constructor(e){super(),he(this,e,wn,bn,fe,{})}}export{Pn as component};
