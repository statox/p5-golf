var ht=Object.defineProperty;var yt=(f,e,t)=>e in f?ht(f,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):f[e]=t;var q=(f,e,t)=>(yt(f,typeof e!="symbol"?e+"":e,t),t);import{s as oe,f as w,a as E,l as B,g as _,h as k,d as g,c as O,m as I,u as H,j as $e,i as C,y as v,L as te,n as A,M as we,z as qe,O as pt,e as Fe,E as ut,q as lt}from"../chunks/scheduler.e421d989.js";import{S as ne,i as se,b as G,d as M,m as Y,a as W,t as V,e as L,g as He,c as ze}from"../chunks/index.52486247.js";import{e as Ve}from"../chunks/each.e59479a4.js";import{V as y,P as _e,m as mt,a as Ne,T as gt,b as bt,c as vt,d as $t}from"../chunks/p5utils.fe4d08ff.js";const wt=(f,e)=>{if(e.geometry.type!=="sphere"||f.geometry.type!=="line")throw new Error("invalid geometry");const t=_t(f,e);if(!t){e.data.isColliding=!1;return}e.data.isColliding=!0;const s=.8,i=.2,c=f.position.x,n=f.position.y,d=f.position.x+f.geometry.vector.x,a=f.position.y+f.geometry.vector.y,o=d-c,r=a-n,l=new y(-r,o),h=new y(r,-o),u=t.clone().add(l),p=t.clone().add(h);let b;e.position.distanceSq(u)<e.position.distanceSq(p)?b=l:b=h;const m=b.clone().normalize(),x=e.velocity.clone(),$=m.multiplyScalar(x.dot(m)),j=x.subtract($),P=s,F=i;return j.multiplyScalar(1-F).subtract($.multiplyScalar(P))},_t=(f,e)=>{if(e.geometry.type!=="sphere"||f.geometry.type!=="line")throw new Error("invalid geometry");const t=f.position.clone(),s=f.position.clone().add(f.geometry.vector),i=e.position.clone(),c=e.geometry.r,n=s.clone().subtract(t),d=t.clone().subtract(i),a=n.dot(n),o=d.dot(n)*2,r=d.dot(d)-c*c;let l=o*o-4*a*r;if(l<0)return;l=Math.sqrt(l);const h=(-o-l)/(2*a),u=(-o+l)/(2*a);if(h>=0&&h<=1)return t.add(n.multiplyScalar(h));if(u>=0&&u<=1)return t.add(n.multiplyScalar(u))};class xe{constructor(e){q(this,"gravityEnabled");q(this,"dimensions");q(this,"t");q(this,"objects");q(this,"gravity",new y(0,-9.8));q(this,"antiGravity",new y(0,9.8));q(this,"drag",.001);q(this,"reporter");this.gravityEnabled=e.enableGravity??!0,this.dimensions=e.dimensions||new y(100,100),this.objects=[],this.t=0,this.reporter=e.reporter||console.log}toggleGravity(){this.gravityEnabled=!this.gravityEnabled}addObject(e){this.objects.push(e)}applyGravity(e){e.acceleration.push(this.gravity)}applyDynamics(e,t){this.gravityEnabled&&this.applyGravity(t);const s=new y(0,0);for(;t.acceleration.length;){const c=t.acceleration.pop();c&&s.add(c)}s.divideScalar(t.m);const i=1-this.drag;t.velocity.add(s.multiplyScalar(e)).multiplyScalar(i),t.position.add(t.velocity.clone().multiplyScalar(e))}applyCollisions(e){const t=this.objects.find(n=>n.geometry.type==="sphere"),s=this.objects.filter(n=>n.geometry.type==="line");if(!t)throw new Error("No sphere in world");const i=new y(0,0);let c=0;for(const n of s){const d=wt(n,t);d&&(c++,i.add(d))}c>0&&(i.divideScalar(c),t.velocity.copy(i),t.position.add(t.velocity.clone().multiplyScalar(e)),t.acceleration.push(this.gravity.clone().multiplyScalar(-1)))}_step(e){this.applyCollisions(e);for(const t of this.objects)t.fixed||this.applyDynamics(e,t)}stepFixedDt(){const t=Date.now()/1e3;ve=t-be,be=t,this._step(.01),this.t+=.01,this.reporter&&this.reporter({...this,frameTime:ve})}stepAccumulator(){const t=Date.now()/1e3;be===0&&(be=t),ve=t-be,Ue+=ve;let s=0;for(;Ue>=.01&&s<5;)s++,this._step(.01),Ue-=.01,this.t+=.01,this.reporter&&this.reporter({...this,frameTime:ve})}step(){this.stepAccumulator()}}let be=0,ve=0,Ue=0;const S=f=>{var e,t;return{geometry:f.geometry,m:f.mass??1,position:((e=f.position)==null?void 0:e.clone())??new y(0,0),velocity:((t=f.velocity)==null?void 0:t.clone())??new y(0,0),acceleration:[],fixed:f.fixed??!1,data:{isColliding:!1}}};function xt(f){let e,t,s,i,c=f[0][f[0].length-1]+"",n,d,a,o="New ball",r,l,h;return t=new _e({props:{sketch:f[2]}}),{c(){e=w("div"),G(t.$$.fragment),s=E(),i=w("p"),n=B(c),d=E(),a=w("button"),a.textContent=o,this.h()},l(u){e=_(u,"DIV",{class:!0});var p=k(e);M(t.$$.fragment,p),p.forEach(g),s=O(u),i=_(u,"P",{});var b=k(i);n=I(b,c),b.forEach(g),d=O(u),a=_(u,"BUTTON",{"data-svelte-h":!0}),H(a)!=="svelte-1jwbm46"&&(a.textContent=o),this.h()},h(){$e(e,"class","d-flex justify-content-center")},m(u,p){C(u,e,p),Y(t,e,null),C(u,s,p),C(u,i,p),v(i,n),C(u,d,p),C(u,a,p),r=!0,l||(h=te(a,"click",f[1]),l=!0)},p(u,[p]){(!r||p&1)&&c!==(c=u[0][u[0].length-1]+"")&&A(n,c)},i(u){r||(W(t.$$.fragment,u),r=!0)},o(u){V(t.$$.fragment,u),r=!1},d(u){u&&(g(e),g(s),g(i),g(d),g(a)),L(t),l=!1,h()}}}function Tt(f,e,t){console.clear();let s=[];const i=o=>{const r=o.objects[o.objects.length-1],l=r.position.clone().toFixed(2),h=r.velocity.clone().toFixed(2);s.push(`${o.t.toFixed(2)} - pos: ${l} - vel: ${h}`),s.length>50&&s.shift(),t(0,s)},c=new xe({reporter:i,enableGravity:!0}),n=()=>{for(;c.objects.length;)c.objects.pop();const o=S({geometry:{type:"line",vector:new y(100,0)},position:new y(0,0),fixed:!0});c.addObject(o);for(let r=0;r<1;r++){const l=S({geometry:{type:"sphere",r:5},position:new y(20,50),velocity:new y(Math.random()*5-2.5,Math.random()*20)});c.addObject(l)}};let d;const a=o=>{o.setup=()=>{d=o,o.createCanvas(900,600),o.background(0),o.fill(255),o.stroke(255),n()},o.draw=()=>{o.background(0),c.step();for(const r of c.objects){const l=o.map(r.position.x,0,c.dimensions.x,0,o.width),h=o.map(r.position.y,0,c.dimensions.y,o.height,0);if(r.geometry.type==="sphere"&&(o.strokeWeight(r.geometry.r*2),o.point(l,h)),r.geometry.type==="line"){const u=l+o.map(r.geometry.vector.x,0,c.dimensions.x,0,o.width),p=h+o.map(r.geometry.vector.y,0,c.dimensions.y,0,o.height);o.strokeWeight(2),o.line(l,h,u,p)}}}};return we(()=>{d==null||d.remove()}),[s,n,a]}class kt extends ne{constructor(e){super(),se(this,e,Tt,xt,oe,{})}}function jt(f){let e,t,s,i,c=f[0][f[0].length-1]+"",n,d,a,o="New ball",r,l,h;return t=new _e({props:{sketch:f[2]}}),{c(){e=w("div"),G(t.$$.fragment),s=E(),i=w("p"),n=B(c),d=E(),a=w("button"),a.textContent=o,this.h()},l(u){e=_(u,"DIV",{class:!0});var p=k(e);M(t.$$.fragment,p),p.forEach(g),s=O(u),i=_(u,"P",{});var b=k(i);n=I(b,c),b.forEach(g),d=O(u),a=_(u,"BUTTON",{"data-svelte-h":!0}),H(a)!=="svelte-1jwbm46"&&(a.textContent=o),this.h()},h(){$e(e,"class","d-flex justify-content-center")},m(u,p){C(u,e,p),Y(t,e,null),C(u,s,p),C(u,i,p),v(i,n),C(u,d,p),C(u,a,p),r=!0,l||(h=te(a,"click",f[1]),l=!0)},p(u,[p]){(!r||p&1)&&c!==(c=u[0][u[0].length-1]+"")&&A(n,c)},i(u){r||(W(t.$$.fragment,u),r=!0)},o(u){V(t.$$.fragment,u),r=!1},d(u){u&&(g(e),g(s),g(i),g(d),g(a)),L(t),l=!1,h()}}}const Oe=6;function Ct(f,e,t){console.clear();let s=[];const i=l=>{const h=l.objects[l.objects.length-1],u=h.position.clone().toFixed(2),p=h.velocity.clone().toFixed(2);s.push(`${l.t.toFixed(2)} - pos: ${u} - vel: ${p}`),s.length>50&&s.shift(),t(0,s)},c=new xe({reporter:i,enableGravity:!0});let n,d;const a=()=>{for(;c.objects.length;)c.objects.pop();d=S({geometry:{type:"line",vector:new y(80,20)},position:new y(10,20),fixed:!0}),c.addObject(d),n=S({geometry:{type:"sphere",r:10},position:new y(20,50),velocity:new y(2.5,2.5),fixed:!0}),c.addObject(n)};let o;const r=l=>{const h=b=>typeof b=="number"?b*Oe:b.clone().multiplyScalar(Oe),u=b=>typeof b=="number"?b/Oe:b.clone().divideScalar(Oe);l.setup=()=>{o=l;const b=h(c.dimensions);l.createCanvas(b.x,b.y),l.background(0),l.fill(255),l.stroke(255),a()};let p;l.draw=()=>{if(l.background(0),c.step(),l.mouseIsPressed){const b=u(new y(l.mouseX,l.height-l.mouseY));if(p||(b.distance(n.position)<2?p="sphere":b.distance(d.position)<2?p="wallstart":b.distance(d.geometry.vector.clone().add(d.position))<2&&(p="wallend")),p==="sphere"&&n.position.copy(b),p==="wallstart"&&d.position.copy(b),p==="wallend"){const m=b.clone().subtract(d.position);d.geometry.vector.copy(m)}}else p=void 0;for(const b of c.objects){l.stroke(n.data.isColliding?"red":"white");const m=l.map(b.position.x,0,c.dimensions.x,0,l.width),x=l.map(b.position.y,0,c.dimensions.y,l.height,0);if(b.geometry.type==="sphere"){const $=h(b.geometry.r*2);l.strokeWeight($),l.point(m,x)}if(b.geometry.type==="line"){const $=m+l.map(b.geometry.vector.x,0,c.dimensions.x,0,l.width),j=x-l.map(b.geometry.vector.y,0,c.dimensions.y,0,l.height);l.strokeWeight(2),l.line(m,x,$,j)}}}};return we(()=>{o==null||o.remove()}),[s,a,r]}class St extends ne{constructor(e){super(),se(this,e,Ct,jt,oe,{})}}function Et(f){let e,t,s;return t=new _e({props:{sketch:f[0]}}),{c(){e=w("div"),G(t.$$.fragment),this.h()},l(i){e=_(i,"DIV",{class:!0});var c=k(e);M(t.$$.fragment,c),c.forEach(g),this.h()},h(){$e(e,"class","d-flex justify-content-center")},m(i,c){C(i,e,c),Y(t,e,null),s=!0},p:qe,i(i){s||(W(t.$$.fragment,i),s=!0)},o(i){V(t.$$.fragment,i),s=!1},d(i){i&&g(e),L(t)}}}const Pe=6;function Ot(f){console.clear();const e=new xe({reporter:()=>{},enableGravity:!0});let t;const s=()=>{for(;e.objects.length;)e.objects.pop();const o=S({geometry:{type:"line",vector:new y(100,0)},position:new y(0,2),fixed:!0});e.addObject(o);const r=S({geometry:{type:"line",vector:new y(100,0)},position:new y(0,98),fixed:!0});e.addObject(r);const l=S({geometry:{type:"line",vector:new y(0,100)},position:new y(2,0),fixed:!0});e.addObject(l);const h=S({geometry:{type:"line",vector:new y(0,100)},position:new y(98,0),fixed:!0});e.addObject(h);const u=S({geometry:{type:"line",vector:new y(50,50)},position:new y(20,10),fixed:!0});e.addObject(u),t=S({geometry:{type:"sphere",r:5},position:new y(20,50),velocity:new y(Math.random()*5-2.5,Math.random()*20)}),e.addObject(t)},i=o=>typeof o=="number"?o*Pe:o.clone().multiplyScalar(Pe),c=o=>typeof o=="number"?o/Pe:o.clone().divideScalar(Pe),n=(o,r)=>{for(const l of r.objects){o.stroke(l.data.isColliding?"red":"white");const h=o.map(l.position.x,0,r.dimensions.x,0,o.width),u=o.map(l.position.y,0,r.dimensions.y,o.height,0);if(l.geometry.type==="sphere"){const p=i(l.geometry.r*2);o.strokeWeight(p),o.point(h,u)}if(l.geometry.type==="line"){const p=h+o.map(l.geometry.vector.x,0,r.dimensions.x,0,o.width),b=u-o.map(l.geometry.vector.y,0,r.dimensions.y,0,o.height);o.strokeWeight(2),o.line(h,u,p,b)}}};let d;const a=o=>{o.setup=()=>{d=o;const l=i(e.dimensions);o.createCanvas(l.x,l.y),o.background(0),o.fill(255),o.stroke(255),s()},o.draw=()=>{if(o.background(0),o.mouseIsPressed){t.fixed=!0;const l=c(new y(o.mouseX,o.height-o.mouseY));t.position.copy(l)}else t.fixed=!1;e.step(),n(o,e)};let r;o.mousePressed=()=>{r=c(new y(o.mouseX,o.height-o.mouseY))},o.mouseReleased=()=>{const l=c(new y(o.mouseX,o.height-o.mouseY)),h=r.subtract(l);t.position.copy(l),t.velocity.copy(h)}};return we(()=>{d==null||d.remove()}),[a]}class Pt extends ne{constructor(e){super(),se(this,e,Ot,Et,oe,{})}}function Dt(f){let e,t,s,i,c,n,d,a="Gravity",o,r,l,h="Toggle",u,p,b;return t=new _e({props:{sketch:f[1]}}),{c(){e=w("div"),G(t.$$.fragment),s=E(),i=w("table"),c=w("tbody"),n=w("tr"),d=w("th"),d.textContent=a,o=E(),r=w("td"),l=w("button"),l.textContent=h,this.h()},l(m){e=_(m,"DIV",{class:!0});var x=k(e);M(t.$$.fragment,x),x.forEach(g),s=O(m),i=_(m,"TABLE",{});var $=k(i);c=_($,"TBODY",{});var j=k(c);n=_(j,"TR",{});var P=k(n);d=_(P,"TH",{"data-svelte-h":!0}),H(d)!=="svelte-vy75us"&&(d.textContent=a),o=O(P),r=_(P,"TD",{});var F=k(r);l=_(F,"BUTTON",{"data-svelte-h":!0}),H(l)!=="svelte-18lc94l"&&(l.textContent=h),F.forEach(g),P.forEach(g),j.forEach(g),$.forEach(g),this.h()},h(){$e(e,"class","d-flex justify-content-center")},m(m,x){C(m,e,x),Y(t,e,null),C(m,s,x),C(m,i,x),v(i,c),v(c,n),v(n,d),v(n,o),v(n,r),v(r,l),u=!0,p||(b=te(l,"click",f[2]),p=!0)},p:qe,i(m){u||(W(t.$$.fragment,m),u=!0)},o(m){V(t.$$.fragment,m),u=!1},d(m){m&&(g(e),g(s),g(i)),L(t),p=!1,b()}}}const De=6;function Wt(f){console.clear();const e=new xe({reporter:()=>{},enableGravity:!0});let t;const s=()=>{for(;e.objects.length;)e.objects.pop();const r=S({geometry:{type:"line",vector:new y(100,0)},position:new y(0,0),fixed:!0});e.addObject(r);const l=S({geometry:{type:"line",vector:new y(100,0)},position:new y(0,100),fixed:!0});e.addObject(l);const h=S({geometry:{type:"line",vector:new y(0,100)},position:new y(0,0),fixed:!0});e.addObject(h);const u=S({geometry:{type:"line",vector:new y(0,100)},position:new y(100,0),fixed:!0});e.addObject(u);const p=S({geometry:{type:"line",vector:new y(50,50)},position:new y(20,10),fixed:!0});e.addObject(p),t=S({geometry:{type:"sphere",r:2},position:new y(20,50),velocity:new y(Math.random()*5-2.5,Math.random()*20)}),e.addObject(t)},i=r=>typeof r=="number"?r*De:r.clone().multiplyScalar(De),c=r=>typeof r=="number"?r/De:r.clone().divideScalar(De),n=(r,l)=>{for(const h of l.objects){r.stroke(h.data.isColliding?"red":"white");const u=r.map(h.position.x,0,l.dimensions.x,0,r.width),p=r.map(h.position.y,0,l.dimensions.y,r.height,0);if(h.geometry.type==="sphere"){const b=i(h.geometry.r*2);r.strokeWeight(b),r.point(u,p)}if(h.geometry.type==="line"){const b=u+r.map(h.geometry.vector.x,0,l.dimensions.x,0,r.width),m=p-r.map(h.geometry.vector.y,0,l.dimensions.y,0,r.height);r.strokeWeight(2),r.line(u,p,b,m)}}};let d;const a=r=>{r.setup=()=>{d=r;const h=i(e.dimensions);r.createCanvas(h.x,h.y),r.background(0),r.fill(255),r.stroke(255),s()},r.draw=()=>{if(r.background(0),mt(r)){t.fixed=!0;const h=c(new y(r.mouseX,r.height-r.mouseY));t.position.copy(h)}else t.fixed=!1;e.step(),n(r,e)};let l;r.mousePressed=()=>{Ne(r)&&(l=c(new y(r.mouseX,r.height-r.mouseY)))},r.mouseReleased=()=>{if(!Ne(r))return;const h=c(new y(r.mouseX,r.height-r.mouseY)),u=l.subtract(h);t.position.copy(h),t.velocity.copy(u)}};return we(()=>{d==null||d.remove()}),[e,a,()=>e.toggleGravity()]}class Ft extends ne{constructor(e){super(),se(this,e,Wt,Dt,oe,{})}}function Vt(f){let e,t,s,i,c,n=f[0]?"Disable":"Enable",d,a,o,r,l=f[1]?"Play":"Pause",h,u,p,b="Reset",m,x,$,j,P,F="Simulation time/Frame duration",R,ie,re=f[2].t+"",Te,Be,le,ce=f[2].frameTime+"",ke,Ie,X,J,Je="Sphere position",Ge,ae,de=f[2].spherePos.x.toFixed(2)+"",je,Ye,fe,ue=f[2].spherePos.y.toFixed(2)+"",Ce,Le,U,K,Ke="Sphere velocity",Xe,me,he=f[2].sphereVel.x.toFixed(2)+"",Se,Ae,ye,pe=f[2].sphereVel.y.toFixed(2)+"",Ee,N,Me,Qe;return t=new _e({props:{sketch:f[4]}}),{c(){e=w("div"),G(t.$$.fragment),s=E(),i=w("div"),c=w("button"),d=B(n),a=B(" pause on collision"),o=E(),r=w("button"),h=B(l),u=E(),p=w("button"),p.textContent=b,m=E(),x=w("table"),$=w("tbody"),j=w("tr"),P=w("th"),P.textContent=F,R=E(),ie=w("td"),Te=B(re),Be=E(),le=w("td"),ke=B(ce),Ie=E(),X=w("tr"),J=w("th"),J.textContent=Je,Ge=E(),ae=w("td"),je=B(de),Ye=E(),fe=w("td"),Ce=B(ue),Le=E(),U=w("tr"),K=w("th"),K.textContent=Ke,Xe=E(),me=w("td"),Se=B(he),Ae=E(),ye=w("td"),Ee=B(pe),this.h()},l(T){e=_(T,"DIV",{class:!0});var D=k(e);M(t.$$.fragment,D),D.forEach(g),s=O(T),i=_(T,"DIV",{});var Q=k(i);c=_(Q,"BUTTON",{});var Re=k(c);d=I(Re,n),a=I(Re," pause on collision"),Re.forEach(g),o=O(Q),r=_(Q,"BUTTON",{});var Ze=k(r);h=I(Ze,l),Ze.forEach(g),u=O(Q),p=_(Q,"BUTTON",{"data-svelte-h":!0}),H(p)!=="svelte-tlxueg"&&(p.textContent=b),Q.forEach(g),m=O(T),x=_(T,"TABLE",{});var et=k(x);$=_(et,"TBODY",{});var ge=k($);j=_(ge,"TR",{});var Z=k(j);P=_(Z,"TH",{"data-svelte-h":!0}),H(P)!=="svelte-rirgm4"&&(P.textContent=F),R=O(Z),ie=_(Z,"TD",{});var tt=k(ie);Te=I(tt,re),tt.forEach(g),Be=O(Z),le=_(Z,"TD",{});var ot=k(le);ke=I(ot,ce),ot.forEach(g),Z.forEach(g),Ie=O(ge),X=_(ge,"TR",{});var z=k(X);J=_(z,"TH",{"data-svelte-h":!0}),H(J)!=="svelte-1y1nif6"&&(J.textContent=Je),Ge=O(z),ae=_(z,"TD",{});var nt=k(ae);je=I(nt,de),nt.forEach(g),Ye=O(z),fe=_(z,"TD",{});var st=k(fe);Ce=I(st,ue),st.forEach(g),Le=O(z),z.forEach(g),U=_(ge,"TR",{});var ee=k(U);K=_(ee,"TH",{"data-svelte-h":!0}),H(K)!=="svelte-1uw1fs2"&&(K.textContent=Ke),Xe=O(ee),me=_(ee,"TD",{});var it=k(me);Se=I(it,he),it.forEach(g),Ae=O(ee),ye=_(ee,"TD",{});var rt=k(ye);Ee=I(rt,pe),rt.forEach(g),ee.forEach(g),ge.forEach(g),et.forEach(g),this.h()},h(){$e(e,"class","d-flex justify-content-center")},m(T,D){C(T,e,D),Y(t,e,null),C(T,s,D),C(T,i,D),v(i,c),v(c,d),v(c,a),v(i,o),v(i,r),v(r,h),v(i,u),v(i,p),C(T,m,D),C(T,x,D),v(x,$),v($,j),v(j,P),v(j,R),v(j,ie),v(ie,Te),v(j,Be),v(j,le),v(le,ke),v($,Ie),v($,X),v(X,J),v(X,Ge),v(X,ae),v(ae,je),v(X,Ye),v(X,fe),v(fe,Ce),v(X,Le),v($,U),v(U,K),v(U,Xe),v(U,me),v(me,Se),v(U,Ae),v(U,ye),v(ye,Ee),N=!0,Me||(Qe=[te(c,"click",f[5]),te(r,"click",f[6]),te(p,"click",f[3])],Me=!0)},p(T,[D]){(!N||D&1)&&n!==(n=T[0]?"Disable":"Enable")&&A(d,n),(!N||D&2)&&l!==(l=T[1]?"Play":"Pause")&&A(h,l),(!N||D&4)&&re!==(re=T[2].t+"")&&A(Te,re),(!N||D&4)&&ce!==(ce=T[2].frameTime+"")&&A(ke,ce),(!N||D&4)&&de!==(de=T[2].spherePos.x.toFixed(2)+"")&&A(je,de),(!N||D&4)&&ue!==(ue=T[2].spherePos.y.toFixed(2)+"")&&A(Ce,ue),(!N||D&4)&&he!==(he=T[2].sphereVel.x.toFixed(2)+"")&&A(Se,he),(!N||D&4)&&pe!==(pe=T[2].sphereVel.y.toFixed(2)+"")&&A(Ee,pe)},i(T){N||(W(t.$$.fragment,T),N=!0)},o(T){V(t.$$.fragment,T),N=!1},d(T){T&&(g(e),g(s),g(i),g(m),g(x)),L(t),Me=!1,pt(Qe)}}}const We=60;function Nt(f,e,t){console.clear();let s=!1,i=!1,c={t:"0",frameTime:"0",spherePos:new y(0,0),sphereVel:new y(0,0),ballIsColliding:!1},n,d;const a=()=>{n=new xe({dimensions:new y(10,10),reporter:F=>{var R;t(2,c.t=(R=F==null?void 0:F.t)==null?void 0:R.toFixed(2),c),c.spherePos.copy(d.position),c.sphereVel.copy(d.velocity),t(2,c.frameTime=F.frameTime.toFixed(3),c),t(2,c),t(2,c.ballIsColliding=d.data.isColliding,c),s&&d.data.isColliding&&!i&&t(1,i=!0)},enableGravity:!0});const m=S({geometry:{type:"line",vector:new y(10,0)},position:new y(0,0),fixed:!0});n.addObject(m);const x=S({geometry:{type:"line",vector:new y(0,100)},position:new y(0,0),fixed:!0});n.addObject(x);const $=S({geometry:{type:"line",vector:new y(0,100)},position:new y(10,0),fixed:!0});n.addObject($);const j=S({geometry:{type:"line",vector:new y(3,-3)},position:new y(2,8),fixed:!0});n.addObject(j);const P=S({geometry:{type:"line",vector:new y(3,3)},position:new y(2,5),fixed:!0});n.addObject(P),d=S({geometry:{type:"sphere",r:.1},position:new y(5,10),velocity:new y(0,0)}),n.addObject(d)},o=m=>typeof m=="number"?m*We:m.clone().multiplyScalar(We),r=m=>typeof m=="number"?m/We:m.clone().divideScalar(We),l=(m,x)=>{for(const $ of x.objects){m.stroke(c.ballIsColliding?"red":"white");const j=m.map($.position.x,0,x.dimensions.x,0,m.width),P=m.map($.position.y,0,x.dimensions.y,m.height,0);if($.geometry.type==="sphere"){const F=o($.geometry.r*2);m.strokeWeight(F),m.point(j,P)}if($.geometry.type==="line"){const F=j+m.map($.geometry.vector.x,0,x.dimensions.x,0,m.width),R=P-m.map($.geometry.vector.y,0,x.dimensions.y,0,m.height);m.strokeWeight(2),m.line(j,P,F,R)}}};let h;const u=m=>{m.setup=()=>{h=m,a();const $=o(n.dimensions);m.createCanvas($.x,$.y),m.background(0),m.fill(255),m.stroke(255),a()},m.draw=()=>{if(m.background(0),mt(m)){d.fixed=!0;const $=r(new y(m.mouseX,m.height-m.mouseY));d.position.copy($)}else d.fixed=!1;i||n.step(),l(m,n)};let x;m.mousePressed=()=>{Ne(m)&&(x=r(new y(m.mouseX,m.height-m.mouseY)))},m.mouseReleased=()=>{if(!Ne(m))return;const $=r(new y(m.mouseX,m.height-m.mouseY)),j=x.subtract($).multiplyScalar(3);d.position.copy($),d.velocity.copy(j)}};return we(()=>{h==null||h.remove()}),[s,i,c,a,u,()=>t(0,s=!s),()=>t(1,i=!i)]}class Bt extends ne{constructor(e){super(),se(this,e,Nt,Vt,oe,{})}}function ct(f,e,t){const s=f.slice();return s[1]=e[t],s}function at(f,e,t){const s=f.slice();return s[1]=e[t],s}function It(f){let e=f[1].title+"",t;return{c(){t=B(e)},l(s){t=I(s,e)},m(s,i){C(s,t,i)},p:qe,d(s){s&&g(t)}}}function dt(f){let e,t;return e=new $t({props:{$$slots:{default:[It]},$$scope:{ctx:f}}}),{c(){G(e.$$.fragment)},l(s){M(e.$$.fragment,s)},m(s,i){Y(e,s,i),t=!0},p(s,i){const c={};i&64&&(c.$$scope={dirty:i,ctx:s}),e.$set(c)},i(s){t||(W(e.$$.fragment,s),t=!0)},o(s){V(e.$$.fragment,s),t=!1},d(s){L(e,s)}}}function Gt(f){let e,t,s=Ve(f[0]),i=[];for(let n=0;n<s.length;n+=1)i[n]=dt(at(f,s,n));const c=n=>V(i[n],1,1,()=>{i[n]=null});return{c(){for(let n=0;n<i.length;n+=1)i[n].c();e=Fe()},l(n){for(let d=0;d<i.length;d+=1)i[d].l(n);e=Fe()},m(n,d){for(let a=0;a<i.length;a+=1)i[a]&&i[a].m(n,d);C(n,e,d),t=!0},p(n,d){if(d&1){s=Ve(n[0]);let a;for(a=0;a<s.length;a+=1){const o=at(n,s,a);i[a]?(i[a].p(o,d),W(i[a],1)):(i[a]=dt(o),i[a].c(),W(i[a],1),i[a].m(e.parentNode,e))}for(He(),a=s.length;a<i.length;a+=1)c(a);ze()}},i(n){if(!t){for(let d=0;d<s.length;d+=1)W(i[d]);t=!0}},o(n){i=i.filter(Boolean);for(let d=0;d<i.length;d+=1)V(i[d]);t=!1},d(n){n&&g(e),ut(i,n)}}}function Yt(f){let e,t,s;var i=f[1].component;function c(n,d){return{}}return i&&(e=lt(i,c())),{c(){e&&G(e.$$.fragment),t=E()},l(n){e&&M(e.$$.fragment,n),t=O(n)},m(n,d){e&&Y(e,n,d),C(n,t,d),s=!0},p(n,d){if(i!==(i=n[1].component)){if(e){He();const a=e;V(a.$$.fragment,1,0,()=>{L(a,1)}),ze()}i?(e=lt(i,c()),G(e.$$.fragment),W(e.$$.fragment,1),Y(e,t.parentNode,t)):e=null}},i(n){s||(e&&W(e.$$.fragment,n),s=!0)},o(n){e&&V(e.$$.fragment,n),s=!1},d(n){n&&g(t),e&&L(e,n)}}}function ft(f){let e,t;return e=new vt({props:{$$slots:{default:[Yt]},$$scope:{ctx:f}}}),{c(){G(e.$$.fragment)},l(s){M(e.$$.fragment,s)},m(s,i){Y(e,s,i),t=!0},p(s,i){const c={};i&64&&(c.$$scope={dirty:i,ctx:s}),e.$set(c)},i(s){t||(W(e.$$.fragment,s),t=!0)},o(s){V(e.$$.fragment,s),t=!1},d(s){L(e,s)}}}function Lt(f){let e,t,s,i;e=new bt({props:{$$slots:{default:[Gt]},$$scope:{ctx:f}}});let c=Ve(f[0]),n=[];for(let a=0;a<c.length;a+=1)n[a]=ft(ct(f,c,a));const d=a=>V(n[a],1,1,()=>{n[a]=null});return{c(){G(e.$$.fragment),t=E();for(let a=0;a<n.length;a+=1)n[a].c();s=Fe()},l(a){M(e.$$.fragment,a),t=O(a);for(let o=0;o<n.length;o+=1)n[o].l(a);s=Fe()},m(a,o){Y(e,a,o),C(a,t,o);for(let r=0;r<n.length;r+=1)n[r]&&n[r].m(a,o);C(a,s,o),i=!0},p(a,o){const r={};if(o&64&&(r.$$scope={dirty:o,ctx:a}),e.$set(r),o&1){c=Ve(a[0]);let l;for(l=0;l<c.length;l+=1){const h=ct(a,c,l);n[l]?(n[l].p(h,o),W(n[l],1)):(n[l]=ft(h),n[l].c(),W(n[l],1),n[l].m(s.parentNode,s))}for(He(),l=c.length;l<n.length;l+=1)d(l);ze()}},i(a){if(!i){W(e.$$.fragment,a);for(let o=0;o<c.length;o+=1)W(n[o]);i=!0}},o(a){V(e.$$.fragment,a),n=n.filter(Boolean);for(let o=0;o<n.length;o+=1)V(n[o]);i=!1},d(a){a&&(g(t),g(s)),L(e,a),ut(n,a)}}}function Xt(f){let e,t;return e=new gt({props:{$$slots:{default:[Lt]},$$scope:{ctx:f}}}),{c(){G(e.$$.fragment)},l(s){M(e.$$.fragment,s)},m(s,i){Y(e,s,i),t=!0},p(s,[i]){const c={};i&64&&(c.$$scope={dirty:i,ctx:s}),e.$set(c)},i(s){t||(W(e.$$.fragment,s),t=!0)},o(s){V(e.$$.fragment,s),t=!1},d(s){L(e,s)}}}function At(f){return[[{title:"Free fall",component:Bt},{title:"Test collisions 3",component:Ft},{title:"Test collisions 2",component:Pt},{title:"Test collisions",component:St},{title:"Test engine",component:kt}]]}class zt extends ne{constructor(e){super(),se(this,e,At,Xt,oe,{})}}export{zt as component};
