import{s as fe,f as w,g as x,h as k,d as p,j as N,i as S,z as _e,M as Ce,a as E,e as ht,u as H,c as j,y as b,P as ge,L as G,Q as $e,O as Ue,l as Q,m as K,n as ne}from"../chunks/scheduler.32ebed32.js";import{S as me,i as he,b as se,d as re,m as le,a as ie,t as ce,e as ae}from"../chunks/index.c25c2528.js";import{P as ke,V as u,w as oe,m as Ne,s as nt,c as C,d as Re,a as Ie,C as wt}from"../chunks/PhysicObject.edd17eee.js";import{_ as xt}from"../chunks/preload-helper.a4192956.js";import{W as Pe,L as _t,S as $t}from"../chunks/World.13b69386.js";const Ct={world:{ttl:45,gravity:!0,collisions:!1,maxNbObjects:300,particleSize:3},cannon:{angle:270,minYVelocity:50,maxYVelocityVariation:1,maxXVelocity:30,creationDelay:1},render:{colors:!0,blurPx:19}},kt={world:{ttl:1e4,gravity:!1,collisions:!0,maxNbObjects:300,particleSize:3},cannon:{angle:270,minYVelocity:1,maxYVelocityVariation:1,maxXVelocity:1,creationDelay:30},render:{colors:!0,blurPx:0}},Tt={world:{ttl:155.09219369291745,gravity:!1,collisions:!1,maxNbObjects:300,particleSize:13},cannon:{angle:270,minYVelocity:36.843012235050836,maxYVelocityVariation:1,maxXVelocity:14.785455798724797,creationDelay:1},render:{colors:!1,blurPx:0}},vt={torch:Ct,pullApart:kt,blob:Tt};console.log(vt);function St(c){const e=document.createElement("textarea");e.value=c,e.style.top="0",e.style.left="0",e.style.position="fixed",document.body.appendChild(e),e.focus(),e.select();try{const l=document.execCommand("copy")?"successful":"unsuccessful";console.log("Fallback: Copying text command was "+l)}catch(t){console.error("Fallback: Oops, unable to copy",t)}document.body.removeChild(e)}function Et(c){if(!navigator.clipboard){St(c);return}navigator.clipboard.writeText(c).then(function(){console.log("Async: Copying to clipboard was successful!")},function(e){console.error("Async: Could not copy text: ",e)})}function jt(c){let e,t,l;return t=new ke({props:{sketch:c[0]}}),{c(){e=w("div"),se(t.$$.fragment),this.h()},l(o){e=x(o,"DIV",{class:!0});var s=k(e);re(t.$$.fragment,s),s.forEach(p),this.h()},h(){N(e,"class","d-flex justify-content-center")},m(o,s){S(o,e,s),le(t,e,null),l=!0},p:_e,i(o){l||(ie(t.$$.fragment,o),l=!0)},o(o){ce(t.$$.fragment,o),l=!1},d(o){o&&p(e),ae(t)}}}const yt=8;function Pt(c){console.clear();let e,t=vt.torch,l;const o=async()=>{const f=await xt(()=>import("../chunks/dat.gui.module.ff711f94.js"),[],import.meta.url);l=new f.GUI,l.domElement.setAttribute("style","background-color: black");const h=l.addFolder("World");h.open(),h.add(r==null?void 0:r.objects,"length").name("Nb objects").listen(),h.add(t.world,"gravity").name("Enable gravity").onFinishChange(()=>r.gravityEnabled=t.world.gravity),h.add(t.world,"collisions").name("Enable collisions").onFinishChange(()=>r.collisionEnabled=t.world.collisions),h.add(t.world,"ttl",0,1e4).name("Particles TTL"),h.add(t.world,"maxNbObjects",0,3e3).name("Max nb particles"),h.add(t.world,"particleSize",1,20,1).name("Particles size");const y=l.addFolder("Cannon");y.open(),y.add(t.cannon,"angle",0,360).name("Angle"),y.add(t.cannon,"minYVelocity",0,100).name("min. Y velocity"),y.add(t.cannon,"maxYVelocityVariation",0,2).name("Y vel. variation"),y.add(t.cannon,"maxXVelocity",0,100).name("max. X velocity "),y.add(t.cannon,"creationDelay",1,30,1).name("Fire rate");const d=l.addFolder("Render");d.open(),d.add(t.render,"colors").name("Use colors"),d.add(t.render,"blurPx",0,50).name("Blur (px)");const i=l.addFolder("Config");i.open(),i.add(s,"copyCurrentConfig").name("Copy current")},s={copyCurrentConfig:()=>{const f=JSON.stringify(t);Et(f)}},n=()=>{const{minYVelocity:f,maxYVelocityVariation:h,maxXVelocity:y}=t.cannon,d=Math.random()*y-y/2,i=f+(h-Math.random())*f;return new u(d,i).rotateByDeg(t.cannon.angle)},g=f=>{const h={...C({geometry:{type:"sphere",r:t.world.particleSize},position:a,velocity:n()}),age:0};f.addObject(h)},a=new u(0,0);let r;const v=f=>{const h=new u(100,100),y=oe(h,yt);a.x=h.x/2,a.y=h.y/3,f.setup=()=>{e=f,f.createCanvas(y.x,y.y),f.noFill(),r=new Pe({dimensions:h,enableGravity:t.world.gravity,enableCollisions:t.world.collisions}),g(r),o()},f.draw=()=>{if(f.background(0),Ne(f)){const d=nt(new u(f.mouseX,f.height-f.mouseY),yt);a.copy(d)}f.frameCount%t.cannon.creationDelay===0&&r.objects.length<t.world.maxNbObjects&&g(r),r.step(),r.objects.forEach(d=>{d.data.age>t.world.ttl&&r.removeObject(d)}),_(f,r)}},m=[[239,113,81],[229,144,25],[211,202,156],[153,47,15],[234,93,180]],_=(f,h)=>{const y=f.width/h.dimensions.x;f.stroke("white");for(const d of h.objects){if(t.render.colors){const P=d.data.id%m.length,V=m[P];f.stroke([...V])}const i=f.map(d.position.x,0,h.dimensions.x,0,f.width),$=f.map(d.position.y,0,h.dimensions.y,f.height,0);if(d.geometry.type!=="sphere")continue;const T=oe(d.geometry.r*2,y);f.strokeWeight(T),f.point(i,$)}f.drawingContext.filter=`blur(${t.render.blurPx}px)`};return Ce(()=>{l==null||l.destroy(),e==null||e.remove()}),[v]}let Ot=class extends me{constructor(e){super(),he(this,e,Pt,jt,fe,{})}};function pt(c){let e,t,l,o,s="dt",n,g,a,r,v,m,_="drag",f,h,y,d,i,$,T="gravity enabled",P,V,Y,M,J;return{c(){e=w("table"),t=w("tbody"),l=w("tr"),o=w("th"),o.textContent=s,n=E(),g=w("td"),a=w("input"),r=E(),v=w("tr"),m=w("th"),m.textContent=_,f=E(),h=w("td"),y=w("input"),d=E(),i=w("tr"),$=w("th"),$.textContent=T,P=E(),V=w("td"),Y=w("input"),this.h()},l(A){e=x(A,"TABLE",{});var L=k(e);t=x(L,"TBODY",{});var D=k(t);l=x(D,"TR",{});var B=k(l);o=x(B,"TH",{"data-svelte-h":!0}),H(o)!=="svelte-16dheti"&&(o.textContent=s),n=j(B),g=x(B,"TD",{});var W=k(g);a=x(W,"INPUT",{type:!0,min:!0,max:!0,step:!0}),W.forEach(p),B.forEach(p),r=j(D),v=x(D,"TR",{});var ee=k(v);m=x(ee,"TH",{"data-svelte-h":!0}),H(m)!=="svelte-2hq5g"&&(m.textContent=_),f=j(ee),h=x(ee,"TD",{});var te=k(h);y=x(te,"INPUT",{type:!0,min:!0,max:!0,step:!0}),te.forEach(p),ee.forEach(p),d=j(D),i=x(D,"TR",{});var R=k(i);$=x(R,"TH",{"data-svelte-h":!0}),H($)!=="svelte-ic0r87"&&($.textContent=T),P=j(R),V=x(R,"TD",{});var z=k(V);Y=x(z,"INPUT",{type:!0}),z.forEach(p),R.forEach(p),D.forEach(p),L.forEach(p),this.h()},h(){N(a,"type","number"),N(a,"min","0"),N(a,"max","0.5"),N(a,"step","0.001"),N(y,"type","number"),N(y,"min","0"),N(y,"max","0.01"),N(y,"step","0.001"),N(Y,"type","checkbox")},m(A,L){S(A,e,L),b(e,t),b(t,l),b(l,o),b(l,n),b(l,g),b(g,a),ge(a,c[0].dt),b(t,r),b(t,v),b(v,m),b(v,f),b(v,h),b(h,y),ge(y,c[0].drag),b(t,d),b(t,i),b(i,$),b(i,P),b(i,V),b(V,Y),Y.checked=c[0].gravityEnabled,M||(J=[G(a,"input",c[1]),G(y,"input",c[2]),G(Y,"change",c[3])],M=!0)},p(A,L){L&1&&$e(a.value)!==A[0].dt&&ge(a,A[0].dt),L&1&&$e(y.value)!==A[0].drag&&ge(y,A[0].drag),L&1&&(Y.checked=A[0].gravityEnabled)},d(A){A&&p(e),M=!1,Ue(J)}}}function Dt(c){let e,t="Engine settings",l,o,s=c[0]&&pt(c);return{c(){e=w("p"),e.textContent=t,l=E(),s&&s.c(),o=ht(),this.h()},l(n){e=x(n,"P",{class:!0,"data-svelte-h":!0}),H(e)!=="svelte-gf3gek"&&(e.textContent=t),l=j(n),s&&s.l(n),o=ht(),this.h()},h(){N(e,"class","title svelte-g74uk9")},m(n,g){S(n,e,g),S(n,l,g),s&&s.m(n,g),S(n,o,g)},p(n,[g]){n[0]?s?s.p(n,g):(s=pt(n),s.c(),s.m(o.parentNode,o)):s&&(s.d(1),s=null)},i:_e,o:_e,d(n){n&&(p(e),p(l),p(o)),s&&s.d(n)}}}function Vt(c,e,t){let{world:l}=e;function o(){l.dt=$e(this.value),t(0,l)}function s(){l.drag=$e(this.value),t(0,l)}function n(){l.gravityEnabled=this.checked,t(0,l)}return c.$$set=g=>{"world"in g&&t(0,l=g.world)},[l,o,s,n]}class ot extends me{constructor(e){super(),he(this,e,Vt,Dt,fe,{world:0})}}function Bt(c){let e,t="Shooter",l,o,s,n="Angle",g,a,r,v,m,_,f,h,y="Magnitude",d,i,$,T,P,V,Y,M,J="Shoot",A,L;return{c(){e=w("p"),e.textContent=t,l=E(),o=w("span"),s=w("label"),s.textContent=n,g=E(),a=w("input"),r=E(),v=Q(c[0]),m=Q(" deg"),_=E(),f=w("span"),h=w("label"),h.textContent=y,d=E(),i=w("input"),$=E(),T=Q(c[1]),P=E(),V=w("br"),Y=E(),M=w("button"),M.textContent=J,this.h()},l(D){e=x(D,"P",{class:!0,"data-svelte-h":!0}),H(e)!=="svelte-198ugk3"&&(e.textContent=t),l=j(D),o=x(D,"SPAN",{});var B=k(o);s=x(B,"LABEL",{for:!0,"data-svelte-h":!0}),H(s)!=="svelte-lab87n"&&(s.textContent=n),g=j(B),a=x(B,"INPUT",{id:!0,type:!0,min:!0,max:!0}),r=j(B),v=K(B,c[0]),m=K(B," deg"),B.forEach(p),_=j(D),f=x(D,"SPAN",{});var W=k(f);h=x(W,"LABEL",{for:!0,"data-svelte-h":!0}),H(h)!=="svelte-1vc5oxa"&&(h.textContent=y),d=j(W),i=x(W,"INPUT",{id:!0,type:!0,min:!0,max:!0,step:!0}),$=j(W),T=K(W,c[1]),W.forEach(p),P=j(D),V=x(D,"BR",{}),Y=j(D),M=x(D,"BUTTON",{"data-svelte-h":!0}),H(M)!=="svelte-8jpwxr"&&(M.textContent=J),this.h()},h(){N(e,"class","title svelte-g74uk9"),N(s,"for","angleSlider"),N(a,"id","angleSlider"),N(a,"type","range"),N(a,"min","0"),N(a,"max","360"),N(h,"for","magSlider"),N(i,"id","magSlider"),N(i,"type","range"),N(i,"min","0"),N(i,"max","1"),N(i,"step","0.01")},m(D,B){S(D,e,B),S(D,l,B),S(D,o,B),b(o,s),b(o,g),b(o,a),ge(a,c[0]),b(o,r),b(o,v),b(o,m),S(D,_,B),S(D,f,B),b(f,h),b(f,d),b(f,i),ge(i,c[1]),b(f,$),b(f,T),S(D,P,B),S(D,V,B),S(D,Y,B),S(D,M,B),A||(L=[G(a,"change",c[4]),G(a,"input",c[4]),G(i,"change",c[5]),G(i,"input",c[5]),G(M,"click",c[6])],A=!0)},p(D,[B]){B&1&&ge(a,D[0]),B&1&&ne(v,D[0]),B&2&&ge(i,D[1]),B&2&&ne(T,D[1])},i:_e,o:_e,d(D){D&&(p(e),p(l),p(o),p(_),p(f),p(P),p(V),p(Y),p(M)),A=!1,Ue(L)}}}function Ft(c,e,t){let{onShoot:l}=e,o=0,s=.5;const n=()=>{const v=new u(1,0);v.rotateDeg(o),v.multiplyScalar(s),l(v)};function g(){o=$e(this.value),t(0,o)}function a(){s=$e(this.value),t(1,s)}const r=()=>n();return c.$$set=v=>{"onShoot"in v&&t(3,l=v.onShoot)},[o,s,n,l,g,a,r]}class bt extends me{constructor(e){super(),he(this,e,Ft,Bt,fe,{onShoot:3})}}const It=c=>{const e=[],t=C({geometry:{type:"line",vector:new u(15,0)},position:new u(0,15),fixed:!0});e.push(t);const l=C({geometry:{type:"line",vector:new u(15,0)},position:new u(0,0),fixed:!0});e.push(l);const o=C({geometry:{type:"line",vector:new u(0,100)},position:new u(0,0),fixed:!0});e.push(o);const s=C({geometry:{type:"line",vector:new u(0,100)},position:new u(15,0),fixed:!0});e.push(s);let n;for(let g=0;g<c.nbBalls;g++){const a=C({geometry:{type:"sphere",r:c.rBalls},position:new u(Math.random()*15,Math.random()*15),velocity:new u(Math.random()*15,Math.random()*15)});e.push(a),n||(n=a)}return{objects:e,sphere:n}};function Nt(c){let e,t,l,o,s,n=c[0]?"Play":"Pause",g,a,r,v="Reset",m,_,f="Add ball",h,y,d,i,$,T,P,V,Y,M="Number of balls",J,A,L,D,B,W,ee="Balls radius",te,R,z,ye,F,U;return t=new ke({props:{sketch:c[5]}}),y=new bt({props:{onShoot:c[6]}}),i=new ot({props:{world:c[2]}}),{c(){e=w("div"),se(t.$$.fragment),l=E(),o=w("div"),s=w("button"),g=Q(n),a=E(),r=w("button"),r.textContent=v,m=E(),_=w("button"),_.textContent=f,h=E(),se(y.$$.fragment),d=E(),se(i.$$.fragment),$=E(),T=w("table"),P=w("tbody"),V=w("tr"),Y=w("th"),Y.textContent=M,J=E(),A=w("td"),L=w("input"),D=E(),B=w("tr"),W=w("th"),W.textContent=ee,te=E(),R=w("td"),z=w("input"),this.h()},l(O){e=x(O,"DIV",{class:!0});var X=k(e);re(t.$$.fragment,X),X.forEach(p),l=j(O),o=x(O,"DIV",{});var Z=k(o);s=x(Z,"BUTTON",{});var ve=k(s);g=K(ve,n),ve.forEach(p),a=j(Z),r=x(Z,"BUTTON",{"data-svelte-h":!0}),H(r)!=="svelte-tlxueg"&&(r.textContent=v),m=j(Z),_=x(Z,"BUTTON",{"data-svelte-h":!0}),H(_)!=="svelte-1xau3n8"&&(_.textContent=f),Z.forEach(p),h=j(O),re(y.$$.fragment,O),d=j(O),re(i.$$.fragment,O),$=j(O),T=x(O,"TABLE",{});var we=k(T);P=x(we,"TBODY",{});var ue=k(P);V=x(ue,"TR",{});var de=k(V);Y=x(de,"TH",{"data-svelte-h":!0}),H(Y)!=="svelte-eg4byi"&&(Y.textContent=M),J=j(de),A=x(de,"TD",{});var be=k(A);L=x(be,"INPUT",{type:!0,min:!0}),be.forEach(p),de.forEach(p),D=j(ue),B=x(ue,"TR",{});var Te=k(B);W=x(Te,"TH",{"data-svelte-h":!0}),H(W)!=="svelte-10gtk36"&&(W.textContent=ee),te=j(Te),R=x(Te,"TD",{});var De=k(R);z=x(De,"INPUT",{type:!0,min:!0}),De.forEach(p),Te.forEach(p),ue.forEach(p),we.forEach(p),this.h()},h(){N(e,"class","d-flex justify-content-center"),N(L,"type","number"),N(L,"min","1"),N(z,"type","number"),N(z,"min","1")},m(O,X){S(O,e,X),le(t,e,null),S(O,l,X),S(O,o,X),b(o,s),b(s,g),b(o,a),b(o,r),b(o,m),b(o,_),S(O,h,X),le(y,O,X),S(O,d,X),le(i,O,X),S(O,$,X),S(O,T,X),b(T,P),b(P,V),b(V,Y),b(V,J),b(V,A),b(A,L),ge(L,c[1].nbBalls),b(P,D),b(P,B),b(B,W),b(B,te),b(B,R),b(R,z),ge(z,c[1].rBalls),ye=!0,F||(U=[G(s,"click",c[7]),G(r,"click",c[3]),G(_,"click",c[4]),G(L,"change",c[3]),G(L,"input",c[8]),G(z,"change",c[3]),G(z,"input",c[9])],F=!0)},p(O,[X]){(!ye||X&1)&&n!==(n=O[0]?"Play":"Pause")&&ne(g,n);const Z={};X&4&&(Z.world=O[2]),i.$set(Z),X&2&&$e(L.value)!==O[1].nbBalls&&ge(L,O[1].nbBalls),X&2&&$e(z.value)!==O[1].rBalls&&ge(z,O[1].rBalls)},i(O){ye||(ie(t.$$.fragment,O),ie(y.$$.fragment,O),ie(i.$$.fragment,O),ye=!0)},o(O){ce(t.$$.fragment,O),ce(y.$$.fragment,O),ce(i.$$.fragment,O),ye=!1},d(O){O&&(p(e),p(l),p(o),p(h),p(d),p($),p(T)),ae(t),ae(y,O),ae(i,O),F=!1,Ue(U)}}}const He=60;function Yt(c,e,t){console.clear();let l=!1,o={nbBalls:5,rBalls:.2},s,n;const g=()=>{const i=(s==null?void 0:s.gravityEnabled)??!0;t(2,s=new Pe({dimensions:new u(15,15),reporter:()=>{},enableGravity:i}));const $=It(o);n=$.sphere;for(const T of $.objects)s.addObject(T)},a=()=>{const i=C({geometry:{type:"sphere",r:o.rBalls},position:new u(7,7),velocity:new u(0,0)});s.addObject(i)},r=i=>typeof i=="number"?i*He:i.clone().multiplyScalar(He),v=i=>typeof i=="number"?i/He:i.clone().divideScalar(He);let m;const _=i=>{i.setup=()=>{m=i,g();const P=r(s.dimensions);i.createCanvas(P.x,P.y),i.background(0),i.fill(255),i.stroke(255),g()},i.draw=()=>{i.background(0),Ne(i)?n.fixed=!0:n.fixed=!1,l||s.step(),Re(i,s),T(i)};let $;i.mousePressed=()=>{Ie(i)&&($=v(new u(i.mouseX,i.height-i.mouseY)),n.position.copy($))},i.mouseReleased=()=>{if(!Ie(i)||!$)return;const P=v(new u(i.mouseX,i.height-i.mouseY)),V=$.subtract(P).multiplyScalar(3);$=void 0,n.velocity.copy(V)};const T=P=>{if(!$)return;P.stroke("blue"),P.strokeWeight(2);const V=r($);P.line(V.x,P.height-V.y,P.mouseX,P.mouseY)}},f=i=>{i.multiplyScalar(1e4),s.applyForce(n,i)};Ce(()=>{m==null||m.remove()});const h=()=>t(0,l=!l);function y(){o.nbBalls=$e(this.value),t(1,o)}function d(){o.rBalls=$e(this.value),t(1,o)}return[l,o,s,g,a,_,f,h,y,d]}let Lt=class extends me{constructor(e){super(),he(this,e,Yt,Nt,fe,{})}};function At(c){let e,t,l,o,s=c[0][c[0].length-1]+"",n,g,a,r="New ball",v,m,_;return t=new ke({props:{sketch:c[2]}}),{c(){e=w("div"),se(t.$$.fragment),l=E(),o=w("p"),n=Q(s),g=E(),a=w("button"),a.textContent=r,this.h()},l(f){e=x(f,"DIV",{class:!0});var h=k(e);re(t.$$.fragment,h),h.forEach(p),l=j(f),o=x(f,"P",{});var y=k(o);n=K(y,s),y.forEach(p),g=j(f),a=x(f,"BUTTON",{"data-svelte-h":!0}),H(a)!=="svelte-1jwbm46"&&(a.textContent=r),this.h()},h(){N(e,"class","d-flex justify-content-center")},m(f,h){S(f,e,h),le(t,e,null),S(f,l,h),S(f,o,h),b(o,n),S(f,g,h),S(f,a,h),v=!0,m||(_=G(a,"click",c[1]),m=!0)},p(f,[h]){(!v||h&1)&&s!==(s=f[0][f[0].length-1]+"")&&ne(n,s)},i(f){v||(ie(t.$$.fragment,f),v=!0)},o(f){ce(t.$$.fragment,f),v=!1},d(f){f&&(p(e),p(l),p(o),p(g),p(a)),ae(t),m=!1,_()}}}function Mt(c,e,t){console.clear();let l=[];const o=r=>{const v=r.objects[r.objects.length-1],m=v.position.clone().toFixed(2),_=v.velocity.clone().toFixed(2);l.push(`${r.t.toFixed(2)} - pos: ${m} - vel: ${_}`),l.length>50&&l.shift(),t(0,l)},s=new Pe({reporter:o,enableGravity:!0}),n=()=>{for(;s.objects.length;)s.objects.pop();const r=C({geometry:{type:"line",vector:new u(100,0)},position:new u(0,0),fixed:!0});s.addObject(r);for(let v=0;v<1;v++){const m=C({geometry:{type:"sphere",r:5},position:new u(20,50),velocity:new u(Math.random()*5-2.5,Math.random()*20)});s.addObject(m)}};let g;const a=r=>{r.setup=()=>{g=r,r.createCanvas(900,600),r.background(0),r.fill(255),r.stroke(255),n()},r.draw=()=>{r.background(0),s.step();for(const v of s.objects){const m=r.map(v.position.x,0,s.dimensions.x,0,r.width),_=r.map(v.position.y,0,s.dimensions.y,r.height,0);if(v.geometry.type==="sphere"&&(r.strokeWeight(v.geometry.r*2),r.point(m,_)),v.geometry.type==="line"){const f=m+r.map(v.geometry.vector.x,0,s.dimensions.x,0,r.width),h=_+r.map(v.geometry.vector.y,0,s.dimensions.y,0,r.height);r.strokeWeight(2),r.line(m,_,f,h)}}}};return Ce(()=>{g==null||g.remove()}),[l,n,a]}class Wt extends me{constructor(e){super(),he(this,e,Mt,At,fe,{})}}function Ut(c){let e,t,l,o,s=c[0][c[0].length-1]+"",n,g,a,r="New ball",v,m,_;return t=new ke({props:{sketch:c[2]}}),{c(){e=w("div"),se(t.$$.fragment),l=E(),o=w("p"),n=Q(s),g=E(),a=w("button"),a.textContent=r,this.h()},l(f){e=x(f,"DIV",{class:!0});var h=k(e);re(t.$$.fragment,h),h.forEach(p),l=j(f),o=x(f,"P",{});var y=k(o);n=K(y,s),y.forEach(p),g=j(f),a=x(f,"BUTTON",{"data-svelte-h":!0}),H(a)!=="svelte-1jwbm46"&&(a.textContent=r),this.h()},h(){N(e,"class","d-flex justify-content-center")},m(f,h){S(f,e,h),le(t,e,null),S(f,l,h),S(f,o,h),b(o,n),S(f,g,h),S(f,a,h),v=!0,m||(_=G(a,"click",c[1]),m=!0)},p(f,[h]){(!v||h&1)&&s!==(s=f[0][f[0].length-1]+"")&&ne(n,s)},i(f){v||(ie(t.$$.fragment,f),v=!0)},o(f){ce(t.$$.fragment,f),v=!1},d(f){f&&(p(e),p(l),p(o),p(g),p(a)),ae(t),m=!1,_()}}}const ze=6;function Rt(c,e,t){console.clear();let l=[];const o=m=>{const _=m.objects[m.objects.length-1],f=_.position.clone().toFixed(2),h=_.velocity.clone().toFixed(2);l.push(`${m.t.toFixed(2)} - pos: ${f} - vel: ${h}`),l.length>50&&l.shift(),t(0,l)},s=new Pe({reporter:o,enableGravity:!0});let n,g;const a=()=>{for(;s.objects.length;)s.objects.pop();g=C({geometry:{type:"line",vector:new u(40,40)},position:new u(30,30),fixed:!0}),s.addObject(g),n=C({geometry:{type:"sphere",r:10},position:new u(20,50),velocity:new u(2.5,2.5),fixed:!0}),s.addObject(n)};let r;const v=m=>{const _=y=>typeof y=="number"?y*ze:y.clone().multiplyScalar(ze),f=y=>typeof y=="number"?y/ze:y.clone().divideScalar(ze);m.setup=()=>{r=m;const y=_(s.dimensions);m.createCanvas(y.x,y.y),m.background(0),m.fill(255),m.stroke(255),a()};let h;m.draw=()=>{if(m.background(0),s.step(),m.mouseIsPressed){const y=f(new u(m.mouseX,m.height-m.mouseY));if(h||(y.distance(n.position)<2?h="sphere":y.distance(g.position)<2?h="wallstart":y.distance(g.geometry.vector.clone().add(g.position))<2&&(h="wallend")),h==="sphere"&&n.position.copy(y),h==="wallstart"&&g.position.copy(y),h==="wallend"){const d=y.clone().subtract(g.position);g.geometry.vector.copy(d)}}else h=void 0;for(const y of s.objects.sort((d,i)=>d.geometry.type<i.geometry.type?1:-1)){m.stroke(n.data.isColliding?"red":"white");const d=m.map(y.position.x,0,s.dimensions.x,0,m.width),i=m.map(y.position.y,0,s.dimensions.y,m.height,0);if(y.geometry.type==="sphere"){const $=_(y.geometry.r*2);m.strokeWeight($),m.point(d,i)}if(y.geometry.type==="line"){const $=d+m.map(y.geometry.vector.x,0,s.dimensions.x,0,m.width),T=i-m.map(y.geometry.vector.y,0,s.dimensions.y,0,m.height);m.stroke("blue"),m.strokeWeight(2),m.line(d,i,$,T)}}}};return Ce(()=>{r==null||r.remove()}),[l,a,v]}class Xt extends me{constructor(e){super(),he(this,e,Rt,Ut,fe,{})}}function Gt(c){let e,t,l;return t=new ke({props:{sketch:c[0]}}),{c(){e=w("div"),se(t.$$.fragment),this.h()},l(o){e=x(o,"DIV",{class:!0});var s=k(e);re(t.$$.fragment,s),s.forEach(p),this.h()},h(){N(e,"class","d-flex justify-content-center")},m(o,s){S(o,e,s),le(t,e,null),l=!0},p:_e,i(o){l||(ie(t.$$.fragment,o),l=!0)},o(o){ce(t.$$.fragment,o),l=!1},d(o){o&&p(e),ae(t)}}}const qe=6;function Ht(c){console.clear();const e=new Pe({reporter:()=>{},enableGravity:!0});let t;const l=()=>{for(;e.objects.length;)e.objects.pop();t=C({geometry:{type:"sphere",r:5},position:new u(20,50),velocity:new u(Math.random()*5-2.5,Math.random()*20)}),e.addObject(t);const a=C({geometry:{type:"line",vector:new u(100,0)},position:new u(0,2),fixed:!0});e.addObject(a);const r=C({geometry:{type:"line",vector:new u(100,0)},position:new u(0,98),fixed:!0});e.addObject(r);const v=C({geometry:{type:"line",vector:new u(0,100)},position:new u(2,0),fixed:!0});e.addObject(v);const m=C({geometry:{type:"line",vector:new u(0,100)},position:new u(98,0),fixed:!0});e.addObject(m);const _=C({geometry:{type:"line",vector:new u(50,50)},position:new u(20,10),fixed:!0});e.addObject(_)},o=a=>typeof a=="number"?a*qe:a.clone().multiplyScalar(qe),s=a=>typeof a=="number"?a/qe:a.clone().divideScalar(qe);let n;const g=a=>{a.setup=()=>{n=a;const v=o(e.dimensions);a.createCanvas(v.x,v.y),a.background(0),a.fill(255),a.stroke(255),l()},a.draw=()=>{if(a.background(0),a.mouseIsPressed){t.fixed=!0;const v=s(new u(a.mouseX,a.height-a.mouseY));t.position.copy(v)}else t.fixed=!1;e.step(),Re(a,e)};let r;a.mousePressed=()=>{r=s(new u(a.mouseX,a.height-a.mouseY))},a.mouseReleased=()=>{const v=s(new u(a.mouseX,a.height-a.mouseY)),m=r.subtract(v);t.position.copy(v),t.velocity.copy(m)}};return Ce(()=>{n==null||n.remove()}),[g]}class zt extends me{constructor(e){super(),he(this,e,Ht,Gt,fe,{})}}function qt(c){let e,t,l,o,s,n,g,a="Gravity",r,v,m,_="Toggle",f,h,y;return t=new ke({props:{sketch:c[1]}}),{c(){e=w("div"),se(t.$$.fragment),l=E(),o=w("table"),s=w("tbody"),n=w("tr"),g=w("th"),g.textContent=a,r=E(),v=w("td"),m=w("button"),m.textContent=_,this.h()},l(d){e=x(d,"DIV",{class:!0});var i=k(e);re(t.$$.fragment,i),i.forEach(p),l=j(d),o=x(d,"TABLE",{});var $=k(o);s=x($,"TBODY",{});var T=k(s);n=x(T,"TR",{});var P=k(n);g=x(P,"TH",{"data-svelte-h":!0}),H(g)!=="svelte-vy75us"&&(g.textContent=a),r=j(P),v=x(P,"TD",{});var V=k(v);m=x(V,"BUTTON",{"data-svelte-h":!0}),H(m)!=="svelte-18lc94l"&&(m.textContent=_),V.forEach(p),P.forEach(p),T.forEach(p),$.forEach(p),this.h()},h(){N(e,"class","d-flex justify-content-center")},m(d,i){S(d,e,i),le(t,e,null),S(d,l,i),S(d,o,i),b(o,s),b(s,n),b(n,g),b(n,r),b(n,v),b(v,m),f=!0,h||(y=G(m,"click",c[2]),h=!0)},p:_e,i(d){f||(ie(t.$$.fragment,d),f=!0)},o(d){ce(t.$$.fragment,d),f=!1},d(d){d&&(p(e),p(l),p(o)),ae(t),h=!1,y()}}}const Je=6;function Jt(c){console.clear();const e=new Pe({reporter:()=>{},enableGravity:!0});let t;const l=()=>{for(;e.objects.length;)e.objects.pop();const r=C({geometry:{type:"line",vector:new u(100,0)},position:new u(0,0),fixed:!0});e.addObject(r);const v=C({geometry:{type:"line",vector:new u(100,0)},position:new u(0,100),fixed:!0});e.addObject(v);const m=C({geometry:{type:"line",vector:new u(0,100)},position:new u(0,0),fixed:!0});e.addObject(m);const _=C({geometry:{type:"line",vector:new u(0,100)},position:new u(100,0),fixed:!0});e.addObject(_);const f=C({geometry:{type:"line",vector:new u(50,50)},position:new u(20,10),fixed:!0});e.addObject(f),t=C({geometry:{type:"sphere",r:2},position:new u(20,50),velocity:new u(Math.random()*5-2.5,Math.random()*20)}),e.addObject(t)},o=r=>typeof r=="number"?r*Je:r.clone().multiplyScalar(Je),s=r=>typeof r=="number"?r/Je:r.clone().divideScalar(Je);let n;const g=r=>{r.setup=()=>{n=r;const m=o(e.dimensions);r.createCanvas(m.x,m.y),r.background(0),r.fill(255),r.stroke(255),l()},r.draw=()=>{if(r.background(0),Ne(r)){t.fixed=!0;const m=s(new u(r.mouseX,r.height-r.mouseY));t.position.copy(m)}else t.fixed=!1;e.step(),Re(r,e)};let v;r.mousePressed=()=>{Ie(r)&&(v=s(new u(r.mouseX,r.height-r.mouseY)))},r.mouseReleased=()=>{if(!Ie(r))return;const m=s(new u(r.mouseX,r.height-r.mouseY)),_=v.subtract(m);t.position.copy(m),t.velocity.copy(_)}};return Ce(()=>{n==null||n.remove()}),[e,g,()=>e.toggleGravity()]}class Qt extends me{constructor(e){super(),he(this,e,Jt,qt,fe,{})}}const Kt=()=>{const c=[],e=C({geometry:{type:"line",vector:new u(15,0)},position:new u(0,0),fixed:!0});c.push(e);const t=C({geometry:{type:"line",vector:new u(0,100)},position:new u(0,0),fixed:!0});c.push(t);const l=C({geometry:{type:"line",vector:new u(0,100)},position:new u(15,0),fixed:!0});c.push(l);const o=C({geometry:{type:"line",vector:new u(3,-3)},position:new u(3.5,8),fixed:!0});c.push(o);const s=C({geometry:{type:"line",vector:new u(3,3)},position:new u(3.5,5),fixed:!0});c.push(s);const n=C({geometry:{type:"line",vector:new u(6,0)},position:new u(2,2),fixed:!0});c.push(n);const g=C({geometry:{type:"line",vector:new u(4,0)},position:new u(3,2.5),fixed:!0});c.push(g);const a=C({geometry:{type:"line",vector:new u(2,0)},position:new u(4,3),fixed:!0});c.push(a);const r=C({geometry:{type:"line",vector:new u(.6,0)},position:new u(4.7,3.5),fixed:!0});c.push(r);const v=C({geometry:{type:"line",vector:new u(1,0)},position:new u(10,10.1),fixed:!0});c.push(v);const m=C({geometry:{type:"line",vector:new u(0,-4)},position:new u(11,10),fixed:!0});c.push(m);const _=C({geometry:{type:"line",vector:new u(0,-4)},position:new u(11.5,10),fixed:!0});c.push(_);const f=C({geometry:{type:"line",vector:new u(0,-4)},position:new u(12,10),fixed:!0});c.push(f);const h=C({geometry:{type:"line",vector:new u(1,0)},position:new u(12,10.1),fixed:!0});c.push(h);for(let d=.2;d<.5;d+=.1)for(let i=0;i<10;i++){const $=C({geometry:{type:"line",vector:new u(0,3)},position:new u(9+i*d,1),fixed:!0});c.push($)}const y=C({geometry:{type:"sphere",r:.1},position:new u(5,10),velocity:new u(0,0)});return c.push(y),{objects:c,sphere:y}};function Zt(c){let e,t,l,o,s,n=c[0]?"Disable":"Enable",g,a,r,v,m=c[1]?"Play":"Pause",_,f,h,y="Reset",d,i,$,T,P,V,Y,M,J,A="Simulation time/Frame duration",L,D,B=c[2].t+"",W,ee,te,R=c[2].frameTime+"",z,ye,F,U,O="Sphere position",X,Z,ve=c[2].spherePos.x.toFixed(2)+"",we,ue,de,be=c[2].spherePos.y.toFixed(2)+"",Te,De,Se,Ve,st="Sphere velocity",Ke,Ye,Le=c[2].sphereVel.x.toFixed(2)+"",Xe,Ze,Ae,Me=c[2].sphereVel.y.toFixed(2)+"",Ge,pe,et,rt;return t=new ke({props:{sketch:c[5]}}),i=new bt({props:{onShoot:c[6]}}),T=new ot({props:{world:c[3]}}),{c(){e=w("div"),se(t.$$.fragment),l=E(),o=w("div"),s=w("button"),g=Q(n),a=Q(" pause on collision"),r=E(),v=w("button"),_=Q(m),f=E(),h=w("button"),h.textContent=y,d=E(),se(i.$$.fragment),$=E(),se(T.$$.fragment),P=E(),V=w("table"),Y=w("tbody"),M=w("tr"),J=w("th"),J.textContent=A,L=E(),D=w("td"),W=Q(B),ee=E(),te=w("td"),z=Q(R),ye=E(),F=w("tr"),U=w("th"),U.textContent=O,X=E(),Z=w("td"),we=Q(ve),ue=E(),de=w("td"),Te=Q(be),De=E(),Se=w("tr"),Ve=w("th"),Ve.textContent=st,Ke=E(),Ye=w("td"),Xe=Q(Le),Ze=E(),Ae=w("td"),Ge=Q(Me),this.h()},l(I){e=x(I,"DIV",{class:!0});var q=k(e);re(t.$$.fragment,q),q.forEach(p),l=j(I),o=x(I,"DIV",{});var Ee=k(o);s=x(Ee,"BUTTON",{});var tt=k(s);g=K(tt,n),a=K(tt," pause on collision"),tt.forEach(p),r=j(Ee),v=x(Ee,"BUTTON",{});var lt=k(v);_=K(lt,m),lt.forEach(p),f=j(Ee),h=x(Ee,"BUTTON",{"data-svelte-h":!0}),H(h)!=="svelte-tlxueg"&&(h.textContent=y),Ee.forEach(p),d=j(I),re(i.$$.fragment,I),$=j(I),re(T.$$.fragment,I),P=j(I),V=x(I,"TABLE",{});var it=k(V);Y=x(it,"TBODY",{});var We=k(Y);M=x(We,"TR",{});var Be=k(M);J=x(Be,"TH",{"data-svelte-h":!0}),H(J)!=="svelte-rirgm4"&&(J.textContent=A),L=j(Be),D=x(Be,"TD",{});var ct=k(D);W=K(ct,B),ct.forEach(p),ee=j(Be),te=x(Be,"TD",{});var at=k(te);z=K(at,R),at.forEach(p),Be.forEach(p),ye=j(We),F=x(We,"TR",{});var Oe=k(F);U=x(Oe,"TH",{"data-svelte-h":!0}),H(U)!=="svelte-1y1nif6"&&(U.textContent=O),X=j(Oe),Z=x(Oe,"TD",{});var ut=k(Z);we=K(ut,ve),ut.forEach(p),ue=j(Oe),de=x(Oe,"TD",{});var dt=k(de);Te=K(dt,be),dt.forEach(p),De=j(Oe),Oe.forEach(p),Se=x(We,"TR",{});var Fe=k(Se);Ve=x(Fe,"TH",{"data-svelte-h":!0}),H(Ve)!=="svelte-1uw1fs2"&&(Ve.textContent=st),Ke=j(Fe),Ye=x(Fe,"TD",{});var ft=k(Ye);Xe=K(ft,Le),ft.forEach(p),Ze=j(Fe),Ae=x(Fe,"TD",{});var mt=k(Ae);Ge=K(mt,Me),mt.forEach(p),Fe.forEach(p),We.forEach(p),it.forEach(p),this.h()},h(){N(e,"class","d-flex justify-content-center")},m(I,q){S(I,e,q),le(t,e,null),S(I,l,q),S(I,o,q),b(o,s),b(s,g),b(s,a),b(o,r),b(o,v),b(v,_),b(o,f),b(o,h),S(I,d,q),le(i,I,q),S(I,$,q),le(T,I,q),S(I,P,q),S(I,V,q),b(V,Y),b(Y,M),b(M,J),b(M,L),b(M,D),b(D,W),b(M,ee),b(M,te),b(te,z),b(Y,ye),b(Y,F),b(F,U),b(F,X),b(F,Z),b(Z,we),b(F,ue),b(F,de),b(de,Te),b(F,De),b(Y,Se),b(Se,Ve),b(Se,Ke),b(Se,Ye),b(Ye,Xe),b(Se,Ze),b(Se,Ae),b(Ae,Ge),pe=!0,et||(rt=[G(s,"click",c[7]),G(v,"click",c[8]),G(h,"click",c[4])],et=!0)},p(I,[q]){(!pe||q&1)&&n!==(n=I[0]?"Disable":"Enable")&&ne(g,n),(!pe||q&2)&&m!==(m=I[1]?"Play":"Pause")&&ne(_,m);const Ee={};q&8&&(Ee.world=I[3]),T.$set(Ee),(!pe||q&4)&&B!==(B=I[2].t+"")&&ne(W,B),(!pe||q&4)&&R!==(R=I[2].frameTime+"")&&ne(z,R),(!pe||q&4)&&ve!==(ve=I[2].spherePos.x.toFixed(2)+"")&&ne(we,ve),(!pe||q&4)&&be!==(be=I[2].spherePos.y.toFixed(2)+"")&&ne(Te,be),(!pe||q&4)&&Le!==(Le=I[2].sphereVel.x.toFixed(2)+"")&&ne(Xe,Le),(!pe||q&4)&&Me!==(Me=I[2].sphereVel.y.toFixed(2)+"")&&ne(Ge,Me)},i(I){pe||(ie(t.$$.fragment,I),ie(i.$$.fragment,I),ie(T.$$.fragment,I),pe=!0)},o(I){ce(t.$$.fragment,I),ce(i.$$.fragment,I),ce(T.$$.fragment,I),pe=!1},d(I){I&&(p(e),p(l),p(o),p(d),p($),p(P),p(V)),ae(t),ae(i,I),ae(T,I),et=!1,Ue(rt)}}}const Qe=60;function en(c,e,t){console.clear();let l=!1,o=!1,s={t:"0",frameTime:"0",spherePos:new u(0,0),sphereVel:new u(0,0),ballIsColliding:!1},n,g;const a=()=>{t(3,n=new Pe({dimensions:new u(15,15),reporter:i=>{var $;t(2,s.t=($=i==null?void 0:i.t)==null?void 0:$.toFixed(1),s),s.spherePos.copy(g.position).unfloat(),s.sphereVel.copy(g.velocity).unfloat(),t(2,s.frameTime=i.frameTime.toFixed(2),s),t(2,s),t(2,s.ballIsColliding=g.data.isColliding,s),l&&g.data.isColliding&&!o&&t(1,o=!0)},enableGravity:!0}));const d=Kt();g=d.sphere;for(const i of d.objects)n.addObject(i)},r=d=>typeof d=="number"?d*Qe:d.clone().multiplyScalar(Qe),v=d=>typeof d=="number"?d/Qe:d.clone().divideScalar(Qe);let m;const _=d=>{d.setup=()=>{m=d,a();const T=r(n.dimensions);d.createCanvas(T.x,T.y),d.background(0),d.fill(255),d.stroke(255),a()},d.draw=()=>{d.background(0),Ne(d)?g.fixed=!0:g.fixed=!1,o||n.step(),Re(d,n),$(d)};let i;d.mousePressed=()=>{Ie(d)&&(i=v(new u(d.mouseX,d.height-d.mouseY)),g.position.copy(i))},d.mouseReleased=()=>{if(!Ie(d)||!i)return;const T=v(new u(d.mouseX,d.height-d.mouseY)),P=i.subtract(T).multiplyScalar(3);i=void 0,g.velocity.copy(P)};const $=T=>{if(!i)return;T.stroke("blue"),T.strokeWeight(2);const P=r(i);T.line(P.x,T.height-P.y,T.mouseX,T.mouseY)}},f=d=>{d.multiplyScalar(1e4),n.applyForce(g,d)};return Ce(()=>{m==null||m.remove()}),[l,o,s,n,a,_,f,()=>t(0,l=!l),()=>t(1,o=!o)]}let tn=class extends me{constructor(e){super(),he(this,e,en,Zt,fe,{})}};const nn=()=>{const c=[],e=C({geometry:{type:"line",vector:new u(15,0)},position:new u(0,0),fixed:!0});c.push(e);const t=C({geometry:{type:"line",vector:new u(0,100)},position:new u(0,0),fixed:!0});c.push(t);const l=C({geometry:{type:"line",vector:new u(0,100)},position:new u(15,0),fixed:!0});c.push(l);const o=C({geometry:{type:"line",vector:new u(3,-3)},position:new u(3.5,8),fixed:!0});c.push(o);const s=C({geometry:{type:"line",vector:new u(3,3)},position:new u(3.5,5),fixed:!0});c.push(s);const n=C({geometry:{type:"line",vector:new u(6,0)},position:new u(2,2),fixed:!0});c.push(n);const g=C({geometry:{type:"line",vector:new u(4,0)},position:new u(3,2.5),fixed:!0});c.push(g);const a=C({geometry:{type:"line",vector:new u(2,0)},position:new u(4,3),fixed:!0});c.push(a);const r=C({geometry:{type:"line",vector:new u(.6,0)},position:new u(4.7,3.5),fixed:!0});c.push(r);const v=C({geometry:{type:"line",vector:new u(1,0)},position:new u(10,10.1),fixed:!0});c.push(v);const m=C({geometry:{type:"line",vector:new u(0,-4)},position:new u(11,10),fixed:!0});c.push(m);const _=C({geometry:{type:"line",vector:new u(0,-4)},position:new u(11.5,10),fixed:!0});c.push(_);const f=C({geometry:{type:"line",vector:new u(0,-4)},position:new u(12,10),fixed:!0});c.push(f);const h=C({geometry:{type:"line",vector:new u(1,0)},position:new u(12,10.1),fixed:!0});c.push(h);for(let y=.2;y<.5;y+=.1)for(let d=0;d<10;d++){const i=C({geometry:{type:"line",vector:new u(0,3)},position:new u(9+d*y,1),fixed:!0});c.push(i)}return{objects:c}};function on(c){let e,t,l,o,s,n=c[0]?"Disable":"Enable",g,a,r,v,m=c[1]?"Play":"Pause",_,f,h,y="Reset",d,i,$,T,P,V,Y,M="Simulation time/Frame duration",J,A,L=c[2].t+"",D,B,W,ee=c[2].frameTime+"",te,R,z,ye;return t=new ke({props:{sketch:c[5]}}),i=new ot({props:{world:c[3]}}),{c(){e=w("div"),se(t.$$.fragment),l=E(),o=w("div"),s=w("button"),g=Q(n),a=Q(" pause on collision"),r=E(),v=w("button"),_=Q(m),f=E(),h=w("button"),h.textContent=y,d=E(),se(i.$$.fragment),$=E(),T=w("table"),P=w("tbody"),V=w("tr"),Y=w("th"),Y.textContent=M,J=E(),A=w("td"),D=Q(L),B=E(),W=w("td"),te=Q(ee),this.h()},l(F){e=x(F,"DIV",{class:!0});var U=k(e);re(t.$$.fragment,U),U.forEach(p),l=j(F),o=x(F,"DIV",{});var O=k(o);s=x(O,"BUTTON",{});var X=k(s);g=K(X,n),a=K(X," pause on collision"),X.forEach(p),r=j(O),v=x(O,"BUTTON",{});var Z=k(v);_=K(Z,m),Z.forEach(p),f=j(O),h=x(O,"BUTTON",{"data-svelte-h":!0}),H(h)!=="svelte-tlxueg"&&(h.textContent=y),O.forEach(p),d=j(F),re(i.$$.fragment,F),$=j(F),T=x(F,"TABLE",{});var ve=k(T);P=x(ve,"TBODY",{});var we=k(P);V=x(we,"TR",{});var ue=k(V);Y=x(ue,"TH",{"data-svelte-h":!0}),H(Y)!=="svelte-rirgm4"&&(Y.textContent=M),J=j(ue),A=x(ue,"TD",{});var de=k(A);D=K(de,L),de.forEach(p),B=j(ue),W=x(ue,"TD",{});var be=k(W);te=K(be,ee),be.forEach(p),ue.forEach(p),we.forEach(p),ve.forEach(p),this.h()},h(){N(e,"class","d-flex justify-content-center")},m(F,U){S(F,e,U),le(t,e,null),S(F,l,U),S(F,o,U),b(o,s),b(s,g),b(s,a),b(o,r),b(o,v),b(v,_),b(o,f),b(o,h),S(F,d,U),le(i,F,U),S(F,$,U),S(F,T,U),b(T,P),b(P,V),b(V,Y),b(V,J),b(V,A),b(A,D),b(V,B),b(V,W),b(W,te),R=!0,z||(ye=[G(s,"click",c[6]),G(v,"click",c[7]),G(h,"click",c[4])],z=!0)},p(F,[U]){(!R||U&1)&&n!==(n=F[0]?"Disable":"Enable")&&ne(g,n),(!R||U&2)&&m!==(m=F[1]?"Play":"Pause")&&ne(_,m);const O={};U&8&&(O.world=F[3]),i.$set(O),(!R||U&4)&&L!==(L=F[2].t+"")&&ne(D,L),(!R||U&4)&&ee!==(ee=F[2].frameTime+"")&&ne(te,ee)},i(F){R||(ie(t.$$.fragment,F),ie(i.$$.fragment,F),R=!0)},o(F){ce(t.$$.fragment,F),ce(i.$$.fragment,F),R=!1},d(F){F&&(p(e),p(l),p(o),p(d),p($),p(T)),ae(t),ae(i,F),z=!1,Ue(ye)}}}const gt=60;function sn(c,e,t){console.clear();let l=!1,o=!1,s={t:"0",frameTime:"0"},n;const g=()=>{clearInterval(m),m=setInterval(a,100),t(3,n=new Pe({dimensions:new u(15,15),reporter:d=>{var i;t(2,s.t=(i=d==null?void 0:d.t)==null?void 0:i.toFixed(1),s),t(2,s.frameTime=d.frameTime.toFixed(2),s),t(2,s)},enableGravity:!0}));const y=nn();for(const d of y.objects)n.addObject(d)},a=()=>{console.log("add ball");const y=Math.random()*n.dimensions.x,d=Math.random()*n.dimensions.y,i=-5+Math.random()*10,$=-5+Math.random()*10,T=C({geometry:{type:"sphere",r:.1},position:new u(y,d),velocity:new u(i,$)});n.addObject(T)},r=y=>typeof y=="number"?y*gt:y.clone().multiplyScalar(gt);let v,m;const _=y=>{y.setup=()=>{v=y,g();const d=r(n.dimensions);y.createCanvas(d.x,d.y),y.background(0),y.fill(255),y.stroke(255),g()},y.draw=()=>{y.background(0),o||n.step(),Re(y,n)}};return Ce(()=>{v==null||v.remove(),clearInterval(m)}),[l,o,s,n,g,_,()=>t(0,l=!l),()=>t(1,o=!o)]}class rn extends me{constructor(e){super(),he(this,e,sn,on,fe,{})}}function ln(c){let e,t,l;return t=new ke({props:{sketch:c[0]}}),{c(){e=w("div"),se(t.$$.fragment),this.h()},l(o){e=x(o,"DIV",{class:!0});var s=k(e);re(t.$$.fragment,s),s.forEach(p),this.h()},h(){N(e,"class","d-flex justify-content-center")},m(o,s){S(o,e,s),le(t,e,null),l=!0},p:_e,i(o){l||(ie(t.$$.fragment,o),l=!0)},o(o){ce(t.$$.fragment,o),l=!1},d(o){o&&p(e),ae(t)}}}const je=6;function cn(c){console.clear();let e;const t=C({geometry:{type:"sphere",r:10},position:new u(30,50),velocity:new u(15,15)}),l=C({geometry:{type:"line",vector:new u(80,0)},position:new u(10,70)}),o=new _t,s=n=>{const g=new u(100,100),a=oe(g,je);n.setup=()=>{e=n,n.createCanvas(a.x,a.y),n.noFill()};let r;n.draw=()=>{if(n.background(0),!Ne(n))r=void 0;else{const i=nt(new u(n.mouseX,n.height-n.mouseY),je);if(r||(i.distance(t.position)<=t.geometry.r?r="sphere":i.distance(t.position.clone().add(t.velocity))<=6?r="spherevelocity":i.distance(l.position)<=6?r="linestart":i.distance(l.geometry.vector.clone().add(l.position))<=6&&(r="lineend")),r==="sphere")t.position.copy(i);else if(r==="spherevelocity"){const $=i.clone().subtract(t.position);t.velocity.copy($)}else if(r==="linestart")l.position.copy(i);else if(r==="lineend"){const $=i.clone().subtract(l.position);l.geometry.vector.copy($)}}const{intersection:v,bouncedVelocity:m}=o.apply(l,t);for(let i=0;i<10;i++){const{positionCorrection:$}=o.apply(l,t);$&&(t.position.add($.multiplyScalar(.5)),l.position.subtract($.multiplyScalar(.5)))}n.stroke(255),n.noFill();const _=oe(t.position,je);n.circle(_.x,n.height-_.y,2*t.geometry.r*je),n.stroke(255);const f=oe(t.velocity,je);n.line(_.x,n.height-_.y,_.x+f.x,n.height-(_.y+f.y)),n.stroke(255);const{x:h,y}=oe(l.position,je),d=oe(l.geometry.vector,je);if(n.line(h,n.height-y,h+d.x,n.height-(y+d.y)),v){n.stroke("#54d7ff"),n.fill("#54d7ff");const i=oe(v,je);n.circle(i.x,n.height-i.y,5)}if(m){n.stroke("green"),n.fill("green");const i=oe(m,je);n.line(_.x,n.height-_.y,_.x+i.x,n.height-(_.y+i.y))}}};return Ce(()=>{e==null||e.remove()}),[s]}class an extends me{constructor(e){super(),he(this,e,cn,ln,fe,{})}}function un(c){let e,t,l;return t=new ke({props:{sketch:c[0]}}),{c(){e=w("div"),se(t.$$.fragment),this.h()},l(o){e=x(o,"DIV",{class:!0});var s=k(e);re(t.$$.fragment,s),s.forEach(p),this.h()},h(){N(e,"class","d-flex justify-content-center")},m(o,s){S(o,e,s),le(t,e,null),l=!0},p:_e,i(o){l||(ie(t.$$.fragment,o),l=!0)},o(o){ce(t.$$.fragment,o),l=!1},d(o){o&&p(e),ae(t)}}}const xe=6;function dn(c){console.clear();let e;const t=C({geometry:{type:"sphere",r:10},position:new u(30,50),velocity:new u(15,15)}),l=C({geometry:{type:"sphere",r:10},position:new u(70,50),velocity:new u(0,45)}),o=new $t,s=n=>{const g=new u(100,100),a=oe(g,xe);n.setup=()=>{e=n,n.createCanvas(a.x,a.y),n.noFill()};let r;n.draw=()=>{if(n.background(0),!Ne(n))r=void 0;else{const d=nt(new u(n.mouseX,n.height-n.mouseY),xe);if(r||(d.distance(t.position)<=t.geometry.r?r="sphere":d.distance(t.position.clone().add(t.velocity))<=6?r="spherevelocity":d.distance(l.position)<=l.geometry.r?r="sphere2":d.distance(l.position.clone().add(l.velocity))<=6&&(r="sphere2velocity")),r==="sphere")t.position.copy(d);else if(r==="spherevelocity"){const i=d.clone().subtract(t.position);t.velocity.copy(i)}else if(r==="sphere2")l.position.copy(d);else if(r==="sphere2velocity"){const i=d.clone().subtract(l.position);l.velocity.copy(i)}}const{intersection:v,bouncedVelocity:m}=o.apply(t,l);for(let d=0;d<10;d++){const{positionCorrection:i}=o.apply(t,l);i&&(t.position.add(i.multiplyScalar(.5)),l.position.subtract(i.multiplyScalar(.5)))}n.stroke(255),n.noFill();const _=oe(t.position,xe);n.circle(_.x,n.height-_.y,2*t.geometry.r*xe),n.stroke(255);const f=oe(t.velocity,xe);n.line(_.x,n.height-_.y,_.x+f.x,n.height-(_.y+f.y)),n.stroke(255),n.noFill();const h=oe(l.position,xe);n.circle(h.x,n.height-h.y,2*l.geometry.r*xe),n.stroke(255);const y=oe(l.velocity,xe);if(n.line(h.x,n.height-h.y,h.x+y.x,n.height-(h.y+y.y)),v){n.stroke("#54d7ff"),n.fill("#54d7ff");const d=oe(v,xe);n.circle(d.x,n.height-d.y,5)}if(m){n.stroke("green"),n.fill("green");const d=oe(m,xe);n.line(_.x,n.height-_.y,_.x+d.x,n.height-(_.y+d.y))}}};return Ce(()=>{e==null||e.remove()}),[s]}class fn extends me{constructor(e){super(),he(this,e,dn,un,fe,{})}}function mn(c){let e,t="<span>This page is a list of engine tests. They use the actual engine and allow me to setup different situations and check manually for regressions and bugs.</span> <br/> <span>Use the selection menu to see the different pages</span>",l,o,s,n,g;return n=new wt({props:{tabs:c[0]}}),{c(){e=w("div"),e.innerHTML=t,l=E(),o=w("br"),s=E(),se(n.$$.fragment)},l(a){e=x(a,"DIV",{"data-svelte-h":!0}),H(e)!=="svelte-11mzr87"&&(e.innerHTML=t),l=j(a),o=x(a,"BR",{}),s=j(a),re(n.$$.fragment,a)},m(a,r){S(a,e,r),S(a,l,r),S(a,o,r),S(a,s,r),le(n,a,r),g=!0},p:_e,i(a){g||(ie(n.$$.fragment,a),g=!0)},o(a){ce(n.$$.fragment,a),g=!1},d(a){a&&(p(e),p(l),p(o),p(s)),ae(n,a)}}}function hn(c){return[[{label:"Fireworks",value:Ot},{label:"Ball pool",value:Lt},{label:"Sphere Sphere Collider",value:fn},{label:"Line Sphere Collider",value:an},{label:"Perfs - Multiple balls",value:rn},{label:"Playground - Engine settings",value:tn},{label:"Dynamics + collisions - 1",value:Qt},{label:"Dynamics + collisions - 2",value:zt},{label:"Sphere Line - pull apart",value:Xt},{label:"One ball bounce",value:Wt}]]}class $n extends me{constructor(e){super(),he(this,e,hn,mn,fe,{})}}export{$n as component};
