import{s as fe,f as _,g as $,h as T,d as y,j as L,i as C,z as $e,M as ke,a as E,e as ht,u as H,c as j,y as p,P as ve,L as G,Q as xe,O as Re,l as J,m as K,n as ne}from"../chunks/scheduler.32ebed32.js";import{S as me,i as he,b as oe,d as se,m as re,a as le,t as ie,e as ce}from"../chunks/index.c25c2528.js";import{P as Te,V as u,w as ue,m as Le,s as nt,d as Ne,c as k,a as Ie,C as bt}from"../chunks/PhysicObject.edd17eee.js";import{_ as wt}from"../chunks/preload-helper.a4192956.js";import{W as Pe,L as _t,S as $t}from"../chunks/World.4e963e81.js";function xt(l){let e,t,r;return t=new Te({props:{sketch:l[0]}}),{c(){e=_("div"),oe(t.$$.fragment),this.h()},l(o){e=$(o,"DIV",{class:!0});var s=T(e);se(t.$$.fragment,s),s.forEach(y),this.h()},h(){L(e,"class","d-flex justify-content-center")},m(o,s){C(o,e,s),re(t,e,null),r=!0},p:$e,i(o){r||(le(t.$$.fragment,o),r=!0)},o(o){ie(t.$$.fragment,o),r=!1},d(o){o&&y(e),ce(t)}}}const yt=6;function kt(l){console.clear();let e;const t={world:{collisions:!1,ttl:160,maxNbObjects:300,particleSize:1},cannon:{creationDelay:1,minYVelocity:30,maxYVelocityVariation:1,maxXVelocity:30}};let r;const o=async()=>{const f=await wt(()=>import("../chunks/dat.gui.module.ff711f94.js"),[],import.meta.url);r=new f.GUI,r.domElement.setAttribute("style","background-color: black");const d=r.addFolder("World");d.open(),d.add(i==null?void 0:i.objects,"length").name("Nb objects").listen(),d.add(t.world,"collisions").name("Enable collisions").onFinishChange(()=>i.collisionEnabled=t.world.collisions),d.add(t.world,"ttl",0,1e4).name("Particles TTL"),d.add(t.world,"maxNbObjects",0,3e3).name("Max nb particles"),d.add(t.world,"particleSize",1,20,1).name("Particles size");const b=r.addFolder("Cannon");b.open(),b.add(t.cannon,"minYVelocity",0,100).name("min. Y velocity"),b.add(t.cannon,"maxYVelocityVariation",0,2).name("Y vel. variation"),b.add(t.cannon,"maxXVelocity",0,100).name("max. X velocity "),b.add(t.cannon,"creationDelay",1,30,1).name("Fire rate")},s=()=>{const{minYVelocity:f,maxYVelocityVariation:d,maxXVelocity:b}=t.cannon,v=Math.random()*b-b/2,w=f+(d-Math.random())*f;return new u(v,w)},n=f=>{const d={...k({geometry:{type:"sphere",r:t.world.particleSize},position:h,velocity:s()}),age:0};f.addObject(d)},h=new u(0,0);let i;const c=f=>{const d=new u(100,100),b=ue(d,yt);h.x=d.x/2,h.y=10,f.setup=()=>{e=f,f.createCanvas(b.x,b.y),f.noFill(),i=new Pe({dimensions:d,enableGravity:!0,enableCollisions:!1}),n(i),o()},f.draw=()=>{if(f.background(0),Le(f)){const v=nt(new u(f.mouseX,f.height-f.mouseY),yt);h.copy(v)}f.frameCount%t.cannon.creationDelay===0&&i.objects.length<t.world.maxNbObjects&&n(i),i.step(),i.objects.forEach(v=>{v.data.age>t.world.ttl&&i.removeObject(v)}),Ne(f,i)}};return ke(()=>{r==null||r.destroy(),e==null||e.remove()}),[c]}let Tt=class extends me{constructor(e){super(),he(this,e,kt,xt,fe,{})}};function pt(l){let e,t,r,o,s="dt",n,h,i,c,f,d,b="drag",v,w,g,m,a,x,S="gravity enabled",O,F,N,W,Q;return{c(){e=_("table"),t=_("tbody"),r=_("tr"),o=_("th"),o.textContent=s,n=E(),h=_("td"),i=_("input"),c=E(),f=_("tr"),d=_("th"),d.textContent=b,v=E(),w=_("td"),g=_("input"),m=E(),a=_("tr"),x=_("th"),x.textContent=S,O=E(),F=_("td"),N=_("input"),this.h()},l(Y){e=$(Y,"TABLE",{});var M=T(e);t=$(M,"TBODY",{});var D=T(t);r=$(D,"TR",{});var B=T(r);o=$(B,"TH",{"data-svelte-h":!0}),H(o)!=="svelte-16dheti"&&(o.textContent=s),n=j(B),h=$(B,"TD",{});var A=T(h);i=$(A,"INPUT",{type:!0,min:!0,max:!0,step:!0}),A.forEach(y),B.forEach(y),c=j(D),f=$(D,"TR",{});var ee=T(f);d=$(ee,"TH",{"data-svelte-h":!0}),H(d)!=="svelte-2hq5g"&&(d.textContent=b),v=j(ee),w=$(ee,"TD",{});var te=T(w);g=$(te,"INPUT",{type:!0,min:!0,max:!0,step:!0}),te.forEach(y),ee.forEach(y),m=j(D),a=$(D,"TR",{});var R=T(a);x=$(R,"TH",{"data-svelte-h":!0}),H(x)!=="svelte-ic0r87"&&(x.textContent=S),O=j(R),F=$(R,"TD",{});var z=T(F);N=$(z,"INPUT",{type:!0}),z.forEach(y),R.forEach(y),D.forEach(y),M.forEach(y),this.h()},h(){L(i,"type","number"),L(i,"min","0"),L(i,"max","0.5"),L(i,"step","0.001"),L(g,"type","number"),L(g,"min","0"),L(g,"max","0.01"),L(g,"step","0.001"),L(N,"type","checkbox")},m(Y,M){C(Y,e,M),p(e,t),p(t,r),p(r,o),p(r,n),p(r,h),p(h,i),ve(i,l[0].dt),p(t,c),p(t,f),p(f,d),p(f,v),p(f,w),p(w,g),ve(g,l[0].drag),p(t,m),p(t,a),p(a,x),p(a,O),p(a,F),p(F,N),N.checked=l[0].gravityEnabled,W||(Q=[G(i,"input",l[1]),G(g,"input",l[2]),G(N,"change",l[3])],W=!0)},p(Y,M){M&1&&xe(i.value)!==Y[0].dt&&ve(i,Y[0].dt),M&1&&xe(g.value)!==Y[0].drag&&ve(g,Y[0].drag),M&1&&(N.checked=Y[0].gravityEnabled)},d(Y){Y&&y(e),W=!1,Re(Q)}}}function Ct(l){let e,t="Engine settings",r,o,s=l[0]&&pt(l);return{c(){e=_("p"),e.textContent=t,r=E(),s&&s.c(),o=ht(),this.h()},l(n){e=$(n,"P",{class:!0,"data-svelte-h":!0}),H(e)!=="svelte-gf3gek"&&(e.textContent=t),r=j(n),s&&s.l(n),o=ht(),this.h()},h(){L(e,"class","title svelte-g74uk9")},m(n,h){C(n,e,h),C(n,r,h),s&&s.m(n,h),C(n,o,h)},p(n,[h]){n[0]?s?s.p(n,h):(s=pt(n),s.c(),s.m(o.parentNode,o)):s&&(s.d(1),s=null)},i:$e,o:$e,d(n){n&&(y(e),y(r),y(o)),s&&s.d(n)}}}function St(l,e,t){let{world:r}=e;function o(){r.dt=xe(this.value),t(0,r)}function s(){r.drag=xe(this.value),t(0,r)}function n(){r.gravityEnabled=this.checked,t(0,r)}return l.$$set=h=>{"world"in h&&t(0,r=h.world)},[r,o,s,n]}class ot extends me{constructor(e){super(),he(this,e,St,Ct,fe,{world:0})}}function Et(l){let e,t="Shooter",r,o,s,n="Angle",h,i,c,f,d,b,v,w,g="Magnitude",m,a,x,S,O,F,N,W,Q="Shoot",Y,M;return{c(){e=_("p"),e.textContent=t,r=E(),o=_("span"),s=_("label"),s.textContent=n,h=E(),i=_("input"),c=E(),f=J(l[0]),d=J(" deg"),b=E(),v=_("span"),w=_("label"),w.textContent=g,m=E(),a=_("input"),x=E(),S=J(l[1]),O=E(),F=_("br"),N=E(),W=_("button"),W.textContent=Q,this.h()},l(D){e=$(D,"P",{class:!0,"data-svelte-h":!0}),H(e)!=="svelte-198ugk3"&&(e.textContent=t),r=j(D),o=$(D,"SPAN",{});var B=T(o);s=$(B,"LABEL",{for:!0,"data-svelte-h":!0}),H(s)!=="svelte-lab87n"&&(s.textContent=n),h=j(B),i=$(B,"INPUT",{id:!0,type:!0,min:!0,max:!0}),c=j(B),f=K(B,l[0]),d=K(B," deg"),B.forEach(y),b=j(D),v=$(D,"SPAN",{});var A=T(v);w=$(A,"LABEL",{for:!0,"data-svelte-h":!0}),H(w)!=="svelte-1vc5oxa"&&(w.textContent=g),m=j(A),a=$(A,"INPUT",{id:!0,type:!0,min:!0,max:!0,step:!0}),x=j(A),S=K(A,l[1]),A.forEach(y),O=j(D),F=$(D,"BR",{}),N=j(D),W=$(D,"BUTTON",{"data-svelte-h":!0}),H(W)!=="svelte-8jpwxr"&&(W.textContent=Q),this.h()},h(){L(e,"class","title svelte-g74uk9"),L(s,"for","angleSlider"),L(i,"id","angleSlider"),L(i,"type","range"),L(i,"min","0"),L(i,"max","360"),L(w,"for","magSlider"),L(a,"id","magSlider"),L(a,"type","range"),L(a,"min","0"),L(a,"max","1"),L(a,"step","0.01")},m(D,B){C(D,e,B),C(D,r,B),C(D,o,B),p(o,s),p(o,h),p(o,i),ve(i,l[0]),p(o,c),p(o,f),p(o,d),C(D,b,B),C(D,v,B),p(v,w),p(v,m),p(v,a),ve(a,l[1]),p(v,x),p(v,S),C(D,O,B),C(D,F,B),C(D,N,B),C(D,W,B),Y||(M=[G(i,"change",l[4]),G(i,"input",l[4]),G(a,"change",l[5]),G(a,"input",l[5]),G(W,"click",l[6])],Y=!0)},p(D,[B]){B&1&&ve(i,D[0]),B&1&&ne(f,D[0]),B&2&&ve(a,D[1]),B&2&&ne(S,D[1])},i:$e,o:$e,d(D){D&&(y(e),y(r),y(o),y(b),y(v),y(O),y(F),y(N),y(W)),Y=!1,Re(M)}}}function jt(l,e,t){let{onShoot:r}=e,o=0,s=.5;const n=()=>{const f=new u(1,0);f.rotateDeg(o),f.multiplyScalar(s),r(f)};function h(){o=xe(this.value),t(0,o)}function i(){s=xe(this.value),t(1,s)}const c=()=>n();return l.$$set=f=>{"onShoot"in f&&t(3,r=f.onShoot)},[o,s,n,r,h,i,c]}class gt extends me{constructor(e){super(),he(this,e,jt,Et,fe,{onShoot:3})}}const Pt=l=>{const e=[],t=k({geometry:{type:"line",vector:new u(15,0)},position:new u(0,15),fixed:!0});e.push(t);const r=k({geometry:{type:"line",vector:new u(15,0)},position:new u(0,0),fixed:!0});e.push(r);const o=k({geometry:{type:"line",vector:new u(0,100)},position:new u(0,0),fixed:!0});e.push(o);const s=k({geometry:{type:"line",vector:new u(0,100)},position:new u(15,0),fixed:!0});e.push(s);let n;for(let h=0;h<l.nbBalls;h++){const i=k({geometry:{type:"sphere",r:l.rBalls},position:new u(Math.random()*15,Math.random()*15),velocity:new u(Math.random()*15,Math.random()*15)});e.push(i),n||(n=i)}return{objects:e,sphere:n}};function Ot(l){let e,t,r,o,s,n=l[0]?"Play":"Pause",h,i,c,f="Reset",d,b,v="Add ball",w,g,m,a,x,S,O,F,N,W="Number of balls",Q,Y,M,D,B,A,ee="Balls radius",te,R,z,ye,V,U;return t=new Te({props:{sketch:l[5]}}),g=new gt({props:{onShoot:l[6]}}),a=new ot({props:{world:l[2]}}),{c(){e=_("div"),oe(t.$$.fragment),r=E(),o=_("div"),s=_("button"),h=J(n),i=E(),c=_("button"),c.textContent=f,d=E(),b=_("button"),b.textContent=v,w=E(),oe(g.$$.fragment),m=E(),oe(a.$$.fragment),x=E(),S=_("table"),O=_("tbody"),F=_("tr"),N=_("th"),N.textContent=W,Q=E(),Y=_("td"),M=_("input"),D=E(),B=_("tr"),A=_("th"),A.textContent=ee,te=E(),R=_("td"),z=_("input"),this.h()},l(P){e=$(P,"DIV",{class:!0});var X=T(e);se(t.$$.fragment,X),X.forEach(y),r=j(P),o=$(P,"DIV",{});var Z=T(o);s=$(Z,"BUTTON",{});var ge=T(s);h=K(ge,n),ge.forEach(y),i=j(Z),c=$(Z,"BUTTON",{"data-svelte-h":!0}),H(c)!=="svelte-tlxueg"&&(c.textContent=f),d=j(Z),b=$(Z,"BUTTON",{"data-svelte-h":!0}),H(b)!=="svelte-1xau3n8"&&(b.textContent=v),Z.forEach(y),w=j(P),se(g.$$.fragment,P),m=j(P),se(a.$$.fragment,P),x=j(P),S=$(P,"TABLE",{});var we=T(S);O=$(we,"TBODY",{});var ae=T(O);F=$(ae,"TR",{});var de=T(F);N=$(de,"TH",{"data-svelte-h":!0}),H(N)!=="svelte-eg4byi"&&(N.textContent=W),Q=j(de),Y=$(de,"TD",{});var be=T(Y);M=$(be,"INPUT",{type:!0,min:!0}),be.forEach(y),de.forEach(y),D=j(ae),B=$(ae,"TR",{});var Ce=T(B);A=$(Ce,"TH",{"data-svelte-h":!0}),H(A)!=="svelte-10gtk36"&&(A.textContent=ee),te=j(Ce),R=$(Ce,"TD",{});var De=T(R);z=$(De,"INPUT",{type:!0,min:!0}),De.forEach(y),Ce.forEach(y),ae.forEach(y),we.forEach(y),this.h()},h(){L(e,"class","d-flex justify-content-center"),L(M,"type","number"),L(M,"min","1"),L(z,"type","number"),L(z,"min","1")},m(P,X){C(P,e,X),re(t,e,null),C(P,r,X),C(P,o,X),p(o,s),p(s,h),p(o,i),p(o,c),p(o,d),p(o,b),C(P,w,X),re(g,P,X),C(P,m,X),re(a,P,X),C(P,x,X),C(P,S,X),p(S,O),p(O,F),p(F,N),p(F,Q),p(F,Y),p(Y,M),ve(M,l[1].nbBalls),p(O,D),p(O,B),p(B,A),p(B,te),p(B,R),p(R,z),ve(z,l[1].rBalls),ye=!0,V||(U=[G(s,"click",l[7]),G(c,"click",l[3]),G(b,"click",l[4]),G(M,"change",l[3]),G(M,"input",l[8]),G(z,"change",l[3]),G(z,"input",l[9])],V=!0)},p(P,[X]){(!ye||X&1)&&n!==(n=P[0]?"Play":"Pause")&&ne(h,n);const Z={};X&4&&(Z.world=P[2]),a.$set(Z),X&2&&xe(M.value)!==P[1].nbBalls&&ve(M,P[1].nbBalls),X&2&&xe(z.value)!==P[1].rBalls&&ve(z,P[1].rBalls)},i(P){ye||(le(t.$$.fragment,P),le(g.$$.fragment,P),le(a.$$.fragment,P),ye=!0)},o(P){ie(t.$$.fragment,P),ie(g.$$.fragment,P),ie(a.$$.fragment,P),ye=!1},d(P){P&&(y(e),y(r),y(o),y(w),y(m),y(x),y(S)),ce(t),ce(g,P),ce(a,P),V=!1,Re(U)}}}const He=60;function Dt(l,e,t){console.clear();let r=!1,o={nbBalls:5,rBalls:.2},s,n;const h=()=>{const a=(s==null?void 0:s.gravityEnabled)??!0;t(2,s=new Pe({dimensions:new u(15,15),reporter:()=>{},enableGravity:a}));const x=Pt(o);n=x.sphere;for(const S of x.objects)s.addObject(S)},i=()=>{const a=k({geometry:{type:"sphere",r:o.rBalls},position:new u(7,7),velocity:new u(0,0)});s.addObject(a)},c=a=>typeof a=="number"?a*He:a.clone().multiplyScalar(He),f=a=>typeof a=="number"?a/He:a.clone().divideScalar(He);let d;const b=a=>{a.setup=()=>{d=a,h();const O=c(s.dimensions);a.createCanvas(O.x,O.y),a.background(0),a.fill(255),a.stroke(255),h()},a.draw=()=>{a.background(0),Le(a)?n.fixed=!0:n.fixed=!1,r||s.step(),Ne(a,s),S(a)};let x;a.mousePressed=()=>{Ie(a)&&(x=f(new u(a.mouseX,a.height-a.mouseY)),n.position.copy(x))},a.mouseReleased=()=>{if(!Ie(a)||!x)return;const O=f(new u(a.mouseX,a.height-a.mouseY)),F=x.subtract(O).multiplyScalar(3);x=void 0,n.velocity.copy(F)};const S=O=>{if(!x)return;O.stroke("blue"),O.strokeWeight(2);const F=c(x);O.line(F.x,O.height-F.y,O.mouseX,O.mouseY)}},v=a=>{a.multiplyScalar(1e4),s.applyForce(n,a)};ke(()=>{d==null||d.remove()});const w=()=>t(0,r=!r);function g(){o.nbBalls=xe(this.value),t(1,o)}function m(){o.rBalls=xe(this.value),t(1,o)}return[r,o,s,h,i,b,v,w,g,m]}let Bt=class extends me{constructor(e){super(),he(this,e,Dt,Ot,fe,{})}};function Vt(l){let e,t,r,o,s=l[0][l[0].length-1]+"",n,h,i,c="New ball",f,d,b;return t=new Te({props:{sketch:l[2]}}),{c(){e=_("div"),oe(t.$$.fragment),r=E(),o=_("p"),n=J(s),h=E(),i=_("button"),i.textContent=c,this.h()},l(v){e=$(v,"DIV",{class:!0});var w=T(e);se(t.$$.fragment,w),w.forEach(y),r=j(v),o=$(v,"P",{});var g=T(o);n=K(g,s),g.forEach(y),h=j(v),i=$(v,"BUTTON",{"data-svelte-h":!0}),H(i)!=="svelte-1jwbm46"&&(i.textContent=c),this.h()},h(){L(e,"class","d-flex justify-content-center")},m(v,w){C(v,e,w),re(t,e,null),C(v,r,w),C(v,o,w),p(o,n),C(v,h,w),C(v,i,w),f=!0,d||(b=G(i,"click",l[1]),d=!0)},p(v,[w]){(!f||w&1)&&s!==(s=v[0][v[0].length-1]+"")&&ne(n,s)},i(v){f||(le(t.$$.fragment,v),f=!0)},o(v){ie(t.$$.fragment,v),f=!1},d(v){v&&(y(e),y(r),y(o),y(h),y(i)),ce(t),d=!1,b()}}}function Ft(l,e,t){console.clear();let r=[];const o=c=>{const f=c.objects[c.objects.length-1],d=f.position.clone().toFixed(2),b=f.velocity.clone().toFixed(2);r.push(`${c.t.toFixed(2)} - pos: ${d} - vel: ${b}`),r.length>50&&r.shift(),t(0,r)},s=new Pe({reporter:o,enableGravity:!0}),n=()=>{for(;s.objects.length;)s.objects.pop();const c=k({geometry:{type:"line",vector:new u(100,0)},position:new u(0,0),fixed:!0});s.addObject(c);for(let f=0;f<1;f++){const d=k({geometry:{type:"sphere",r:5},position:new u(20,50),velocity:new u(Math.random()*5-2.5,Math.random()*20)});s.addObject(d)}};let h;const i=c=>{c.setup=()=>{h=c,c.createCanvas(900,600),c.background(0),c.fill(255),c.stroke(255),n()},c.draw=()=>{c.background(0),s.step();for(const f of s.objects){const d=c.map(f.position.x,0,s.dimensions.x,0,c.width),b=c.map(f.position.y,0,s.dimensions.y,c.height,0);if(f.geometry.type==="sphere"&&(c.strokeWeight(f.geometry.r*2),c.point(d,b)),f.geometry.type==="line"){const v=d+c.map(f.geometry.vector.x,0,s.dimensions.x,0,c.width),w=b+c.map(f.geometry.vector.y,0,s.dimensions.y,0,c.height);c.strokeWeight(2),c.line(d,b,v,w)}}}};return ke(()=>{h==null||h.remove()}),[r,n,i]}class It extends me{constructor(e){super(),he(this,e,Ft,Vt,fe,{})}}function Lt(l){let e,t,r,o,s=l[0][l[0].length-1]+"",n,h,i,c="New ball",f,d,b;return t=new Te({props:{sketch:l[2]}}),{c(){e=_("div"),oe(t.$$.fragment),r=E(),o=_("p"),n=J(s),h=E(),i=_("button"),i.textContent=c,this.h()},l(v){e=$(v,"DIV",{class:!0});var w=T(e);se(t.$$.fragment,w),w.forEach(y),r=j(v),o=$(v,"P",{});var g=T(o);n=K(g,s),g.forEach(y),h=j(v),i=$(v,"BUTTON",{"data-svelte-h":!0}),H(i)!=="svelte-1jwbm46"&&(i.textContent=c),this.h()},h(){L(e,"class","d-flex justify-content-center")},m(v,w){C(v,e,w),re(t,e,null),C(v,r,w),C(v,o,w),p(o,n),C(v,h,w),C(v,i,w),f=!0,d||(b=G(i,"click",l[1]),d=!0)},p(v,[w]){(!f||w&1)&&s!==(s=v[0][v[0].length-1]+"")&&ne(n,s)},i(v){f||(le(t.$$.fragment,v),f=!0)},o(v){ie(t.$$.fragment,v),f=!1},d(v){v&&(y(e),y(r),y(o),y(h),y(i)),ce(t),d=!1,b()}}}const ze=6;function Nt(l,e,t){console.clear();let r=[];const o=d=>{const b=d.objects[d.objects.length-1],v=b.position.clone().toFixed(2),w=b.velocity.clone().toFixed(2);r.push(`${d.t.toFixed(2)} - pos: ${v} - vel: ${w}`),r.length>50&&r.shift(),t(0,r)},s=new Pe({reporter:o,enableGravity:!0});let n,h;const i=()=>{for(;s.objects.length;)s.objects.pop();h=k({geometry:{type:"line",vector:new u(40,40)},position:new u(30,30),fixed:!0}),s.addObject(h),n=k({geometry:{type:"sphere",r:10},position:new u(20,50),velocity:new u(2.5,2.5),fixed:!0}),s.addObject(n)};let c;const f=d=>{const b=g=>typeof g=="number"?g*ze:g.clone().multiplyScalar(ze),v=g=>typeof g=="number"?g/ze:g.clone().divideScalar(ze);d.setup=()=>{c=d;const g=b(s.dimensions);d.createCanvas(g.x,g.y),d.background(0),d.fill(255),d.stroke(255),i()};let w;d.draw=()=>{if(d.background(0),s.step(),d.mouseIsPressed){const g=v(new u(d.mouseX,d.height-d.mouseY));if(w||(g.distance(n.position)<2?w="sphere":g.distance(h.position)<2?w="wallstart":g.distance(h.geometry.vector.clone().add(h.position))<2&&(w="wallend")),w==="sphere"&&n.position.copy(g),w==="wallstart"&&h.position.copy(g),w==="wallend"){const m=g.clone().subtract(h.position);h.geometry.vector.copy(m)}}else w=void 0;for(const g of s.objects.sort((m,a)=>m.geometry.type<a.geometry.type?1:-1)){d.stroke(n.data.isColliding?"red":"white");const m=d.map(g.position.x,0,s.dimensions.x,0,d.width),a=d.map(g.position.y,0,s.dimensions.y,d.height,0);if(g.geometry.type==="sphere"){const x=b(g.geometry.r*2);d.strokeWeight(x),d.point(m,a)}if(g.geometry.type==="line"){const x=m+d.map(g.geometry.vector.x,0,s.dimensions.x,0,d.width),S=a-d.map(g.geometry.vector.y,0,s.dimensions.y,0,d.height);d.stroke("blue"),d.strokeWeight(2),d.line(m,a,x,S)}}}};return ke(()=>{c==null||c.remove()}),[r,i,f]}class Mt extends me{constructor(e){super(),he(this,e,Nt,Lt,fe,{})}}function Yt(l){let e,t,r;return t=new Te({props:{sketch:l[0]}}),{c(){e=_("div"),oe(t.$$.fragment),this.h()},l(o){e=$(o,"DIV",{class:!0});var s=T(e);se(t.$$.fragment,s),s.forEach(y),this.h()},h(){L(e,"class","d-flex justify-content-center")},m(o,s){C(o,e,s),re(t,e,null),r=!0},p:$e,i(o){r||(le(t.$$.fragment,o),r=!0)},o(o){ie(t.$$.fragment,o),r=!1},d(o){o&&y(e),ce(t)}}}const qe=6;function Wt(l){console.clear();const e=new Pe({reporter:()=>{},enableGravity:!0});let t;const r=()=>{for(;e.objects.length;)e.objects.pop();t=k({geometry:{type:"sphere",r:5},position:new u(20,50),velocity:new u(Math.random()*5-2.5,Math.random()*20)}),e.addObject(t);const i=k({geometry:{type:"line",vector:new u(100,0)},position:new u(0,2),fixed:!0});e.addObject(i);const c=k({geometry:{type:"line",vector:new u(100,0)},position:new u(0,98),fixed:!0});e.addObject(c);const f=k({geometry:{type:"line",vector:new u(0,100)},position:new u(2,0),fixed:!0});e.addObject(f);const d=k({geometry:{type:"line",vector:new u(0,100)},position:new u(98,0),fixed:!0});e.addObject(d);const b=k({geometry:{type:"line",vector:new u(50,50)},position:new u(20,10),fixed:!0});e.addObject(b)},o=i=>typeof i=="number"?i*qe:i.clone().multiplyScalar(qe),s=i=>typeof i=="number"?i/qe:i.clone().divideScalar(qe);let n;const h=i=>{i.setup=()=>{n=i;const f=o(e.dimensions);i.createCanvas(f.x,f.y),i.background(0),i.fill(255),i.stroke(255),r()},i.draw=()=>{if(i.background(0),i.mouseIsPressed){t.fixed=!0;const f=s(new u(i.mouseX,i.height-i.mouseY));t.position.copy(f)}else t.fixed=!1;e.step(),Ne(i,e)};let c;i.mousePressed=()=>{c=s(new u(i.mouseX,i.height-i.mouseY))},i.mouseReleased=()=>{const f=s(new u(i.mouseX,i.height-i.mouseY)),d=c.subtract(f);t.position.copy(f),t.velocity.copy(d)}};return ke(()=>{n==null||n.remove()}),[h]}class At extends me{constructor(e){super(),he(this,e,Wt,Yt,fe,{})}}function Ut(l){let e,t,r,o,s,n,h,i="Gravity",c,f,d,b="Toggle",v,w,g;return t=new Te({props:{sketch:l[1]}}),{c(){e=_("div"),oe(t.$$.fragment),r=E(),o=_("table"),s=_("tbody"),n=_("tr"),h=_("th"),h.textContent=i,c=E(),f=_("td"),d=_("button"),d.textContent=b,this.h()},l(m){e=$(m,"DIV",{class:!0});var a=T(e);se(t.$$.fragment,a),a.forEach(y),r=j(m),o=$(m,"TABLE",{});var x=T(o);s=$(x,"TBODY",{});var S=T(s);n=$(S,"TR",{});var O=T(n);h=$(O,"TH",{"data-svelte-h":!0}),H(h)!=="svelte-vy75us"&&(h.textContent=i),c=j(O),f=$(O,"TD",{});var F=T(f);d=$(F,"BUTTON",{"data-svelte-h":!0}),H(d)!=="svelte-18lc94l"&&(d.textContent=b),F.forEach(y),O.forEach(y),S.forEach(y),x.forEach(y),this.h()},h(){L(e,"class","d-flex justify-content-center")},m(m,a){C(m,e,a),re(t,e,null),C(m,r,a),C(m,o,a),p(o,s),p(s,n),p(n,h),p(n,c),p(n,f),p(f,d),v=!0,w||(g=G(d,"click",l[2]),w=!0)},p:$e,i(m){v||(le(t.$$.fragment,m),v=!0)},o(m){ie(t.$$.fragment,m),v=!1},d(m){m&&(y(e),y(r),y(o)),ce(t),w=!1,g()}}}const Qe=6;function Rt(l){console.clear();const e=new Pe({reporter:()=>{},enableGravity:!0});let t;const r=()=>{for(;e.objects.length;)e.objects.pop();const c=k({geometry:{type:"line",vector:new u(100,0)},position:new u(0,0),fixed:!0});e.addObject(c);const f=k({geometry:{type:"line",vector:new u(100,0)},position:new u(0,100),fixed:!0});e.addObject(f);const d=k({geometry:{type:"line",vector:new u(0,100)},position:new u(0,0),fixed:!0});e.addObject(d);const b=k({geometry:{type:"line",vector:new u(0,100)},position:new u(100,0),fixed:!0});e.addObject(b);const v=k({geometry:{type:"line",vector:new u(50,50)},position:new u(20,10),fixed:!0});e.addObject(v),t=k({geometry:{type:"sphere",r:2},position:new u(20,50),velocity:new u(Math.random()*5-2.5,Math.random()*20)}),e.addObject(t)},o=c=>typeof c=="number"?c*Qe:c.clone().multiplyScalar(Qe),s=c=>typeof c=="number"?c/Qe:c.clone().divideScalar(Qe);let n;const h=c=>{c.setup=()=>{n=c;const d=o(e.dimensions);c.createCanvas(d.x,d.y),c.background(0),c.fill(255),c.stroke(255),r()},c.draw=()=>{if(c.background(0),Le(c)){t.fixed=!0;const d=s(new u(c.mouseX,c.height-c.mouseY));t.position.copy(d)}else t.fixed=!1;e.step(),Ne(c,e)};let f;c.mousePressed=()=>{Ie(c)&&(f=s(new u(c.mouseX,c.height-c.mouseY)))},c.mouseReleased=()=>{if(!Ie(c))return;const d=s(new u(c.mouseX,c.height-c.mouseY)),b=f.subtract(d);t.position.copy(d),t.velocity.copy(b)}};return ke(()=>{n==null||n.remove()}),[e,h,()=>e.toggleGravity()]}class Xt extends me{constructor(e){super(),he(this,e,Rt,Ut,fe,{})}}const Gt=()=>{const l=[],e=k({geometry:{type:"line",vector:new u(15,0)},position:new u(0,0),fixed:!0});l.push(e);const t=k({geometry:{type:"line",vector:new u(0,100)},position:new u(0,0),fixed:!0});l.push(t);const r=k({geometry:{type:"line",vector:new u(0,100)},position:new u(15,0),fixed:!0});l.push(r);const o=k({geometry:{type:"line",vector:new u(3,-3)},position:new u(3.5,8),fixed:!0});l.push(o);const s=k({geometry:{type:"line",vector:new u(3,3)},position:new u(3.5,5),fixed:!0});l.push(s);const n=k({geometry:{type:"line",vector:new u(6,0)},position:new u(2,2),fixed:!0});l.push(n);const h=k({geometry:{type:"line",vector:new u(4,0)},position:new u(3,2.5),fixed:!0});l.push(h);const i=k({geometry:{type:"line",vector:new u(2,0)},position:new u(4,3),fixed:!0});l.push(i);const c=k({geometry:{type:"line",vector:new u(.6,0)},position:new u(4.7,3.5),fixed:!0});l.push(c);const f=k({geometry:{type:"line",vector:new u(1,0)},position:new u(10,10.1),fixed:!0});l.push(f);const d=k({geometry:{type:"line",vector:new u(0,-4)},position:new u(11,10),fixed:!0});l.push(d);const b=k({geometry:{type:"line",vector:new u(0,-4)},position:new u(11.5,10),fixed:!0});l.push(b);const v=k({geometry:{type:"line",vector:new u(0,-4)},position:new u(12,10),fixed:!0});l.push(v);const w=k({geometry:{type:"line",vector:new u(1,0)},position:new u(12,10.1),fixed:!0});l.push(w);for(let m=.2;m<.5;m+=.1)for(let a=0;a<10;a++){const x=k({geometry:{type:"line",vector:new u(0,3)},position:new u(9+a*m,1),fixed:!0});l.push(x)}const g=k({geometry:{type:"sphere",r:.1},position:new u(5,10),velocity:new u(0,0)});return l.push(g),{objects:l,sphere:g}};function Ht(l){let e,t,r,o,s,n=l[0]?"Disable":"Enable",h,i,c,f,d=l[1]?"Play":"Pause",b,v,w,g="Reset",m,a,x,S,O,F,N,W,Q,Y="Simulation time/Frame duration",M,D,B=l[2].t+"",A,ee,te,R=l[2].frameTime+"",z,ye,V,U,P="Sphere position",X,Z,ge=l[2].spherePos.x.toFixed(2)+"",we,ae,de,be=l[2].spherePos.y.toFixed(2)+"",Ce,De,Se,Be,st="Sphere velocity",Ke,Me,Ye=l[2].sphereVel.x.toFixed(2)+"",Xe,Ze,We,Ae=l[2].sphereVel.y.toFixed(2)+"",Ge,pe,et,rt;return t=new Te({props:{sketch:l[5]}}),a=new gt({props:{onShoot:l[6]}}),S=new ot({props:{world:l[3]}}),{c(){e=_("div"),oe(t.$$.fragment),r=E(),o=_("div"),s=_("button"),h=J(n),i=J(" pause on collision"),c=E(),f=_("button"),b=J(d),v=E(),w=_("button"),w.textContent=g,m=E(),oe(a.$$.fragment),x=E(),oe(S.$$.fragment),O=E(),F=_("table"),N=_("tbody"),W=_("tr"),Q=_("th"),Q.textContent=Y,M=E(),D=_("td"),A=J(B),ee=E(),te=_("td"),z=J(R),ye=E(),V=_("tr"),U=_("th"),U.textContent=P,X=E(),Z=_("td"),we=J(ge),ae=E(),de=_("td"),Ce=J(be),De=E(),Se=_("tr"),Be=_("th"),Be.textContent=st,Ke=E(),Me=_("td"),Xe=J(Ye),Ze=E(),We=_("td"),Ge=J(Ae),this.h()},l(I){e=$(I,"DIV",{class:!0});var q=T(e);se(t.$$.fragment,q),q.forEach(y),r=j(I),o=$(I,"DIV",{});var Ee=T(o);s=$(Ee,"BUTTON",{});var tt=T(s);h=K(tt,n),i=K(tt," pause on collision"),tt.forEach(y),c=j(Ee),f=$(Ee,"BUTTON",{});var lt=T(f);b=K(lt,d),lt.forEach(y),v=j(Ee),w=$(Ee,"BUTTON",{"data-svelte-h":!0}),H(w)!=="svelte-tlxueg"&&(w.textContent=g),Ee.forEach(y),m=j(I),se(a.$$.fragment,I),x=j(I),se(S.$$.fragment,I),O=j(I),F=$(I,"TABLE",{});var it=T(F);N=$(it,"TBODY",{});var Ue=T(N);W=$(Ue,"TR",{});var Ve=T(W);Q=$(Ve,"TH",{"data-svelte-h":!0}),H(Q)!=="svelte-rirgm4"&&(Q.textContent=Y),M=j(Ve),D=$(Ve,"TD",{});var ct=T(D);A=K(ct,B),ct.forEach(y),ee=j(Ve),te=$(Ve,"TD",{});var at=T(te);z=K(at,R),at.forEach(y),Ve.forEach(y),ye=j(Ue),V=$(Ue,"TR",{});var Oe=T(V);U=$(Oe,"TH",{"data-svelte-h":!0}),H(U)!=="svelte-1y1nif6"&&(U.textContent=P),X=j(Oe),Z=$(Oe,"TD",{});var ut=T(Z);we=K(ut,ge),ut.forEach(y),ae=j(Oe),de=$(Oe,"TD",{});var dt=T(de);Ce=K(dt,be),dt.forEach(y),De=j(Oe),Oe.forEach(y),Se=$(Ue,"TR",{});var Fe=T(Se);Be=$(Fe,"TH",{"data-svelte-h":!0}),H(Be)!=="svelte-1uw1fs2"&&(Be.textContent=st),Ke=j(Fe),Me=$(Fe,"TD",{});var ft=T(Me);Xe=K(ft,Ye),ft.forEach(y),Ze=j(Fe),We=$(Fe,"TD",{});var mt=T(We);Ge=K(mt,Ae),mt.forEach(y),Fe.forEach(y),Ue.forEach(y),it.forEach(y),this.h()},h(){L(e,"class","d-flex justify-content-center")},m(I,q){C(I,e,q),re(t,e,null),C(I,r,q),C(I,o,q),p(o,s),p(s,h),p(s,i),p(o,c),p(o,f),p(f,b),p(o,v),p(o,w),C(I,m,q),re(a,I,q),C(I,x,q),re(S,I,q),C(I,O,q),C(I,F,q),p(F,N),p(N,W),p(W,Q),p(W,M),p(W,D),p(D,A),p(W,ee),p(W,te),p(te,z),p(N,ye),p(N,V),p(V,U),p(V,X),p(V,Z),p(Z,we),p(V,ae),p(V,de),p(de,Ce),p(V,De),p(N,Se),p(Se,Be),p(Se,Ke),p(Se,Me),p(Me,Xe),p(Se,Ze),p(Se,We),p(We,Ge),pe=!0,et||(rt=[G(s,"click",l[7]),G(f,"click",l[8]),G(w,"click",l[4])],et=!0)},p(I,[q]){(!pe||q&1)&&n!==(n=I[0]?"Disable":"Enable")&&ne(h,n),(!pe||q&2)&&d!==(d=I[1]?"Play":"Pause")&&ne(b,d);const Ee={};q&8&&(Ee.world=I[3]),S.$set(Ee),(!pe||q&4)&&B!==(B=I[2].t+"")&&ne(A,B),(!pe||q&4)&&R!==(R=I[2].frameTime+"")&&ne(z,R),(!pe||q&4)&&ge!==(ge=I[2].spherePos.x.toFixed(2)+"")&&ne(we,ge),(!pe||q&4)&&be!==(be=I[2].spherePos.y.toFixed(2)+"")&&ne(Ce,be),(!pe||q&4)&&Ye!==(Ye=I[2].sphereVel.x.toFixed(2)+"")&&ne(Xe,Ye),(!pe||q&4)&&Ae!==(Ae=I[2].sphereVel.y.toFixed(2)+"")&&ne(Ge,Ae)},i(I){pe||(le(t.$$.fragment,I),le(a.$$.fragment,I),le(S.$$.fragment,I),pe=!0)},o(I){ie(t.$$.fragment,I),ie(a.$$.fragment,I),ie(S.$$.fragment,I),pe=!1},d(I){I&&(y(e),y(r),y(o),y(m),y(x),y(O),y(F)),ce(t),ce(a,I),ce(S,I),et=!1,Re(rt)}}}const Je=60;function zt(l,e,t){console.clear();let r=!1,o=!1,s={t:"0",frameTime:"0",spherePos:new u(0,0),sphereVel:new u(0,0),ballIsColliding:!1},n,h;const i=()=>{t(3,n=new Pe({dimensions:new u(15,15),reporter:a=>{var x;t(2,s.t=(x=a==null?void 0:a.t)==null?void 0:x.toFixed(1),s),s.spherePos.copy(h.position).unfloat(),s.sphereVel.copy(h.velocity).unfloat(),t(2,s.frameTime=a.frameTime.toFixed(2),s),t(2,s),t(2,s.ballIsColliding=h.data.isColliding,s),r&&h.data.isColliding&&!o&&t(1,o=!0)},enableGravity:!0}));const m=Gt();h=m.sphere;for(const a of m.objects)n.addObject(a)},c=m=>typeof m=="number"?m*Je:m.clone().multiplyScalar(Je),f=m=>typeof m=="number"?m/Je:m.clone().divideScalar(Je);let d;const b=m=>{m.setup=()=>{d=m,i();const S=c(n.dimensions);m.createCanvas(S.x,S.y),m.background(0),m.fill(255),m.stroke(255),i()},m.draw=()=>{m.background(0),Le(m)?h.fixed=!0:h.fixed=!1,o||n.step(),Ne(m,n),x(m)};let a;m.mousePressed=()=>{Ie(m)&&(a=f(new u(m.mouseX,m.height-m.mouseY)),h.position.copy(a))},m.mouseReleased=()=>{if(!Ie(m)||!a)return;const S=f(new u(m.mouseX,m.height-m.mouseY)),O=a.subtract(S).multiplyScalar(3);a=void 0,h.velocity.copy(O)};const x=S=>{if(!a)return;S.stroke("blue"),S.strokeWeight(2);const O=c(a);S.line(O.x,S.height-O.y,S.mouseX,S.mouseY)}},v=m=>{m.multiplyScalar(1e4),n.applyForce(h,m)};return ke(()=>{d==null||d.remove()}),[r,o,s,n,i,b,v,()=>t(0,r=!r),()=>t(1,o=!o)]}let qt=class extends me{constructor(e){super(),he(this,e,zt,Ht,fe,{})}};const Qt=()=>{const l=[],e=k({geometry:{type:"line",vector:new u(15,0)},position:new u(0,0),fixed:!0});l.push(e);const t=k({geometry:{type:"line",vector:new u(0,100)},position:new u(0,0),fixed:!0});l.push(t);const r=k({geometry:{type:"line",vector:new u(0,100)},position:new u(15,0),fixed:!0});l.push(r);const o=k({geometry:{type:"line",vector:new u(3,-3)},position:new u(3.5,8),fixed:!0});l.push(o);const s=k({geometry:{type:"line",vector:new u(3,3)},position:new u(3.5,5),fixed:!0});l.push(s);const n=k({geometry:{type:"line",vector:new u(6,0)},position:new u(2,2),fixed:!0});l.push(n);const h=k({geometry:{type:"line",vector:new u(4,0)},position:new u(3,2.5),fixed:!0});l.push(h);const i=k({geometry:{type:"line",vector:new u(2,0)},position:new u(4,3),fixed:!0});l.push(i);const c=k({geometry:{type:"line",vector:new u(.6,0)},position:new u(4.7,3.5),fixed:!0});l.push(c);const f=k({geometry:{type:"line",vector:new u(1,0)},position:new u(10,10.1),fixed:!0});l.push(f);const d=k({geometry:{type:"line",vector:new u(0,-4)},position:new u(11,10),fixed:!0});l.push(d);const b=k({geometry:{type:"line",vector:new u(0,-4)},position:new u(11.5,10),fixed:!0});l.push(b);const v=k({geometry:{type:"line",vector:new u(0,-4)},position:new u(12,10),fixed:!0});l.push(v);const w=k({geometry:{type:"line",vector:new u(1,0)},position:new u(12,10.1),fixed:!0});l.push(w);for(let g=.2;g<.5;g+=.1)for(let m=0;m<10;m++){const a=k({geometry:{type:"line",vector:new u(0,3)},position:new u(9+m*g,1),fixed:!0});l.push(a)}return{objects:l}};function Jt(l){let e,t,r,o,s,n=l[0]?"Disable":"Enable",h,i,c,f,d=l[1]?"Play":"Pause",b,v,w,g="Reset",m,a,x,S,O,F,N,W="Simulation time/Frame duration",Q,Y,M=l[2].t+"",D,B,A,ee=l[2].frameTime+"",te,R,z,ye;return t=new Te({props:{sketch:l[5]}}),a=new ot({props:{world:l[3]}}),{c(){e=_("div"),oe(t.$$.fragment),r=E(),o=_("div"),s=_("button"),h=J(n),i=J(" pause on collision"),c=E(),f=_("button"),b=J(d),v=E(),w=_("button"),w.textContent=g,m=E(),oe(a.$$.fragment),x=E(),S=_("table"),O=_("tbody"),F=_("tr"),N=_("th"),N.textContent=W,Q=E(),Y=_("td"),D=J(M),B=E(),A=_("td"),te=J(ee),this.h()},l(V){e=$(V,"DIV",{class:!0});var U=T(e);se(t.$$.fragment,U),U.forEach(y),r=j(V),o=$(V,"DIV",{});var P=T(o);s=$(P,"BUTTON",{});var X=T(s);h=K(X,n),i=K(X," pause on collision"),X.forEach(y),c=j(P),f=$(P,"BUTTON",{});var Z=T(f);b=K(Z,d),Z.forEach(y),v=j(P),w=$(P,"BUTTON",{"data-svelte-h":!0}),H(w)!=="svelte-tlxueg"&&(w.textContent=g),P.forEach(y),m=j(V),se(a.$$.fragment,V),x=j(V),S=$(V,"TABLE",{});var ge=T(S);O=$(ge,"TBODY",{});var we=T(O);F=$(we,"TR",{});var ae=T(F);N=$(ae,"TH",{"data-svelte-h":!0}),H(N)!=="svelte-rirgm4"&&(N.textContent=W),Q=j(ae),Y=$(ae,"TD",{});var de=T(Y);D=K(de,M),de.forEach(y),B=j(ae),A=$(ae,"TD",{});var be=T(A);te=K(be,ee),be.forEach(y),ae.forEach(y),we.forEach(y),ge.forEach(y),this.h()},h(){L(e,"class","d-flex justify-content-center")},m(V,U){C(V,e,U),re(t,e,null),C(V,r,U),C(V,o,U),p(o,s),p(s,h),p(s,i),p(o,c),p(o,f),p(f,b),p(o,v),p(o,w),C(V,m,U),re(a,V,U),C(V,x,U),C(V,S,U),p(S,O),p(O,F),p(F,N),p(F,Q),p(F,Y),p(Y,D),p(F,B),p(F,A),p(A,te),R=!0,z||(ye=[G(s,"click",l[6]),G(f,"click",l[7]),G(w,"click",l[4])],z=!0)},p(V,[U]){(!R||U&1)&&n!==(n=V[0]?"Disable":"Enable")&&ne(h,n),(!R||U&2)&&d!==(d=V[1]?"Play":"Pause")&&ne(b,d);const P={};U&8&&(P.world=V[3]),a.$set(P),(!R||U&4)&&M!==(M=V[2].t+"")&&ne(D,M),(!R||U&4)&&ee!==(ee=V[2].frameTime+"")&&ne(te,ee)},i(V){R||(le(t.$$.fragment,V),le(a.$$.fragment,V),R=!0)},o(V){ie(t.$$.fragment,V),ie(a.$$.fragment,V),R=!1},d(V){V&&(y(e),y(r),y(o),y(m),y(x),y(S)),ce(t),ce(a,V),z=!1,Re(ye)}}}const vt=60;function Kt(l,e,t){console.clear();let r=!1,o=!1,s={t:"0",frameTime:"0"},n;const h=()=>{clearInterval(d),d=setInterval(i,100),t(3,n=new Pe({dimensions:new u(15,15),reporter:m=>{var a;t(2,s.t=(a=m==null?void 0:m.t)==null?void 0:a.toFixed(1),s),t(2,s.frameTime=m.frameTime.toFixed(2),s),t(2,s)},enableGravity:!0}));const g=Qt();for(const m of g.objects)n.addObject(m)},i=()=>{console.log("add ball");const g=Math.random()*n.dimensions.x,m=Math.random()*n.dimensions.y,a=-5+Math.random()*10,x=-5+Math.random()*10,S=k({geometry:{type:"sphere",r:.1},position:new u(g,m),velocity:new u(a,x)});n.addObject(S)},c=g=>typeof g=="number"?g*vt:g.clone().multiplyScalar(vt);let f,d;const b=g=>{g.setup=()=>{f=g,h();const m=c(n.dimensions);g.createCanvas(m.x,m.y),g.background(0),g.fill(255),g.stroke(255),h()},g.draw=()=>{g.background(0),o||n.step(),Ne(g,n)}};return ke(()=>{f==null||f.remove(),clearInterval(d)}),[r,o,s,n,h,b,()=>t(0,r=!r),()=>t(1,o=!o)]}class Zt extends me{constructor(e){super(),he(this,e,Kt,Jt,fe,{})}}function en(l){let e,t,r;return t=new Te({props:{sketch:l[0]}}),{c(){e=_("div"),oe(t.$$.fragment),this.h()},l(o){e=$(o,"DIV",{class:!0});var s=T(e);se(t.$$.fragment,s),s.forEach(y),this.h()},h(){L(e,"class","d-flex justify-content-center")},m(o,s){C(o,e,s),re(t,e,null),r=!0},p:$e,i(o){r||(le(t.$$.fragment,o),r=!0)},o(o){ie(t.$$.fragment,o),r=!1},d(o){o&&y(e),ce(t)}}}const je=6;function tn(l){console.clear();let e;const t=k({geometry:{type:"sphere",r:10},position:new u(30,50),velocity:new u(15,15)}),r=k({geometry:{type:"line",vector:new u(80,0)},position:new u(10,70)}),o=new _t,s=n=>{const h=new u(100,100),i=ue(h,je);n.setup=()=>{e=n,n.createCanvas(i.x,i.y),n.noFill()};let c;n.draw=()=>{if(n.background(0),!Le(n))c=void 0;else{const a=nt(new u(n.mouseX,n.height-n.mouseY),je);if(c||(a.distance(t.position)<=t.geometry.r?c="sphere":a.distance(t.position.clone().add(t.velocity))<=6?c="spherevelocity":a.distance(r.position)<=6?c="linestart":a.distance(r.geometry.vector.clone().add(r.position))<=6&&(c="lineend")),c==="sphere")t.position.copy(a);else if(c==="spherevelocity"){const x=a.clone().subtract(t.position);t.velocity.copy(x)}else if(c==="linestart")r.position.copy(a);else if(c==="lineend"){const x=a.clone().subtract(r.position);r.geometry.vector.copy(x)}}const{intersection:f,bouncedVelocity:d}=o.apply(r,t);for(let a=0;a<10;a++){const{positionCorrection:x}=o.apply(r,t);x&&(t.position.add(x.multiplyScalar(.5)),r.position.subtract(x.multiplyScalar(.5)))}n.stroke(255),n.noFill();const b=ue(t.position,je);n.circle(b.x,n.height-b.y,2*t.geometry.r*je),n.stroke(255);const v=ue(t.velocity,je);n.line(b.x,n.height-b.y,b.x+v.x,n.height-(b.y+v.y)),n.stroke(255);const{x:w,y:g}=ue(r.position,je),m=ue(r.geometry.vector,je);if(n.line(w,n.height-g,w+m.x,n.height-(g+m.y)),f){n.stroke("#54d7ff"),n.fill("#54d7ff");const a=ue(f,je);n.circle(a.x,n.height-a.y,5)}if(d){n.stroke("green"),n.fill("green");const a=ue(d,je);n.line(b.x,n.height-b.y,b.x+a.x,n.height-(b.y+a.y))}}};return ke(()=>{e==null||e.remove()}),[s]}class nn extends me{constructor(e){super(),he(this,e,tn,en,fe,{})}}function on(l){let e,t,r;return t=new Te({props:{sketch:l[0]}}),{c(){e=_("div"),oe(t.$$.fragment),this.h()},l(o){e=$(o,"DIV",{class:!0});var s=T(e);se(t.$$.fragment,s),s.forEach(y),this.h()},h(){L(e,"class","d-flex justify-content-center")},m(o,s){C(o,e,s),re(t,e,null),r=!0},p:$e,i(o){r||(le(t.$$.fragment,o),r=!0)},o(o){ie(t.$$.fragment,o),r=!1},d(o){o&&y(e),ce(t)}}}const _e=6;function sn(l){console.clear();let e;const t=k({geometry:{type:"sphere",r:10},position:new u(30,50),velocity:new u(15,15)}),r=k({geometry:{type:"sphere",r:10},position:new u(70,50),velocity:new u(0,45)}),o=new $t,s=n=>{const h=new u(100,100),i=ue(h,_e);n.setup=()=>{e=n,n.createCanvas(i.x,i.y),n.noFill()};let c;n.draw=()=>{if(n.background(0),!Le(n))c=void 0;else{const m=nt(new u(n.mouseX,n.height-n.mouseY),_e);if(c||(m.distance(t.position)<=t.geometry.r?c="sphere":m.distance(t.position.clone().add(t.velocity))<=6?c="spherevelocity":m.distance(r.position)<=r.geometry.r?c="sphere2":m.distance(r.position.clone().add(r.velocity))<=6&&(c="sphere2velocity")),c==="sphere")t.position.copy(m);else if(c==="spherevelocity"){const a=m.clone().subtract(t.position);t.velocity.copy(a)}else if(c==="sphere2")r.position.copy(m);else if(c==="sphere2velocity"){const a=m.clone().subtract(r.position);r.velocity.copy(a)}}const{intersection:f,bouncedVelocity:d}=o.apply(t,r);for(let m=0;m<10;m++){const{positionCorrection:a}=o.apply(t,r);a&&(t.position.add(a.multiplyScalar(.5)),r.position.subtract(a.multiplyScalar(.5)))}n.stroke(255),n.noFill();const b=ue(t.position,_e);n.circle(b.x,n.height-b.y,2*t.geometry.r*_e),n.stroke(255);const v=ue(t.velocity,_e);n.line(b.x,n.height-b.y,b.x+v.x,n.height-(b.y+v.y)),n.stroke(255),n.noFill();const w=ue(r.position,_e);n.circle(w.x,n.height-w.y,2*r.geometry.r*_e),n.stroke(255);const g=ue(r.velocity,_e);if(n.line(w.x,n.height-w.y,w.x+g.x,n.height-(w.y+g.y)),f){n.stroke("#54d7ff"),n.fill("#54d7ff");const m=ue(f,_e);n.circle(m.x,n.height-m.y,5)}if(d){n.stroke("green"),n.fill("green");const m=ue(d,_e);n.line(b.x,n.height-b.y,b.x+m.x,n.height-(b.y+m.y))}}};return ke(()=>{e==null||e.remove()}),[s]}class rn extends me{constructor(e){super(),he(this,e,sn,on,fe,{})}}function ln(l){let e,t="<span>This page is a list of engine tests. They use the actual engine and allow me to setup different situations and check manually for regressions and bugs.</span> <br/> <span>Use the selection menu to see the different pages</span>",r,o,s,n,h;return n=new bt({props:{tabs:l[0]}}),{c(){e=_("div"),e.innerHTML=t,r=E(),o=_("br"),s=E(),oe(n.$$.fragment)},l(i){e=$(i,"DIV",{"data-svelte-h":!0}),H(e)!=="svelte-11mzr87"&&(e.innerHTML=t),r=j(i),o=$(i,"BR",{}),s=j(i),se(n.$$.fragment,i)},m(i,c){C(i,e,c),C(i,r,c),C(i,o,c),C(i,s,c),re(n,i,c),h=!0},p:$e,i(i){h||(le(n.$$.fragment,i),h=!0)},o(i){ie(n.$$.fragment,i),h=!1},d(i){i&&(y(e),y(r),y(o),y(s)),ce(n,i)}}}function cn(l){return[[{label:"Fireworks",value:Tt},{label:"Ball pool",value:Bt},{label:"Sphere Sphere Collider",value:rn},{label:"Line Sphere Collider",value:nn},{label:"Perfs - Multiple balls",value:Zt},{label:"Playground - Engine settings",value:qt},{label:"Dynamics + collisions - 1",value:Xt},{label:"Dynamics + collisions - 2",value:At},{label:"Sphere Line - pull apart",value:Mt},{label:"One ball bounce",value:It}]]}class vn extends me{constructor(e){super(),he(this,e,cn,ln,fe,{})}}export{vn as component};
