import{s as fe,f as x,g as _,h as T,d as v,j as L,i as S,z as _e,M as ke,a as E,e as ht,u as H,c as j,y as b,P as ve,L as G,Q as $e,O as Ue,l as J,m as K,n as ne}from"../chunks/scheduler.32ebed32.js";import{S as me,i as he,b as se,d as re,m as ie,a as le,t as ce,e as ae}from"../chunks/index.c25c2528.js";import{P as Te,V as u,w as oe,m as Le,s as nt,c as k,d as Re,a as Ie,C as bt}from"../chunks/PhysicObject.edd17eee.js";import{_ as wt}from"../chunks/preload-helper.a4192956.js";import{W as Pe,L as xt,S as _t}from"../chunks/World.13b69386.js";function $t(c){let t,e,r;return e=new Te({props:{sketch:c[0]}}),{c(){t=x("div"),se(e.$$.fragment),this.h()},l(o){t=_(o,"DIV",{class:!0});var s=T(t);re(e.$$.fragment,s),s.forEach(v),this.h()},h(){L(t,"class","d-flex justify-content-center")},m(o,s){S(o,t,s),ie(e,t,null),r=!0},p:_e,i(o){r||(le(e.$$.fragment,o),r=!0)},o(o){ce(e.$$.fragment,o),r=!1},d(o){o&&v(t),ae(e)}}}const yt=6;function kt(c){console.clear();let t;const e={world:{gravity:!0,collisions:!1,ttl:160,maxNbObjects:300,particleSize:1},cannon:{angle:270,creationDelay:1,minYVelocity:30,maxYVelocityVariation:1,maxXVelocity:30},render:{colors:!0}};let r;const o=async()=>{const h=await wt(()=>import("../chunks/dat.gui.module.ff711f94.js"),[],import.meta.url);r=new h.GUI,r.domElement.setAttribute("style","background-color: black");const m=r.addFolder("World");m.open(),m.add(i==null?void 0:i.objects,"length").name("Nb objects").listen(),m.add(e.world,"gravity").name("Enable gravity").onFinishChange(()=>i.gravityEnabled=e.world.gravity),m.add(e.world,"collisions").name("Enable collisions").onFinishChange(()=>i.collisionEnabled=e.world.collisions),m.add(e.world,"ttl",0,1e4).name("Particles TTL"),m.add(e.world,"maxNbObjects",0,3e3).name("Max nb particles"),m.add(e.world,"particleSize",1,20,1).name("Particles size");const w=r.addFolder("Cannon");w.open(),w.add(e.cannon,"angle",0,360).name("Angle"),w.add(e.cannon,"minYVelocity",0,100).name("min. Y velocity"),w.add(e.cannon,"maxYVelocityVariation",0,2).name("Y vel. variation"),w.add(e.cannon,"maxXVelocity",0,100).name("max. X velocity "),w.add(e.cannon,"creationDelay",1,30,1).name("Fire rate");const y=r.addFolder("Render");y.open(),y.add(e.render,"colors").name("Use colors")},s=()=>{const{minYVelocity:h,maxYVelocityVariation:m,maxXVelocity:w}=e.cannon,y=Math.random()*w-w/2,d=h+(m-Math.random())*h;return new u(y,d).rotateByDeg(e.cannon.angle)},n=h=>{const m={...k({geometry:{type:"sphere",r:e.world.particleSize},position:p,velocity:s()}),age:0};h.addObject(m)},p=new u(0,0);let i;const a=h=>{const m=new u(100,100),w=oe(m,yt);p.x=m.x/2,p.y=10,h.setup=()=>{t=h,h.createCanvas(w.x,w.y),h.noFill(),i=new Pe({dimensions:m,enableGravity:!0,enableCollisions:!1}),n(i),o()},h.draw=()=>{if(h.background(0),Le(h)){const y=nt(new u(h.mouseX,h.height-h.mouseY),yt);p.copy(y)}h.frameCount%e.cannon.creationDelay===0&&i.objects.length<e.world.maxNbObjects&&n(i),i.step(),i.objects.forEach(y=>{y.data.age>e.world.ttl&&i.removeObject(y)}),f(h,i)}},g=[[239,113,81],[229,144,25],[211,202,156],[153,47,15]],f=(h,m)=>{const w=h.width/m.dimensions.x;h.stroke("white");for(const y of m.objects){if(e.render.colors){const C=y.data.id%g.length,P=g[C];h.stroke([...P,200])}const d=h.map(y.position.x,0,m.dimensions.x,0,h.width),l=h.map(y.position.y,0,m.dimensions.y,h.height,0);if(y.geometry.type!=="sphere")continue;const $=oe(y.geometry.r*2,w);h.strokeWeight($),h.point(d,l)}};return ke(()=>{r==null||r.destroy(),t==null||t.remove()}),[a]}let Tt=class extends me{constructor(t){super(),he(this,t,kt,$t,fe,{})}};function pt(c){let t,e,r,o,s="dt",n,p,i,a,g,f,h="drag",m,w,y,d,l,$,C="gravity enabled",P,F,N,W,Q;return{c(){t=x("table"),e=x("tbody"),r=x("tr"),o=x("th"),o.textContent=s,n=E(),p=x("td"),i=x("input"),a=E(),g=x("tr"),f=x("th"),f.textContent=h,m=E(),w=x("td"),y=x("input"),d=E(),l=x("tr"),$=x("th"),$.textContent=C,P=E(),F=x("td"),N=x("input"),this.h()},l(Y){t=_(Y,"TABLE",{});var M=T(t);e=_(M,"TBODY",{});var D=T(e);r=_(D,"TR",{});var B=T(r);o=_(B,"TH",{"data-svelte-h":!0}),H(o)!=="svelte-16dheti"&&(o.textContent=s),n=j(B),p=_(B,"TD",{});var A=T(p);i=_(A,"INPUT",{type:!0,min:!0,max:!0,step:!0}),A.forEach(v),B.forEach(v),a=j(D),g=_(D,"TR",{});var ee=T(g);f=_(ee,"TH",{"data-svelte-h":!0}),H(f)!=="svelte-2hq5g"&&(f.textContent=h),m=j(ee),w=_(ee,"TD",{});var te=T(w);y=_(te,"INPUT",{type:!0,min:!0,max:!0,step:!0}),te.forEach(v),ee.forEach(v),d=j(D),l=_(D,"TR",{});var R=T(l);$=_(R,"TH",{"data-svelte-h":!0}),H($)!=="svelte-ic0r87"&&($.textContent=C),P=j(R),F=_(R,"TD",{});var z=T(F);N=_(z,"INPUT",{type:!0}),z.forEach(v),R.forEach(v),D.forEach(v),M.forEach(v),this.h()},h(){L(i,"type","number"),L(i,"min","0"),L(i,"max","0.5"),L(i,"step","0.001"),L(y,"type","number"),L(y,"min","0"),L(y,"max","0.01"),L(y,"step","0.001"),L(N,"type","checkbox")},m(Y,M){S(Y,t,M),b(t,e),b(e,r),b(r,o),b(r,n),b(r,p),b(p,i),ve(i,c[0].dt),b(e,a),b(e,g),b(g,f),b(g,m),b(g,w),b(w,y),ve(y,c[0].drag),b(e,d),b(e,l),b(l,$),b(l,P),b(l,F),b(F,N),N.checked=c[0].gravityEnabled,W||(Q=[G(i,"input",c[1]),G(y,"input",c[2]),G(N,"change",c[3])],W=!0)},p(Y,M){M&1&&$e(i.value)!==Y[0].dt&&ve(i,Y[0].dt),M&1&&$e(y.value)!==Y[0].drag&&ve(y,Y[0].drag),M&1&&(N.checked=Y[0].gravityEnabled)},d(Y){Y&&v(t),W=!1,Ue(Q)}}}function Ct(c){let t,e="Engine settings",r,o,s=c[0]&&pt(c);return{c(){t=x("p"),t.textContent=e,r=E(),s&&s.c(),o=ht(),this.h()},l(n){t=_(n,"P",{class:!0,"data-svelte-h":!0}),H(t)!=="svelte-gf3gek"&&(t.textContent=e),r=j(n),s&&s.l(n),o=ht(),this.h()},h(){L(t,"class","title svelte-g74uk9")},m(n,p){S(n,t,p),S(n,r,p),s&&s.m(n,p),S(n,o,p)},p(n,[p]){n[0]?s?s.p(n,p):(s=pt(n),s.c(),s.m(o.parentNode,o)):s&&(s.d(1),s=null)},i:_e,o:_e,d(n){n&&(v(t),v(r),v(o)),s&&s.d(n)}}}function St(c,t,e){let{world:r}=t;function o(){r.dt=$e(this.value),e(0,r)}function s(){r.drag=$e(this.value),e(0,r)}function n(){r.gravityEnabled=this.checked,e(0,r)}return c.$$set=p=>{"world"in p&&e(0,r=p.world)},[r,o,s,n]}class ot extends me{constructor(t){super(),he(this,t,St,Ct,fe,{world:0})}}function Et(c){let t,e="Shooter",r,o,s,n="Angle",p,i,a,g,f,h,m,w,y="Magnitude",d,l,$,C,P,F,N,W,Q="Shoot",Y,M;return{c(){t=x("p"),t.textContent=e,r=E(),o=x("span"),s=x("label"),s.textContent=n,p=E(),i=x("input"),a=E(),g=J(c[0]),f=J(" deg"),h=E(),m=x("span"),w=x("label"),w.textContent=y,d=E(),l=x("input"),$=E(),C=J(c[1]),P=E(),F=x("br"),N=E(),W=x("button"),W.textContent=Q,this.h()},l(D){t=_(D,"P",{class:!0,"data-svelte-h":!0}),H(t)!=="svelte-198ugk3"&&(t.textContent=e),r=j(D),o=_(D,"SPAN",{});var B=T(o);s=_(B,"LABEL",{for:!0,"data-svelte-h":!0}),H(s)!=="svelte-lab87n"&&(s.textContent=n),p=j(B),i=_(B,"INPUT",{id:!0,type:!0,min:!0,max:!0}),a=j(B),g=K(B,c[0]),f=K(B," deg"),B.forEach(v),h=j(D),m=_(D,"SPAN",{});var A=T(m);w=_(A,"LABEL",{for:!0,"data-svelte-h":!0}),H(w)!=="svelte-1vc5oxa"&&(w.textContent=y),d=j(A),l=_(A,"INPUT",{id:!0,type:!0,min:!0,max:!0,step:!0}),$=j(A),C=K(A,c[1]),A.forEach(v),P=j(D),F=_(D,"BR",{}),N=j(D),W=_(D,"BUTTON",{"data-svelte-h":!0}),H(W)!=="svelte-8jpwxr"&&(W.textContent=Q),this.h()},h(){L(t,"class","title svelte-g74uk9"),L(s,"for","angleSlider"),L(i,"id","angleSlider"),L(i,"type","range"),L(i,"min","0"),L(i,"max","360"),L(w,"for","magSlider"),L(l,"id","magSlider"),L(l,"type","range"),L(l,"min","0"),L(l,"max","1"),L(l,"step","0.01")},m(D,B){S(D,t,B),S(D,r,B),S(D,o,B),b(o,s),b(o,p),b(o,i),ve(i,c[0]),b(o,a),b(o,g),b(o,f),S(D,h,B),S(D,m,B),b(m,w),b(m,d),b(m,l),ve(l,c[1]),b(m,$),b(m,C),S(D,P,B),S(D,F,B),S(D,N,B),S(D,W,B),Y||(M=[G(i,"change",c[4]),G(i,"input",c[4]),G(l,"change",c[5]),G(l,"input",c[5]),G(W,"click",c[6])],Y=!0)},p(D,[B]){B&1&&ve(i,D[0]),B&1&&ne(g,D[0]),B&2&&ve(l,D[1]),B&2&&ne(C,D[1])},i:_e,o:_e,d(D){D&&(v(t),v(r),v(o),v(h),v(m),v(P),v(F),v(N),v(W)),Y=!1,Ue(M)}}}function jt(c,t,e){let{onShoot:r}=t,o=0,s=.5;const n=()=>{const g=new u(1,0);g.rotateDeg(o),g.multiplyScalar(s),r(g)};function p(){o=$e(this.value),e(0,o)}function i(){s=$e(this.value),e(1,s)}const a=()=>n();return c.$$set=g=>{"onShoot"in g&&e(3,r=g.onShoot)},[o,s,n,r,p,i,a]}class gt extends me{constructor(t){super(),he(this,t,jt,Et,fe,{onShoot:3})}}const Pt=c=>{const t=[],e=k({geometry:{type:"line",vector:new u(15,0)},position:new u(0,15),fixed:!0});t.push(e);const r=k({geometry:{type:"line",vector:new u(15,0)},position:new u(0,0),fixed:!0});t.push(r);const o=k({geometry:{type:"line",vector:new u(0,100)},position:new u(0,0),fixed:!0});t.push(o);const s=k({geometry:{type:"line",vector:new u(0,100)},position:new u(15,0),fixed:!0});t.push(s);let n;for(let p=0;p<c.nbBalls;p++){const i=k({geometry:{type:"sphere",r:c.rBalls},position:new u(Math.random()*15,Math.random()*15),velocity:new u(Math.random()*15,Math.random()*15)});t.push(i),n||(n=i)}return{objects:t,sphere:n}};function Ot(c){let t,e,r,o,s,n=c[0]?"Play":"Pause",p,i,a,g="Reset",f,h,m="Add ball",w,y,d,l,$,C,P,F,N,W="Number of balls",Q,Y,M,D,B,A,ee="Balls radius",te,R,z,ye,V,U;return e=new Te({props:{sketch:c[5]}}),y=new gt({props:{onShoot:c[6]}}),l=new ot({props:{world:c[2]}}),{c(){t=x("div"),se(e.$$.fragment),r=E(),o=x("div"),s=x("button"),p=J(n),i=E(),a=x("button"),a.textContent=g,f=E(),h=x("button"),h.textContent=m,w=E(),se(y.$$.fragment),d=E(),se(l.$$.fragment),$=E(),C=x("table"),P=x("tbody"),F=x("tr"),N=x("th"),N.textContent=W,Q=E(),Y=x("td"),M=x("input"),D=E(),B=x("tr"),A=x("th"),A.textContent=ee,te=E(),R=x("td"),z=x("input"),this.h()},l(O){t=_(O,"DIV",{class:!0});var X=T(t);re(e.$$.fragment,X),X.forEach(v),r=j(O),o=_(O,"DIV",{});var Z=T(o);s=_(Z,"BUTTON",{});var ge=T(s);p=K(ge,n),ge.forEach(v),i=j(Z),a=_(Z,"BUTTON",{"data-svelte-h":!0}),H(a)!=="svelte-tlxueg"&&(a.textContent=g),f=j(Z),h=_(Z,"BUTTON",{"data-svelte-h":!0}),H(h)!=="svelte-1xau3n8"&&(h.textContent=m),Z.forEach(v),w=j(O),re(y.$$.fragment,O),d=j(O),re(l.$$.fragment,O),$=j(O),C=_(O,"TABLE",{});var we=T(C);P=_(we,"TBODY",{});var ue=T(P);F=_(ue,"TR",{});var de=T(F);N=_(de,"TH",{"data-svelte-h":!0}),H(N)!=="svelte-eg4byi"&&(N.textContent=W),Q=j(de),Y=_(de,"TD",{});var be=T(Y);M=_(be,"INPUT",{type:!0,min:!0}),be.forEach(v),de.forEach(v),D=j(ue),B=_(ue,"TR",{});var Ce=T(B);A=_(Ce,"TH",{"data-svelte-h":!0}),H(A)!=="svelte-10gtk36"&&(A.textContent=ee),te=j(Ce),R=_(Ce,"TD",{});var De=T(R);z=_(De,"INPUT",{type:!0,min:!0}),De.forEach(v),Ce.forEach(v),ue.forEach(v),we.forEach(v),this.h()},h(){L(t,"class","d-flex justify-content-center"),L(M,"type","number"),L(M,"min","1"),L(z,"type","number"),L(z,"min","1")},m(O,X){S(O,t,X),ie(e,t,null),S(O,r,X),S(O,o,X),b(o,s),b(s,p),b(o,i),b(o,a),b(o,f),b(o,h),S(O,w,X),ie(y,O,X),S(O,d,X),ie(l,O,X),S(O,$,X),S(O,C,X),b(C,P),b(P,F),b(F,N),b(F,Q),b(F,Y),b(Y,M),ve(M,c[1].nbBalls),b(P,D),b(P,B),b(B,A),b(B,te),b(B,R),b(R,z),ve(z,c[1].rBalls),ye=!0,V||(U=[G(s,"click",c[7]),G(a,"click",c[3]),G(h,"click",c[4]),G(M,"change",c[3]),G(M,"input",c[8]),G(z,"change",c[3]),G(z,"input",c[9])],V=!0)},p(O,[X]){(!ye||X&1)&&n!==(n=O[0]?"Play":"Pause")&&ne(p,n);const Z={};X&4&&(Z.world=O[2]),l.$set(Z),X&2&&$e(M.value)!==O[1].nbBalls&&ve(M,O[1].nbBalls),X&2&&$e(z.value)!==O[1].rBalls&&ve(z,O[1].rBalls)},i(O){ye||(le(e.$$.fragment,O),le(y.$$.fragment,O),le(l.$$.fragment,O),ye=!0)},o(O){ce(e.$$.fragment,O),ce(y.$$.fragment,O),ce(l.$$.fragment,O),ye=!1},d(O){O&&(v(t),v(r),v(o),v(w),v(d),v($),v(C)),ae(e),ae(y,O),ae(l,O),V=!1,Ue(U)}}}const He=60;function Dt(c,t,e){console.clear();let r=!1,o={nbBalls:5,rBalls:.2},s,n;const p=()=>{const l=(s==null?void 0:s.gravityEnabled)??!0;e(2,s=new Pe({dimensions:new u(15,15),reporter:()=>{},enableGravity:l}));const $=Pt(o);n=$.sphere;for(const C of $.objects)s.addObject(C)},i=()=>{const l=k({geometry:{type:"sphere",r:o.rBalls},position:new u(7,7),velocity:new u(0,0)});s.addObject(l)},a=l=>typeof l=="number"?l*He:l.clone().multiplyScalar(He),g=l=>typeof l=="number"?l/He:l.clone().divideScalar(He);let f;const h=l=>{l.setup=()=>{f=l,p();const P=a(s.dimensions);l.createCanvas(P.x,P.y),l.background(0),l.fill(255),l.stroke(255),p()},l.draw=()=>{l.background(0),Le(l)?n.fixed=!0:n.fixed=!1,r||s.step(),Re(l,s),C(l)};let $;l.mousePressed=()=>{Ie(l)&&($=g(new u(l.mouseX,l.height-l.mouseY)),n.position.copy($))},l.mouseReleased=()=>{if(!Ie(l)||!$)return;const P=g(new u(l.mouseX,l.height-l.mouseY)),F=$.subtract(P).multiplyScalar(3);$=void 0,n.velocity.copy(F)};const C=P=>{if(!$)return;P.stroke("blue"),P.strokeWeight(2);const F=a($);P.line(F.x,P.height-F.y,P.mouseX,P.mouseY)}},m=l=>{l.multiplyScalar(1e4),s.applyForce(n,l)};ke(()=>{f==null||f.remove()});const w=()=>e(0,r=!r);function y(){o.nbBalls=$e(this.value),e(1,o)}function d(){o.rBalls=$e(this.value),e(1,o)}return[r,o,s,p,i,h,m,w,y,d]}let Bt=class extends me{constructor(t){super(),he(this,t,Dt,Ot,fe,{})}};function Vt(c){let t,e,r,o,s=c[0][c[0].length-1]+"",n,p,i,a="New ball",g,f,h;return e=new Te({props:{sketch:c[2]}}),{c(){t=x("div"),se(e.$$.fragment),r=E(),o=x("p"),n=J(s),p=E(),i=x("button"),i.textContent=a,this.h()},l(m){t=_(m,"DIV",{class:!0});var w=T(t);re(e.$$.fragment,w),w.forEach(v),r=j(m),o=_(m,"P",{});var y=T(o);n=K(y,s),y.forEach(v),p=j(m),i=_(m,"BUTTON",{"data-svelte-h":!0}),H(i)!=="svelte-1jwbm46"&&(i.textContent=a),this.h()},h(){L(t,"class","d-flex justify-content-center")},m(m,w){S(m,t,w),ie(e,t,null),S(m,r,w),S(m,o,w),b(o,n),S(m,p,w),S(m,i,w),g=!0,f||(h=G(i,"click",c[1]),f=!0)},p(m,[w]){(!g||w&1)&&s!==(s=m[0][m[0].length-1]+"")&&ne(n,s)},i(m){g||(le(e.$$.fragment,m),g=!0)},o(m){ce(e.$$.fragment,m),g=!1},d(m){m&&(v(t),v(r),v(o),v(p),v(i)),ae(e),f=!1,h()}}}function Ft(c,t,e){console.clear();let r=[];const o=a=>{const g=a.objects[a.objects.length-1],f=g.position.clone().toFixed(2),h=g.velocity.clone().toFixed(2);r.push(`${a.t.toFixed(2)} - pos: ${f} - vel: ${h}`),r.length>50&&r.shift(),e(0,r)},s=new Pe({reporter:o,enableGravity:!0}),n=()=>{for(;s.objects.length;)s.objects.pop();const a=k({geometry:{type:"line",vector:new u(100,0)},position:new u(0,0),fixed:!0});s.addObject(a);for(let g=0;g<1;g++){const f=k({geometry:{type:"sphere",r:5},position:new u(20,50),velocity:new u(Math.random()*5-2.5,Math.random()*20)});s.addObject(f)}};let p;const i=a=>{a.setup=()=>{p=a,a.createCanvas(900,600),a.background(0),a.fill(255),a.stroke(255),n()},a.draw=()=>{a.background(0),s.step();for(const g of s.objects){const f=a.map(g.position.x,0,s.dimensions.x,0,a.width),h=a.map(g.position.y,0,s.dimensions.y,a.height,0);if(g.geometry.type==="sphere"&&(a.strokeWeight(g.geometry.r*2),a.point(f,h)),g.geometry.type==="line"){const m=f+a.map(g.geometry.vector.x,0,s.dimensions.x,0,a.width),w=h+a.map(g.geometry.vector.y,0,s.dimensions.y,0,a.height);a.strokeWeight(2),a.line(f,h,m,w)}}}};return ke(()=>{p==null||p.remove()}),[r,n,i]}class It extends me{constructor(t){super(),he(this,t,Ft,Vt,fe,{})}}function Lt(c){let t,e,r,o,s=c[0][c[0].length-1]+"",n,p,i,a="New ball",g,f,h;return e=new Te({props:{sketch:c[2]}}),{c(){t=x("div"),se(e.$$.fragment),r=E(),o=x("p"),n=J(s),p=E(),i=x("button"),i.textContent=a,this.h()},l(m){t=_(m,"DIV",{class:!0});var w=T(t);re(e.$$.fragment,w),w.forEach(v),r=j(m),o=_(m,"P",{});var y=T(o);n=K(y,s),y.forEach(v),p=j(m),i=_(m,"BUTTON",{"data-svelte-h":!0}),H(i)!=="svelte-1jwbm46"&&(i.textContent=a),this.h()},h(){L(t,"class","d-flex justify-content-center")},m(m,w){S(m,t,w),ie(e,t,null),S(m,r,w),S(m,o,w),b(o,n),S(m,p,w),S(m,i,w),g=!0,f||(h=G(i,"click",c[1]),f=!0)},p(m,[w]){(!g||w&1)&&s!==(s=m[0][m[0].length-1]+"")&&ne(n,s)},i(m){g||(le(e.$$.fragment,m),g=!0)},o(m){ce(e.$$.fragment,m),g=!1},d(m){m&&(v(t),v(r),v(o),v(p),v(i)),ae(e),f=!1,h()}}}const ze=6;function Nt(c,t,e){console.clear();let r=[];const o=f=>{const h=f.objects[f.objects.length-1],m=h.position.clone().toFixed(2),w=h.velocity.clone().toFixed(2);r.push(`${f.t.toFixed(2)} - pos: ${m} - vel: ${w}`),r.length>50&&r.shift(),e(0,r)},s=new Pe({reporter:o,enableGravity:!0});let n,p;const i=()=>{for(;s.objects.length;)s.objects.pop();p=k({geometry:{type:"line",vector:new u(40,40)},position:new u(30,30),fixed:!0}),s.addObject(p),n=k({geometry:{type:"sphere",r:10},position:new u(20,50),velocity:new u(2.5,2.5),fixed:!0}),s.addObject(n)};let a;const g=f=>{const h=y=>typeof y=="number"?y*ze:y.clone().multiplyScalar(ze),m=y=>typeof y=="number"?y/ze:y.clone().divideScalar(ze);f.setup=()=>{a=f;const y=h(s.dimensions);f.createCanvas(y.x,y.y),f.background(0),f.fill(255),f.stroke(255),i()};let w;f.draw=()=>{if(f.background(0),s.step(),f.mouseIsPressed){const y=m(new u(f.mouseX,f.height-f.mouseY));if(w||(y.distance(n.position)<2?w="sphere":y.distance(p.position)<2?w="wallstart":y.distance(p.geometry.vector.clone().add(p.position))<2&&(w="wallend")),w==="sphere"&&n.position.copy(y),w==="wallstart"&&p.position.copy(y),w==="wallend"){const d=y.clone().subtract(p.position);p.geometry.vector.copy(d)}}else w=void 0;for(const y of s.objects.sort((d,l)=>d.geometry.type<l.geometry.type?1:-1)){f.stroke(n.data.isColliding?"red":"white");const d=f.map(y.position.x,0,s.dimensions.x,0,f.width),l=f.map(y.position.y,0,s.dimensions.y,f.height,0);if(y.geometry.type==="sphere"){const $=h(y.geometry.r*2);f.strokeWeight($),f.point(d,l)}if(y.geometry.type==="line"){const $=d+f.map(y.geometry.vector.x,0,s.dimensions.x,0,f.width),C=l-f.map(y.geometry.vector.y,0,s.dimensions.y,0,f.height);f.stroke("blue"),f.strokeWeight(2),f.line(d,l,$,C)}}}};return ke(()=>{a==null||a.remove()}),[r,i,g]}class Mt extends me{constructor(t){super(),he(this,t,Nt,Lt,fe,{})}}function Yt(c){let t,e,r;return e=new Te({props:{sketch:c[0]}}),{c(){t=x("div"),se(e.$$.fragment),this.h()},l(o){t=_(o,"DIV",{class:!0});var s=T(t);re(e.$$.fragment,s),s.forEach(v),this.h()},h(){L(t,"class","d-flex justify-content-center")},m(o,s){S(o,t,s),ie(e,t,null),r=!0},p:_e,i(o){r||(le(e.$$.fragment,o),r=!0)},o(o){ce(e.$$.fragment,o),r=!1},d(o){o&&v(t),ae(e)}}}const qe=6;function Wt(c){console.clear();const t=new Pe({reporter:()=>{},enableGravity:!0});let e;const r=()=>{for(;t.objects.length;)t.objects.pop();e=k({geometry:{type:"sphere",r:5},position:new u(20,50),velocity:new u(Math.random()*5-2.5,Math.random()*20)}),t.addObject(e);const i=k({geometry:{type:"line",vector:new u(100,0)},position:new u(0,2),fixed:!0});t.addObject(i);const a=k({geometry:{type:"line",vector:new u(100,0)},position:new u(0,98),fixed:!0});t.addObject(a);const g=k({geometry:{type:"line",vector:new u(0,100)},position:new u(2,0),fixed:!0});t.addObject(g);const f=k({geometry:{type:"line",vector:new u(0,100)},position:new u(98,0),fixed:!0});t.addObject(f);const h=k({geometry:{type:"line",vector:new u(50,50)},position:new u(20,10),fixed:!0});t.addObject(h)},o=i=>typeof i=="number"?i*qe:i.clone().multiplyScalar(qe),s=i=>typeof i=="number"?i/qe:i.clone().divideScalar(qe);let n;const p=i=>{i.setup=()=>{n=i;const g=o(t.dimensions);i.createCanvas(g.x,g.y),i.background(0),i.fill(255),i.stroke(255),r()},i.draw=()=>{if(i.background(0),i.mouseIsPressed){e.fixed=!0;const g=s(new u(i.mouseX,i.height-i.mouseY));e.position.copy(g)}else e.fixed=!1;t.step(),Re(i,t)};let a;i.mousePressed=()=>{a=s(new u(i.mouseX,i.height-i.mouseY))},i.mouseReleased=()=>{const g=s(new u(i.mouseX,i.height-i.mouseY)),f=a.subtract(g);e.position.copy(g),e.velocity.copy(f)}};return ke(()=>{n==null||n.remove()}),[p]}class At extends me{constructor(t){super(),he(this,t,Wt,Yt,fe,{})}}function Ut(c){let t,e,r,o,s,n,p,i="Gravity",a,g,f,h="Toggle",m,w,y;return e=new Te({props:{sketch:c[1]}}),{c(){t=x("div"),se(e.$$.fragment),r=E(),o=x("table"),s=x("tbody"),n=x("tr"),p=x("th"),p.textContent=i,a=E(),g=x("td"),f=x("button"),f.textContent=h,this.h()},l(d){t=_(d,"DIV",{class:!0});var l=T(t);re(e.$$.fragment,l),l.forEach(v),r=j(d),o=_(d,"TABLE",{});var $=T(o);s=_($,"TBODY",{});var C=T(s);n=_(C,"TR",{});var P=T(n);p=_(P,"TH",{"data-svelte-h":!0}),H(p)!=="svelte-vy75us"&&(p.textContent=i),a=j(P),g=_(P,"TD",{});var F=T(g);f=_(F,"BUTTON",{"data-svelte-h":!0}),H(f)!=="svelte-18lc94l"&&(f.textContent=h),F.forEach(v),P.forEach(v),C.forEach(v),$.forEach(v),this.h()},h(){L(t,"class","d-flex justify-content-center")},m(d,l){S(d,t,l),ie(e,t,null),S(d,r,l),S(d,o,l),b(o,s),b(s,n),b(n,p),b(n,a),b(n,g),b(g,f),m=!0,w||(y=G(f,"click",c[2]),w=!0)},p:_e,i(d){m||(le(e.$$.fragment,d),m=!0)},o(d){ce(e.$$.fragment,d),m=!1},d(d){d&&(v(t),v(r),v(o)),ae(e),w=!1,y()}}}const Qe=6;function Rt(c){console.clear();const t=new Pe({reporter:()=>{},enableGravity:!0});let e;const r=()=>{for(;t.objects.length;)t.objects.pop();const a=k({geometry:{type:"line",vector:new u(100,0)},position:new u(0,0),fixed:!0});t.addObject(a);const g=k({geometry:{type:"line",vector:new u(100,0)},position:new u(0,100),fixed:!0});t.addObject(g);const f=k({geometry:{type:"line",vector:new u(0,100)},position:new u(0,0),fixed:!0});t.addObject(f);const h=k({geometry:{type:"line",vector:new u(0,100)},position:new u(100,0),fixed:!0});t.addObject(h);const m=k({geometry:{type:"line",vector:new u(50,50)},position:new u(20,10),fixed:!0});t.addObject(m),e=k({geometry:{type:"sphere",r:2},position:new u(20,50),velocity:new u(Math.random()*5-2.5,Math.random()*20)}),t.addObject(e)},o=a=>typeof a=="number"?a*Qe:a.clone().multiplyScalar(Qe),s=a=>typeof a=="number"?a/Qe:a.clone().divideScalar(Qe);let n;const p=a=>{a.setup=()=>{n=a;const f=o(t.dimensions);a.createCanvas(f.x,f.y),a.background(0),a.fill(255),a.stroke(255),r()},a.draw=()=>{if(a.background(0),Le(a)){e.fixed=!0;const f=s(new u(a.mouseX,a.height-a.mouseY));e.position.copy(f)}else e.fixed=!1;t.step(),Re(a,t)};let g;a.mousePressed=()=>{Ie(a)&&(g=s(new u(a.mouseX,a.height-a.mouseY)))},a.mouseReleased=()=>{if(!Ie(a))return;const f=s(new u(a.mouseX,a.height-a.mouseY)),h=g.subtract(f);e.position.copy(f),e.velocity.copy(h)}};return ke(()=>{n==null||n.remove()}),[t,p,()=>t.toggleGravity()]}class Xt extends me{constructor(t){super(),he(this,t,Rt,Ut,fe,{})}}const Gt=()=>{const c=[],t=k({geometry:{type:"line",vector:new u(15,0)},position:new u(0,0),fixed:!0});c.push(t);const e=k({geometry:{type:"line",vector:new u(0,100)},position:new u(0,0),fixed:!0});c.push(e);const r=k({geometry:{type:"line",vector:new u(0,100)},position:new u(15,0),fixed:!0});c.push(r);const o=k({geometry:{type:"line",vector:new u(3,-3)},position:new u(3.5,8),fixed:!0});c.push(o);const s=k({geometry:{type:"line",vector:new u(3,3)},position:new u(3.5,5),fixed:!0});c.push(s);const n=k({geometry:{type:"line",vector:new u(6,0)},position:new u(2,2),fixed:!0});c.push(n);const p=k({geometry:{type:"line",vector:new u(4,0)},position:new u(3,2.5),fixed:!0});c.push(p);const i=k({geometry:{type:"line",vector:new u(2,0)},position:new u(4,3),fixed:!0});c.push(i);const a=k({geometry:{type:"line",vector:new u(.6,0)},position:new u(4.7,3.5),fixed:!0});c.push(a);const g=k({geometry:{type:"line",vector:new u(1,0)},position:new u(10,10.1),fixed:!0});c.push(g);const f=k({geometry:{type:"line",vector:new u(0,-4)},position:new u(11,10),fixed:!0});c.push(f);const h=k({geometry:{type:"line",vector:new u(0,-4)},position:new u(11.5,10),fixed:!0});c.push(h);const m=k({geometry:{type:"line",vector:new u(0,-4)},position:new u(12,10),fixed:!0});c.push(m);const w=k({geometry:{type:"line",vector:new u(1,0)},position:new u(12,10.1),fixed:!0});c.push(w);for(let d=.2;d<.5;d+=.1)for(let l=0;l<10;l++){const $=k({geometry:{type:"line",vector:new u(0,3)},position:new u(9+l*d,1),fixed:!0});c.push($)}const y=k({geometry:{type:"sphere",r:.1},position:new u(5,10),velocity:new u(0,0)});return c.push(y),{objects:c,sphere:y}};function Ht(c){let t,e,r,o,s,n=c[0]?"Disable":"Enable",p,i,a,g,f=c[1]?"Play":"Pause",h,m,w,y="Reset",d,l,$,C,P,F,N,W,Q,Y="Simulation time/Frame duration",M,D,B=c[2].t+"",A,ee,te,R=c[2].frameTime+"",z,ye,V,U,O="Sphere position",X,Z,ge=c[2].spherePos.x.toFixed(2)+"",we,ue,de,be=c[2].spherePos.y.toFixed(2)+"",Ce,De,Se,Be,st="Sphere velocity",Ke,Ne,Me=c[2].sphereVel.x.toFixed(2)+"",Xe,Ze,Ye,We=c[2].sphereVel.y.toFixed(2)+"",Ge,pe,et,rt;return e=new Te({props:{sketch:c[5]}}),l=new gt({props:{onShoot:c[6]}}),C=new ot({props:{world:c[3]}}),{c(){t=x("div"),se(e.$$.fragment),r=E(),o=x("div"),s=x("button"),p=J(n),i=J(" pause on collision"),a=E(),g=x("button"),h=J(f),m=E(),w=x("button"),w.textContent=y,d=E(),se(l.$$.fragment),$=E(),se(C.$$.fragment),P=E(),F=x("table"),N=x("tbody"),W=x("tr"),Q=x("th"),Q.textContent=Y,M=E(),D=x("td"),A=J(B),ee=E(),te=x("td"),z=J(R),ye=E(),V=x("tr"),U=x("th"),U.textContent=O,X=E(),Z=x("td"),we=J(ge),ue=E(),de=x("td"),Ce=J(be),De=E(),Se=x("tr"),Be=x("th"),Be.textContent=st,Ke=E(),Ne=x("td"),Xe=J(Me),Ze=E(),Ye=x("td"),Ge=J(We),this.h()},l(I){t=_(I,"DIV",{class:!0});var q=T(t);re(e.$$.fragment,q),q.forEach(v),r=j(I),o=_(I,"DIV",{});var Ee=T(o);s=_(Ee,"BUTTON",{});var tt=T(s);p=K(tt,n),i=K(tt," pause on collision"),tt.forEach(v),a=j(Ee),g=_(Ee,"BUTTON",{});var it=T(g);h=K(it,f),it.forEach(v),m=j(Ee),w=_(Ee,"BUTTON",{"data-svelte-h":!0}),H(w)!=="svelte-tlxueg"&&(w.textContent=y),Ee.forEach(v),d=j(I),re(l.$$.fragment,I),$=j(I),re(C.$$.fragment,I),P=j(I),F=_(I,"TABLE",{});var lt=T(F);N=_(lt,"TBODY",{});var Ae=T(N);W=_(Ae,"TR",{});var Ve=T(W);Q=_(Ve,"TH",{"data-svelte-h":!0}),H(Q)!=="svelte-rirgm4"&&(Q.textContent=Y),M=j(Ve),D=_(Ve,"TD",{});var ct=T(D);A=K(ct,B),ct.forEach(v),ee=j(Ve),te=_(Ve,"TD",{});var at=T(te);z=K(at,R),at.forEach(v),Ve.forEach(v),ye=j(Ae),V=_(Ae,"TR",{});var Oe=T(V);U=_(Oe,"TH",{"data-svelte-h":!0}),H(U)!=="svelte-1y1nif6"&&(U.textContent=O),X=j(Oe),Z=_(Oe,"TD",{});var ut=T(Z);we=K(ut,ge),ut.forEach(v),ue=j(Oe),de=_(Oe,"TD",{});var dt=T(de);Ce=K(dt,be),dt.forEach(v),De=j(Oe),Oe.forEach(v),Se=_(Ae,"TR",{});var Fe=T(Se);Be=_(Fe,"TH",{"data-svelte-h":!0}),H(Be)!=="svelte-1uw1fs2"&&(Be.textContent=st),Ke=j(Fe),Ne=_(Fe,"TD",{});var ft=T(Ne);Xe=K(ft,Me),ft.forEach(v),Ze=j(Fe),Ye=_(Fe,"TD",{});var mt=T(Ye);Ge=K(mt,We),mt.forEach(v),Fe.forEach(v),Ae.forEach(v),lt.forEach(v),this.h()},h(){L(t,"class","d-flex justify-content-center")},m(I,q){S(I,t,q),ie(e,t,null),S(I,r,q),S(I,o,q),b(o,s),b(s,p),b(s,i),b(o,a),b(o,g),b(g,h),b(o,m),b(o,w),S(I,d,q),ie(l,I,q),S(I,$,q),ie(C,I,q),S(I,P,q),S(I,F,q),b(F,N),b(N,W),b(W,Q),b(W,M),b(W,D),b(D,A),b(W,ee),b(W,te),b(te,z),b(N,ye),b(N,V),b(V,U),b(V,X),b(V,Z),b(Z,we),b(V,ue),b(V,de),b(de,Ce),b(V,De),b(N,Se),b(Se,Be),b(Se,Ke),b(Se,Ne),b(Ne,Xe),b(Se,Ze),b(Se,Ye),b(Ye,Ge),pe=!0,et||(rt=[G(s,"click",c[7]),G(g,"click",c[8]),G(w,"click",c[4])],et=!0)},p(I,[q]){(!pe||q&1)&&n!==(n=I[0]?"Disable":"Enable")&&ne(p,n),(!pe||q&2)&&f!==(f=I[1]?"Play":"Pause")&&ne(h,f);const Ee={};q&8&&(Ee.world=I[3]),C.$set(Ee),(!pe||q&4)&&B!==(B=I[2].t+"")&&ne(A,B),(!pe||q&4)&&R!==(R=I[2].frameTime+"")&&ne(z,R),(!pe||q&4)&&ge!==(ge=I[2].spherePos.x.toFixed(2)+"")&&ne(we,ge),(!pe||q&4)&&be!==(be=I[2].spherePos.y.toFixed(2)+"")&&ne(Ce,be),(!pe||q&4)&&Me!==(Me=I[2].sphereVel.x.toFixed(2)+"")&&ne(Xe,Me),(!pe||q&4)&&We!==(We=I[2].sphereVel.y.toFixed(2)+"")&&ne(Ge,We)},i(I){pe||(le(e.$$.fragment,I),le(l.$$.fragment,I),le(C.$$.fragment,I),pe=!0)},o(I){ce(e.$$.fragment,I),ce(l.$$.fragment,I),ce(C.$$.fragment,I),pe=!1},d(I){I&&(v(t),v(r),v(o),v(d),v($),v(P),v(F)),ae(e),ae(l,I),ae(C,I),et=!1,Ue(rt)}}}const Je=60;function zt(c,t,e){console.clear();let r=!1,o=!1,s={t:"0",frameTime:"0",spherePos:new u(0,0),sphereVel:new u(0,0),ballIsColliding:!1},n,p;const i=()=>{e(3,n=new Pe({dimensions:new u(15,15),reporter:l=>{var $;e(2,s.t=($=l==null?void 0:l.t)==null?void 0:$.toFixed(1),s),s.spherePos.copy(p.position).unfloat(),s.sphereVel.copy(p.velocity).unfloat(),e(2,s.frameTime=l.frameTime.toFixed(2),s),e(2,s),e(2,s.ballIsColliding=p.data.isColliding,s),r&&p.data.isColliding&&!o&&e(1,o=!0)},enableGravity:!0}));const d=Gt();p=d.sphere;for(const l of d.objects)n.addObject(l)},a=d=>typeof d=="number"?d*Je:d.clone().multiplyScalar(Je),g=d=>typeof d=="number"?d/Je:d.clone().divideScalar(Je);let f;const h=d=>{d.setup=()=>{f=d,i();const C=a(n.dimensions);d.createCanvas(C.x,C.y),d.background(0),d.fill(255),d.stroke(255),i()},d.draw=()=>{d.background(0),Le(d)?p.fixed=!0:p.fixed=!1,o||n.step(),Re(d,n),$(d)};let l;d.mousePressed=()=>{Ie(d)&&(l=g(new u(d.mouseX,d.height-d.mouseY)),p.position.copy(l))},d.mouseReleased=()=>{if(!Ie(d)||!l)return;const C=g(new u(d.mouseX,d.height-d.mouseY)),P=l.subtract(C).multiplyScalar(3);l=void 0,p.velocity.copy(P)};const $=C=>{if(!l)return;C.stroke("blue"),C.strokeWeight(2);const P=a(l);C.line(P.x,C.height-P.y,C.mouseX,C.mouseY)}},m=d=>{d.multiplyScalar(1e4),n.applyForce(p,d)};return ke(()=>{f==null||f.remove()}),[r,o,s,n,i,h,m,()=>e(0,r=!r),()=>e(1,o=!o)]}let qt=class extends me{constructor(t){super(),he(this,t,zt,Ht,fe,{})}};const Qt=()=>{const c=[],t=k({geometry:{type:"line",vector:new u(15,0)},position:new u(0,0),fixed:!0});c.push(t);const e=k({geometry:{type:"line",vector:new u(0,100)},position:new u(0,0),fixed:!0});c.push(e);const r=k({geometry:{type:"line",vector:new u(0,100)},position:new u(15,0),fixed:!0});c.push(r);const o=k({geometry:{type:"line",vector:new u(3,-3)},position:new u(3.5,8),fixed:!0});c.push(o);const s=k({geometry:{type:"line",vector:new u(3,3)},position:new u(3.5,5),fixed:!0});c.push(s);const n=k({geometry:{type:"line",vector:new u(6,0)},position:new u(2,2),fixed:!0});c.push(n);const p=k({geometry:{type:"line",vector:new u(4,0)},position:new u(3,2.5),fixed:!0});c.push(p);const i=k({geometry:{type:"line",vector:new u(2,0)},position:new u(4,3),fixed:!0});c.push(i);const a=k({geometry:{type:"line",vector:new u(.6,0)},position:new u(4.7,3.5),fixed:!0});c.push(a);const g=k({geometry:{type:"line",vector:new u(1,0)},position:new u(10,10.1),fixed:!0});c.push(g);const f=k({geometry:{type:"line",vector:new u(0,-4)},position:new u(11,10),fixed:!0});c.push(f);const h=k({geometry:{type:"line",vector:new u(0,-4)},position:new u(11.5,10),fixed:!0});c.push(h);const m=k({geometry:{type:"line",vector:new u(0,-4)},position:new u(12,10),fixed:!0});c.push(m);const w=k({geometry:{type:"line",vector:new u(1,0)},position:new u(12,10.1),fixed:!0});c.push(w);for(let y=.2;y<.5;y+=.1)for(let d=0;d<10;d++){const l=k({geometry:{type:"line",vector:new u(0,3)},position:new u(9+d*y,1),fixed:!0});c.push(l)}return{objects:c}};function Jt(c){let t,e,r,o,s,n=c[0]?"Disable":"Enable",p,i,a,g,f=c[1]?"Play":"Pause",h,m,w,y="Reset",d,l,$,C,P,F,N,W="Simulation time/Frame duration",Q,Y,M=c[2].t+"",D,B,A,ee=c[2].frameTime+"",te,R,z,ye;return e=new Te({props:{sketch:c[5]}}),l=new ot({props:{world:c[3]}}),{c(){t=x("div"),se(e.$$.fragment),r=E(),o=x("div"),s=x("button"),p=J(n),i=J(" pause on collision"),a=E(),g=x("button"),h=J(f),m=E(),w=x("button"),w.textContent=y,d=E(),se(l.$$.fragment),$=E(),C=x("table"),P=x("tbody"),F=x("tr"),N=x("th"),N.textContent=W,Q=E(),Y=x("td"),D=J(M),B=E(),A=x("td"),te=J(ee),this.h()},l(V){t=_(V,"DIV",{class:!0});var U=T(t);re(e.$$.fragment,U),U.forEach(v),r=j(V),o=_(V,"DIV",{});var O=T(o);s=_(O,"BUTTON",{});var X=T(s);p=K(X,n),i=K(X," pause on collision"),X.forEach(v),a=j(O),g=_(O,"BUTTON",{});var Z=T(g);h=K(Z,f),Z.forEach(v),m=j(O),w=_(O,"BUTTON",{"data-svelte-h":!0}),H(w)!=="svelte-tlxueg"&&(w.textContent=y),O.forEach(v),d=j(V),re(l.$$.fragment,V),$=j(V),C=_(V,"TABLE",{});var ge=T(C);P=_(ge,"TBODY",{});var we=T(P);F=_(we,"TR",{});var ue=T(F);N=_(ue,"TH",{"data-svelte-h":!0}),H(N)!=="svelte-rirgm4"&&(N.textContent=W),Q=j(ue),Y=_(ue,"TD",{});var de=T(Y);D=K(de,M),de.forEach(v),B=j(ue),A=_(ue,"TD",{});var be=T(A);te=K(be,ee),be.forEach(v),ue.forEach(v),we.forEach(v),ge.forEach(v),this.h()},h(){L(t,"class","d-flex justify-content-center")},m(V,U){S(V,t,U),ie(e,t,null),S(V,r,U),S(V,o,U),b(o,s),b(s,p),b(s,i),b(o,a),b(o,g),b(g,h),b(o,m),b(o,w),S(V,d,U),ie(l,V,U),S(V,$,U),S(V,C,U),b(C,P),b(P,F),b(F,N),b(F,Q),b(F,Y),b(Y,D),b(F,B),b(F,A),b(A,te),R=!0,z||(ye=[G(s,"click",c[6]),G(g,"click",c[7]),G(w,"click",c[4])],z=!0)},p(V,[U]){(!R||U&1)&&n!==(n=V[0]?"Disable":"Enable")&&ne(p,n),(!R||U&2)&&f!==(f=V[1]?"Play":"Pause")&&ne(h,f);const O={};U&8&&(O.world=V[3]),l.$set(O),(!R||U&4)&&M!==(M=V[2].t+"")&&ne(D,M),(!R||U&4)&&ee!==(ee=V[2].frameTime+"")&&ne(te,ee)},i(V){R||(le(e.$$.fragment,V),le(l.$$.fragment,V),R=!0)},o(V){ce(e.$$.fragment,V),ce(l.$$.fragment,V),R=!1},d(V){V&&(v(t),v(r),v(o),v(d),v($),v(C)),ae(e),ae(l,V),z=!1,Ue(ye)}}}const vt=60;function Kt(c,t,e){console.clear();let r=!1,o=!1,s={t:"0",frameTime:"0"},n;const p=()=>{clearInterval(f),f=setInterval(i,100),e(3,n=new Pe({dimensions:new u(15,15),reporter:d=>{var l;e(2,s.t=(l=d==null?void 0:d.t)==null?void 0:l.toFixed(1),s),e(2,s.frameTime=d.frameTime.toFixed(2),s),e(2,s)},enableGravity:!0}));const y=Qt();for(const d of y.objects)n.addObject(d)},i=()=>{console.log("add ball");const y=Math.random()*n.dimensions.x,d=Math.random()*n.dimensions.y,l=-5+Math.random()*10,$=-5+Math.random()*10,C=k({geometry:{type:"sphere",r:.1},position:new u(y,d),velocity:new u(l,$)});n.addObject(C)},a=y=>typeof y=="number"?y*vt:y.clone().multiplyScalar(vt);let g,f;const h=y=>{y.setup=()=>{g=y,p();const d=a(n.dimensions);y.createCanvas(d.x,d.y),y.background(0),y.fill(255),y.stroke(255),p()},y.draw=()=>{y.background(0),o||n.step(),Re(y,n)}};return ke(()=>{g==null||g.remove(),clearInterval(f)}),[r,o,s,n,p,h,()=>e(0,r=!r),()=>e(1,o=!o)]}class Zt extends me{constructor(t){super(),he(this,t,Kt,Jt,fe,{})}}function en(c){let t,e,r;return e=new Te({props:{sketch:c[0]}}),{c(){t=x("div"),se(e.$$.fragment),this.h()},l(o){t=_(o,"DIV",{class:!0});var s=T(t);re(e.$$.fragment,s),s.forEach(v),this.h()},h(){L(t,"class","d-flex justify-content-center")},m(o,s){S(o,t,s),ie(e,t,null),r=!0},p:_e,i(o){r||(le(e.$$.fragment,o),r=!0)},o(o){ce(e.$$.fragment,o),r=!1},d(o){o&&v(t),ae(e)}}}const je=6;function tn(c){console.clear();let t;const e=k({geometry:{type:"sphere",r:10},position:new u(30,50),velocity:new u(15,15)}),r=k({geometry:{type:"line",vector:new u(80,0)},position:new u(10,70)}),o=new xt,s=n=>{const p=new u(100,100),i=oe(p,je);n.setup=()=>{t=n,n.createCanvas(i.x,i.y),n.noFill()};let a;n.draw=()=>{if(n.background(0),!Le(n))a=void 0;else{const l=nt(new u(n.mouseX,n.height-n.mouseY),je);if(a||(l.distance(e.position)<=e.geometry.r?a="sphere":l.distance(e.position.clone().add(e.velocity))<=6?a="spherevelocity":l.distance(r.position)<=6?a="linestart":l.distance(r.geometry.vector.clone().add(r.position))<=6&&(a="lineend")),a==="sphere")e.position.copy(l);else if(a==="spherevelocity"){const $=l.clone().subtract(e.position);e.velocity.copy($)}else if(a==="linestart")r.position.copy(l);else if(a==="lineend"){const $=l.clone().subtract(r.position);r.geometry.vector.copy($)}}const{intersection:g,bouncedVelocity:f}=o.apply(r,e);for(let l=0;l<10;l++){const{positionCorrection:$}=o.apply(r,e);$&&(e.position.add($.multiplyScalar(.5)),r.position.subtract($.multiplyScalar(.5)))}n.stroke(255),n.noFill();const h=oe(e.position,je);n.circle(h.x,n.height-h.y,2*e.geometry.r*je),n.stroke(255);const m=oe(e.velocity,je);n.line(h.x,n.height-h.y,h.x+m.x,n.height-(h.y+m.y)),n.stroke(255);const{x:w,y}=oe(r.position,je),d=oe(r.geometry.vector,je);if(n.line(w,n.height-y,w+d.x,n.height-(y+d.y)),g){n.stroke("#54d7ff"),n.fill("#54d7ff");const l=oe(g,je);n.circle(l.x,n.height-l.y,5)}if(f){n.stroke("green"),n.fill("green");const l=oe(f,je);n.line(h.x,n.height-h.y,h.x+l.x,n.height-(h.y+l.y))}}};return ke(()=>{t==null||t.remove()}),[s]}class nn extends me{constructor(t){super(),he(this,t,tn,en,fe,{})}}function on(c){let t,e,r;return e=new Te({props:{sketch:c[0]}}),{c(){t=x("div"),se(e.$$.fragment),this.h()},l(o){t=_(o,"DIV",{class:!0});var s=T(t);re(e.$$.fragment,s),s.forEach(v),this.h()},h(){L(t,"class","d-flex justify-content-center")},m(o,s){S(o,t,s),ie(e,t,null),r=!0},p:_e,i(o){r||(le(e.$$.fragment,o),r=!0)},o(o){ce(e.$$.fragment,o),r=!1},d(o){o&&v(t),ae(e)}}}const xe=6;function sn(c){console.clear();let t;const e=k({geometry:{type:"sphere",r:10},position:new u(30,50),velocity:new u(15,15)}),r=k({geometry:{type:"sphere",r:10},position:new u(70,50),velocity:new u(0,45)}),o=new _t,s=n=>{const p=new u(100,100),i=oe(p,xe);n.setup=()=>{t=n,n.createCanvas(i.x,i.y),n.noFill()};let a;n.draw=()=>{if(n.background(0),!Le(n))a=void 0;else{const d=nt(new u(n.mouseX,n.height-n.mouseY),xe);if(a||(d.distance(e.position)<=e.geometry.r?a="sphere":d.distance(e.position.clone().add(e.velocity))<=6?a="spherevelocity":d.distance(r.position)<=r.geometry.r?a="sphere2":d.distance(r.position.clone().add(r.velocity))<=6&&(a="sphere2velocity")),a==="sphere")e.position.copy(d);else if(a==="spherevelocity"){const l=d.clone().subtract(e.position);e.velocity.copy(l)}else if(a==="sphere2")r.position.copy(d);else if(a==="sphere2velocity"){const l=d.clone().subtract(r.position);r.velocity.copy(l)}}const{intersection:g,bouncedVelocity:f}=o.apply(e,r);for(let d=0;d<10;d++){const{positionCorrection:l}=o.apply(e,r);l&&(e.position.add(l.multiplyScalar(.5)),r.position.subtract(l.multiplyScalar(.5)))}n.stroke(255),n.noFill();const h=oe(e.position,xe);n.circle(h.x,n.height-h.y,2*e.geometry.r*xe),n.stroke(255);const m=oe(e.velocity,xe);n.line(h.x,n.height-h.y,h.x+m.x,n.height-(h.y+m.y)),n.stroke(255),n.noFill();const w=oe(r.position,xe);n.circle(w.x,n.height-w.y,2*r.geometry.r*xe),n.stroke(255);const y=oe(r.velocity,xe);if(n.line(w.x,n.height-w.y,w.x+y.x,n.height-(w.y+y.y)),g){n.stroke("#54d7ff"),n.fill("#54d7ff");const d=oe(g,xe);n.circle(d.x,n.height-d.y,5)}if(f){n.stroke("green"),n.fill("green");const d=oe(f,xe);n.line(h.x,n.height-h.y,h.x+d.x,n.height-(h.y+d.y))}}};return ke(()=>{t==null||t.remove()}),[s]}class rn extends me{constructor(t){super(),he(this,t,sn,on,fe,{})}}function ln(c){let t,e="<span>This page is a list of engine tests. They use the actual engine and allow me to setup different situations and check manually for regressions and bugs.</span> <br/> <span>Use the selection menu to see the different pages</span>",r,o,s,n,p;return n=new bt({props:{tabs:c[0]}}),{c(){t=x("div"),t.innerHTML=e,r=E(),o=x("br"),s=E(),se(n.$$.fragment)},l(i){t=_(i,"DIV",{"data-svelte-h":!0}),H(t)!=="svelte-11mzr87"&&(t.innerHTML=e),r=j(i),o=_(i,"BR",{}),s=j(i),re(n.$$.fragment,i)},m(i,a){S(i,t,a),S(i,r,a),S(i,o,a),S(i,s,a),ie(n,i,a),p=!0},p:_e,i(i){p||(le(n.$$.fragment,i),p=!0)},o(i){ce(n.$$.fragment,i),p=!1},d(i){i&&(v(t),v(r),v(o),v(s)),ae(n,i)}}}function cn(c){return[[{label:"Fireworks",value:Tt},{label:"Ball pool",value:Bt},{label:"Sphere Sphere Collider",value:rn},{label:"Line Sphere Collider",value:nn},{label:"Perfs - Multiple balls",value:Zt},{label:"Playground - Engine settings",value:qt},{label:"Dynamics + collisions - 1",value:Xt},{label:"Dynamics + collisions - 2",value:At},{label:"Sphere Line - pull apart",value:Mt},{label:"One ball bounce",value:It}]]}class vn extends me{constructor(t){super(),he(this,t,cn,ln,fe,{})}}export{vn as component};
