var $t=Object.defineProperty;var xt=(c,e,t)=>e in c?$t(c,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):c[e]=t;var ne=(c,e,t)=>(xt(c,typeof e!="symbol"?e+"":e,t),t);import{s as ae,f as _,a as j,l as U,g as w,h as O,d as g,c as P,m as M,u as Y,j as F,i as k,y as v,L as H,n as Z,M as De,z as he,e as _e,P as ce,Q as we,O as et,E as _t,q as ht}from"../chunks/scheduler.e421d989.js";import{S as ue,i as fe,b as q,d as ee,m as z,a as L,t as G,e as Q,g as tt,c as ot}from"../chunks/index.52486247.js";import{e as Re}from"../chunks/each.e59479a4.js";import{V as h,P as We,m as wt,a as Ue,T as Ct,b as Tt,c as kt,d as St}from"../chunks/p5utils.fe4d08ff.js";const Et=(c,e)=>{if(e.geometry.type!=="sphere"||c.geometry.type!=="line")throw new Error("invalid geometry");const t=jt(c,e);if(!t)return;const o=.8,n=.2,r=c.position.x,s=c.position.y,f=c.position.x+c.geometry.vector.x,u=c.position.y+c.geometry.vector.y,i=f-r,l=u-s,a=new h(-l,i),p=new h(l,-i),d=t.clone().add(a),y=t.clone().add(p);let b;e.position.distanceSq(d)<e.position.distanceSq(y)?b=a:b=p;const x=b.clone().normalize(),m=e.velocity.clone(),$=x.multiplyScalar(m.dot(x)),S=m.subtract($),E=o,N=n;return{bouncedVelocity:S.multiplyScalar(1-N).subtract($.multiplyScalar(E)),intersection:t}},jt=(c,e)=>{if(e.geometry.type!=="sphere"||c.geometry.type!=="line")throw new Error("invalid geometry");const t=c.position.clone(),o=c.position.clone().add(c.geometry.vector),n=e.position.clone(),r=e.geometry.r,s=o.clone().subtract(t),f=t.clone().subtract(n),u=s.dot(s),i=f.dot(s)*2,l=f.dot(f)-r*r;let a=i*i-4*u*l;if(a<0)return;a=Math.sqrt(a);const p=(-i-a)/(2*u),d=(-i+a)/(2*u),y=p>=0&&p<=1,b=d>=0&&d<=1;if(y&&b)return t.add(s.multiplyScalar(p+(d-p)*.5));if(y)return t.add(s.multiplyScalar(1));if(b)return t.add(s.multiplyScalar(0))};class Ne{constructor(e){ne(this,"gravityEnabled");ne(this,"dimensions");ne(this,"t");ne(this,"objects");ne(this,"gravity",new h(0,-9.8));ne(this,"antiGravity",new h(0,9.8));ne(this,"drag",.001);ne(this,"dt",.005);ne(this,"reporter");this.gravityEnabled=e.enableGravity??!0,this.dimensions=e.dimensions||new h(100,100),this.objects=[],this.t=0,this.reporter=e.reporter||console.log}toggleGravity(){this.gravityEnabled=!this.gravityEnabled}addObject(e){this.objects.push(e)}applyGravity(e){e.acceleration.push(this.gravity)}applyForce(e,t){e.acceleration.push(t)}applyDynamics(e,t){this.gravityEnabled&&this.applyGravity(t);const o=new h(0,0);for(;t.acceleration.length;){const r=t.acceleration.pop();r&&o.add(r)}o.divideScalar(t.m);const n=1-this.drag;t.velocity.add(o.multiplyScalar(e)).multiplyScalar(n),t.position.add(t.velocity.clone().multiplyScalar(e))}applyCollisions(e){const t=this.objects.find(s=>s.geometry.type==="sphere"),o=this.objects.filter(s=>s.geometry.type==="line");if(!t)throw new Error("No sphere in world");t.data.isColliding=!1;const n=new h(0,0);let r=0;for(const s of o){s.data.isColliding=!1;const f=Et(s,t);if(!f)continue;const{bouncedVelocity:u,intersection:i}=f;s.data.isColliding=!0,r++,n.add(u);const l=t.position.clone().subtract(i),a=l.length();if(a<=t.geometry.r){const d=t.geometry.r-a;l.normalize().multiplyScalar(d),t.position.add(l)}}r>0&&(n.divideScalar(r),t.velocity.copy(n),t.position.add(t.velocity.clone().multiplyScalar(e)),t.data.isColliding=!0,t.acceleration.push(this.antiGravity))}_step(e){this.applyCollisions(e);for(const t of this.objects)t.fixed||this.applyDynamics(e,t)}stepFixedDt(){const t=Date.now()/1e3;Oe=t-be,be=t,this._step(.01),this.t+=.01,this.reporter&&this.reporter({...this,frameTime:Oe})}stepAccumulator(){const e=this.dt,t=Date.now()/1e3;be===0&&(be=t),Oe=t-be,be=t,Ze+=Oe;let o=0;for(;Ze>=e&&o<5;)o++,this._step(e),Ze-=e,this.t+=e,this.reporter&&this.reporter({...this,frameTime:Oe})}step(){this.stepAccumulator()}}let be=0,Oe=0,Ze=0;const W=c=>{var e,t;return{geometry:c.geometry,m:c.mass??1,position:((e=c.position)==null?void 0:e.clone())??new h(0,0),velocity:((t=c.velocity)==null?void 0:t.clone())??new h(0,0),acceleration:[],fixed:c.fixed??!1,data:{isColliding:!1}}};function Pt(c){let e,t,o,n,r=c[0][c[0].length-1]+"",s,f,u,i="New ball",l,a,p;return t=new We({props:{sketch:c[2]}}),{c(){e=_("div"),q(t.$$.fragment),o=j(),n=_("p"),s=U(r),f=j(),u=_("button"),u.textContent=i,this.h()},l(d){e=w(d,"DIV",{class:!0});var y=O(e);ee(t.$$.fragment,y),y.forEach(g),o=P(d),n=w(d,"P",{});var b=O(n);s=M(b,r),b.forEach(g),f=P(d),u=w(d,"BUTTON",{"data-svelte-h":!0}),Y(u)!=="svelte-1jwbm46"&&(u.textContent=i),this.h()},h(){F(e,"class","d-flex justify-content-center")},m(d,y){k(d,e,y),z(t,e,null),k(d,o,y),k(d,n,y),v(n,s),k(d,f,y),k(d,u,y),l=!0,a||(p=H(u,"click",c[1]),a=!0)},p(d,[y]){(!l||y&1)&&r!==(r=d[0][d[0].length-1]+"")&&Z(s,r)},i(d){l||(L(t.$$.fragment,d),l=!0)},o(d){G(t.$$.fragment,d),l=!1},d(d){d&&(g(e),g(o),g(n),g(f),g(u)),Q(t),a=!1,p()}}}function Ot(c,e,t){console.clear();let o=[];const n=i=>{const l=i.objects[i.objects.length-1],a=l.position.clone().toFixed(2),p=l.velocity.clone().toFixed(2);o.push(`${i.t.toFixed(2)} - pos: ${a} - vel: ${p}`),o.length>50&&o.shift(),t(0,o)},r=new Ne({reporter:n,enableGravity:!0}),s=()=>{for(;r.objects.length;)r.objects.pop();const i=W({geometry:{type:"line",vector:new h(100,0)},position:new h(0,0),fixed:!0});r.addObject(i);for(let l=0;l<1;l++){const a=W({geometry:{type:"sphere",r:5},position:new h(20,50),velocity:new h(Math.random()*5-2.5,Math.random()*20)});r.addObject(a)}};let f;const u=i=>{i.setup=()=>{f=i,i.createCanvas(900,600),i.background(0),i.fill(255),i.stroke(255),s()},i.draw=()=>{i.background(0),r.step();for(const l of r.objects){const a=i.map(l.position.x,0,r.dimensions.x,0,i.width),p=i.map(l.position.y,0,r.dimensions.y,i.height,0);if(l.geometry.type==="sphere"&&(i.strokeWeight(l.geometry.r*2),i.point(a,p)),l.geometry.type==="line"){const d=a+i.map(l.geometry.vector.x,0,r.dimensions.x,0,i.width),y=p+i.map(l.geometry.vector.y,0,r.dimensions.y,0,i.height);i.strokeWeight(2),i.line(a,p,d,y)}}}};return De(()=>{f==null||f.remove()}),[o,s,u]}class Dt extends ue{constructor(e){super(),fe(this,e,Ot,Pt,ae,{})}}function Wt(c){let e,t,o,n,r=c[0][c[0].length-1]+"",s,f,u,i="New ball",l,a,p;return t=new We({props:{sketch:c[2]}}),{c(){e=_("div"),q(t.$$.fragment),o=j(),n=_("p"),s=U(r),f=j(),u=_("button"),u.textContent=i,this.h()},l(d){e=w(d,"DIV",{class:!0});var y=O(e);ee(t.$$.fragment,y),y.forEach(g),o=P(d),n=w(d,"P",{});var b=O(n);s=M(b,r),b.forEach(g),f=P(d),u=w(d,"BUTTON",{"data-svelte-h":!0}),Y(u)!=="svelte-1jwbm46"&&(u.textContent=i),this.h()},h(){F(e,"class","d-flex justify-content-center")},m(d,y){k(d,e,y),z(t,e,null),k(d,o,y),k(d,n,y),v(n,s),k(d,f,y),k(d,u,y),l=!0,a||(p=H(u,"click",c[1]),a=!0)},p(d,[y]){(!l||y&1)&&r!==(r=d[0][d[0].length-1]+"")&&Z(s,r)},i(d){l||(L(t.$$.fragment,d),l=!0)},o(d){G(t.$$.fragment,d),l=!1},d(d){d&&(g(e),g(o),g(n),g(f),g(u)),Q(t),a=!1,p()}}}const Le=6;function Nt(c,e,t){console.clear();let o=[];const n=a=>{const p=a.objects[a.objects.length-1],d=p.position.clone().toFixed(2),y=p.velocity.clone().toFixed(2);o.push(`${a.t.toFixed(2)} - pos: ${d} - vel: ${y}`),o.length>50&&o.shift(),t(0,o)},r=new Ne({reporter:n,enableGravity:!0});let s,f;const u=()=>{for(;r.objects.length;)r.objects.pop();f=W({geometry:{type:"line",vector:new h(40,40)},position:new h(30,30),fixed:!0}),r.addObject(f),s=W({geometry:{type:"sphere",r:10},position:new h(20,50),velocity:new h(2.5,2.5),fixed:!0}),r.addObject(s)};let i;const l=a=>{const p=b=>typeof b=="number"?b*Le:b.clone().multiplyScalar(Le),d=b=>typeof b=="number"?b/Le:b.clone().divideScalar(Le);a.setup=()=>{i=a;const b=p(r.dimensions);a.createCanvas(b.x,b.y),a.background(0),a.fill(255),a.stroke(255),u()};let y;a.draw=()=>{if(a.background(0),r.step(),a.mouseIsPressed){const b=d(new h(a.mouseX,a.height-a.mouseY));if(y||(b.distance(s.position)<2?y="sphere":b.distance(f.position)<2?y="wallstart":b.distance(f.geometry.vector.clone().add(f.position))<2&&(y="wallend")),y==="sphere"&&s.position.copy(b),y==="wallstart"&&f.position.copy(b),y==="wallend"){const x=b.clone().subtract(f.position);f.geometry.vector.copy(x)}}else y=void 0;for(const b of r.objects){a.stroke(s.data.isColliding?"red":"white");const x=a.map(b.position.x,0,r.dimensions.x,0,a.width),m=a.map(b.position.y,0,r.dimensions.y,a.height,0);if(b.geometry.type==="sphere"){const $=p(b.geometry.r*2);a.strokeWeight($),a.point(x,m)}if(b.geometry.type==="line"){const $=x+a.map(b.geometry.vector.x,0,r.dimensions.x,0,a.width),S=m-a.map(b.geometry.vector.y,0,r.dimensions.y,0,a.height);a.strokeWeight(2),a.line(x,m,$,S)}}}};return De(()=>{i==null||i.remove()}),[o,u,l]}class Ft extends ue{constructor(e){super(),fe(this,e,Nt,Wt,ae,{})}}function Bt(c){let e,t,o;return t=new We({props:{sketch:c[0]}}),{c(){e=_("div"),q(t.$$.fragment),this.h()},l(n){e=w(n,"DIV",{class:!0});var r=O(e);ee(t.$$.fragment,r),r.forEach(g),this.h()},h(){F(e,"class","d-flex justify-content-center")},m(n,r){k(n,e,r),z(t,e,null),o=!0},p:he,i(n){o||(L(t.$$.fragment,n),o=!0)},o(n){G(t.$$.fragment,n),o=!1},d(n){n&&g(e),Q(t)}}}const Ae=6;function Vt(c){console.clear();const e=new Ne({reporter:()=>{},enableGravity:!0});let t;const o=()=>{for(;e.objects.length;)e.objects.pop();t=W({geometry:{type:"sphere",r:5},position:new h(20,50),velocity:new h(Math.random()*5-2.5,Math.random()*20)}),e.addObject(t);const i=W({geometry:{type:"line",vector:new h(100,0)},position:new h(0,2),fixed:!0});e.addObject(i);const l=W({geometry:{type:"line",vector:new h(100,0)},position:new h(0,98),fixed:!0});e.addObject(l);const a=W({geometry:{type:"line",vector:new h(0,100)},position:new h(2,0),fixed:!0});e.addObject(a);const p=W({geometry:{type:"line",vector:new h(0,100)},position:new h(98,0),fixed:!0});e.addObject(p);const d=W({geometry:{type:"line",vector:new h(50,50)},position:new h(20,10),fixed:!0});e.addObject(d)},n=i=>typeof i=="number"?i*Ae:i.clone().multiplyScalar(Ae),r=i=>typeof i=="number"?i/Ae:i.clone().divideScalar(Ae),s=(i,l)=>{for(const a of l.objects){i.stroke(a.data.isColliding?"red":"white");const p=i.map(a.position.x,0,l.dimensions.x,0,i.width),d=i.map(a.position.y,0,l.dimensions.y,i.height,0);if(a.geometry.type==="sphere"){const y=n(a.geometry.r*2);i.strokeWeight(y),i.point(p,d)}if(i.stroke(a.data.isColliding?"orange":"white"),a.geometry.type==="line"){const y=p+i.map(a.geometry.vector.x,0,l.dimensions.x,0,i.width),b=d-i.map(a.geometry.vector.y,0,l.dimensions.y,0,i.height);i.strokeWeight(2),i.line(p,d,y,b)}}};let f;const u=i=>{i.setup=()=>{f=i;const a=n(e.dimensions);i.createCanvas(a.x,a.y),i.background(0),i.fill(255),i.stroke(255),o()},i.draw=()=>{if(i.background(0),i.mouseIsPressed){t.fixed=!0;const a=r(new h(i.mouseX,i.height-i.mouseY));t.position.copy(a)}else t.fixed=!1;e.step(),s(i,e)};let l;i.mousePressed=()=>{l=r(new h(i.mouseX,i.height-i.mouseY))},i.mouseReleased=()=>{const a=r(new h(i.mouseX,i.height-i.mouseY)),p=l.subtract(a);t.position.copy(a),t.velocity.copy(p)}};return De(()=>{f==null||f.remove()}),[u]}class It extends ue{constructor(e){super(),fe(this,e,Vt,Bt,ae,{})}}function Lt(c){let e,t,o,n,r,s,f,u="Gravity",i,l,a,p="Toggle",d,y,b;return t=new We({props:{sketch:c[1]}}),{c(){e=_("div"),q(t.$$.fragment),o=j(),n=_("table"),r=_("tbody"),s=_("tr"),f=_("th"),f.textContent=u,i=j(),l=_("td"),a=_("button"),a.textContent=p,this.h()},l(x){e=w(x,"DIV",{class:!0});var m=O(e);ee(t.$$.fragment,m),m.forEach(g),o=P(x),n=w(x,"TABLE",{});var $=O(n);r=w($,"TBODY",{});var S=O(r);s=w(S,"TR",{});var E=O(s);f=w(E,"TH",{"data-svelte-h":!0}),Y(f)!=="svelte-vy75us"&&(f.textContent=u),i=P(E),l=w(E,"TD",{});var N=O(l);a=w(N,"BUTTON",{"data-svelte-h":!0}),Y(a)!=="svelte-18lc94l"&&(a.textContent=p),N.forEach(g),E.forEach(g),S.forEach(g),$.forEach(g),this.h()},h(){F(e,"class","d-flex justify-content-center")},m(x,m){k(x,e,m),z(t,e,null),k(x,o,m),k(x,n,m),v(n,r),v(r,s),v(s,f),v(s,i),v(s,l),v(l,a),d=!0,y||(b=H(a,"click",c[2]),y=!0)},p:he,i(x){d||(L(t.$$.fragment,x),d=!0)},o(x){G(t.$$.fragment,x),d=!1},d(x){x&&(g(e),g(o),g(n)),Q(t),y=!1,b()}}}const Ge=6;function At(c){console.clear();const e=new Ne({reporter:()=>{},enableGravity:!0});let t;const o=()=>{for(;e.objects.length;)e.objects.pop();const l=W({geometry:{type:"line",vector:new h(100,0)},position:new h(0,0),fixed:!0});e.addObject(l);const a=W({geometry:{type:"line",vector:new h(100,0)},position:new h(0,100),fixed:!0});e.addObject(a);const p=W({geometry:{type:"line",vector:new h(0,100)},position:new h(0,0),fixed:!0});e.addObject(p);const d=W({geometry:{type:"line",vector:new h(0,100)},position:new h(100,0),fixed:!0});e.addObject(d);const y=W({geometry:{type:"line",vector:new h(50,50)},position:new h(20,10),fixed:!0});e.addObject(y),t=W({geometry:{type:"sphere",r:2},position:new h(20,50),velocity:new h(Math.random()*5-2.5,Math.random()*20)}),e.addObject(t)},n=l=>typeof l=="number"?l*Ge:l.clone().multiplyScalar(Ge),r=l=>typeof l=="number"?l/Ge:l.clone().divideScalar(Ge),s=(l,a)=>{for(const p of a.objects){l.stroke(p.data.isColliding?"red":"white");const d=l.map(p.position.x,0,a.dimensions.x,0,l.width),y=l.map(p.position.y,0,a.dimensions.y,l.height,0);if(p.geometry.type==="sphere"){const b=n(p.geometry.r*2);l.strokeWeight(b),l.point(d,y)}if(p.geometry.type==="line"){const b=d+l.map(p.geometry.vector.x,0,a.dimensions.x,0,l.width),x=y-l.map(p.geometry.vector.y,0,a.dimensions.y,0,l.height);l.strokeWeight(2),l.line(d,y,b,x)}}};let f;const u=l=>{l.setup=()=>{f=l;const p=n(e.dimensions);l.createCanvas(p.x,p.y),l.background(0),l.fill(255),l.stroke(255),o()},l.draw=()=>{if(l.background(0),wt(l)){t.fixed=!0;const p=r(new h(l.mouseX,l.height-l.mouseY));t.position.copy(p)}else t.fixed=!1;e.step(),s(l,e)};let a;l.mousePressed=()=>{Ue(l)&&(a=r(new h(l.mouseX,l.height-l.mouseY)))},l.mouseReleased=()=>{if(!Ue(l))return;const p=r(new h(l.mouseX,l.height-l.mouseY)),d=a.subtract(p);t.position.copy(p),t.velocity.copy(d)}};return De(()=>{f==null||f.remove()}),[e,u,()=>e.toggleGravity()]}class Gt extends ue{constructor(e){super(),fe(this,e,At,Lt,ae,{})}}function pt(c){let e,t,o,n,r="dt",s,f,u,i,l,a,p="drag",d,y,b,x,m,$,S="gravity enabled",E,N,B,V,J;return{c(){e=_("table"),t=_("tbody"),o=_("tr"),n=_("th"),n.textContent=r,s=j(),f=_("td"),u=_("input"),i=j(),l=_("tr"),a=_("th"),a.textContent=p,d=j(),y=_("td"),b=_("input"),x=j(),m=_("tr"),$=_("th"),$.textContent=S,E=j(),N=_("td"),B=_("input"),this.h()},l(A){e=w(A,"TABLE",{});var R=O(e);t=w(R,"TBODY",{});var T=O(t);o=w(T,"TR",{});var D=O(o);n=w(D,"TH",{"data-svelte-h":!0}),Y(n)!=="svelte-16dheti"&&(n.textContent=r),s=P(D),f=w(D,"TD",{});var X=O(f);u=w(X,"INPUT",{type:!0,min:!0,max:!0,step:!0}),X.forEach(g),D.forEach(g),i=P(T),l=w(T,"TR",{});var re=O(l);a=w(re,"TH",{"data-svelte-h":!0}),Y(a)!=="svelte-2hq5g"&&(a.textContent=p),d=P(re),y=w(re,"TD",{});var le=O(y);b=w(le,"INPUT",{type:!0,min:!0,max:!0,step:!0}),le.forEach(g),re.forEach(g),x=P(T),m=w(T,"TR",{});var te=O(m);$=w(te,"TH",{"data-svelte-h":!0}),Y($)!=="svelte-ic0r87"&&($.textContent=S),E=P(te),N=w(te,"TD",{});var de=O(N);B=w(de,"INPUT",{type:!0}),de.forEach(g),te.forEach(g),T.forEach(g),R.forEach(g),this.h()},h(){F(u,"type","number"),F(u,"min","0"),F(u,"max","0.5"),F(u,"step","0.001"),F(b,"type","number"),F(b,"min","0"),F(b,"max","0.01"),F(b,"step","0.001"),F(B,"type","checkbox")},m(A,R){k(A,e,R),v(e,t),v(t,o),v(o,n),v(o,s),v(o,f),v(f,u),ce(u,c[0].dt),v(t,i),v(t,l),v(l,a),v(l,d),v(l,y),v(y,b),ce(b,c[0].drag),v(t,x),v(t,m),v(m,$),v(m,E),v(m,N),v(N,B),B.checked=c[0].gravityEnabled,V||(J=[H(u,"input",c[1]),H(b,"input",c[2]),H(B,"change",c[3])],V=!0)},p(A,R){R&1&&we(u.value)!==A[0].dt&&ce(u,A[0].dt),R&1&&we(b.value)!==A[0].drag&&ce(b,A[0].drag),R&1&&(B.checked=A[0].gravityEnabled)},d(A){A&&g(e),V=!1,et(J)}}}function Yt(c){let e,t="Engine settings",o,n,r=c[0]&&pt(c);return{c(){e=_("p"),e.textContent=t,o=j(),r&&r.c(),n=_e(),this.h()},l(s){e=w(s,"P",{class:!0,"data-svelte-h":!0}),Y(e)!=="svelte-gf3gek"&&(e.textContent=t),o=P(s),r&&r.l(s),n=_e(),this.h()},h(){F(e,"class","title svelte-g74uk9")},m(s,f){k(s,e,f),k(s,o,f),r&&r.m(s,f),k(s,n,f)},p(s,[f]){s[0]?r?r.p(s,f):(r=pt(s),r.c(),r.m(n.parentNode,n)):r&&(r.d(1),r=null)},i:he,o:he,d(s){s&&(g(e),g(o),g(n)),r&&r.d(s)}}}function Rt(c,e,t){let{world:o}=e;function n(){o.dt=we(this.value),t(0,o)}function r(){o.drag=we(this.value),t(0,o)}function s(){o.gravityEnabled=this.checked,t(0,o)}return c.$$set=f=>{"world"in f&&t(0,o=f.world)},[o,n,r,s]}class Ut extends ue{constructor(e){super(),fe(this,e,Rt,Yt,ae,{world:0})}}function Mt(c){let e,t="Shooter",o,n,r,s="Angle",f,u,i,l,a,p,d,y,b="Magnitude",x,m,$,S,E,N,B,V,J="Shoot",A,R;return{c(){e=_("p"),e.textContent=t,o=j(),n=_("span"),r=_("label"),r.textContent=s,f=j(),u=_("input"),i=j(),l=U(c[0]),a=U(" deg"),p=j(),d=_("span"),y=_("label"),y.textContent=b,x=j(),m=_("input"),$=j(),S=U(c[1]),E=j(),N=_("br"),B=j(),V=_("button"),V.textContent=J,this.h()},l(T){e=w(T,"P",{class:!0,"data-svelte-h":!0}),Y(e)!=="svelte-198ugk3"&&(e.textContent=t),o=P(T),n=w(T,"SPAN",{});var D=O(n);r=w(D,"LABEL",{for:!0,"data-svelte-h":!0}),Y(r)!=="svelte-lab87n"&&(r.textContent=s),f=P(D),u=w(D,"INPUT",{id:!0,type:!0,min:!0,max:!0}),i=P(D),l=M(D,c[0]),a=M(D," deg"),D.forEach(g),p=P(T),d=w(T,"SPAN",{});var X=O(d);y=w(X,"LABEL",{for:!0,"data-svelte-h":!0}),Y(y)!=="svelte-1vc5oxa"&&(y.textContent=b),x=P(X),m=w(X,"INPUT",{id:!0,type:!0,min:!0,max:!0,step:!0}),$=P(X),S=M(X,c[1]),X.forEach(g),E=P(T),N=w(T,"BR",{}),B=P(T),V=w(T,"BUTTON",{"data-svelte-h":!0}),Y(V)!=="svelte-8jpwxr"&&(V.textContent=J),this.h()},h(){F(e,"class","title svelte-g74uk9"),F(r,"for","angleSlider"),F(u,"id","angleSlider"),F(u,"type","range"),F(u,"min","0"),F(u,"max","360"),F(y,"for","magSlider"),F(m,"id","magSlider"),F(m,"type","range"),F(m,"min","0"),F(m,"max","1"),F(m,"step","0.01")},m(T,D){k(T,e,D),k(T,o,D),k(T,n,D),v(n,r),v(n,f),v(n,u),ce(u,c[0]),v(n,i),v(n,l),v(n,a),k(T,p,D),k(T,d,D),v(d,y),v(d,x),v(d,m),ce(m,c[1]),v(d,$),v(d,S),k(T,E,D),k(T,N,D),k(T,B,D),k(T,V,D),A||(R=[H(u,"change",c[4]),H(u,"input",c[4]),H(m,"change",c[5]),H(m,"input",c[5]),H(V,"click",c[6])],A=!0)},p(T,[D]){D&1&&ce(u,T[0]),D&1&&Z(l,T[0]),D&2&&ce(m,T[1]),D&2&&Z(S,T[1])},i:he,o:he,d(T){T&&(g(e),g(o),g(n),g(p),g(d),g(E),g(N),g(B),g(V)),A=!1,et(R)}}}function Xt(c,e,t){let{onShoot:o}=e,n=0,r=.5;const s=()=>{const l=new h(1,0);l.rotateDeg(n),l.multiplyScalar(r),o(l)};function f(){n=we(this.value),t(0,n)}function u(){r=we(this.value),t(1,r)}const i=()=>s();return c.$$set=l=>{"onShoot"in l&&t(3,o=l.onShoot)},[n,r,s,o,f,u,i]}class Ht extends ue{constructor(e){super(),fe(this,e,Xt,Mt,ae,{onShoot:3})}}const qt=()=>{const c=[],e=W({geometry:{type:"line",vector:new h(15,0)},position:new h(0,0),fixed:!0});c.push(e);const t=W({geometry:{type:"line",vector:new h(0,100)},position:new h(0,0),fixed:!0});c.push(t);const o=W({geometry:{type:"line",vector:new h(0,100)},position:new h(15,0),fixed:!0});c.push(o);const n=W({geometry:{type:"line",vector:new h(3,-3)},position:new h(3.5,8),fixed:!0});c.push(n);const r=W({geometry:{type:"line",vector:new h(3,3)},position:new h(3.5,5),fixed:!0});c.push(r);const s=W({geometry:{type:"line",vector:new h(6,0)},position:new h(2,2),fixed:!0});c.push(s);const f=W({geometry:{type:"line",vector:new h(4,0)},position:new h(3,2.5),fixed:!0});c.push(f);const u=W({geometry:{type:"line",vector:new h(2,0)},position:new h(4,3),fixed:!0});c.push(u);const i=W({geometry:{type:"line",vector:new h(.6,0)},position:new h(4.7,3.5),fixed:!0});c.push(i);const l=W({geometry:{type:"line",vector:new h(1,0)},position:new h(10,10),fixed:!0});c.push(l);const a=W({geometry:{type:"line",vector:new h(0,-4)},position:new h(11,10),fixed:!0});c.push(a);const p=W({geometry:{type:"line",vector:new h(0,-4)},position:new h(11.5,10),fixed:!0});c.push(p);const d=W({geometry:{type:"line",vector:new h(0,-4)},position:new h(12,10),fixed:!0});c.push(d);const y=W({geometry:{type:"line",vector:new h(1,0)},position:new h(12,10),fixed:!0});c.push(y);for(let x=.2;x<.5;x+=.1)for(let m=0;m<10;m++){const $=W({geometry:{type:"line",vector:new h(0,3)},position:new h(9+m*x,1),fixed:!0});c.push($)}const b=W({geometry:{type:"sphere",r:.1},position:new h(5,10),velocity:new h(0,0)});return c.push(b),{objects:c,sphere:b}};function zt(c){let e,t,o,n,r,s=c[0]?"Disable":"Enable",f,u,i,l,a=c[1]?"Play":"Pause",p,d,y,b="Reset",x,m,$,S,E,N,B,V,J,A="Simulation time/Frame duration",R,T,D=c[2].t+"",X,re,le,te=c[2].frameTime+"",de,Me,oe,pe,nt="Sphere position",Xe,$e,xe=c[2].spherePos.x.toFixed(2)+"",Fe,He,Ce,Te=c[2].spherePos.y.toFixed(2)+"",Be,qe,se,ye,st="Sphere velocity",ze,ke,Se=c[2].sphereVel.x.toFixed(2)+"",Ve,Qe,Ee,je=c[2].sphereVel.y.toFixed(2)+"",Ie,K,Je,it;return t=new We({props:{sketch:c[5]}}),m=new Ht({props:{onShoot:c[6]}}),S=new Ut({props:{world:c[3]}}),{c(){e=_("div"),q(t.$$.fragment),o=j(),n=_("div"),r=_("button"),f=U(s),u=U(" pause on collision"),i=j(),l=_("button"),p=U(a),d=j(),y=_("button"),y.textContent=b,x=j(),q(m.$$.fragment),$=j(),q(S.$$.fragment),E=j(),N=_("table"),B=_("tbody"),V=_("tr"),J=_("th"),J.textContent=A,R=j(),T=_("td"),X=U(D),re=j(),le=_("td"),de=U(te),Me=j(),oe=_("tr"),pe=_("th"),pe.textContent=nt,Xe=j(),$e=_("td"),Fe=U(xe),He=j(),Ce=_("td"),Be=U(Te),qe=j(),se=_("tr"),ye=_("th"),ye.textContent=st,ze=j(),ke=_("td"),Ve=U(Se),Qe=j(),Ee=_("td"),Ie=U(je),this.h()},l(C){e=w(C,"DIV",{class:!0});var I=O(e);ee(t.$$.fragment,I),I.forEach(g),o=P(C),n=w(C,"DIV",{});var ie=O(n);r=w(ie,"BUTTON",{});var Ke=O(r);f=M(Ke,s),u=M(Ke," pause on collision"),Ke.forEach(g),i=P(ie),l=w(ie,"BUTTON",{});var rt=O(l);p=M(rt,a),rt.forEach(g),d=P(ie),y=w(ie,"BUTTON",{"data-svelte-h":!0}),Y(y)!=="svelte-tlxueg"&&(y.textContent=b),ie.forEach(g),x=P(C),ee(m.$$.fragment,C),$=P(C),ee(S.$$.fragment,C),E=P(C),N=w(C,"TABLE",{});var lt=O(N);B=w(lt,"TBODY",{});var Pe=O(B);V=w(Pe,"TR",{});var ge=O(V);J=w(ge,"TH",{"data-svelte-h":!0}),Y(J)!=="svelte-rirgm4"&&(J.textContent=A),R=P(ge),T=w(ge,"TD",{});var ct=O(T);X=M(ct,D),ct.forEach(g),re=P(ge),le=w(ge,"TD",{});var at=O(le);de=M(at,te),at.forEach(g),ge.forEach(g),Me=P(Pe),oe=w(Pe,"TR",{});var me=O(oe);pe=w(me,"TH",{"data-svelte-h":!0}),Y(pe)!=="svelte-1y1nif6"&&(pe.textContent=nt),Xe=P(me),$e=w(me,"TD",{});var ut=O($e);Fe=M(ut,xe),ut.forEach(g),He=P(me),Ce=w(me,"TD",{});var ft=O(Ce);Be=M(ft,Te),ft.forEach(g),qe=P(me),me.forEach(g),se=w(Pe,"TR",{});var ve=O(se);ye=w(ve,"TH",{"data-svelte-h":!0}),Y(ye)!=="svelte-1uw1fs2"&&(ye.textContent=st),ze=P(ve),ke=w(ve,"TD",{});var dt=O(ke);Ve=M(dt,Se),dt.forEach(g),Qe=P(ve),Ee=w(ve,"TD",{});var mt=O(Ee);Ie=M(mt,je),mt.forEach(g),ve.forEach(g),Pe.forEach(g),lt.forEach(g),this.h()},h(){F(e,"class","d-flex justify-content-center")},m(C,I){k(C,e,I),z(t,e,null),k(C,o,I),k(C,n,I),v(n,r),v(r,f),v(r,u),v(n,i),v(n,l),v(l,p),v(n,d),v(n,y),k(C,x,I),z(m,C,I),k(C,$,I),z(S,C,I),k(C,E,I),k(C,N,I),v(N,B),v(B,V),v(V,J),v(V,R),v(V,T),v(T,X),v(V,re),v(V,le),v(le,de),v(B,Me),v(B,oe),v(oe,pe),v(oe,Xe),v(oe,$e),v($e,Fe),v(oe,He),v(oe,Ce),v(Ce,Be),v(oe,qe),v(B,se),v(se,ye),v(se,ze),v(se,ke),v(ke,Ve),v(se,Qe),v(se,Ee),v(Ee,Ie),K=!0,Je||(it=[H(r,"click",c[7]),H(l,"click",c[8]),H(y,"click",c[4])],Je=!0)},p(C,[I]){(!K||I&1)&&s!==(s=C[0]?"Disable":"Enable")&&Z(f,s),(!K||I&2)&&a!==(a=C[1]?"Play":"Pause")&&Z(p,a);const ie={};I&8&&(ie.world=C[3]),S.$set(ie),(!K||I&4)&&D!==(D=C[2].t+"")&&Z(X,D),(!K||I&4)&&te!==(te=C[2].frameTime+"")&&Z(de,te),(!K||I&4)&&xe!==(xe=C[2].spherePos.x.toFixed(2)+"")&&Z(Fe,xe),(!K||I&4)&&Te!==(Te=C[2].spherePos.y.toFixed(2)+"")&&Z(Be,Te),(!K||I&4)&&Se!==(Se=C[2].sphereVel.x.toFixed(2)+"")&&Z(Ve,Se),(!K||I&4)&&je!==(je=C[2].sphereVel.y.toFixed(2)+"")&&Z(Ie,je)},i(C){K||(L(t.$$.fragment,C),L(m.$$.fragment,C),L(S.$$.fragment,C),K=!0)},o(C){G(t.$$.fragment,C),G(m.$$.fragment,C),G(S.$$.fragment,C),K=!1},d(C){C&&(g(e),g(o),g(n),g(x),g($),g(E),g(N)),Q(t),Q(m,C),Q(S,C),Je=!1,et(it)}}}const Ye=60;function Qt(c,e,t){console.clear();let o=!1,n=!1,r={t:"0",frameTime:"0",spherePos:new h(0,0),sphereVel:new h(0,0),ballIsColliding:!1},s,f;const u=()=>{t(3,s=new Ne({dimensions:new h(15,15),reporter:$=>{var S;t(2,r.t=(S=$==null?void 0:$.t)==null?void 0:S.toFixed(1),r),r.spherePos.copy(f.position).unfloat(),r.sphereVel.copy(f.velocity).unfloat(),t(2,r.frameTime=$.frameTime.toFixed(2),r),t(2,r),t(2,r.ballIsColliding=f.data.isColliding,r),o&&f.data.isColliding&&!n&&t(1,n=!0)},enableGravity:!0}));const m=qt();f=m.sphere;for(const $ of m.objects)s.addObject($)},i=m=>typeof m=="number"?m*Ye:m.clone().multiplyScalar(Ye),l=m=>typeof m=="number"?m/Ye:m.clone().divideScalar(Ye),a=(m,$)=>{for(const S of $.objects){m.stroke(S.data.isColliding?"red":"white");const E=m.map(S.position.x,0,$.dimensions.x,0,m.width),N=m.map(S.position.y,0,$.dimensions.y,m.height,0);if(S.geometry.type==="sphere"){const B=i(S.geometry.r*2);m.strokeWeight(B),m.point(E,N)}if(S.geometry.type==="line"){const B=E+m.map(S.geometry.vector.x,0,$.dimensions.x,0,m.width),V=N-m.map(S.geometry.vector.y,0,$.dimensions.y,0,m.height);m.strokeWeight(2),m.line(E,N,B,V)}}};let p;const d=m=>{m.setup=()=>{p=m,u();const E=i(s.dimensions);m.createCanvas(E.x,E.y),m.background(0),m.fill(255),m.stroke(255),u()},m.draw=()=>{m.background(0),wt(m)?f.fixed=!0:f.fixed=!1,n||s.step(),a(m,s),S(m)};let $;m.mousePressed=()=>{Ue(m)&&($=l(new h(m.mouseX,m.height-m.mouseY)),f.position.copy($))},m.mouseReleased=()=>{if(!Ue(m)||!$)return;const E=l(new h(m.mouseX,m.height-m.mouseY)),N=$.subtract(E).multiplyScalar(3);$=void 0,f.velocity.copy(N)};const S=E=>{if(!$)return;E.stroke("blue"),E.strokeWeight(2);const N=i($);E.line(N.x,E.height-N.y,E.mouseX,E.mouseY)}},y=m=>{m.multiplyScalar(1e4),s.applyForce(f,m)};return De(()=>{p==null||p.remove()}),[o,n,r,s,u,d,y,()=>t(0,o=!o),()=>t(1,n=!n)]}class Jt extends ue{constructor(e){super(),fe(this,e,Qt,zt,ae,{})}}function yt(c,e,t){const o=c.slice();return o[1]=e[t],o}function gt(c,e,t){const o=c.slice();return o[1]=e[t],o}function Kt(c){let e=c[1].title+"",t;return{c(){t=U(e)},l(o){t=M(o,e)},m(o,n){k(o,t,n)},p:he,d(o){o&&g(t)}}}function vt(c){let e,t;return e=new St({props:{$$slots:{default:[Kt]},$$scope:{ctx:c}}}),{c(){q(e.$$.fragment)},l(o){ee(e.$$.fragment,o)},m(o,n){z(e,o,n),t=!0},p(o,n){const r={};n&64&&(r.$$scope={dirty:n,ctx:o}),e.$set(r)},i(o){t||(L(e.$$.fragment,o),t=!0)},o(o){G(e.$$.fragment,o),t=!1},d(o){Q(e,o)}}}function Zt(c){let e,t,o=Re(c[0]),n=[];for(let s=0;s<o.length;s+=1)n[s]=vt(gt(c,o,s));const r=s=>G(n[s],1,1,()=>{n[s]=null});return{c(){for(let s=0;s<n.length;s+=1)n[s].c();e=_e()},l(s){for(let f=0;f<n.length;f+=1)n[f].l(s);e=_e()},m(s,f){for(let u=0;u<n.length;u+=1)n[u]&&n[u].m(s,f);k(s,e,f),t=!0},p(s,f){if(f&1){o=Re(s[0]);let u;for(u=0;u<o.length;u+=1){const i=gt(s,o,u);n[u]?(n[u].p(i,f),L(n[u],1)):(n[u]=vt(i),n[u].c(),L(n[u],1),n[u].m(e.parentNode,e))}for(tt(),u=o.length;u<n.length;u+=1)r(u);ot()}},i(s){if(!t){for(let f=0;f<o.length;f+=1)L(n[f]);t=!0}},o(s){n=n.filter(Boolean);for(let f=0;f<n.length;f+=1)G(n[f]);t=!1},d(s){s&&g(e),_t(n,s)}}}function eo(c){let e,t,o;var n=c[1].component;function r(s,f){return{}}return n&&(e=ht(n,r())),{c(){e&&q(e.$$.fragment),t=j()},l(s){e&&ee(e.$$.fragment,s),t=P(s)},m(s,f){e&&z(e,s,f),k(s,t,f),o=!0},p(s,f){if(n!==(n=s[1].component)){if(e){tt();const u=e;G(u.$$.fragment,1,0,()=>{Q(u,1)}),ot()}n?(e=ht(n,r()),q(e.$$.fragment),L(e.$$.fragment,1),z(e,t.parentNode,t)):e=null}},i(s){o||(e&&L(e.$$.fragment,s),o=!0)},o(s){e&&G(e.$$.fragment,s),o=!1},d(s){s&&g(t),e&&Q(e,s)}}}function bt(c){let e,t;return e=new kt({props:{$$slots:{default:[eo]},$$scope:{ctx:c}}}),{c(){q(e.$$.fragment)},l(o){ee(e.$$.fragment,o)},m(o,n){z(e,o,n),t=!0},p(o,n){const r={};n&64&&(r.$$scope={dirty:n,ctx:o}),e.$set(r)},i(o){t||(L(e.$$.fragment,o),t=!0)},o(o){G(e.$$.fragment,o),t=!1},d(o){Q(e,o)}}}function to(c){let e,t,o,n;e=new Tt({props:{$$slots:{default:[Zt]},$$scope:{ctx:c}}});let r=Re(c[0]),s=[];for(let u=0;u<r.length;u+=1)s[u]=bt(yt(c,r,u));const f=u=>G(s[u],1,1,()=>{s[u]=null});return{c(){q(e.$$.fragment),t=j();for(let u=0;u<s.length;u+=1)s[u].c();o=_e()},l(u){ee(e.$$.fragment,u),t=P(u);for(let i=0;i<s.length;i+=1)s[i].l(u);o=_e()},m(u,i){z(e,u,i),k(u,t,i);for(let l=0;l<s.length;l+=1)s[l]&&s[l].m(u,i);k(u,o,i),n=!0},p(u,i){const l={};if(i&64&&(l.$$scope={dirty:i,ctx:u}),e.$set(l),i&1){r=Re(u[0]);let a;for(a=0;a<r.length;a+=1){const p=yt(u,r,a);s[a]?(s[a].p(p,i),L(s[a],1)):(s[a]=bt(p),s[a].c(),L(s[a],1),s[a].m(o.parentNode,o))}for(tt(),a=r.length;a<s.length;a+=1)f(a);ot()}},i(u){if(!n){L(e.$$.fragment,u);for(let i=0;i<r.length;i+=1)L(s[i]);n=!0}},o(u){G(e.$$.fragment,u),s=s.filter(Boolean);for(let i=0;i<s.length;i+=1)G(s[i]);n=!1},d(u){u&&(g(t),g(o)),Q(e,u),_t(s,u)}}}function oo(c){let e,t;return e=new Ct({props:{$$slots:{default:[to]},$$scope:{ctx:c}}}),{c(){q(e.$$.fragment)},l(o){ee(e.$$.fragment,o)},m(o,n){z(e,o,n),t=!0},p(o,[n]){const r={};n&64&&(r.$$scope={dirty:n,ctx:o}),e.$set(r)},i(o){t||(L(e.$$.fragment,o),t=!0)},o(o){G(e.$$.fragment,o),t=!1},d(o){Q(e,o)}}}function no(c){return[[{title:"Obstacles",component:Jt},{title:"Test collisions 3",component:Gt},{title:"Test collisions 2",component:It},{title:"Test collisions",component:Ft},{title:"Test engine",component:Dt}]]}class ao extends ue{constructor(e){super(),fe(this,e,no,oo,ae,{})}}export{ao as component};
