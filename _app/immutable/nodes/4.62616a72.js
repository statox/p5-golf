import{s as de,f as w,g as $,h as T,d as h,j as L,i as C,z as _e,M as ke,a as E,e as ht,u as G,c as j,y as p,P as ve,L as H,Q as xe,O as Ye,l as J,m as K,n as ne}from"../chunks/scheduler.32ebed32.js";import{S as he,i as me,b as oe,d as se,m as re,a as le,t as ie,e as ce}from"../chunks/index.c25c2528.js";import{P as Te,V as a,w as ue,d as Le,c as k,m as Re,a as Ve,s as yt,C as gt}from"../chunks/PhysicObject.edd17eee.js";import{W as Pe,L as bt,S as wt}from"../chunks/World.4e963e81.js";function $t(l){let e,n,r;return n=new Te({props:{sketch:l[0]}}),{c(){e=w("div"),oe(n.$$.fragment),this.h()},l(s){e=$(s,"DIV",{class:!0});var o=T(e);se(n.$$.fragment,o),o.forEach(h),this.h()},h(){L(e,"class","d-flex justify-content-center")},m(s,o){C(s,e,o),re(n,e,null),r=!0},p:_e,i(s){r||(le(n.$$.fragment,s),r=!0)},o(s){ie(n.$$.fragment,s),r=!1},d(s){s&&h(e),ce(n)}}}const _t=6;function xt(l){console.clear();let e;const n=o=>{const t={...k({geometry:{type:"sphere",r:1},position:new a(o.dimensions.x/2,10),velocity:new a(Math.random()*30-15,30+Math.random()*20)}),age:0};o.addObject(t)};let r;const s=o=>{const t=new a(100,100),m=ue(t,_t);o.setup=()=>{e=o,o.createCanvas(m.x,m.y),o.noFill(),r=new Pe({dimensions:t,enableGravity:!0,enableCollisions:!1}),n(r)},o.draw=()=>{o.background(0),o.frameCount%1===0&&r.objects.length<300&&n(r),r.step(),r.objects.forEach(u=>{u.data.age>800&&r.removeObject(u)}),console.log("nb objects",r.objects.length),Le(o,r)}};return ke(()=>{e==null||e.remove()}),[s]}let kt=class extends he{constructor(e){super(),me(this,e,xt,$t,de,{})}};function mt(l){let e,n,r,s,o="dt",t,m,u,c,y,d,_="drag",g,b,v,f,i,x,S="gravity enabled",O,F,M,A,Q;return{c(){e=w("table"),n=w("tbody"),r=w("tr"),s=w("th"),s.textContent=o,t=E(),m=w("td"),u=w("input"),c=E(),y=w("tr"),d=w("th"),d.textContent=_,g=E(),b=w("td"),v=w("input"),f=E(),i=w("tr"),x=w("th"),x.textContent=S,O=E(),F=w("td"),M=w("input"),this.h()},l(W){e=$(W,"TABLE",{});var N=T(e);n=$(N,"TBODY",{});var D=T(n);r=$(D,"TR",{});var B=T(r);s=$(B,"TH",{"data-svelte-h":!0}),G(s)!=="svelte-16dheti"&&(s.textContent=o),t=j(B),m=$(B,"TD",{});var U=T(m);u=$(U,"INPUT",{type:!0,min:!0,max:!0,step:!0}),U.forEach(h),B.forEach(h),c=j(D),y=$(D,"TR",{});var ee=T(y);d=$(ee,"TH",{"data-svelte-h":!0}),G(d)!=="svelte-2hq5g"&&(d.textContent=_),g=j(ee),b=$(ee,"TD",{});var te=T(b);v=$(te,"INPUT",{type:!0,min:!0,max:!0,step:!0}),te.forEach(h),ee.forEach(h),f=j(D),i=$(D,"TR",{});var R=T(i);x=$(R,"TH",{"data-svelte-h":!0}),G(x)!=="svelte-ic0r87"&&(x.textContent=S),O=j(R),F=$(R,"TD",{});var q=T(F);M=$(q,"INPUT",{type:!0}),q.forEach(h),R.forEach(h),D.forEach(h),N.forEach(h),this.h()},h(){L(u,"type","number"),L(u,"min","0"),L(u,"max","0.5"),L(u,"step","0.001"),L(v,"type","number"),L(v,"min","0"),L(v,"max","0.01"),L(v,"step","0.001"),L(M,"type","checkbox")},m(W,N){C(W,e,N),p(e,n),p(n,r),p(r,s),p(r,t),p(r,m),p(m,u),ve(u,l[0].dt),p(n,c),p(n,y),p(y,d),p(y,g),p(y,b),p(b,v),ve(v,l[0].drag),p(n,f),p(n,i),p(i,x),p(i,O),p(i,F),p(F,M),M.checked=l[0].gravityEnabled,A||(Q=[H(u,"input",l[1]),H(v,"input",l[2]),H(M,"change",l[3])],A=!0)},p(W,N){N&1&&xe(u.value)!==W[0].dt&&ve(u,W[0].dt),N&1&&xe(v.value)!==W[0].drag&&ve(v,W[0].drag),N&1&&(M.checked=W[0].gravityEnabled)},d(W){W&&h(e),A=!1,Ye(Q)}}}function Tt(l){let e,n="Engine settings",r,s,o=l[0]&&mt(l);return{c(){e=w("p"),e.textContent=n,r=E(),o&&o.c(),s=ht(),this.h()},l(t){e=$(t,"P",{class:!0,"data-svelte-h":!0}),G(e)!=="svelte-gf3gek"&&(e.textContent=n),r=j(t),o&&o.l(t),s=ht(),this.h()},h(){L(e,"class","title svelte-g74uk9")},m(t,m){C(t,e,m),C(t,r,m),o&&o.m(t,m),C(t,s,m)},p(t,[m]){t[0]?o?o.p(t,m):(o=mt(t),o.c(),o.m(s.parentNode,s)):o&&(o.d(1),o=null)},i:_e,o:_e,d(t){t&&(h(e),h(r),h(s)),o&&o.d(t)}}}function Ct(l,e,n){let{world:r}=e;function s(){r.dt=xe(this.value),n(0,r)}function o(){r.drag=xe(this.value),n(0,r)}function t(){r.gravityEnabled=this.checked,n(0,r)}return l.$$set=m=>{"world"in m&&n(0,r=m.world)},[r,s,o,t]}class nt extends he{constructor(e){super(),me(this,e,Ct,Tt,de,{world:0})}}function St(l){let e,n="Shooter",r,s,o,t="Angle",m,u,c,y,d,_,g,b,v="Magnitude",f,i,x,S,O,F,M,A,Q="Shoot",W,N;return{c(){e=w("p"),e.textContent=n,r=E(),s=w("span"),o=w("label"),o.textContent=t,m=E(),u=w("input"),c=E(),y=J(l[0]),d=J(" deg"),_=E(),g=w("span"),b=w("label"),b.textContent=v,f=E(),i=w("input"),x=E(),S=J(l[1]),O=E(),F=w("br"),M=E(),A=w("button"),A.textContent=Q,this.h()},l(D){e=$(D,"P",{class:!0,"data-svelte-h":!0}),G(e)!=="svelte-198ugk3"&&(e.textContent=n),r=j(D),s=$(D,"SPAN",{});var B=T(s);o=$(B,"LABEL",{for:!0,"data-svelte-h":!0}),G(o)!=="svelte-lab87n"&&(o.textContent=t),m=j(B),u=$(B,"INPUT",{id:!0,type:!0,min:!0,max:!0}),c=j(B),y=K(B,l[0]),d=K(B," deg"),B.forEach(h),_=j(D),g=$(D,"SPAN",{});var U=T(g);b=$(U,"LABEL",{for:!0,"data-svelte-h":!0}),G(b)!=="svelte-1vc5oxa"&&(b.textContent=v),f=j(U),i=$(U,"INPUT",{id:!0,type:!0,min:!0,max:!0,step:!0}),x=j(U),S=K(U,l[1]),U.forEach(h),O=j(D),F=$(D,"BR",{}),M=j(D),A=$(D,"BUTTON",{"data-svelte-h":!0}),G(A)!=="svelte-8jpwxr"&&(A.textContent=Q),this.h()},h(){L(e,"class","title svelte-g74uk9"),L(o,"for","angleSlider"),L(u,"id","angleSlider"),L(u,"type","range"),L(u,"min","0"),L(u,"max","360"),L(b,"for","magSlider"),L(i,"id","magSlider"),L(i,"type","range"),L(i,"min","0"),L(i,"max","1"),L(i,"step","0.01")},m(D,B){C(D,e,B),C(D,r,B),C(D,s,B),p(s,o),p(s,m),p(s,u),ve(u,l[0]),p(s,c),p(s,y),p(s,d),C(D,_,B),C(D,g,B),p(g,b),p(g,f),p(g,i),ve(i,l[1]),p(g,x),p(g,S),C(D,O,B),C(D,F,B),C(D,M,B),C(D,A,B),W||(N=[H(u,"change",l[4]),H(u,"input",l[4]),H(i,"change",l[5]),H(i,"input",l[5]),H(A,"click",l[6])],W=!0)},p(D,[B]){B&1&&ve(u,D[0]),B&1&&ne(y,D[0]),B&2&&ve(i,D[1]),B&2&&ne(S,D[1])},i:_e,o:_e,d(D){D&&(h(e),h(r),h(s),h(_),h(g),h(O),h(F),h(M),h(A)),W=!1,Ye(N)}}}function Et(l,e,n){let{onShoot:r}=e,s=0,o=.5;const t=()=>{const y=new a(1,0);y.rotateDeg(s),y.multiplyScalar(o),r(y)};function m(){s=xe(this.value),n(0,s)}function u(){o=xe(this.value),n(1,o)}const c=()=>t();return l.$$set=y=>{"onShoot"in y&&n(3,r=y.onShoot)},[s,o,t,r,m,u,c]}class vt extends he{constructor(e){super(),me(this,e,Et,St,de,{onShoot:3})}}const jt=l=>{const e=[],n=k({geometry:{type:"line",vector:new a(15,0)},position:new a(0,15),fixed:!0});e.push(n);const r=k({geometry:{type:"line",vector:new a(15,0)},position:new a(0,0),fixed:!0});e.push(r);const s=k({geometry:{type:"line",vector:new a(0,100)},position:new a(0,0),fixed:!0});e.push(s);const o=k({geometry:{type:"line",vector:new a(0,100)},position:new a(15,0),fixed:!0});e.push(o);let t;for(let m=0;m<l.nbBalls;m++){const u=k({geometry:{type:"sphere",r:l.rBalls},position:new a(Math.random()*15,Math.random()*15),velocity:new a(Math.random()*15,Math.random()*15)});e.push(u),t||(t=u)}return{objects:e,sphere:t}};function Pt(l){let e,n,r,s,o,t=l[0]?"Play":"Pause",m,u,c,y="Reset",d,_,g="Add ball",b,v,f,i,x,S,O,F,M,A="Number of balls",Q,W,N,D,B,U,ee="Balls radius",te,R,q,pe,I,Y;return n=new Te({props:{sketch:l[5]}}),v=new vt({props:{onShoot:l[6]}}),i=new nt({props:{world:l[2]}}),{c(){e=w("div"),oe(n.$$.fragment),r=E(),s=w("div"),o=w("button"),m=J(t),u=E(),c=w("button"),c.textContent=y,d=E(),_=w("button"),_.textContent=g,b=E(),oe(v.$$.fragment),f=E(),oe(i.$$.fragment),x=E(),S=w("table"),O=w("tbody"),F=w("tr"),M=w("th"),M.textContent=A,Q=E(),W=w("td"),N=w("input"),D=E(),B=w("tr"),U=w("th"),U.textContent=ee,te=E(),R=w("td"),q=w("input"),this.h()},l(P){e=$(P,"DIV",{class:!0});var X=T(e);se(n.$$.fragment,X),X.forEach(h),r=j(P),s=$(P,"DIV",{});var Z=T(s);o=$(Z,"BUTTON",{});var ge=T(o);m=K(ge,t),ge.forEach(h),u=j(Z),c=$(Z,"BUTTON",{"data-svelte-h":!0}),G(c)!=="svelte-tlxueg"&&(c.textContent=y),d=j(Z),_=$(Z,"BUTTON",{"data-svelte-h":!0}),G(_)!=="svelte-1xau3n8"&&(_.textContent=g),Z.forEach(h),b=j(P),se(v.$$.fragment,P),f=j(P),se(i.$$.fragment,P),x=j(P),S=$(P,"TABLE",{});var we=T(S);O=$(we,"TBODY",{});var ae=T(O);F=$(ae,"TR",{});var fe=T(F);M=$(fe,"TH",{"data-svelte-h":!0}),G(M)!=="svelte-eg4byi"&&(M.textContent=A),Q=j(fe),W=$(fe,"TD",{});var be=T(W);N=$(be,"INPUT",{type:!0,min:!0}),be.forEach(h),fe.forEach(h),D=j(ae),B=$(ae,"TR",{});var Ce=T(B);U=$(Ce,"TH",{"data-svelte-h":!0}),G(U)!=="svelte-10gtk36"&&(U.textContent=ee),te=j(Ce),R=$(Ce,"TD",{});var De=T(R);q=$(De,"INPUT",{type:!0,min:!0}),De.forEach(h),Ce.forEach(h),ae.forEach(h),we.forEach(h),this.h()},h(){L(e,"class","d-flex justify-content-center"),L(N,"type","number"),L(N,"min","1"),L(q,"type","number"),L(q,"min","1")},m(P,X){C(P,e,X),re(n,e,null),C(P,r,X),C(P,s,X),p(s,o),p(o,m),p(s,u),p(s,c),p(s,d),p(s,_),C(P,b,X),re(v,P,X),C(P,f,X),re(i,P,X),C(P,x,X),C(P,S,X),p(S,O),p(O,F),p(F,M),p(F,Q),p(F,W),p(W,N),ve(N,l[1].nbBalls),p(O,D),p(O,B),p(B,U),p(B,te),p(B,R),p(R,q),ve(q,l[1].rBalls),pe=!0,I||(Y=[H(o,"click",l[7]),H(c,"click",l[3]),H(_,"click",l[4]),H(N,"change",l[3]),H(N,"input",l[8]),H(q,"change",l[3]),H(q,"input",l[9])],I=!0)},p(P,[X]){(!pe||X&1)&&t!==(t=P[0]?"Play":"Pause")&&ne(m,t);const Z={};X&4&&(Z.world=P[2]),i.$set(Z),X&2&&xe(N.value)!==P[1].nbBalls&&ve(N,P[1].nbBalls),X&2&&xe(q.value)!==P[1].rBalls&&ve(q,P[1].rBalls)},i(P){pe||(le(n.$$.fragment,P),le(v.$$.fragment,P),le(i.$$.fragment,P),pe=!0)},o(P){ie(n.$$.fragment,P),ie(v.$$.fragment,P),ie(i.$$.fragment,P),pe=!1},d(P){P&&(h(e),h(r),h(s),h(b),h(f),h(x),h(S)),ce(n),ce(v,P),ce(i,P),I=!1,Ye(Y)}}}const Ge=60;function Ot(l,e,n){console.clear();let r=!1,s={nbBalls:5,rBalls:.2},o,t;const m=()=>{const i=(o==null?void 0:o.gravityEnabled)??!0;n(2,o=new Pe({dimensions:new a(15,15),reporter:()=>{},enableGravity:i}));const x=jt(s);t=x.sphere;for(const S of x.objects)o.addObject(S)},u=()=>{const i=k({geometry:{type:"sphere",r:s.rBalls},position:new a(7,7),velocity:new a(0,0)});o.addObject(i)},c=i=>typeof i=="number"?i*Ge:i.clone().multiplyScalar(Ge),y=i=>typeof i=="number"?i/Ge:i.clone().divideScalar(Ge);let d;const _=i=>{i.setup=()=>{d=i,m();const O=c(o.dimensions);i.createCanvas(O.x,O.y),i.background(0),i.fill(255),i.stroke(255),m()},i.draw=()=>{i.background(0),Re(i)?t.fixed=!0:t.fixed=!1,r||o.step(),Le(i,o),S(i)};let x;i.mousePressed=()=>{Ve(i)&&(x=y(new a(i.mouseX,i.height-i.mouseY)),t.position.copy(x))},i.mouseReleased=()=>{if(!Ve(i)||!x)return;const O=y(new a(i.mouseX,i.height-i.mouseY)),F=x.subtract(O).multiplyScalar(3);x=void 0,t.velocity.copy(F)};const S=O=>{if(!x)return;O.stroke("blue"),O.strokeWeight(2);const F=c(x);O.line(F.x,O.height-F.y,O.mouseX,O.mouseY)}},g=i=>{i.multiplyScalar(1e4),o.applyForce(t,i)};ke(()=>{d==null||d.remove()});const b=()=>n(0,r=!r);function v(){s.nbBalls=xe(this.value),n(1,s)}function f(){s.rBalls=xe(this.value),n(1,s)}return[r,s,o,m,u,_,g,b,v,f]}let Dt=class extends he{constructor(e){super(),me(this,e,Ot,Pt,de,{})}};function Bt(l){let e,n,r,s,o=l[0][l[0].length-1]+"",t,m,u,c="New ball",y,d,_;return n=new Te({props:{sketch:l[2]}}),{c(){e=w("div"),oe(n.$$.fragment),r=E(),s=w("p"),t=J(o),m=E(),u=w("button"),u.textContent=c,this.h()},l(g){e=$(g,"DIV",{class:!0});var b=T(e);se(n.$$.fragment,b),b.forEach(h),r=j(g),s=$(g,"P",{});var v=T(s);t=K(v,o),v.forEach(h),m=j(g),u=$(g,"BUTTON",{"data-svelte-h":!0}),G(u)!=="svelte-1jwbm46"&&(u.textContent=c),this.h()},h(){L(e,"class","d-flex justify-content-center")},m(g,b){C(g,e,b),re(n,e,null),C(g,r,b),C(g,s,b),p(s,t),C(g,m,b),C(g,u,b),y=!0,d||(_=H(u,"click",l[1]),d=!0)},p(g,[b]){(!y||b&1)&&o!==(o=g[0][g[0].length-1]+"")&&ne(t,o)},i(g){y||(le(n.$$.fragment,g),y=!0)},o(g){ie(n.$$.fragment,g),y=!1},d(g){g&&(h(e),h(r),h(s),h(m),h(u)),ce(n),d=!1,_()}}}function It(l,e,n){console.clear();let r=[];const s=c=>{const y=c.objects[c.objects.length-1],d=y.position.clone().toFixed(2),_=y.velocity.clone().toFixed(2);r.push(`${c.t.toFixed(2)} - pos: ${d} - vel: ${_}`),r.length>50&&r.shift(),n(0,r)},o=new Pe({reporter:s,enableGravity:!0}),t=()=>{for(;o.objects.length;)o.objects.pop();const c=k({geometry:{type:"line",vector:new a(100,0)},position:new a(0,0),fixed:!0});o.addObject(c);for(let y=0;y<1;y++){const d=k({geometry:{type:"sphere",r:5},position:new a(20,50),velocity:new a(Math.random()*5-2.5,Math.random()*20)});o.addObject(d)}};let m;const u=c=>{c.setup=()=>{m=c,c.createCanvas(900,600),c.background(0),c.fill(255),c.stroke(255),t()},c.draw=()=>{c.background(0),o.step();for(const y of o.objects){const d=c.map(y.position.x,0,o.dimensions.x,0,c.width),_=c.map(y.position.y,0,o.dimensions.y,c.height,0);if(y.geometry.type==="sphere"&&(c.strokeWeight(y.geometry.r*2),c.point(d,_)),y.geometry.type==="line"){const g=d+c.map(y.geometry.vector.x,0,o.dimensions.x,0,c.width),b=_+c.map(y.geometry.vector.y,0,o.dimensions.y,0,c.height);c.strokeWeight(2),c.line(d,_,g,b)}}}};return ke(()=>{m==null||m.remove()}),[r,t,u]}class Ft extends he{constructor(e){super(),me(this,e,It,Bt,de,{})}}function Vt(l){let e,n,r,s,o=l[0][l[0].length-1]+"",t,m,u,c="New ball",y,d,_;return n=new Te({props:{sketch:l[2]}}),{c(){e=w("div"),oe(n.$$.fragment),r=E(),s=w("p"),t=J(o),m=E(),u=w("button"),u.textContent=c,this.h()},l(g){e=$(g,"DIV",{class:!0});var b=T(e);se(n.$$.fragment,b),b.forEach(h),r=j(g),s=$(g,"P",{});var v=T(s);t=K(v,o),v.forEach(h),m=j(g),u=$(g,"BUTTON",{"data-svelte-h":!0}),G(u)!=="svelte-1jwbm46"&&(u.textContent=c),this.h()},h(){L(e,"class","d-flex justify-content-center")},m(g,b){C(g,e,b),re(n,e,null),C(g,r,b),C(g,s,b),p(s,t),C(g,m,b),C(g,u,b),y=!0,d||(_=H(u,"click",l[1]),d=!0)},p(g,[b]){(!y||b&1)&&o!==(o=g[0][g[0].length-1]+"")&&ne(t,o)},i(g){y||(le(n.$$.fragment,g),y=!0)},o(g){ie(n.$$.fragment,g),y=!1},d(g){g&&(h(e),h(r),h(s),h(m),h(u)),ce(n),d=!1,_()}}}const qe=6;function Lt(l,e,n){console.clear();let r=[];const s=d=>{const _=d.objects[d.objects.length-1],g=_.position.clone().toFixed(2),b=_.velocity.clone().toFixed(2);r.push(`${d.t.toFixed(2)} - pos: ${g} - vel: ${b}`),r.length>50&&r.shift(),n(0,r)},o=new Pe({reporter:s,enableGravity:!0});let t,m;const u=()=>{for(;o.objects.length;)o.objects.pop();m=k({geometry:{type:"line",vector:new a(40,40)},position:new a(30,30),fixed:!0}),o.addObject(m),t=k({geometry:{type:"sphere",r:10},position:new a(20,50),velocity:new a(2.5,2.5),fixed:!0}),o.addObject(t)};let c;const y=d=>{const _=v=>typeof v=="number"?v*qe:v.clone().multiplyScalar(qe),g=v=>typeof v=="number"?v/qe:v.clone().divideScalar(qe);d.setup=()=>{c=d;const v=_(o.dimensions);d.createCanvas(v.x,v.y),d.background(0),d.fill(255),d.stroke(255),u()};let b;d.draw=()=>{if(d.background(0),o.step(),d.mouseIsPressed){const v=g(new a(d.mouseX,d.height-d.mouseY));if(b||(v.distance(t.position)<2?b="sphere":v.distance(m.position)<2?b="wallstart":v.distance(m.geometry.vector.clone().add(m.position))<2&&(b="wallend")),b==="sphere"&&t.position.copy(v),b==="wallstart"&&m.position.copy(v),b==="wallend"){const f=v.clone().subtract(m.position);m.geometry.vector.copy(f)}}else b=void 0;for(const v of o.objects.sort((f,i)=>f.geometry.type<i.geometry.type?1:-1)){d.stroke(t.data.isColliding?"red":"white");const f=d.map(v.position.x,0,o.dimensions.x,0,d.width),i=d.map(v.position.y,0,o.dimensions.y,d.height,0);if(v.geometry.type==="sphere"){const x=_(v.geometry.r*2);d.strokeWeight(x),d.point(f,i)}if(v.geometry.type==="line"){const x=f+d.map(v.geometry.vector.x,0,o.dimensions.x,0,d.width),S=i-d.map(v.geometry.vector.y,0,o.dimensions.y,0,d.height);d.stroke("blue"),d.strokeWeight(2),d.line(f,i,x,S)}}}};return ke(()=>{c==null||c.remove()}),[r,u,y]}class Mt extends he{constructor(e){super(),me(this,e,Lt,Vt,de,{})}}function Nt(l){let e,n,r;return n=new Te({props:{sketch:l[0]}}),{c(){e=w("div"),oe(n.$$.fragment),this.h()},l(s){e=$(s,"DIV",{class:!0});var o=T(e);se(n.$$.fragment,o),o.forEach(h),this.h()},h(){L(e,"class","d-flex justify-content-center")},m(s,o){C(s,e,o),re(n,e,null),r=!0},p:_e,i(s){r||(le(n.$$.fragment,s),r=!0)},o(s){ie(n.$$.fragment,s),r=!1},d(s){s&&h(e),ce(n)}}}const ze=6;function Wt(l){console.clear();const e=new Pe({reporter:()=>{},enableGravity:!0});let n;const r=()=>{for(;e.objects.length;)e.objects.pop();n=k({geometry:{type:"sphere",r:5},position:new a(20,50),velocity:new a(Math.random()*5-2.5,Math.random()*20)}),e.addObject(n);const u=k({geometry:{type:"line",vector:new a(100,0)},position:new a(0,2),fixed:!0});e.addObject(u);const c=k({geometry:{type:"line",vector:new a(100,0)},position:new a(0,98),fixed:!0});e.addObject(c);const y=k({geometry:{type:"line",vector:new a(0,100)},position:new a(2,0),fixed:!0});e.addObject(y);const d=k({geometry:{type:"line",vector:new a(0,100)},position:new a(98,0),fixed:!0});e.addObject(d);const _=k({geometry:{type:"line",vector:new a(50,50)},position:new a(20,10),fixed:!0});e.addObject(_)},s=u=>typeof u=="number"?u*ze:u.clone().multiplyScalar(ze),o=u=>typeof u=="number"?u/ze:u.clone().divideScalar(ze);let t;const m=u=>{u.setup=()=>{t=u;const y=s(e.dimensions);u.createCanvas(y.x,y.y),u.background(0),u.fill(255),u.stroke(255),r()},u.draw=()=>{if(u.background(0),u.mouseIsPressed){n.fixed=!0;const y=o(new a(u.mouseX,u.height-u.mouseY));n.position.copy(y)}else n.fixed=!1;e.step(),Le(u,e)};let c;u.mousePressed=()=>{c=o(new a(u.mouseX,u.height-u.mouseY))},u.mouseReleased=()=>{const y=o(new a(u.mouseX,u.height-u.mouseY)),d=c.subtract(y);n.position.copy(y),n.velocity.copy(d)}};return ke(()=>{t==null||t.remove()}),[m]}class At extends he{constructor(e){super(),me(this,e,Wt,Nt,de,{})}}function Ut(l){let e,n,r,s,o,t,m,u="Gravity",c,y,d,_="Toggle",g,b,v;return n=new Te({props:{sketch:l[1]}}),{c(){e=w("div"),oe(n.$$.fragment),r=E(),s=w("table"),o=w("tbody"),t=w("tr"),m=w("th"),m.textContent=u,c=E(),y=w("td"),d=w("button"),d.textContent=_,this.h()},l(f){e=$(f,"DIV",{class:!0});var i=T(e);se(n.$$.fragment,i),i.forEach(h),r=j(f),s=$(f,"TABLE",{});var x=T(s);o=$(x,"TBODY",{});var S=T(o);t=$(S,"TR",{});var O=T(t);m=$(O,"TH",{"data-svelte-h":!0}),G(m)!=="svelte-vy75us"&&(m.textContent=u),c=j(O),y=$(O,"TD",{});var F=T(y);d=$(F,"BUTTON",{"data-svelte-h":!0}),G(d)!=="svelte-18lc94l"&&(d.textContent=_),F.forEach(h),O.forEach(h),S.forEach(h),x.forEach(h),this.h()},h(){L(e,"class","d-flex justify-content-center")},m(f,i){C(f,e,i),re(n,e,null),C(f,r,i),C(f,s,i),p(s,o),p(o,t),p(t,m),p(t,c),p(t,y),p(y,d),g=!0,b||(v=H(d,"click",l[2]),b=!0)},p:_e,i(f){g||(le(n.$$.fragment,f),g=!0)},o(f){ie(n.$$.fragment,f),g=!1},d(f){f&&(h(e),h(r),h(s)),ce(n),b=!1,v()}}}const Qe=6;function Yt(l){console.clear();const e=new Pe({reporter:()=>{},enableGravity:!0});let n;const r=()=>{for(;e.objects.length;)e.objects.pop();const c=k({geometry:{type:"line",vector:new a(100,0)},position:new a(0,0),fixed:!0});e.addObject(c);const y=k({geometry:{type:"line",vector:new a(100,0)},position:new a(0,100),fixed:!0});e.addObject(y);const d=k({geometry:{type:"line",vector:new a(0,100)},position:new a(0,0),fixed:!0});e.addObject(d);const _=k({geometry:{type:"line",vector:new a(0,100)},position:new a(100,0),fixed:!0});e.addObject(_);const g=k({geometry:{type:"line",vector:new a(50,50)},position:new a(20,10),fixed:!0});e.addObject(g),n=k({geometry:{type:"sphere",r:2},position:new a(20,50),velocity:new a(Math.random()*5-2.5,Math.random()*20)}),e.addObject(n)},s=c=>typeof c=="number"?c*Qe:c.clone().multiplyScalar(Qe),o=c=>typeof c=="number"?c/Qe:c.clone().divideScalar(Qe);let t;const m=c=>{c.setup=()=>{t=c;const d=s(e.dimensions);c.createCanvas(d.x,d.y),c.background(0),c.fill(255),c.stroke(255),r()},c.draw=()=>{if(c.background(0),Re(c)){n.fixed=!0;const d=o(new a(c.mouseX,c.height-c.mouseY));n.position.copy(d)}else n.fixed=!1;e.step(),Le(c,e)};let y;c.mousePressed=()=>{Ve(c)&&(y=o(new a(c.mouseX,c.height-c.mouseY)))},c.mouseReleased=()=>{if(!Ve(c))return;const d=o(new a(c.mouseX,c.height-c.mouseY)),_=y.subtract(d);n.position.copy(d),n.velocity.copy(_)}};return ke(()=>{t==null||t.remove()}),[e,m,()=>e.toggleGravity()]}class Rt extends he{constructor(e){super(),me(this,e,Yt,Ut,de,{})}}const Xt=()=>{const l=[],e=k({geometry:{type:"line",vector:new a(15,0)},position:new a(0,0),fixed:!0});l.push(e);const n=k({geometry:{type:"line",vector:new a(0,100)},position:new a(0,0),fixed:!0});l.push(n);const r=k({geometry:{type:"line",vector:new a(0,100)},position:new a(15,0),fixed:!0});l.push(r);const s=k({geometry:{type:"line",vector:new a(3,-3)},position:new a(3.5,8),fixed:!0});l.push(s);const o=k({geometry:{type:"line",vector:new a(3,3)},position:new a(3.5,5),fixed:!0});l.push(o);const t=k({geometry:{type:"line",vector:new a(6,0)},position:new a(2,2),fixed:!0});l.push(t);const m=k({geometry:{type:"line",vector:new a(4,0)},position:new a(3,2.5),fixed:!0});l.push(m);const u=k({geometry:{type:"line",vector:new a(2,0)},position:new a(4,3),fixed:!0});l.push(u);const c=k({geometry:{type:"line",vector:new a(.6,0)},position:new a(4.7,3.5),fixed:!0});l.push(c);const y=k({geometry:{type:"line",vector:new a(1,0)},position:new a(10,10.1),fixed:!0});l.push(y);const d=k({geometry:{type:"line",vector:new a(0,-4)},position:new a(11,10),fixed:!0});l.push(d);const _=k({geometry:{type:"line",vector:new a(0,-4)},position:new a(11.5,10),fixed:!0});l.push(_);const g=k({geometry:{type:"line",vector:new a(0,-4)},position:new a(12,10),fixed:!0});l.push(g);const b=k({geometry:{type:"line",vector:new a(1,0)},position:new a(12,10.1),fixed:!0});l.push(b);for(let f=.2;f<.5;f+=.1)for(let i=0;i<10;i++){const x=k({geometry:{type:"line",vector:new a(0,3)},position:new a(9+i*f,1),fixed:!0});l.push(x)}const v=k({geometry:{type:"sphere",r:.1},position:new a(5,10),velocity:new a(0,0)});return l.push(v),{objects:l,sphere:v}};function Ht(l){let e,n,r,s,o,t=l[0]?"Disable":"Enable",m,u,c,y,d=l[1]?"Play":"Pause",_,g,b,v="Reset",f,i,x,S,O,F,M,A,Q,W="Simulation time/Frame duration",N,D,B=l[2].t+"",U,ee,te,R=l[2].frameTime+"",q,pe,I,Y,P="Sphere position",X,Z,ge=l[2].spherePos.x.toFixed(2)+"",we,ae,fe,be=l[2].spherePos.y.toFixed(2)+"",Ce,De,Se,Be,ot="Sphere velocity",Ke,Me,Ne=l[2].sphereVel.x.toFixed(2)+"",Xe,Ze,We,Ae=l[2].sphereVel.y.toFixed(2)+"",He,ye,et,st;return n=new Te({props:{sketch:l[5]}}),i=new vt({props:{onShoot:l[6]}}),S=new nt({props:{world:l[3]}}),{c(){e=w("div"),oe(n.$$.fragment),r=E(),s=w("div"),o=w("button"),m=J(t),u=J(" pause on collision"),c=E(),y=w("button"),_=J(d),g=E(),b=w("button"),b.textContent=v,f=E(),oe(i.$$.fragment),x=E(),oe(S.$$.fragment),O=E(),F=w("table"),M=w("tbody"),A=w("tr"),Q=w("th"),Q.textContent=W,N=E(),D=w("td"),U=J(B),ee=E(),te=w("td"),q=J(R),pe=E(),I=w("tr"),Y=w("th"),Y.textContent=P,X=E(),Z=w("td"),we=J(ge),ae=E(),fe=w("td"),Ce=J(be),De=E(),Se=w("tr"),Be=w("th"),Be.textContent=ot,Ke=E(),Me=w("td"),Xe=J(Ne),Ze=E(),We=w("td"),He=J(Ae),this.h()},l(V){e=$(V,"DIV",{class:!0});var z=T(e);se(n.$$.fragment,z),z.forEach(h),r=j(V),s=$(V,"DIV",{});var Ee=T(s);o=$(Ee,"BUTTON",{});var tt=T(o);m=K(tt,t),u=K(tt," pause on collision"),tt.forEach(h),c=j(Ee),y=$(Ee,"BUTTON",{});var rt=T(y);_=K(rt,d),rt.forEach(h),g=j(Ee),b=$(Ee,"BUTTON",{"data-svelte-h":!0}),G(b)!=="svelte-tlxueg"&&(b.textContent=v),Ee.forEach(h),f=j(V),se(i.$$.fragment,V),x=j(V),se(S.$$.fragment,V),O=j(V),F=$(V,"TABLE",{});var lt=T(F);M=$(lt,"TBODY",{});var Ue=T(M);A=$(Ue,"TR",{});var Ie=T(A);Q=$(Ie,"TH",{"data-svelte-h":!0}),G(Q)!=="svelte-rirgm4"&&(Q.textContent=W),N=j(Ie),D=$(Ie,"TD",{});var it=T(D);U=K(it,B),it.forEach(h),ee=j(Ie),te=$(Ie,"TD",{});var ct=T(te);q=K(ct,R),ct.forEach(h),Ie.forEach(h),pe=j(Ue),I=$(Ue,"TR",{});var Oe=T(I);Y=$(Oe,"TH",{"data-svelte-h":!0}),G(Y)!=="svelte-1y1nif6"&&(Y.textContent=P),X=j(Oe),Z=$(Oe,"TD",{});var at=T(Z);we=K(at,ge),at.forEach(h),ae=j(Oe),fe=$(Oe,"TD",{});var ut=T(fe);Ce=K(ut,be),ut.forEach(h),De=j(Oe),Oe.forEach(h),Se=$(Ue,"TR",{});var Fe=T(Se);Be=$(Fe,"TH",{"data-svelte-h":!0}),G(Be)!=="svelte-1uw1fs2"&&(Be.textContent=ot),Ke=j(Fe),Me=$(Fe,"TD",{});var ft=T(Me);Xe=K(ft,Ne),ft.forEach(h),Ze=j(Fe),We=$(Fe,"TD",{});var dt=T(We);He=K(dt,Ae),dt.forEach(h),Fe.forEach(h),Ue.forEach(h),lt.forEach(h),this.h()},h(){L(e,"class","d-flex justify-content-center")},m(V,z){C(V,e,z),re(n,e,null),C(V,r,z),C(V,s,z),p(s,o),p(o,m),p(o,u),p(s,c),p(s,y),p(y,_),p(s,g),p(s,b),C(V,f,z),re(i,V,z),C(V,x,z),re(S,V,z),C(V,O,z),C(V,F,z),p(F,M),p(M,A),p(A,Q),p(A,N),p(A,D),p(D,U),p(A,ee),p(A,te),p(te,q),p(M,pe),p(M,I),p(I,Y),p(I,X),p(I,Z),p(Z,we),p(I,ae),p(I,fe),p(fe,Ce),p(I,De),p(M,Se),p(Se,Be),p(Se,Ke),p(Se,Me),p(Me,Xe),p(Se,Ze),p(Se,We),p(We,He),ye=!0,et||(st=[H(o,"click",l[7]),H(y,"click",l[8]),H(b,"click",l[4])],et=!0)},p(V,[z]){(!ye||z&1)&&t!==(t=V[0]?"Disable":"Enable")&&ne(m,t),(!ye||z&2)&&d!==(d=V[1]?"Play":"Pause")&&ne(_,d);const Ee={};z&8&&(Ee.world=V[3]),S.$set(Ee),(!ye||z&4)&&B!==(B=V[2].t+"")&&ne(U,B),(!ye||z&4)&&R!==(R=V[2].frameTime+"")&&ne(q,R),(!ye||z&4)&&ge!==(ge=V[2].spherePos.x.toFixed(2)+"")&&ne(we,ge),(!ye||z&4)&&be!==(be=V[2].spherePos.y.toFixed(2)+"")&&ne(Ce,be),(!ye||z&4)&&Ne!==(Ne=V[2].sphereVel.x.toFixed(2)+"")&&ne(Xe,Ne),(!ye||z&4)&&Ae!==(Ae=V[2].sphereVel.y.toFixed(2)+"")&&ne(He,Ae)},i(V){ye||(le(n.$$.fragment,V),le(i.$$.fragment,V),le(S.$$.fragment,V),ye=!0)},o(V){ie(n.$$.fragment,V),ie(i.$$.fragment,V),ie(S.$$.fragment,V),ye=!1},d(V){V&&(h(e),h(r),h(s),h(f),h(x),h(O),h(F)),ce(n),ce(i,V),ce(S,V),et=!1,Ye(st)}}}const Je=60;function Gt(l,e,n){console.clear();let r=!1,s=!1,o={t:"0",frameTime:"0",spherePos:new a(0,0),sphereVel:new a(0,0),ballIsColliding:!1},t,m;const u=()=>{n(3,t=new Pe({dimensions:new a(15,15),reporter:i=>{var x;n(2,o.t=(x=i==null?void 0:i.t)==null?void 0:x.toFixed(1),o),o.spherePos.copy(m.position).unfloat(),o.sphereVel.copy(m.velocity).unfloat(),n(2,o.frameTime=i.frameTime.toFixed(2),o),n(2,o),n(2,o.ballIsColliding=m.data.isColliding,o),r&&m.data.isColliding&&!s&&n(1,s=!0)},enableGravity:!0}));const f=Xt();m=f.sphere;for(const i of f.objects)t.addObject(i)},c=f=>typeof f=="number"?f*Je:f.clone().multiplyScalar(Je),y=f=>typeof f=="number"?f/Je:f.clone().divideScalar(Je);let d;const _=f=>{f.setup=()=>{d=f,u();const S=c(t.dimensions);f.createCanvas(S.x,S.y),f.background(0),f.fill(255),f.stroke(255),u()},f.draw=()=>{f.background(0),Re(f)?m.fixed=!0:m.fixed=!1,s||t.step(),Le(f,t),x(f)};let i;f.mousePressed=()=>{Ve(f)&&(i=y(new a(f.mouseX,f.height-f.mouseY)),m.position.copy(i))},f.mouseReleased=()=>{if(!Ve(f)||!i)return;const S=y(new a(f.mouseX,f.height-f.mouseY)),O=i.subtract(S).multiplyScalar(3);i=void 0,m.velocity.copy(O)};const x=S=>{if(!i)return;S.stroke("blue"),S.strokeWeight(2);const O=c(i);S.line(O.x,S.height-O.y,S.mouseX,S.mouseY)}},g=f=>{f.multiplyScalar(1e4),t.applyForce(m,f)};return ke(()=>{d==null||d.remove()}),[r,s,o,t,u,_,g,()=>n(0,r=!r),()=>n(1,s=!s)]}let qt=class extends he{constructor(e){super(),me(this,e,Gt,Ht,de,{})}};const zt=()=>{const l=[],e=k({geometry:{type:"line",vector:new a(15,0)},position:new a(0,0),fixed:!0});l.push(e);const n=k({geometry:{type:"line",vector:new a(0,100)},position:new a(0,0),fixed:!0});l.push(n);const r=k({geometry:{type:"line",vector:new a(0,100)},position:new a(15,0),fixed:!0});l.push(r);const s=k({geometry:{type:"line",vector:new a(3,-3)},position:new a(3.5,8),fixed:!0});l.push(s);const o=k({geometry:{type:"line",vector:new a(3,3)},position:new a(3.5,5),fixed:!0});l.push(o);const t=k({geometry:{type:"line",vector:new a(6,0)},position:new a(2,2),fixed:!0});l.push(t);const m=k({geometry:{type:"line",vector:new a(4,0)},position:new a(3,2.5),fixed:!0});l.push(m);const u=k({geometry:{type:"line",vector:new a(2,0)},position:new a(4,3),fixed:!0});l.push(u);const c=k({geometry:{type:"line",vector:new a(.6,0)},position:new a(4.7,3.5),fixed:!0});l.push(c);const y=k({geometry:{type:"line",vector:new a(1,0)},position:new a(10,10.1),fixed:!0});l.push(y);const d=k({geometry:{type:"line",vector:new a(0,-4)},position:new a(11,10),fixed:!0});l.push(d);const _=k({geometry:{type:"line",vector:new a(0,-4)},position:new a(11.5,10),fixed:!0});l.push(_);const g=k({geometry:{type:"line",vector:new a(0,-4)},position:new a(12,10),fixed:!0});l.push(g);const b=k({geometry:{type:"line",vector:new a(1,0)},position:new a(12,10.1),fixed:!0});l.push(b);for(let v=.2;v<.5;v+=.1)for(let f=0;f<10;f++){const i=k({geometry:{type:"line",vector:new a(0,3)},position:new a(9+f*v,1),fixed:!0});l.push(i)}return{objects:l}};function Qt(l){let e,n,r,s,o,t=l[0]?"Disable":"Enable",m,u,c,y,d=l[1]?"Play":"Pause",_,g,b,v="Reset",f,i,x,S,O,F,M,A="Simulation time/Frame duration",Q,W,N=l[2].t+"",D,B,U,ee=l[2].frameTime+"",te,R,q,pe;return n=new Te({props:{sketch:l[5]}}),i=new nt({props:{world:l[3]}}),{c(){e=w("div"),oe(n.$$.fragment),r=E(),s=w("div"),o=w("button"),m=J(t),u=J(" pause on collision"),c=E(),y=w("button"),_=J(d),g=E(),b=w("button"),b.textContent=v,f=E(),oe(i.$$.fragment),x=E(),S=w("table"),O=w("tbody"),F=w("tr"),M=w("th"),M.textContent=A,Q=E(),W=w("td"),D=J(N),B=E(),U=w("td"),te=J(ee),this.h()},l(I){e=$(I,"DIV",{class:!0});var Y=T(e);se(n.$$.fragment,Y),Y.forEach(h),r=j(I),s=$(I,"DIV",{});var P=T(s);o=$(P,"BUTTON",{});var X=T(o);m=K(X,t),u=K(X," pause on collision"),X.forEach(h),c=j(P),y=$(P,"BUTTON",{});var Z=T(y);_=K(Z,d),Z.forEach(h),g=j(P),b=$(P,"BUTTON",{"data-svelte-h":!0}),G(b)!=="svelte-tlxueg"&&(b.textContent=v),P.forEach(h),f=j(I),se(i.$$.fragment,I),x=j(I),S=$(I,"TABLE",{});var ge=T(S);O=$(ge,"TBODY",{});var we=T(O);F=$(we,"TR",{});var ae=T(F);M=$(ae,"TH",{"data-svelte-h":!0}),G(M)!=="svelte-rirgm4"&&(M.textContent=A),Q=j(ae),W=$(ae,"TD",{});var fe=T(W);D=K(fe,N),fe.forEach(h),B=j(ae),U=$(ae,"TD",{});var be=T(U);te=K(be,ee),be.forEach(h),ae.forEach(h),we.forEach(h),ge.forEach(h),this.h()},h(){L(e,"class","d-flex justify-content-center")},m(I,Y){C(I,e,Y),re(n,e,null),C(I,r,Y),C(I,s,Y),p(s,o),p(o,m),p(o,u),p(s,c),p(s,y),p(y,_),p(s,g),p(s,b),C(I,f,Y),re(i,I,Y),C(I,x,Y),C(I,S,Y),p(S,O),p(O,F),p(F,M),p(F,Q),p(F,W),p(W,D),p(F,B),p(F,U),p(U,te),R=!0,q||(pe=[H(o,"click",l[6]),H(y,"click",l[7]),H(b,"click",l[4])],q=!0)},p(I,[Y]){(!R||Y&1)&&t!==(t=I[0]?"Disable":"Enable")&&ne(m,t),(!R||Y&2)&&d!==(d=I[1]?"Play":"Pause")&&ne(_,d);const P={};Y&8&&(P.world=I[3]),i.$set(P),(!R||Y&4)&&N!==(N=I[2].t+"")&&ne(D,N),(!R||Y&4)&&ee!==(ee=I[2].frameTime+"")&&ne(te,ee)},i(I){R||(le(n.$$.fragment,I),le(i.$$.fragment,I),R=!0)},o(I){ie(n.$$.fragment,I),ie(i.$$.fragment,I),R=!1},d(I){I&&(h(e),h(r),h(s),h(f),h(x),h(S)),ce(n),ce(i,I),q=!1,Ye(pe)}}}const pt=60;function Jt(l,e,n){console.clear();let r=!1,s=!1,o={t:"0",frameTime:"0"},t;const m=()=>{clearInterval(d),d=setInterval(u,100),n(3,t=new Pe({dimensions:new a(15,15),reporter:f=>{var i;n(2,o.t=(i=f==null?void 0:f.t)==null?void 0:i.toFixed(1),o),n(2,o.frameTime=f.frameTime.toFixed(2),o),n(2,o)},enableGravity:!0}));const v=zt();for(const f of v.objects)t.addObject(f)},u=()=>{console.log("add ball");const v=Math.random()*t.dimensions.x,f=Math.random()*t.dimensions.y,i=-5+Math.random()*10,x=-5+Math.random()*10,S=k({geometry:{type:"sphere",r:.1},position:new a(v,f),velocity:new a(i,x)});t.addObject(S)},c=v=>typeof v=="number"?v*pt:v.clone().multiplyScalar(pt);let y,d;const _=v=>{v.setup=()=>{y=v,m();const f=c(t.dimensions);v.createCanvas(f.x,f.y),v.background(0),v.fill(255),v.stroke(255),m()},v.draw=()=>{v.background(0),s||t.step(),Le(v,t)}};return ke(()=>{y==null||y.remove(),clearInterval(d)}),[r,s,o,t,m,_,()=>n(0,r=!r),()=>n(1,s=!s)]}class Kt extends he{constructor(e){super(),me(this,e,Jt,Qt,de,{})}}function Zt(l){let e,n,r;return n=new Te({props:{sketch:l[0]}}),{c(){e=w("div"),oe(n.$$.fragment),this.h()},l(s){e=$(s,"DIV",{class:!0});var o=T(e);se(n.$$.fragment,o),o.forEach(h),this.h()},h(){L(e,"class","d-flex justify-content-center")},m(s,o){C(s,e,o),re(n,e,null),r=!0},p:_e,i(s){r||(le(n.$$.fragment,s),r=!0)},o(s){ie(n.$$.fragment,s),r=!1},d(s){s&&h(e),ce(n)}}}const je=6;function en(l){console.clear();let e;const n=k({geometry:{type:"sphere",r:10},position:new a(30,50),velocity:new a(15,15)}),r=k({geometry:{type:"line",vector:new a(80,0)},position:new a(10,70)}),s=new bt,o=t=>{const m=new a(100,100),u=ue(m,je);t.setup=()=>{e=t,t.createCanvas(u.x,u.y),t.noFill()};let c;t.draw=()=>{if(t.background(0),!Re(t))c=void 0;else{const i=yt(new a(t.mouseX,t.height-t.mouseY),je);if(c||(i.distance(n.position)<=n.geometry.r?c="sphere":i.distance(n.position.clone().add(n.velocity))<=6?c="spherevelocity":i.distance(r.position)<=6?c="linestart":i.distance(r.geometry.vector.clone().add(r.position))<=6&&(c="lineend")),c==="sphere")n.position.copy(i);else if(c==="spherevelocity"){const x=i.clone().subtract(n.position);n.velocity.copy(x)}else if(c==="linestart")r.position.copy(i);else if(c==="lineend"){const x=i.clone().subtract(r.position);r.geometry.vector.copy(x)}}const{intersection:y,bouncedVelocity:d}=s.apply(r,n);for(let i=0;i<10;i++){const{positionCorrection:x}=s.apply(r,n);x&&(n.position.add(x.multiplyScalar(.5)),r.position.subtract(x.multiplyScalar(.5)))}t.stroke(255),t.noFill();const _=ue(n.position,je);t.circle(_.x,t.height-_.y,2*n.geometry.r*je),t.stroke(255);const g=ue(n.velocity,je);t.line(_.x,t.height-_.y,_.x+g.x,t.height-(_.y+g.y)),t.stroke(255);const{x:b,y:v}=ue(r.position,je),f=ue(r.geometry.vector,je);if(t.line(b,t.height-v,b+f.x,t.height-(v+f.y)),y){t.stroke("#54d7ff"),t.fill("#54d7ff");const i=ue(y,je);t.circle(i.x,t.height-i.y,5)}if(d){t.stroke("green"),t.fill("green");const i=ue(d,je);t.line(_.x,t.height-_.y,_.x+i.x,t.height-(_.y+i.y))}}};return ke(()=>{e==null||e.remove()}),[o]}class tn extends he{constructor(e){super(),me(this,e,en,Zt,de,{})}}function nn(l){let e,n,r;return n=new Te({props:{sketch:l[0]}}),{c(){e=w("div"),oe(n.$$.fragment),this.h()},l(s){e=$(s,"DIV",{class:!0});var o=T(e);se(n.$$.fragment,o),o.forEach(h),this.h()},h(){L(e,"class","d-flex justify-content-center")},m(s,o){C(s,e,o),re(n,e,null),r=!0},p:_e,i(s){r||(le(n.$$.fragment,s),r=!0)},o(s){ie(n.$$.fragment,s),r=!1},d(s){s&&h(e),ce(n)}}}const $e=6;function on(l){console.clear();let e;const n=k({geometry:{type:"sphere",r:10},position:new a(30,50),velocity:new a(15,15)}),r=k({geometry:{type:"sphere",r:10},position:new a(70,50),velocity:new a(0,45)}),s=new wt,o=t=>{const m=new a(100,100),u=ue(m,$e);t.setup=()=>{e=t,t.createCanvas(u.x,u.y),t.noFill()};let c;t.draw=()=>{if(t.background(0),!Re(t))c=void 0;else{const f=yt(new a(t.mouseX,t.height-t.mouseY),$e);if(c||(f.distance(n.position)<=n.geometry.r?c="sphere":f.distance(n.position.clone().add(n.velocity))<=6?c="spherevelocity":f.distance(r.position)<=r.geometry.r?c="sphere2":f.distance(r.position.clone().add(r.velocity))<=6&&(c="sphere2velocity")),c==="sphere")n.position.copy(f);else if(c==="spherevelocity"){const i=f.clone().subtract(n.position);n.velocity.copy(i)}else if(c==="sphere2")r.position.copy(f);else if(c==="sphere2velocity"){const i=f.clone().subtract(r.position);r.velocity.copy(i)}}const{intersection:y,bouncedVelocity:d}=s.apply(n,r);for(let f=0;f<10;f++){const{positionCorrection:i}=s.apply(n,r);i&&(n.position.add(i.multiplyScalar(.5)),r.position.subtract(i.multiplyScalar(.5)))}t.stroke(255),t.noFill();const _=ue(n.position,$e);t.circle(_.x,t.height-_.y,2*n.geometry.r*$e),t.stroke(255);const g=ue(n.velocity,$e);t.line(_.x,t.height-_.y,_.x+g.x,t.height-(_.y+g.y)),t.stroke(255),t.noFill();const b=ue(r.position,$e);t.circle(b.x,t.height-b.y,2*r.geometry.r*$e),t.stroke(255);const v=ue(r.velocity,$e);if(t.line(b.x,t.height-b.y,b.x+v.x,t.height-(b.y+v.y)),y){t.stroke("#54d7ff"),t.fill("#54d7ff");const f=ue(y,$e);t.circle(f.x,t.height-f.y,5)}if(d){t.stroke("green"),t.fill("green");const f=ue(d,$e);t.line(_.x,t.height-_.y,_.x+f.x,t.height-(_.y+f.y))}}};return ke(()=>{e==null||e.remove()}),[o]}class sn extends he{constructor(e){super(),me(this,e,on,nn,de,{})}}function rn(l){let e,n="<span>This page is a list of engine tests. They use the actual engine and allow me to setup different situations and check manually for regressions and bugs.</span> <br/> <span>Use the selection menu to see the different pages</span>",r,s,o,t,m;return t=new gt({props:{tabs:l[0]}}),{c(){e=w("div"),e.innerHTML=n,r=E(),s=w("br"),o=E(),oe(t.$$.fragment)},l(u){e=$(u,"DIV",{"data-svelte-h":!0}),G(e)!=="svelte-11mzr87"&&(e.innerHTML=n),r=j(u),s=$(u,"BR",{}),o=j(u),se(t.$$.fragment,u)},m(u,c){C(u,e,c),C(u,r,c),C(u,s,c),C(u,o,c),re(t,u,c),m=!0},p:_e,i(u){m||(le(t.$$.fragment,u),m=!0)},o(u){ie(t.$$.fragment,u),m=!1},d(u){u&&(h(e),h(r),h(s),h(o)),ce(t,u)}}}function ln(l){return[[{label:"Fireworks",value:kt},{label:"Ball pool",value:Dt},{label:"Sphere Sphere Collider",value:sn},{label:"Line Sphere Collider",value:tn},{label:"Perfs - Multiple balls",value:Kt},{label:"Playground - Engine settings",value:qt},{label:"Dynamics + collisions - 1",value:Rt},{label:"Dynamics + collisions - 2",value:At},{label:"Sphere Line - pull apart",value:Mt},{label:"One ball bounce",value:Ft}]]}class pn extends he{constructor(e){super(),me(this,e,ln,rn,de,{})}}export{pn as component};
