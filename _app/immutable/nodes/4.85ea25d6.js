import{s as ae,f as w,a as S,l as X,g as _,h as k,d as h,c as E,m as H,u as G,j as F,i as T,y as p,L as q,n as Q,M as ke,z as we,e as ut,P as be,Q as Oe,O as He}from"../chunks/scheduler.32ebed32.js";import{S as ue,i as de,b as ne,d as oe,m as se,a as re,t as le,e as ie}from"../chunks/index.c25c2528.js";import{P as Te,c as $,V as c,d as Ge,m as Ze,a as Xe,w as Pe,s as ht,C as pt}from"../chunks/PhysicObject.d0894205.js";import{W as De,L as yt}from"../chunks/World.8d0b4312.js";function vt(i){let e,n,u,s,t=i[0][i[0].length-1]+"",o,m,r,l="New ball",f,a,x;return n=new Te({props:{sketch:i[2]}}),{c(){e=w("div"),ne(n.$$.fragment),u=S(),s=w("p"),o=X(t),m=S(),r=w("button"),r.textContent=l,this.h()},l(y){e=_(y,"DIV",{class:!0});var b=k(e);oe(n.$$.fragment,b),b.forEach(h),u=E(y),s=_(y,"P",{});var v=k(s);o=H(v,t),v.forEach(h),m=E(y),r=_(y,"BUTTON",{"data-svelte-h":!0}),G(r)!=="svelte-1jwbm46"&&(r.textContent=l),this.h()},h(){F(e,"class","d-flex justify-content-center")},m(y,b){T(y,e,b),se(n,e,null),T(y,u,b),T(y,s,b),p(s,o),T(y,m,b),T(y,r,b),f=!0,a||(x=q(r,"click",i[1]),a=!0)},p(y,[b]){(!f||b&1)&&t!==(t=y[0][y[0].length-1]+"")&&Q(o,t)},i(y){f||(re(n.$$.fragment,y),f=!0)},o(y){le(n.$$.fragment,y),f=!1},d(y){y&&(h(e),h(u),h(s),h(m),h(r)),ie(n),a=!1,x()}}}function gt(i,e,n){console.clear();let u=[];const s=l=>{const f=l.objects[l.objects.length-1],a=f.position.clone().toFixed(2),x=f.velocity.clone().toFixed(2);u.push(`${l.t.toFixed(2)} - pos: ${a} - vel: ${x}`),u.length>50&&u.shift(),n(0,u)},t=new De({reporter:s,enableGravity:!0}),o=()=>{for(;t.objects.length;)t.objects.pop();const l=$({geometry:{type:"line",vector:new c(100,0)},position:new c(0,0),fixed:!0});t.addObject(l);for(let f=0;f<1;f++){const a=$({geometry:{type:"sphere",r:5},position:new c(20,50),velocity:new c(Math.random()*5-2.5,Math.random()*20)});t.addObject(a)}};let m;const r=l=>{l.setup=()=>{m=l,l.createCanvas(900,600),l.background(0),l.fill(255),l.stroke(255),o()},l.draw=()=>{l.background(0),t.step();for(const f of t.objects){const a=l.map(f.position.x,0,t.dimensions.x,0,l.width),x=l.map(f.position.y,0,t.dimensions.y,l.height,0);if(f.geometry.type==="sphere"&&(l.strokeWeight(f.geometry.r*2),l.point(a,x)),f.geometry.type==="line"){const y=a+l.map(f.geometry.vector.x,0,t.dimensions.x,0,l.width),b=x+l.map(f.geometry.vector.y,0,t.dimensions.y,0,l.height);l.strokeWeight(2),l.line(a,x,y,b)}}}};return ke(()=>{m==null||m.remove()}),[u,o,r]}class bt extends ue{constructor(e){super(),de(this,e,gt,vt,ae,{})}}function wt(i){let e,n,u,s,t=i[0][i[0].length-1]+"",o,m,r,l="New ball",f,a,x;return n=new Te({props:{sketch:i[2]}}),{c(){e=w("div"),ne(n.$$.fragment),u=S(),s=w("p"),o=X(t),m=S(),r=w("button"),r.textContent=l,this.h()},l(y){e=_(y,"DIV",{class:!0});var b=k(e);oe(n.$$.fragment,b),b.forEach(h),u=E(y),s=_(y,"P",{});var v=k(s);o=H(v,t),v.forEach(h),m=E(y),r=_(y,"BUTTON",{"data-svelte-h":!0}),G(r)!=="svelte-1jwbm46"&&(r.textContent=l),this.h()},h(){F(e,"class","d-flex justify-content-center")},m(y,b){T(y,e,b),se(n,e,null),T(y,u,b),T(y,s,b),p(s,o),T(y,m,b),T(y,r,b),f=!0,a||(x=q(r,"click",i[1]),a=!0)},p(y,[b]){(!f||b&1)&&t!==(t=y[0][y[0].length-1]+"")&&Q(o,t)},i(y){f||(re(n.$$.fragment,y),f=!0)},o(y){le(n.$$.fragment,y),f=!1},d(y){y&&(h(e),h(u),h(s),h(m),h(r)),ie(n),a=!1,x()}}}const Ae=6;function _t(i,e,n){console.clear();let u=[];const s=a=>{const x=a.objects[a.objects.length-1],y=x.position.clone().toFixed(2),b=x.velocity.clone().toFixed(2);u.push(`${a.t.toFixed(2)} - pos: ${y} - vel: ${b}`),u.length>50&&u.shift(),n(0,u)},t=new De({reporter:s,enableGravity:!0});let o,m;const r=()=>{for(;t.objects.length;)t.objects.pop();m=$({geometry:{type:"line",vector:new c(40,40)},position:new c(30,30),fixed:!0}),t.addObject(m),o=$({geometry:{type:"sphere",r:10},position:new c(20,50),velocity:new c(2.5,2.5),fixed:!0}),t.addObject(o)};let l;const f=a=>{const x=v=>typeof v=="number"?v*Ae:v.clone().multiplyScalar(Ae),y=v=>typeof v=="number"?v/Ae:v.clone().divideScalar(Ae);a.setup=()=>{l=a;const v=x(t.dimensions);a.createCanvas(v.x,v.y),a.background(0),a.fill(255),a.stroke(255),r()};let b;a.draw=()=>{if(a.background(0),t.step(),a.mouseIsPressed){const v=y(new c(a.mouseX,a.height-a.mouseY));if(b||(v.distance(o.position)<2?b="sphere":v.distance(m.position)<2?b="wallstart":v.distance(m.geometry.vector.clone().add(m.position))<2&&(b="wallend")),b==="sphere"&&o.position.copy(v),b==="wallstart"&&m.position.copy(v),b==="wallend"){const d=v.clone().subtract(m.position);m.geometry.vector.copy(d)}}else b=void 0;for(const v of t.objects.sort((d,g)=>d.geometry.type<g.geometry.type?1:-1)){a.stroke(o.data.isColliding?"red":"white");const d=a.map(v.position.x,0,t.dimensions.x,0,a.width),g=a.map(v.position.y,0,t.dimensions.y,a.height,0);if(v.geometry.type==="sphere"){const B=x(v.geometry.r*2);a.strokeWeight(B),a.point(d,g)}if(v.geometry.type==="line"){const B=d+a.map(v.geometry.vector.x,0,t.dimensions.x,0,a.width),j=g-a.map(v.geometry.vector.y,0,t.dimensions.y,0,a.height);a.stroke("blue"),a.strokeWeight(2),a.line(d,g,B,j)}}}};return ke(()=>{l==null||l.remove()}),[u,r,f]}class xt extends ue{constructor(e){super(),de(this,e,_t,wt,ae,{})}}function $t(i){let e,n,u;return n=new Te({props:{sketch:i[0]}}),{c(){e=w("div"),ne(n.$$.fragment),this.h()},l(s){e=_(s,"DIV",{class:!0});var t=k(e);oe(n.$$.fragment,t),t.forEach(h),this.h()},h(){F(e,"class","d-flex justify-content-center")},m(s,t){T(s,e,t),se(n,e,null),u=!0},p:we,i(s){u||(re(n.$$.fragment,s),u=!0)},o(s){le(n.$$.fragment,s),u=!1},d(s){s&&h(e),ie(n)}}}const Ue=6;function kt(i){console.clear();const e=new De({reporter:()=>{},enableGravity:!0});let n;const u=()=>{for(;e.objects.length;)e.objects.pop();n=$({geometry:{type:"sphere",r:5},position:new c(20,50),velocity:new c(Math.random()*5-2.5,Math.random()*20)}),e.addObject(n);const r=$({geometry:{type:"line",vector:new c(100,0)},position:new c(0,2),fixed:!0});e.addObject(r);const l=$({geometry:{type:"line",vector:new c(100,0)},position:new c(0,98),fixed:!0});e.addObject(l);const f=$({geometry:{type:"line",vector:new c(0,100)},position:new c(2,0),fixed:!0});e.addObject(f);const a=$({geometry:{type:"line",vector:new c(0,100)},position:new c(98,0),fixed:!0});e.addObject(a);const x=$({geometry:{type:"line",vector:new c(50,50)},position:new c(20,10),fixed:!0});e.addObject(x)},s=r=>typeof r=="number"?r*Ue:r.clone().multiplyScalar(Ue),t=r=>typeof r=="number"?r/Ue:r.clone().divideScalar(Ue);let o;const m=r=>{r.setup=()=>{o=r;const f=s(e.dimensions);r.createCanvas(f.x,f.y),r.background(0),r.fill(255),r.stroke(255),u()},r.draw=()=>{if(r.background(0),r.mouseIsPressed){n.fixed=!0;const f=t(new c(r.mouseX,r.height-r.mouseY));n.position.copy(f)}else n.fixed=!1;e.step(),Ge(r,e)};let l;r.mousePressed=()=>{l=t(new c(r.mouseX,r.height-r.mouseY))},r.mouseReleased=()=>{const f=t(new c(r.mouseX,r.height-r.mouseY)),a=l.subtract(f);n.position.copy(f),n.velocity.copy(a)}};return ke(()=>{o==null||o.remove()}),[m]}class Tt extends ue{constructor(e){super(),de(this,e,kt,$t,ae,{})}}function Ct(i){let e,n,u,s,t,o,m,r="Gravity",l,f,a,x="Toggle",y,b,v;return n=new Te({props:{sketch:i[1]}}),{c(){e=w("div"),ne(n.$$.fragment),u=S(),s=w("table"),t=w("tbody"),o=w("tr"),m=w("th"),m.textContent=r,l=S(),f=w("td"),a=w("button"),a.textContent=x,this.h()},l(d){e=_(d,"DIV",{class:!0});var g=k(e);oe(n.$$.fragment,g),g.forEach(h),u=E(d),s=_(d,"TABLE",{});var B=k(s);t=_(B,"TBODY",{});var j=k(t);o=_(j,"TR",{});var L=k(o);m=_(L,"TH",{"data-svelte-h":!0}),G(m)!=="svelte-vy75us"&&(m.textContent=r),l=E(L),f=_(L,"TD",{});var I=k(f);a=_(I,"BUTTON",{"data-svelte-h":!0}),G(a)!=="svelte-18lc94l"&&(a.textContent=x),I.forEach(h),L.forEach(h),j.forEach(h),B.forEach(h),this.h()},h(){F(e,"class","d-flex justify-content-center")},m(d,g){T(d,e,g),se(n,e,null),T(d,u,g),T(d,s,g),p(s,t),p(t,o),p(o,m),p(o,l),p(o,f),p(f,a),y=!0,b||(v=q(a,"click",i[2]),b=!0)},p:we,i(d){y||(re(n.$$.fragment,d),y=!0)},o(d){le(n.$$.fragment,d),y=!1},d(d){d&&(h(e),h(u),h(s)),ie(n),b=!1,v()}}}const Re=6;function St(i){console.clear();const e=new De({reporter:()=>{},enableGravity:!0});let n;const u=()=>{for(;e.objects.length;)e.objects.pop();const l=$({geometry:{type:"line",vector:new c(100,0)},position:new c(0,0),fixed:!0});e.addObject(l);const f=$({geometry:{type:"line",vector:new c(100,0)},position:new c(0,100),fixed:!0});e.addObject(f);const a=$({geometry:{type:"line",vector:new c(0,100)},position:new c(0,0),fixed:!0});e.addObject(a);const x=$({geometry:{type:"line",vector:new c(0,100)},position:new c(100,0),fixed:!0});e.addObject(x);const y=$({geometry:{type:"line",vector:new c(50,50)},position:new c(20,10),fixed:!0});e.addObject(y),n=$({geometry:{type:"sphere",r:2},position:new c(20,50),velocity:new c(Math.random()*5-2.5,Math.random()*20)}),e.addObject(n)},s=l=>typeof l=="number"?l*Re:l.clone().multiplyScalar(Re),t=l=>typeof l=="number"?l/Re:l.clone().divideScalar(Re);let o;const m=l=>{l.setup=()=>{o=l;const a=s(e.dimensions);l.createCanvas(a.x,a.y),l.background(0),l.fill(255),l.stroke(255),u()},l.draw=()=>{if(l.background(0),Ze(l)){n.fixed=!0;const a=t(new c(l.mouseX,l.height-l.mouseY));n.position.copy(a)}else n.fixed=!1;e.step(),Ge(l,e)};let f;l.mousePressed=()=>{Xe(l)&&(f=t(new c(l.mouseX,l.height-l.mouseY)))},l.mouseReleased=()=>{if(!Xe(l))return;const a=t(new c(l.mouseX,l.height-l.mouseY)),x=f.subtract(a);n.position.copy(a),n.velocity.copy(x)}};return ke(()=>{o==null||o.remove()}),[e,m,()=>e.toggleGravity()]}class Et extends ue{constructor(e){super(),de(this,e,St,Ct,ae,{})}}function dt(i){let e,n,u,s,t="dt",o,m,r,l,f,a,x="drag",y,b,v,d,g,B,j="gravity enabled",L,I,N,V,z;return{c(){e=w("table"),n=w("tbody"),u=w("tr"),s=w("th"),s.textContent=t,o=S(),m=w("td"),r=w("input"),l=S(),f=w("tr"),a=w("th"),a.textContent=x,y=S(),b=w("td"),v=w("input"),d=S(),g=w("tr"),B=w("th"),B.textContent=j,L=S(),I=w("td"),N=w("input"),this.h()},l(W){e=_(W,"TABLE",{});var U=k(e);n=_(U,"TBODY",{});var C=k(n);u=_(C,"TR",{});var D=k(u);s=_(D,"TH",{"data-svelte-h":!0}),G(s)!=="svelte-16dheti"&&(s.textContent=t),o=E(D),m=_(D,"TD",{});var R=k(m);r=_(R,"INPUT",{type:!0,min:!0,max:!0,step:!0}),R.forEach(h),D.forEach(h),l=E(C),f=_(C,"TR",{});var J=k(f);a=_(J,"TH",{"data-svelte-h":!0}),G(a)!=="svelte-2hq5g"&&(a.textContent=x),y=E(J),b=_(J,"TD",{});var K=k(b);v=_(K,"INPUT",{type:!0,min:!0,max:!0,step:!0}),K.forEach(h),J.forEach(h),d=E(C),g=_(C,"TR",{});var Y=k(g);B=_(Y,"TH",{"data-svelte-h":!0}),G(B)!=="svelte-ic0r87"&&(B.textContent=j),L=E(Y),I=_(Y,"TD",{});var te=k(I);N=_(te,"INPUT",{type:!0}),te.forEach(h),Y.forEach(h),C.forEach(h),U.forEach(h),this.h()},h(){F(r,"type","number"),F(r,"min","0"),F(r,"max","0.5"),F(r,"step","0.001"),F(v,"type","number"),F(v,"min","0"),F(v,"max","0.01"),F(v,"step","0.001"),F(N,"type","checkbox")},m(W,U){T(W,e,U),p(e,n),p(n,u),p(u,s),p(u,o),p(u,m),p(m,r),be(r,i[0].dt),p(n,l),p(n,f),p(f,a),p(f,y),p(f,b),p(b,v),be(v,i[0].drag),p(n,d),p(n,g),p(g,B),p(g,L),p(g,I),p(I,N),N.checked=i[0].gravityEnabled,V||(z=[q(r,"input",i[1]),q(v,"input",i[2]),q(N,"change",i[3])],V=!0)},p(W,U){U&1&&Oe(r.value)!==W[0].dt&&be(r,W[0].dt),U&1&&Oe(v.value)!==W[0].drag&&be(v,W[0].drag),U&1&&(N.checked=W[0].gravityEnabled)},d(W){W&&h(e),V=!1,He(z)}}}function jt(i){let e,n="Engine settings",u,s,t=i[0]&&dt(i);return{c(){e=w("p"),e.textContent=n,u=S(),t&&t.c(),s=ut(),this.h()},l(o){e=_(o,"P",{class:!0,"data-svelte-h":!0}),G(e)!=="svelte-gf3gek"&&(e.textContent=n),u=E(o),t&&t.l(o),s=ut(),this.h()},h(){F(e,"class","title svelte-g74uk9")},m(o,m){T(o,e,m),T(o,u,m),t&&t.m(o,m),T(o,s,m)},p(o,[m]){o[0]?t?t.p(o,m):(t=dt(o),t.c(),t.m(s.parentNode,s)):t&&(t.d(1),t=null)},i:we,o:we,d(o){o&&(h(e),h(u),h(s)),t&&t.d(o)}}}function Pt(i,e,n){let{world:u}=e;function s(){u.dt=Oe(this.value),n(0,u)}function t(){u.drag=Oe(this.value),n(0,u)}function o(){u.gravityEnabled=this.checked,n(0,u)}return i.$$set=m=>{"world"in m&&n(0,u=m.world)},[u,s,t,o]}class mt extends ue{constructor(e){super(),de(this,e,Pt,jt,ae,{world:0})}}function Ot(i){let e,n="Shooter",u,s,t,o="Angle",m,r,l,f,a,x,y,b,v="Magnitude",d,g,B,j,L,I,N,V,z="Shoot",W,U;return{c(){e=w("p"),e.textContent=n,u=S(),s=w("span"),t=w("label"),t.textContent=o,m=S(),r=w("input"),l=S(),f=X(i[0]),a=X(" deg"),x=S(),y=w("span"),b=w("label"),b.textContent=v,d=S(),g=w("input"),B=S(),j=X(i[1]),L=S(),I=w("br"),N=S(),V=w("button"),V.textContent=z,this.h()},l(C){e=_(C,"P",{class:!0,"data-svelte-h":!0}),G(e)!=="svelte-198ugk3"&&(e.textContent=n),u=E(C),s=_(C,"SPAN",{});var D=k(s);t=_(D,"LABEL",{for:!0,"data-svelte-h":!0}),G(t)!=="svelte-lab87n"&&(t.textContent=o),m=E(D),r=_(D,"INPUT",{id:!0,type:!0,min:!0,max:!0}),l=E(D),f=H(D,i[0]),a=H(D," deg"),D.forEach(h),x=E(C),y=_(C,"SPAN",{});var R=k(y);b=_(R,"LABEL",{for:!0,"data-svelte-h":!0}),G(b)!=="svelte-1vc5oxa"&&(b.textContent=v),d=E(R),g=_(R,"INPUT",{id:!0,type:!0,min:!0,max:!0,step:!0}),B=E(R),j=H(R,i[1]),R.forEach(h),L=E(C),I=_(C,"BR",{}),N=E(C),V=_(C,"BUTTON",{"data-svelte-h":!0}),G(V)!=="svelte-8jpwxr"&&(V.textContent=z),this.h()},h(){F(e,"class","title svelte-g74uk9"),F(t,"for","angleSlider"),F(r,"id","angleSlider"),F(r,"type","range"),F(r,"min","0"),F(r,"max","360"),F(b,"for","magSlider"),F(g,"id","magSlider"),F(g,"type","range"),F(g,"min","0"),F(g,"max","1"),F(g,"step","0.01")},m(C,D){T(C,e,D),T(C,u,D),T(C,s,D),p(s,t),p(s,m),p(s,r),be(r,i[0]),p(s,l),p(s,f),p(s,a),T(C,x,D),T(C,y,D),p(y,b),p(y,d),p(y,g),be(g,i[1]),p(y,B),p(y,j),T(C,L,D),T(C,I,D),T(C,N,D),T(C,V,D),W||(U=[q(r,"change",i[4]),q(r,"input",i[4]),q(g,"change",i[5]),q(g,"input",i[5]),q(V,"click",i[6])],W=!0)},p(C,[D]){D&1&&be(r,C[0]),D&1&&Q(f,C[0]),D&2&&be(g,C[1]),D&2&&Q(j,C[1])},i:we,o:we,d(C){C&&(h(e),h(u),h(s),h(x),h(y),h(L),h(I),h(N),h(V)),W=!1,He(U)}}}function Dt(i,e,n){let{onShoot:u}=e,s=0,t=.5;const o=()=>{const f=new c(1,0);f.rotateDeg(s),f.multiplyScalar(t),u(f)};function m(){s=Oe(this.value),n(0,s)}function r(){t=Oe(this.value),n(1,t)}const l=()=>o();return i.$$set=f=>{"onShoot"in f&&n(3,u=f.onShoot)},[s,t,o,u,m,r,l]}class Bt extends ue{constructor(e){super(),de(this,e,Dt,Ot,ae,{onShoot:3})}}const It=()=>{const i=[],e=$({geometry:{type:"line",vector:new c(15,0)},position:new c(0,0),fixed:!0});i.push(e);const n=$({geometry:{type:"line",vector:new c(0,100)},position:new c(0,0),fixed:!0});i.push(n);const u=$({geometry:{type:"line",vector:new c(0,100)},position:new c(15,0),fixed:!0});i.push(u);const s=$({geometry:{type:"line",vector:new c(3,-3)},position:new c(3.5,8),fixed:!0});i.push(s);const t=$({geometry:{type:"line",vector:new c(3,3)},position:new c(3.5,5),fixed:!0});i.push(t);const o=$({geometry:{type:"line",vector:new c(6,0)},position:new c(2,2),fixed:!0});i.push(o);const m=$({geometry:{type:"line",vector:new c(4,0)},position:new c(3,2.5),fixed:!0});i.push(m);const r=$({geometry:{type:"line",vector:new c(2,0)},position:new c(4,3),fixed:!0});i.push(r);const l=$({geometry:{type:"line",vector:new c(.6,0)},position:new c(4.7,3.5),fixed:!0});i.push(l);const f=$({geometry:{type:"line",vector:new c(1,0)},position:new c(10,10.1),fixed:!0});i.push(f);const a=$({geometry:{type:"line",vector:new c(0,-4)},position:new c(11,10),fixed:!0});i.push(a);const x=$({geometry:{type:"line",vector:new c(0,-4)},position:new c(11.5,10),fixed:!0});i.push(x);const y=$({geometry:{type:"line",vector:new c(0,-4)},position:new c(12,10),fixed:!0});i.push(y);const b=$({geometry:{type:"line",vector:new c(1,0)},position:new c(12,10.1),fixed:!0});i.push(b);for(let d=.2;d<.5;d+=.1)for(let g=0;g<10;g++){const B=$({geometry:{type:"line",vector:new c(0,3)},position:new c(9+g*d,1),fixed:!0});i.push(B)}const v=$({geometry:{type:"sphere",r:.1},position:new c(5,10),velocity:new c(0,0)});return i.push(v),{objects:i,sphere:v}};function Lt(i){let e,n,u,s,t,o=i[0]?"Disable":"Enable",m,r,l,f,a=i[1]?"Play":"Pause",x,y,b,v="Reset",d,g,B,j,L,I,N,V,z,W="Simulation time/Frame duration",U,C,D=i[2].t+"",R,J,K,Y=i[2].frameTime+"",te,Ce,P,M,Z="Sphere position",_e,he,pe=i[2].spherePos.x.toFixed(2)+"",xe,ce,ye,ve=i[2].spherePos.y.toFixed(2)+"",Ve,qe,fe,Se,et="Sphere velocity",ze,Be,Ie=i[2].sphereVel.x.toFixed(2)+"",We,Qe,Le,Fe=i[2].sphereVel.y.toFixed(2)+"",Me,ee,Je,tt;return n=new Te({props:{sketch:i[5]}}),g=new Bt({props:{onShoot:i[6]}}),j=new mt({props:{world:i[3]}}),{c(){e=w("div"),ne(n.$$.fragment),u=S(),s=w("div"),t=w("button"),m=X(o),r=X(" pause on collision"),l=S(),f=w("button"),x=X(a),y=S(),b=w("button"),b.textContent=v,d=S(),ne(g.$$.fragment),B=S(),ne(j.$$.fragment),L=S(),I=w("table"),N=w("tbody"),V=w("tr"),z=w("th"),z.textContent=W,U=S(),C=w("td"),R=X(D),J=S(),K=w("td"),te=X(Y),Ce=S(),P=w("tr"),M=w("th"),M.textContent=Z,_e=S(),he=w("td"),xe=X(pe),ce=S(),ye=w("td"),Ve=X(ve),qe=S(),fe=w("tr"),Se=w("th"),Se.textContent=et,ze=S(),Be=w("td"),We=X(Ie),Qe=S(),Le=w("td"),Me=X(Fe),this.h()},l(O){e=_(O,"DIV",{class:!0});var A=k(e);oe(n.$$.fragment,A),A.forEach(h),u=E(O),s=_(O,"DIV",{});var me=k(s);t=_(me,"BUTTON",{});var Ke=k(t);m=H(Ke,o),r=H(Ke," pause on collision"),Ke.forEach(h),l=E(me),f=_(me,"BUTTON",{});var nt=k(f);x=H(nt,a),nt.forEach(h),y=E(me),b=_(me,"BUTTON",{"data-svelte-h":!0}),G(b)!=="svelte-tlxueg"&&(b.textContent=v),me.forEach(h),d=E(O),oe(g.$$.fragment,O),B=E(O),oe(j.$$.fragment,O),L=E(O),I=_(O,"TABLE",{});var ot=k(I);N=_(ot,"TBODY",{});var Ne=k(N);V=_(Ne,"TR",{});var Ee=k(V);z=_(Ee,"TH",{"data-svelte-h":!0}),G(z)!=="svelte-rirgm4"&&(z.textContent=W),U=E(Ee),C=_(Ee,"TD",{});var st=k(C);R=H(st,D),st.forEach(h),J=E(Ee),K=_(Ee,"TD",{});var rt=k(K);te=H(rt,Y),rt.forEach(h),Ee.forEach(h),Ce=E(Ne),P=_(Ne,"TR",{});var $e=k(P);M=_($e,"TH",{"data-svelte-h":!0}),G(M)!=="svelte-1y1nif6"&&(M.textContent=Z),_e=E($e),he=_($e,"TD",{});var lt=k(he);xe=H(lt,pe),lt.forEach(h),ce=E($e),ye=_($e,"TD",{});var it=k(ye);Ve=H(it,ve),it.forEach(h),qe=E($e),$e.forEach(h),fe=_(Ne,"TR",{});var je=k(fe);Se=_(je,"TH",{"data-svelte-h":!0}),G(Se)!=="svelte-1uw1fs2"&&(Se.textContent=et),ze=E(je),Be=_(je,"TD",{});var ct=k(Be);We=H(ct,Ie),ct.forEach(h),Qe=E(je),Le=_(je,"TD",{});var at=k(Le);Me=H(at,Fe),at.forEach(h),je.forEach(h),Ne.forEach(h),ot.forEach(h),this.h()},h(){F(e,"class","d-flex justify-content-center")},m(O,A){T(O,e,A),se(n,e,null),T(O,u,A),T(O,s,A),p(s,t),p(t,m),p(t,r),p(s,l),p(s,f),p(f,x),p(s,y),p(s,b),T(O,d,A),se(g,O,A),T(O,B,A),se(j,O,A),T(O,L,A),T(O,I,A),p(I,N),p(N,V),p(V,z),p(V,U),p(V,C),p(C,R),p(V,J),p(V,K),p(K,te),p(N,Ce),p(N,P),p(P,M),p(P,_e),p(P,he),p(he,xe),p(P,ce),p(P,ye),p(ye,Ve),p(P,qe),p(N,fe),p(fe,Se),p(fe,ze),p(fe,Be),p(Be,We),p(fe,Qe),p(fe,Le),p(Le,Me),ee=!0,Je||(tt=[q(t,"click",i[7]),q(f,"click",i[8]),q(b,"click",i[4])],Je=!0)},p(O,[A]){(!ee||A&1)&&o!==(o=O[0]?"Disable":"Enable")&&Q(m,o),(!ee||A&2)&&a!==(a=O[1]?"Play":"Pause")&&Q(x,a);const me={};A&8&&(me.world=O[3]),j.$set(me),(!ee||A&4)&&D!==(D=O[2].t+"")&&Q(R,D),(!ee||A&4)&&Y!==(Y=O[2].frameTime+"")&&Q(te,Y),(!ee||A&4)&&pe!==(pe=O[2].spherePos.x.toFixed(2)+"")&&Q(xe,pe),(!ee||A&4)&&ve!==(ve=O[2].spherePos.y.toFixed(2)+"")&&Q(Ve,ve),(!ee||A&4)&&Ie!==(Ie=O[2].sphereVel.x.toFixed(2)+"")&&Q(We,Ie),(!ee||A&4)&&Fe!==(Fe=O[2].sphereVel.y.toFixed(2)+"")&&Q(Me,Fe)},i(O){ee||(re(n.$$.fragment,O),re(g.$$.fragment,O),re(j.$$.fragment,O),ee=!0)},o(O){le(n.$$.fragment,O),le(g.$$.fragment,O),le(j.$$.fragment,O),ee=!1},d(O){O&&(h(e),h(u),h(s),h(d),h(B),h(L),h(I)),ie(n),ie(g,O),ie(j,O),Je=!1,He(tt)}}}const Ye=60;function Ft(i,e,n){console.clear();let u=!1,s=!1,t={t:"0",frameTime:"0",spherePos:new c(0,0),sphereVel:new c(0,0),ballIsColliding:!1},o,m;const r=()=>{n(3,o=new De({dimensions:new c(15,15),reporter:g=>{var B;n(2,t.t=(B=g==null?void 0:g.t)==null?void 0:B.toFixed(1),t),t.spherePos.copy(m.position).unfloat(),t.sphereVel.copy(m.velocity).unfloat(),n(2,t.frameTime=g.frameTime.toFixed(2),t),n(2,t),n(2,t.ballIsColliding=m.data.isColliding,t),u&&m.data.isColliding&&!s&&n(1,s=!0)},enableGravity:!0}));const d=It();m=d.sphere;for(const g of d.objects)o.addObject(g)},l=d=>typeof d=="number"?d*Ye:d.clone().multiplyScalar(Ye),f=d=>typeof d=="number"?d/Ye:d.clone().divideScalar(Ye);let a;const x=d=>{d.setup=()=>{a=d,r();const j=l(o.dimensions);d.createCanvas(j.x,j.y),d.background(0),d.fill(255),d.stroke(255),r()},d.draw=()=>{d.background(0),Ze(d)?m.fixed=!0:m.fixed=!1,s||o.step(),Ge(d,o),B(d)};let g;d.mousePressed=()=>{Xe(d)&&(g=f(new c(d.mouseX,d.height-d.mouseY)),m.position.copy(g))},d.mouseReleased=()=>{if(!Xe(d)||!g)return;const j=f(new c(d.mouseX,d.height-d.mouseY)),L=g.subtract(j).multiplyScalar(3);g=void 0,m.velocity.copy(L)};const B=j=>{if(!g)return;j.stroke("blue"),j.strokeWeight(2);const L=l(g);j.line(L.x,j.height-L.y,j.mouseX,j.mouseY)}},y=d=>{d.multiplyScalar(1e4),o.applyForce(m,d)};return ke(()=>{a==null||a.remove()}),[u,s,t,o,r,x,y,()=>n(0,u=!u),()=>n(1,s=!s)]}let Nt=class extends ue{constructor(e){super(),de(this,e,Ft,Lt,ae,{})}};const Vt=()=>{const i=[],e=$({geometry:{type:"line",vector:new c(15,0)},position:new c(0,0),fixed:!0});i.push(e);const n=$({geometry:{type:"line",vector:new c(0,100)},position:new c(0,0),fixed:!0});i.push(n);const u=$({geometry:{type:"line",vector:new c(0,100)},position:new c(15,0),fixed:!0});i.push(u);const s=$({geometry:{type:"line",vector:new c(3,-3)},position:new c(3.5,8),fixed:!0});i.push(s);const t=$({geometry:{type:"line",vector:new c(3,3)},position:new c(3.5,5),fixed:!0});i.push(t);const o=$({geometry:{type:"line",vector:new c(6,0)},position:new c(2,2),fixed:!0});i.push(o);const m=$({geometry:{type:"line",vector:new c(4,0)},position:new c(3,2.5),fixed:!0});i.push(m);const r=$({geometry:{type:"line",vector:new c(2,0)},position:new c(4,3),fixed:!0});i.push(r);const l=$({geometry:{type:"line",vector:new c(.6,0)},position:new c(4.7,3.5),fixed:!0});i.push(l);const f=$({geometry:{type:"line",vector:new c(1,0)},position:new c(10,10.1),fixed:!0});i.push(f);const a=$({geometry:{type:"line",vector:new c(0,-4)},position:new c(11,10),fixed:!0});i.push(a);const x=$({geometry:{type:"line",vector:new c(0,-4)},position:new c(11.5,10),fixed:!0});i.push(x);const y=$({geometry:{type:"line",vector:new c(0,-4)},position:new c(12,10),fixed:!0});i.push(y);const b=$({geometry:{type:"line",vector:new c(1,0)},position:new c(12,10.1),fixed:!0});i.push(b);for(let v=.2;v<.5;v+=.1)for(let d=0;d<10;d++){const g=$({geometry:{type:"line",vector:new c(0,3)},position:new c(9+d*v,1),fixed:!0});i.push(g)}return{objects:i}};function Wt(i){let e,n,u,s,t,o=i[0]?"Disable":"Enable",m,r,l,f,a=i[1]?"Play":"Pause",x,y,b,v="Reset",d,g,B,j,L,I,N,V="Simulation time/Frame duration",z,W,U=i[2].t+"",C,D,R,J=i[2].frameTime+"",K,Y,te,Ce;return n=new Te({props:{sketch:i[5]}}),g=new mt({props:{world:i[3]}}),{c(){e=w("div"),ne(n.$$.fragment),u=S(),s=w("div"),t=w("button"),m=X(o),r=X(" pause on collision"),l=S(),f=w("button"),x=X(a),y=S(),b=w("button"),b.textContent=v,d=S(),ne(g.$$.fragment),B=S(),j=w("table"),L=w("tbody"),I=w("tr"),N=w("th"),N.textContent=V,z=S(),W=w("td"),C=X(U),D=S(),R=w("td"),K=X(J),this.h()},l(P){e=_(P,"DIV",{class:!0});var M=k(e);oe(n.$$.fragment,M),M.forEach(h),u=E(P),s=_(P,"DIV",{});var Z=k(s);t=_(Z,"BUTTON",{});var _e=k(t);m=H(_e,o),r=H(_e," pause on collision"),_e.forEach(h),l=E(Z),f=_(Z,"BUTTON",{});var he=k(f);x=H(he,a),he.forEach(h),y=E(Z),b=_(Z,"BUTTON",{"data-svelte-h":!0}),G(b)!=="svelte-tlxueg"&&(b.textContent=v),Z.forEach(h),d=E(P),oe(g.$$.fragment,P),B=E(P),j=_(P,"TABLE",{});var pe=k(j);L=_(pe,"TBODY",{});var xe=k(L);I=_(xe,"TR",{});var ce=k(I);N=_(ce,"TH",{"data-svelte-h":!0}),G(N)!=="svelte-rirgm4"&&(N.textContent=V),z=E(ce),W=_(ce,"TD",{});var ye=k(W);C=H(ye,U),ye.forEach(h),D=E(ce),R=_(ce,"TD",{});var ve=k(R);K=H(ve,J),ve.forEach(h),ce.forEach(h),xe.forEach(h),pe.forEach(h),this.h()},h(){F(e,"class","d-flex justify-content-center")},m(P,M){T(P,e,M),se(n,e,null),T(P,u,M),T(P,s,M),p(s,t),p(t,m),p(t,r),p(s,l),p(s,f),p(f,x),p(s,y),p(s,b),T(P,d,M),se(g,P,M),T(P,B,M),T(P,j,M),p(j,L),p(L,I),p(I,N),p(I,z),p(I,W),p(W,C),p(I,D),p(I,R),p(R,K),Y=!0,te||(Ce=[q(t,"click",i[6]),q(f,"click",i[7]),q(b,"click",i[4])],te=!0)},p(P,[M]){(!Y||M&1)&&o!==(o=P[0]?"Disable":"Enable")&&Q(m,o),(!Y||M&2)&&a!==(a=P[1]?"Play":"Pause")&&Q(x,a);const Z={};M&8&&(Z.world=P[3]),g.$set(Z),(!Y||M&4)&&U!==(U=P[2].t+"")&&Q(C,U),(!Y||M&4)&&J!==(J=P[2].frameTime+"")&&Q(K,J)},i(P){Y||(re(n.$$.fragment,P),re(g.$$.fragment,P),Y=!0)},o(P){le(n.$$.fragment,P),le(g.$$.fragment,P),Y=!1},d(P){P&&(h(e),h(u),h(s),h(d),h(B),h(j)),ie(n),ie(g,P),te=!1,He(Ce)}}}const ft=60;function Mt(i,e,n){console.clear();let u=!1,s=!1,t={t:"0",frameTime:"0"},o;const m=()=>{clearInterval(a),a=setInterval(r,100),n(3,o=new De({dimensions:new c(15,15),reporter:d=>{var g;n(2,t.t=(g=d==null?void 0:d.t)==null?void 0:g.toFixed(1),t),n(2,t.frameTime=d.frameTime.toFixed(2),t),n(2,t)},enableGravity:!0}));const v=Vt();for(const d of v.objects)o.addObject(d)},r=()=>{console.log("add ball");const v=Math.random()*o.dimensions.x,d=Math.random()*o.dimensions.y,g=-5+Math.random()*10,B=-5+Math.random()*10,j=$({geometry:{type:"sphere",r:.1},position:new c(v,d),velocity:new c(g,B)});o.addObject(j)},l=v=>typeof v=="number"?v*ft:v.clone().multiplyScalar(ft);let f,a;const x=v=>{v.setup=()=>{f=v,m();const d=l(o.dimensions);v.createCanvas(d.x,d.y),v.background(0),v.fill(255),v.stroke(255),m()},v.draw=()=>{v.background(0),s||o.step(),Ge(v,o)}};return ke(()=>{f==null||f.remove(),clearInterval(a)}),[u,s,t,o,m,x,()=>n(0,u=!u),()=>n(1,s=!s)]}class At extends ue{constructor(e){super(),de(this,e,Mt,Wt,ae,{})}}function Ut(i){let e,n,u;return n=new Te({props:{sketch:i[0]}}),{c(){e=w("div"),ne(n.$$.fragment),this.h()},l(s){e=_(s,"DIV",{class:!0});var t=k(e);oe(n.$$.fragment,t),t.forEach(h),this.h()},h(){F(e,"class","d-flex justify-content-center")},m(s,t){T(s,e,t),se(n,e,null),u=!0},p:we,i(s){u||(re(n.$$.fragment,s),u=!0)},o(s){le(n.$$.fragment,s),u=!1},d(s){s&&h(e),ie(n)}}}const ge=6;function Rt(i){console.clear();let e;const n=$({geometry:{type:"sphere",r:10},position:new c(30,50),velocity:new c(15,15)}),u=$({geometry:{type:"line",vector:new c(10,0)},position:new c(60,50)}),s=new yt,t=o=>{const m=new c(100,100),r=Pe(m,ge);o.setup=()=>{e=o,o.createCanvas(r.x,r.y),o.noFill()};let l;o.draw=()=>{if(o.background(0),!Ze(o))l=void 0;else{const d=ht(new c(o.mouseX,o.height-o.mouseY),ge);if(l||(d.distance(n.position)<=n.geometry.r?l="sphere":d.distance(n.position.clone().add(n.velocity))<=6?l="spherevelocity":d.distance(u.position)<=6?l="linestart":d.distance(u.geometry.vector.clone().add(u.position))<=6&&(l="lineend")),l==="sphere")n.position.copy(d);else if(l==="spherevelocity"){const g=d.clone().subtract(n.position);n.velocity.copy(g)}else if(l==="linestart")u.position.copy(d);else if(l==="lineend"){const g=d.clone().subtract(u.position);u.geometry.vector.copy(g)}}const{intersection:f}=s.apply(u,n);o.stroke(255),o.noFill();const a=Pe(n.position,ge);o.circle(a.x,o.height-a.y,2*n.geometry.r*ge),o.stroke(255);const x=Pe(n.velocity,ge);o.line(a.x,o.height-a.y,a.x+x.x,o.height-(a.y+x.y)),o.stroke(255);const{x:y,y:b}=Pe(u.position,ge),v=Pe(u.geometry.vector,ge);if(o.line(y,o.height-b,y+v.x,o.height-(b+v.y)),f){o.stroke("blue"),o.fill("blue");const d=Pe(f,ge);o.circle(d.x,o.height-d.y,5)}}};return ke(()=>{e==null||e.remove()}),[t]}class Yt extends ue{constructor(e){super(),de(this,e,Rt,Ut,ae,{})}}function Xt(i){let e,n="<span>This page is a list of engine tests. They use the actual engine and allow me to setup different situations and check manually for regressions and bugs.</span> <br/> <span>Use the selection menu to see the different pages</span>",u,s,t,o,m;return o=new pt({props:{tabs:i[0]}}),{c(){e=w("div"),e.innerHTML=n,u=S(),s=w("br"),t=S(),ne(o.$$.fragment)},l(r){e=_(r,"DIV",{"data-svelte-h":!0}),G(e)!=="svelte-11mzr87"&&(e.innerHTML=n),u=E(r),s=_(r,"BR",{}),t=E(r),oe(o.$$.fragment,r)},m(r,l){T(r,e,l),T(r,u,l),T(r,s,l),T(r,t,l),se(o,r,l),m=!0},p:we,i(r){m||(re(o.$$.fragment,r),m=!0)},o(r){le(o.$$.fragment,r),m=!1},d(r){r&&(h(e),h(u),h(s),h(t)),ie(o,r)}}}function Ht(i){return[[{label:"Line Sphere Collider",value:Yt},{label:"Perfs - Multiple balls",value:At},{label:"Playground - Engine settings",value:Nt},{label:"Dynamics + collisions - 1",value:Et},{label:"Dynamics + collisions - 2",value:Tt},{label:"Sphere Line - pull apart",value:xt},{label:"One ball bounce",value:bt}]]}class Kt extends ue{constructor(e){super(),de(this,e,Ht,Xt,ae,{})}}export{Kt as component};
